{
	"metadata": {
		"type": "App"
	},
	"project": {
		"shadows": true,
		"editable": true,
		"vr": false
	},
	"camera": {
		"metadata": {
			"version": 4.4,
			"type": "Object",
			"generator": "Object3D.toJSON"
		},
		"object": {
			"uuid": "FB43EEAE-C958-43DD-8B88-A9F4707D10BB",
			"type": "PerspectiveCamera",
			"name": "Camera",
			"matrix": [-0.6695575714111328,3.7696690213806505e-9,-0.7427600026130676,0,-0.4106440246105194,0.8332726359367371,0.3701731860637665,0,0.6189215779304504,0.5528622269630432,-0.5579240322113037,0,49.95539474487305,42.75239944458008,-45.71335983276367,1],
			"fov": 50,
			"zoom": 1,
			"near": 0.1,
			"far": 10000,
			"focus": 10,
			"aspect": 1.8528735632183908,
			"filmGauge": 35,
			"filmOffset": 0
		}
	},
	"scene": {
		"metadata": {
			"version": 4.4,
			"type": "Object",
			"generator": "Object3D.toJSON"
		},
		"object": {
			"uuid": "BCC3A53B-07C6-4FC3-B308-8F4A3E94469D",
			"type": "Scene",
			"name": "Scene",
			"matrix": [1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1],
			"children": [
				{
					"uuid": "E49F27D7-529D-4C7A-9F53-D3859D6F30CE",
					"type": "Group",
					"name": "scripts",
					"visible": false,
					"matrix": [1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]
				},
				{
					"uuid": "B22F5FEF-F45E-4C2E-B36B-AEF0F249EFC7",
					"type": "Group",
					"name": "helpers",
					"visible": false,
					"matrix": [1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]
				},
				{
					"uuid": "817A9E70-F25D-467D-A1B9-F6960AE9B2CF",
					"type": "Group",
					"name": "physics",
					"visible": false,
					"matrix": [1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]
				},
				{
					"uuid": "AA807597-475F-44C0-9BCF-F909388F0C98",
					"type": "Group",
					"name": "animations",
					"visible": false,
					"matrix": [1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]
				},
				{
					"uuid": "EAB32261-6842-401B-A01B-BDD9F02445C6",
					"type": "Group",
					"name": "engine",
					"visible": false,
					"matrix": [1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]
				}]
		}
	},
	"scripts": {
		"E49F27D7-529D-4C7A-9F53-D3859D6F30CE": [
			{
				"name": "jquery.min.js",
				"source": "/*! jQuery v2.1.3 | (c) 2005, 2014 jQuery Foundation, Inc. | jquery.org/license */\n!function(a,b){\"object\"==typeof module&&\"object\"==typeof module.exports?module.exports=a.document?b(a,!0):function(a){if(!a.document)throw new Error(\"jQuery requires a window with a document\");return b(a)}:b(a)}(\"undefined\"!=typeof window?window:this,function(a,b){var c=[],d=c.slice,e=c.concat,f=c.push,g=c.indexOf,h={},i=h.toString,j=h.hasOwnProperty,k={},l=a.document,m=\"2.1.3\",n=function(a,b){return new n.fn.init(a,b)},o=/^[\\s\\uFEFF\\xA0]+|[\\s\\uFEFF\\xA0]+$/g,p=/^-ms-/,q=/-([\\da-z])/gi,r=function(a,b){return b.toUpperCase()};n.fn=n.prototype={jquery:m,constructor:n,selector:\"\",length:0,toArray:function(){return d.call(this)},get:function(a){return null!=a?0>a?this[a+this.length]:this[a]:d.call(this)},pushStack:function(a){var b=n.merge(this.constructor(),a);return b.prevObject=this,b.context=this.context,b},each:function(a,b){return n.each(this,a,b)},map:function(a){return this.pushStack(n.map(this,function(b,c){return a.call(b,c,b)}))},slice:function(){return this.pushStack(d.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(a){var b=this.length,c=+a+(0>a?b:0);return this.pushStack(c>=0&&b>c?[this[c]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:f,sort:c.sort,splice:c.splice},n.extend=n.fn.extend=function(){var a,b,c,d,e,f,g=arguments[0]||{},h=1,i=arguments.length,j=!1;for(\"boolean\"==typeof g&&(j=g,g=arguments[h]||{},h++),\"object\"==typeof g||n.isFunction(g)||(g={}),h===i&&(g=this,h--);i>h;h++)if(null!=(a=arguments[h]))for(b in a)c=g[b],d=a[b],g!==d&&(j&&d&&(n.isPlainObject(d)||(e=n.isArray(d)))?(e?(e=!1,f=c&&n.isArray(c)?c:[]):f=c&&n.isPlainObject(c)?c:{},g[b]=n.extend(j,f,d)):void 0!==d&&(g[b]=d));return g},n.extend({expando:\"jQuery\"+(m+Math.random()).replace(/\\D/g,\"\"),isReady:!0,error:function(a){throw new Error(a)},noop:function(){},isFunction:function(a){return\"function\"===n.type(a)},isArray:Array.isArray,isWindow:function(a){return null!=a&&a===a.window},isNumeric:function(a){return!n.isArray(a)&&a-parseFloat(a)+1>=0},isPlainObject:function(a){return\"object\"!==n.type(a)||a.nodeType||n.isWindow(a)?!1:a.constructor&&!j.call(a.constructor.prototype,\"isPrototypeOf\")?!1:!0},isEmptyObject:function(a){var b;for(b in a)return!1;return!0},type:function(a){return null==a?a+\"\":\"object\"==typeof a||\"function\"==typeof a?h[i.call(a)]||\"object\":typeof a},globalEval:function(a){var b,c=eval;a=n.trim(a),a&&(1===a.indexOf(\"use strict\")?(b=l.createElement(\"script\"),b.text=a,l.head.appendChild(b).parentNode.removeChild(b)):c(a))},camelCase:function(a){return a.replace(p,\"ms-\").replace(q,r)},nodeName:function(a,b){return a.nodeName&&a.nodeName.toLowerCase()===b.toLowerCase()},each:function(a,b,c){var d,e=0,f=a.length,g=s(a);if(c){if(g){for(;f>e;e++)if(d=b.apply(a[e],c),d===!1)break}else for(e in a)if(d=b.apply(a[e],c),d===!1)break}else if(g){for(;f>e;e++)if(d=b.call(a[e],e,a[e]),d===!1)break}else for(e in a)if(d=b.call(a[e],e,a[e]),d===!1)break;return a},trim:function(a){return null==a?\"\":(a+\"\").replace(o,\"\")},makeArray:function(a,b){var c=b||[];return null!=a&&(s(Object(a))?n.merge(c,\"string\"==typeof a?[a]:a):f.call(c,a)),c},inArray:function(a,b,c){return null==b?-1:g.call(b,a,c)},merge:function(a,b){for(var c=+b.length,d=0,e=a.length;c>d;d++)a[e++]=b[d];return a.length=e,a},grep:function(a,b,c){for(var d,e=[],f=0,g=a.length,h=!c;g>f;f++)d=!b(a[f],f),d!==h&&e.push(a[f]);return e},map:function(a,b,c){var d,f=0,g=a.length,h=s(a),i=[];if(h)for(;g>f;f++)d=b(a[f],f,c),null!=d&&i.push(d);else for(f in a)d=b(a[f],f,c),null!=d&&i.push(d);return e.apply([],i)},guid:1,proxy:function(a,b){var c,e,f;return\"string\"==typeof b&&(c=a[b],b=a,a=c),n.isFunction(a)?(e=d.call(arguments,2),f=function(){return a.apply(b||this,e.concat(d.call(arguments)))},f.guid=a.guid=a.guid||n.guid++,f):void 0},now:Date.now,support:k}),n.each(\"Boolean Number String Function Array Date RegExp Object Error\".split(\" \"),function(a,b){h[\"[object \"+b+\"]\"]=b.toLowerCase()});function s(a){var b=a.length,c=n.type(a);return\"function\"===c||n.isWindow(a)?!1:1===a.nodeType&&b?!0:\"array\"===c||0===b||\"number\"==typeof b&&b>0&&b-1 in a}var t=function(a){var b,c,d,e,f,g,h,i,j,k,l,m,n,o,p,q,r,s,t,u=\"sizzle\"+1*new Date,v=a.document,w=0,x=0,y=hb(),z=hb(),A=hb(),B=function(a,b){return a===b&&(l=!0),0},C=1<<31,D={}.hasOwnProperty,E=[],F=E.pop,G=E.push,H=E.push,I=E.slice,J=function(a,b){for(var c=0,d=a.length;d>c;c++)if(a[c]===b)return c;return-1},K=\"checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped\",L=\"[\\\\x20\\\\t\\\\r\\\\n\\\\f]\",M=\"(?:\\\\\\\\.|[\\\\w-]|[^\\\\x00-\\\\xa0])+\",N=M.replace(\"w\",\"w#\"),O=\"\\\\[\"+L+\"*(\"+M+\")(?:\"+L+\"*([*^$|!~]?=)\"+L+\"*(?:'((?:\\\\\\\\.|[^\\\\\\\\'])*)'|\\\"((?:\\\\\\\\.|[^\\\\\\\\\\\"])*)\\\"|(\"+N+\"))|)\"+L+\"*\\\\]\",P=\":(\"+M+\")(?:\\\\((('((?:\\\\\\\\.|[^\\\\\\\\'])*)'|\\\"((?:\\\\\\\\.|[^\\\\\\\\\\\"])*)\\\")|((?:\\\\\\\\.|[^\\\\\\\\()[\\\\]]|\"+O+\")*)|.*)\\\\)|)\",Q=new RegExp(L+\"+\",\"g\"),R=new RegExp(\"^\"+L+\"+|((?:^|[^\\\\\\\\])(?:\\\\\\\\.)*)\"+L+\"+$\",\"g\"),S=new RegExp(\"^\"+L+\"*,\"+L+\"*\"),T=new RegExp(\"^\"+L+\"*([>+~]|\"+L+\")\"+L+\"*\"),U=new RegExp(\"=\"+L+\"*([^\\\\]'\\\"]*?)\"+L+\"*\\\\]\",\"g\"),V=new RegExp(P),W=new RegExp(\"^\"+N+\"$\"),X={ID:new RegExp(\"^#(\"+M+\")\"),CLASS:new RegExp(\"^\\\\.(\"+M+\")\"),TAG:new RegExp(\"^(\"+M.replace(\"w\",\"w*\")+\")\"),ATTR:new RegExp(\"^\"+O),PSEUDO:new RegExp(\"^\"+P),CHILD:new RegExp(\"^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\\\(\"+L+\"*(even|odd|(([+-]|)(\\\\d*)n|)\"+L+\"*(?:([+-]|)\"+L+\"*(\\\\d+)|))\"+L+\"*\\\\)|)\",\"i\"),bool:new RegExp(\"^(?:\"+K+\")$\",\"i\"),needsContext:new RegExp(\"^\"+L+\"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\\\(\"+L+\"*((?:-\\\\d)?\\\\d*)\"+L+\"*\\\\)|)(?=[^-]|$)\",\"i\")},Y=/^(?:input|select|textarea|button)$/i,Z=/^h\\d$/i,$=/^[^{]+\\{\\s*\\[native \\w/,_=/^(?:#([\\w-]+)|(\\w+)|\\.([\\w-]+))$/,ab=/[+~]/,bb=/'|\\\\/g,cb=new RegExp(\"\\\\\\\\([\\\\da-f]{1,6}\"+L+\"?|(\"+L+\")|.)\",\"ig\"),db=function(a,b,c){var d=\"0x\"+b-65536;return d!==d||c?b:0>d?String.fromCharCode(d+65536):String.fromCharCode(d>>10|55296,1023&d|56320)},eb=function(){m()};try{H.apply(E=I.call(v.childNodes),v.childNodes),E[v.childNodes.length].nodeType}catch(fb){H={apply:E.length?function(a,b){G.apply(a,I.call(b))}:function(a,b){var c=a.length,d=0;while(a[c++]=b[d++]);a.length=c-1}}}function gb(a,b,d,e){var f,h,j,k,l,o,r,s,w,x;if((b?b.ownerDocument||b:v)!==n&&m(b),b=b||n,d=d||[],k=b.nodeType,\"string\"!=typeof a||!a||1!==k&&9!==k&&11!==k)return d;if(!e&&p){if(11!==k&&(f=_.exec(a)))if(j=f[1]){if(9===k){if(h=b.getElementById(j),!h||!h.parentNode)return d;if(h.id===j)return d.push(h),d}else if(b.ownerDocument&&(h=b.ownerDocument.getElementById(j))&&t(b,h)&&h.id===j)return d.push(h),d}else{if(f[2])return H.apply(d,b.getElementsByTagName(a)),d;if((j=f[3])&&c.getElementsByClassName)return H.apply(d,b.getElementsByClassName(j)),d}if(c.qsa&&(!q||!q.test(a))){if(s=r=u,w=b,x=1!==k&&a,1===k&&\"object\"!==b.nodeName.toLowerCase()){o=g(a),(r=b.getAttribute(\"id\"))?s=r.replace(bb,\"\\\\$&\"):b.setAttribute(\"id\",s),s=\"[id='\"+s+\"'] \",l=o.length;while(l--)o[l]=s+rb(o[l]);w=ab.test(a)&&pb(b.parentNode)||b,x=o.join(\",\")}if(x)try{return H.apply(d,w.querySelectorAll(x)),d}catch(y){}finally{r||b.removeAttribute(\"id\")}}}return i(a.replace(R,\"$1\"),b,d,e)}function hb(){var a=[];function b(c,e){return a.push(c+\" \")>d.cacheLength&&delete b[a.shift()],b[c+\" \"]=e}return b}function ib(a){return a[u]=!0,a}function jb(a){var b=n.createElement(\"div\");try{return!!a(b)}catch(c){return!1}finally{b.parentNode&&b.parentNode.removeChild(b),b=null}}function kb(a,b){var c=a.split(\"|\"),e=a.length;while(e--)d.attrHandle[c[e]]=b}function lb(a,b){var c=b&&a,d=c&&1===a.nodeType&&1===b.nodeType&&(~b.sourceIndex||C)-(~a.sourceIndex||C);if(d)return d;if(c)while(c=c.nextSibling)if(c===b)return-1;return a?1:-1}function mb(a){return function(b){var c=b.nodeName.toLowerCase();return\"input\"===c&&b.type===a}}function nb(a){return function(b){var c=b.nodeName.toLowerCase();return(\"input\"===c||\"button\"===c)&&b.type===a}}function ob(a){return ib(function(b){return b=+b,ib(function(c,d){var e,f=a([],c.length,b),g=f.length;while(g--)c[e=f[g]]&&(c[e]=!(d[e]=c[e]))})})}function pb(a){return a&&\"undefined\"!=typeof a.getElementsByTagName&&a}c=gb.support={},f=gb.isXML=function(a){var b=a&&(a.ownerDocument||a).documentElement;return b?\"HTML\"!==b.nodeName:!1},m=gb.setDocument=function(a){var b,e,g=a?a.ownerDocument||a:v;return g!==n&&9===g.nodeType&&g.documentElement?(n=g,o=g.documentElement,e=g.defaultView,e&&e!==e.top&&(e.addEventListener?e.addEventListener(\"unload\",eb,!1):e.attachEvent&&e.attachEvent(\"onunload\",eb)),p=!f(g),c.attributes=jb(function(a){return a.className=\"i\",!a.getAttribute(\"className\")}),c.getElementsByTagName=jb(function(a){return a.appendChild(g.createComment(\"\")),!a.getElementsByTagName(\"*\").length}),c.getElementsByClassName=$.test(g.getElementsByClassName),c.getById=jb(function(a){return o.appendChild(a).id=u,!g.getElementsByName||!g.getElementsByName(u).length}),c.getById?(d.find.ID=function(a,b){if(\"undefined\"!=typeof b.getElementById&&p){var c=b.getElementById(a);return c&&c.parentNode?[c]:[]}},d.filter.ID=function(a){var b=a.replace(cb,db);return function(a){return a.getAttribute(\"id\")===b}}):(delete d.find.ID,d.filter.ID=function(a){var b=a.replace(cb,db);return function(a){var c=\"undefined\"!=typeof a.getAttributeNode&&a.getAttributeNode(\"id\");return c&&c.value===b}}),d.find.TAG=c.getElementsByTagName?function(a,b){return\"undefined\"!=typeof b.getElementsByTagName?b.getElementsByTagName(a):c.qsa?b.querySelectorAll(a):void 0}:function(a,b){var c,d=[],e=0,f=b.getElementsByTagName(a);if(\"*\"===a){while(c=f[e++])1===c.nodeType&&d.push(c);return d}return f},d.find.CLASS=c.getElementsByClassName&&function(a,b){return p?b.getElementsByClassName(a):void 0},r=[],q=[],(c.qsa=$.test(g.querySelectorAll))&&(jb(function(a){o.appendChild(a).innerHTML=\"<a id='\"+u+\"'></a><select id='\"+u+\"-\\f]' msallowcapture=''><option selected=''></option></select>\",a.querySelectorAll(\"[msallowcapture^='']\").length&&q.push(\"[*^$]=\"+L+\"*(?:''|\\\"\\\")\"),a.querySelectorAll(\"[selected]\").length||q.push(\"\\\\[\"+L+\"*(?:value|\"+K+\")\"),a.querySelectorAll(\"[id~=\"+u+\"-]\").length||q.push(\"~=\"),a.querySelectorAll(\":checked\").length||q.push(\":checked\"),a.querySelectorAll(\"a#\"+u+\"+*\").length||q.push(\".#.+[+~]\")}),jb(function(a){var b=g.createElement(\"input\");b.setAttribute(\"type\",\"hidden\"),a.appendChild(b).setAttribute(\"name\",\"D\"),a.querySelectorAll(\"[name=d]\").length&&q.push(\"name\"+L+\"*[*^$|!~]?=\"),a.querySelectorAll(\":enabled\").length||q.push(\":enabled\",\":disabled\"),a.querySelectorAll(\"*,:x\"),q.push(\",.*:\")})),(c.matchesSelector=$.test(s=o.matches||o.webkitMatchesSelector||o.mozMatchesSelector||o.oMatchesSelector||o.msMatchesSelector))&&jb(function(a){c.disconnectedMatch=s.call(a,\"div\"),s.call(a,\"[s!='']:x\"),r.push(\"!=\",P)}),q=q.length&&new RegExp(q.join(\"|\")),r=r.length&&new RegExp(r.join(\"|\")),b=$.test(o.compareDocumentPosition),t=b||$.test(o.contains)?function(a,b){var c=9===a.nodeType?a.documentElement:a,d=b&&b.parentNode;return a===d||!(!d||1!==d.nodeType||!(c.contains?c.contains(d):a.compareDocumentPosition&&16&a.compareDocumentPosition(d)))}:function(a,b){if(b)while(b=b.parentNode)if(b===a)return!0;return!1},B=b?function(a,b){if(a===b)return l=!0,0;var d=!a.compareDocumentPosition-!b.compareDocumentPosition;return d?d:(d=(a.ownerDocument||a)===(b.ownerDocument||b)?a.compareDocumentPosition(b):1,1&d||!c.sortDetached&&b.compareDocumentPosition(a)===d?a===g||a.ownerDocument===v&&t(v,a)?-1:b===g||b.ownerDocument===v&&t(v,b)?1:k?J(k,a)-J(k,b):0:4&d?-1:1)}:function(a,b){if(a===b)return l=!0,0;var c,d=0,e=a.parentNode,f=b.parentNode,h=[a],i=[b];if(!e||!f)return a===g?-1:b===g?1:e?-1:f?1:k?J(k,a)-J(k,b):0;if(e===f)return lb(a,b);c=a;while(c=c.parentNode)h.unshift(c);c=b;while(c=c.parentNode)i.unshift(c);while(h[d]===i[d])d++;return d?lb(h[d],i[d]):h[d]===v?-1:i[d]===v?1:0},g):n},gb.matches=function(a,b){return gb(a,null,null,b)},gb.matchesSelector=function(a,b){if((a.ownerDocument||a)!==n&&m(a),b=b.replace(U,\"='$1']\"),!(!c.matchesSelector||!p||r&&r.test(b)||q&&q.test(b)))try{var d=s.call(a,b);if(d||c.disconnectedMatch||a.document&&11!==a.document.nodeType)return d}catch(e){}return gb(b,n,null,[a]).length>0},gb.contains=function(a,b){return(a.ownerDocument||a)!==n&&m(a),t(a,b)},gb.attr=function(a,b){(a.ownerDocument||a)!==n&&m(a);var e=d.attrHandle[b.toLowerCase()],f=e&&D.call(d.attrHandle,b.toLowerCase())?e(a,b,!p):void 0;return void 0!==f?f:c.attributes||!p?a.getAttribute(b):(f=a.getAttributeNode(b))&&f.specified?f.value:null},gb.error=function(a){throw new Error(\"Syntax error, unrecognized expression: \"+a)},gb.uniqueSort=function(a){var b,d=[],e=0,f=0;if(l=!c.detectDuplicates,k=!c.sortStable&&a.slice(0),a.sort(B),l){while(b=a[f++])b===a[f]&&(e=d.push(f));while(e--)a.splice(d[e],1)}return k=null,a},e=gb.getText=function(a){var b,c=\"\",d=0,f=a.nodeType;if(f){if(1===f||9===f||11===f){if(\"string\"==typeof a.textContent)return a.textContent;for(a=a.firstChild;a;a=a.nextSibling)c+=e(a)}else if(3===f||4===f)return a.nodeValue}else while(b=a[d++])c+=e(b);return c},d=gb.selectors={cacheLength:50,createPseudo:ib,match:X,attrHandle:{},find:{},relative:{\">\":{dir:\"parentNode\",first:!0},\" \":{dir:\"parentNode\"},\"+\":{dir:\"previousSibling\",first:!0},\"~\":{dir:\"previousSibling\"}},preFilter:{ATTR:function(a){return a[1]=a[1].replace(cb,db),a[3]=(a[3]||a[4]||a[5]||\"\").replace(cb,db),\"~=\"===a[2]&&(a[3]=\" \"+a[3]+\" \"),a.slice(0,4)},CHILD:function(a){return a[1]=a[1].toLowerCase(),\"nth\"===a[1].slice(0,3)?(a[3]||gb.error(a[0]),a[4]=+(a[4]?a[5]+(a[6]||1):2*(\"even\"===a[3]||\"odd\"===a[3])),a[5]=+(a[7]+a[8]||\"odd\"===a[3])):a[3]&&gb.error(a[0]),a},PSEUDO:function(a){var b,c=!a[6]&&a[2];return X.CHILD.test(a[0])?null:(a[3]?a[2]=a[4]||a[5]||\"\":c&&V.test(c)&&(b=g(c,!0))&&(b=c.indexOf(\")\",c.length-b)-c.length)&&(a[0]=a[0].slice(0,b),a[2]=c.slice(0,b)),a.slice(0,3))}},filter:{TAG:function(a){var b=a.replace(cb,db).toLowerCase();return\"*\"===a?function(){return!0}:function(a){return a.nodeName&&a.nodeName.toLowerCase()===b}},CLASS:function(a){var b=y[a+\" \"];return b||(b=new RegExp(\"(^|\"+L+\")\"+a+\"(\"+L+\"|$)\"))&&y(a,function(a){return b.test(\"string\"==typeof a.className&&a.className||\"undefined\"!=typeof a.getAttribute&&a.getAttribute(\"class\")||\"\")})},ATTR:function(a,b,c){return function(d){var e=gb.attr(d,a);return null==e?\"!=\"===b:b?(e+=\"\",\"=\"===b?e===c:\"!=\"===b?e!==c:\"^=\"===b?c&&0===e.indexOf(c):\"*=\"===b?c&&e.indexOf(c)>-1:\"$=\"===b?c&&e.slice(-c.length)===c:\"~=\"===b?(\" \"+e.replace(Q,\" \")+\" \").indexOf(c)>-1:\"|=\"===b?e===c||e.slice(0,c.length+1)===c+\"-\":!1):!0}},CHILD:function(a,b,c,d,e){var f=\"nth\"!==a.slice(0,3),g=\"last\"!==a.slice(-4),h=\"of-type\"===b;return 1===d&&0===e?function(a){return!!a.parentNode}:function(b,c,i){var j,k,l,m,n,o,p=f!==g?\"nextSibling\":\"previousSibling\",q=b.parentNode,r=h&&b.nodeName.toLowerCase(),s=!i&&!h;if(q){if(f){while(p){l=b;while(l=l[p])if(h?l.nodeName.toLowerCase()===r:1===l.nodeType)return!1;o=p=\"only\"===a&&!o&&\"nextSibling\"}return!0}if(o=[g?q.firstChild:q.lastChild],g&&s){k=q[u]||(q[u]={}),j=k[a]||[],n=j[0]===w&&j[1],m=j[0]===w&&j[2],l=n&&q.childNodes[n];while(l=++n&&l&&l[p]||(m=n=0)||o.pop())if(1===l.nodeType&&++m&&l===b){k[a]=[w,n,m];break}}else if(s&&(j=(b[u]||(b[u]={}))[a])&&j[0]===w)m=j[1];else while(l=++n&&l&&l[p]||(m=n=0)||o.pop())if((h?l.nodeName.toLowerCase()===r:1===l.nodeType)&&++m&&(s&&((l[u]||(l[u]={}))[a]=[w,m]),l===b))break;return m-=e,m===d||m%d===0&&m/d>=0}}},PSEUDO:function(a,b){var c,e=d.pseudos[a]||d.setFilters[a.toLowerCase()]||gb.error(\"unsupported pseudo: \"+a);return e[u]?e(b):e.length>1?(c=[a,a,\"\",b],d.setFilters.hasOwnProperty(a.toLowerCase())?ib(function(a,c){var d,f=e(a,b),g=f.length;while(g--)d=J(a,f[g]),a[d]=!(c[d]=f[g])}):function(a){return e(a,0,c)}):e}},pseudos:{not:ib(function(a){var b=[],c=[],d=h(a.replace(R,\"$1\"));return d[u]?ib(function(a,b,c,e){var f,g=d(a,null,e,[]),h=a.length;while(h--)(f=g[h])&&(a[h]=!(b[h]=f))}):function(a,e,f){return b[0]=a,d(b,null,f,c),b[0]=null,!c.pop()}}),has:ib(function(a){return function(b){return gb(a,b).length>0}}),contains:ib(function(a){return a=a.replace(cb,db),function(b){return(b.textContent||b.innerText||e(b)).indexOf(a)>-1}}),lang:ib(function(a){return W.test(a||\"\")||gb.error(\"unsupported lang: \"+a),a=a.replace(cb,db).toLowerCase(),function(b){var c;do if(c=p?b.lang:b.getAttribute(\"xml:lang\")||b.getAttribute(\"lang\"))return c=c.toLowerCase(),c===a||0===c.indexOf(a+\"-\");while((b=b.parentNode)&&1===b.nodeType);return!1}}),target:function(b){var c=a.location&&a.location.hash;return c&&c.slice(1)===b.id},root:function(a){return a===o},focus:function(a){return a===n.activeElement&&(!n.hasFocus||n.hasFocus())&&!!(a.type||a.href||~a.tabIndex)},enabled:function(a){return a.disabled===!1},disabled:function(a){return a.disabled===!0},checked:function(a){var b=a.nodeName.toLowerCase();return\"input\"===b&&!!a.checked||\"option\"===b&&!!a.selected},selected:function(a){return a.parentNode&&a.parentNode.selectedIndex,a.selected===!0},empty:function(a){for(a=a.firstChild;a;a=a.nextSibling)if(a.nodeType<6)return!1;return!0},parent:function(a){return!d.pseudos.empty(a)},header:function(a){return Z.test(a.nodeName)},input:function(a){return Y.test(a.nodeName)},button:function(a){var b=a.nodeName.toLowerCase();return\"input\"===b&&\"button\"===a.type||\"button\"===b},text:function(a){var b;return\"input\"===a.nodeName.toLowerCase()&&\"text\"===a.type&&(null==(b=a.getAttribute(\"type\"))||\"text\"===b.toLowerCase())},first:ob(function(){return[0]}),last:ob(function(a,b){return[b-1]}),eq:ob(function(a,b,c){return[0>c?c+b:c]}),even:ob(function(a,b){for(var c=0;b>c;c+=2)a.push(c);return a}),odd:ob(function(a,b){for(var c=1;b>c;c+=2)a.push(c);return a}),lt:ob(function(a,b,c){for(var d=0>c?c+b:c;--d>=0;)a.push(d);return a}),gt:ob(function(a,b,c){for(var d=0>c?c+b:c;++d<b;)a.push(d);return a})}},d.pseudos.nth=d.pseudos.eq;for(b in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})d.pseudos[b]=mb(b);for(b in{submit:!0,reset:!0})d.pseudos[b]=nb(b);function qb(){}qb.prototype=d.filters=d.pseudos,d.setFilters=new qb,g=gb.tokenize=function(a,b){var c,e,f,g,h,i,j,k=z[a+\" \"];if(k)return b?0:k.slice(0);h=a,i=[],j=d.preFilter;while(h){(!c||(e=S.exec(h)))&&(e&&(h=h.slice(e[0].length)||h),i.push(f=[])),c=!1,(e=T.exec(h))&&(c=e.shift(),f.push({value:c,type:e[0].replace(R,\" \")}),h=h.slice(c.length));for(g in d.filter)!(e=X[g].exec(h))||j[g]&&!(e=j[g](e))||(c=e.shift(),f.push({value:c,type:g,matches:e}),h=h.slice(c.length));if(!c)break}return b?h.length:h?gb.error(a):z(a,i).slice(0)};function rb(a){for(var b=0,c=a.length,d=\"\";c>b;b++)d+=a[b].value;return d}function sb(a,b,c){var d=b.dir,e=c&&\"parentNode\"===d,f=x++;return b.first?function(b,c,f){while(b=b[d])if(1===b.nodeType||e)return a(b,c,f)}:function(b,c,g){var h,i,j=[w,f];if(g){while(b=b[d])if((1===b.nodeType||e)&&a(b,c,g))return!0}else while(b=b[d])if(1===b.nodeType||e){if(i=b[u]||(b[u]={}),(h=i[d])&&h[0]===w&&h[1]===f)return j[2]=h[2];if(i[d]=j,j[2]=a(b,c,g))return!0}}}function tb(a){return a.length>1?function(b,c,d){var e=a.length;while(e--)if(!a[e](b,c,d))return!1;return!0}:a[0]}function ub(a,b,c){for(var d=0,e=b.length;e>d;d++)gb(a,b[d],c);return c}function vb(a,b,c,d,e){for(var f,g=[],h=0,i=a.length,j=null!=b;i>h;h++)(f=a[h])&&(!c||c(f,d,e))&&(g.push(f),j&&b.push(h));return g}function wb(a,b,c,d,e,f){return d&&!d[u]&&(d=wb(d)),e&&!e[u]&&(e=wb(e,f)),ib(function(f,g,h,i){var j,k,l,m=[],n=[],o=g.length,p=f||ub(b||\"*\",h.nodeType?[h]:h,[]),q=!a||!f&&b?p:vb(p,m,a,h,i),r=c?e||(f?a:o||d)?[]:g:q;if(c&&c(q,r,h,i),d){j=vb(r,n),d(j,[],h,i),k=j.length;while(k--)(l=j[k])&&(r[n[k]]=!(q[n[k]]=l))}if(f){if(e||a){if(e){j=[],k=r.length;while(k--)(l=r[k])&&j.push(q[k]=l);e(null,r=[],j,i)}k=r.length;while(k--)(l=r[k])&&(j=e?J(f,l):m[k])>-1&&(f[j]=!(g[j]=l))}}else r=vb(r===g?r.splice(o,r.length):r),e?e(null,g,r,i):H.apply(g,r)})}function xb(a){for(var b,c,e,f=a.length,g=d.relative[a[0].type],h=g||d.relative[\" \"],i=g?1:0,k=sb(function(a){return a===b},h,!0),l=sb(function(a){return J(b,a)>-1},h,!0),m=[function(a,c,d){var e=!g&&(d||c!==j)||((b=c).nodeType?k(a,c,d):l(a,c,d));return b=null,e}];f>i;i++)if(c=d.relative[a[i].type])m=[sb(tb(m),c)];else{if(c=d.filter[a[i].type].apply(null,a[i].matches),c[u]){for(e=++i;f>e;e++)if(d.relative[a[e].type])break;return wb(i>1&&tb(m),i>1&&rb(a.slice(0,i-1).concat({value:\" \"===a[i-2].type?\"*\":\"\"})).replace(R,\"$1\"),c,e>i&&xb(a.slice(i,e)),f>e&&xb(a=a.slice(e)),f>e&&rb(a))}m.push(c)}return tb(m)}function yb(a,b){var c=b.length>0,e=a.length>0,f=function(f,g,h,i,k){var l,m,o,p=0,q=\"0\",r=f&&[],s=[],t=j,u=f||e&&d.find.TAG(\"*\",k),v=w+=null==t?1:Math.random()||.1,x=u.length;for(k&&(j=g!==n&&g);q!==x&&null!=(l=u[q]);q++){if(e&&l){m=0;while(o=a[m++])if(o(l,g,h)){i.push(l);break}k&&(w=v)}c&&((l=!o&&l)&&p--,f&&r.push(l))}if(p+=q,c&&q!==p){m=0;while(o=b[m++])o(r,s,g,h);if(f){if(p>0)while(q--)r[q]||s[q]||(s[q]=F.call(i));s=vb(s)}H.apply(i,s),k&&!f&&s.length>0&&p+b.length>1&&gb.uniqueSort(i)}return k&&(w=v,j=t),r};return c?ib(f):f}return h=gb.compile=function(a,b){var c,d=[],e=[],f=A[a+\" \"];if(!f){b||(b=g(a)),c=b.length;while(c--)f=xb(b[c]),f[u]?d.push(f):e.push(f);f=A(a,yb(e,d)),f.selector=a}return f},i=gb.select=function(a,b,e,f){var i,j,k,l,m,n=\"function\"==typeof a&&a,o=!f&&g(a=n.selector||a);if(e=e||[],1===o.length){if(j=o[0]=o[0].slice(0),j.length>2&&\"ID\"===(k=j[0]).type&&c.getById&&9===b.nodeType&&p&&d.relative[j[1].type]){if(b=(d.find.ID(k.matches[0].replace(cb,db),b)||[])[0],!b)return e;n&&(b=b.parentNode),a=a.slice(j.shift().value.length)}i=X.needsContext.test(a)?0:j.length;while(i--){if(k=j[i],d.relative[l=k.type])break;if((m=d.find[l])&&(f=m(k.matches[0].replace(cb,db),ab.test(j[0].type)&&pb(b.parentNode)||b))){if(j.splice(i,1),a=f.length&&rb(j),!a)return H.apply(e,f),e;break}}}return(n||h(a,o))(f,b,!p,e,ab.test(a)&&pb(b.parentNode)||b),e},c.sortStable=u.split(\"\").sort(B).join(\"\")===u,c.detectDuplicates=!!l,m(),c.sortDetached=jb(function(a){return 1&a.compareDocumentPosition(n.createElement(\"div\"))}),jb(function(a){return a.innerHTML=\"<a href='#'></a>\",\"#\"===a.firstChild.getAttribute(\"href\")})||kb(\"type|href|height|width\",function(a,b,c){return c?void 0:a.getAttribute(b,\"type\"===b.toLowerCase()?1:2)}),c.attributes&&jb(function(a){return a.innerHTML=\"<input/>\",a.firstChild.setAttribute(\"value\",\"\"),\"\"===a.firstChild.getAttribute(\"value\")})||kb(\"value\",function(a,b,c){return c||\"input\"!==a.nodeName.toLowerCase()?void 0:a.defaultValue}),jb(function(a){return null==a.getAttribute(\"disabled\")})||kb(K,function(a,b,c){var d;return c?void 0:a[b]===!0?b.toLowerCase():(d=a.getAttributeNode(b))&&d.specified?d.value:null}),gb}(a);n.find=t,n.expr=t.selectors,n.expr[\":\"]=n.expr.pseudos,n.unique=t.uniqueSort,n.text=t.getText,n.isXMLDoc=t.isXML,n.contains=t.contains;var u=n.expr.match.needsContext,v=/^<(\\w+)\\s*\\/?>(?:<\\/\\1>|)$/,w=/^.[^:#\\[\\.,]*$/;function x(a,b,c){if(n.isFunction(b))return n.grep(a,function(a,d){return!!b.call(a,d,a)!==c});if(b.nodeType)return n.grep(a,function(a){return a===b!==c});if(\"string\"==typeof b){if(w.test(b))return n.filter(b,a,c);b=n.filter(b,a)}return n.grep(a,function(a){return g.call(b,a)>=0!==c})}n.filter=function(a,b,c){var d=b[0];return c&&(a=\":not(\"+a+\")\"),1===b.length&&1===d.nodeType?n.find.matchesSelector(d,a)?[d]:[]:n.find.matches(a,n.grep(b,function(a){return 1===a.nodeType}))},n.fn.extend({find:function(a){var b,c=this.length,d=[],e=this;if(\"string\"!=typeof a)return this.pushStack(n(a).filter(function(){for(b=0;c>b;b++)if(n.contains(e[b],this))return!0}));for(b=0;c>b;b++)n.find(a,e[b],d);return d=this.pushStack(c>1?n.unique(d):d),d.selector=this.selector?this.selector+\" \"+a:a,d},filter:function(a){return this.pushStack(x(this,a||[],!1))},not:function(a){return this.pushStack(x(this,a||[],!0))},is:function(a){return!!x(this,\"string\"==typeof a&&u.test(a)?n(a):a||[],!1).length}});var y,z=/^(?:\\s*(<[\\w\\W]+>)[^>]*|#([\\w-]*))$/,A=n.fn.init=function(a,b){var c,d;if(!a)return this;if(\"string\"==typeof a){if(c=\"<\"===a[0]&&\">\"===a[a.length-1]&&a.length>=3?[null,a,null]:z.exec(a),!c||!c[1]&&b)return!b||b.jquery?(b||y).find(a):this.constructor(b).find(a);if(c[1]){if(b=b instanceof n?b[0]:b,n.merge(this,n.parseHTML(c[1],b&&b.nodeType?b.ownerDocument||b:l,!0)),v.test(c[1])&&n.isPlainObject(b))for(c in b)n.isFunction(this[c])?this[c](b[c]):this.attr(c,b[c]);return this}return d=l.getElementById(c[2]),d&&d.parentNode&&(this.length=1,this[0]=d),this.context=l,this.selector=a,this}return a.nodeType?(this.context=this[0]=a,this.length=1,this):n.isFunction(a)?\"undefined\"!=typeof y.ready?y.ready(a):a(n):(void 0!==a.selector&&(this.selector=a.selector,this.context=a.context),n.makeArray(a,this))};A.prototype=n.fn,y=n(l);var B=/^(?:parents|prev(?:Until|All))/,C={children:!0,contents:!0,next:!0,prev:!0};n.extend({dir:function(a,b,c){var d=[],e=void 0!==c;while((a=a[b])&&9!==a.nodeType)if(1===a.nodeType){if(e&&n(a).is(c))break;d.push(a)}return d},sibling:function(a,b){for(var c=[];a;a=a.nextSibling)1===a.nodeType&&a!==b&&c.push(a);return c}}),n.fn.extend({has:function(a){var b=n(a,this),c=b.length;return this.filter(function(){for(var a=0;c>a;a++)if(n.contains(this,b[a]))return!0})},closest:function(a,b){for(var c,d=0,e=this.length,f=[],g=u.test(a)||\"string\"!=typeof a?n(a,b||this.context):0;e>d;d++)for(c=this[d];c&&c!==b;c=c.parentNode)if(c.nodeType<11&&(g?g.index(c)>-1:1===c.nodeType&&n.find.matchesSelector(c,a))){f.push(c);break}return this.pushStack(f.length>1?n.unique(f):f)},index:function(a){return a?\"string\"==typeof a?g.call(n(a),this[0]):g.call(this,a.jquery?a[0]:a):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(a,b){return this.pushStack(n.unique(n.merge(this.get(),n(a,b))))},addBack:function(a){return this.add(null==a?this.prevObject:this.prevObject.filter(a))}});function D(a,b){while((a=a[b])&&1!==a.nodeType);return a}n.each({parent:function(a){var b=a.parentNode;return b&&11!==b.nodeType?b:null},parents:function(a){return n.dir(a,\"parentNode\")},parentsUntil:function(a,b,c){return n.dir(a,\"parentNode\",c)},next:function(a){return D(a,\"nextSibling\")},prev:function(a){return D(a,\"previousSibling\")},nextAll:function(a){return n.dir(a,\"nextSibling\")},prevAll:function(a){return n.dir(a,\"previousSibling\")},nextUntil:function(a,b,c){return n.dir(a,\"nextSibling\",c)},prevUntil:function(a,b,c){return n.dir(a,\"previousSibling\",c)},siblings:function(a){return n.sibling((a.parentNode||{}).firstChild,a)},children:function(a){return n.sibling(a.firstChild)},contents:function(a){return a.contentDocument||n.merge([],a.childNodes)}},function(a,b){n.fn[a]=function(c,d){var e=n.map(this,b,c);return\"Until\"!==a.slice(-5)&&(d=c),d&&\"string\"==typeof d&&(e=n.filter(d,e)),this.length>1&&(C[a]||n.unique(e),B.test(a)&&e.reverse()),this.pushStack(e)}});var E=/\\S+/g,F={};function G(a){var b=F[a]={};return n.each(a.match(E)||[],function(a,c){b[c]=!0}),b}n.Callbacks=function(a){a=\"string\"==typeof a?F[a]||G(a):n.extend({},a);var b,c,d,e,f,g,h=[],i=!a.once&&[],j=function(l){for(b=a.memory&&l,c=!0,g=e||0,e=0,f=h.length,d=!0;h&&f>g;g++)if(h[g].apply(l[0],l[1])===!1&&a.stopOnFalse){b=!1;break}d=!1,h&&(i?i.length&&j(i.shift()):b?h=[]:k.disable())},k={add:function(){if(h){var c=h.length;!function g(b){n.each(b,function(b,c){var d=n.type(c);\"function\"===d?a.unique&&k.has(c)||h.push(c):c&&c.length&&\"string\"!==d&&g(c)})}(arguments),d?f=h.length:b&&(e=c,j(b))}return this},remove:function(){return h&&n.each(arguments,function(a,b){var c;while((c=n.inArray(b,h,c))>-1)h.splice(c,1),d&&(f>=c&&f--,g>=c&&g--)}),this},has:function(a){return a?n.inArray(a,h)>-1:!(!h||!h.length)},empty:function(){return h=[],f=0,this},disable:function(){return h=i=b=void 0,this},disabled:function(){return!h},lock:function(){return i=void 0,b||k.disable(),this},locked:function(){return!i},fireWith:function(a,b){return!h||c&&!i||(b=b||[],b=[a,b.slice?b.slice():b],d?i.push(b):j(b)),this},fire:function(){return k.fireWith(this,arguments),this},fired:function(){return!!c}};return k},n.extend({Deferred:function(a){var b=[[\"resolve\",\"done\",n.Callbacks(\"once memory\"),\"resolved\"],[\"reject\",\"fail\",n.Callbacks(\"once memory\"),\"rejected\"],[\"notify\",\"progress\",n.Callbacks(\"memory\")]],c=\"pending\",d={state:function(){return c},always:function(){return e.done(arguments).fail(arguments),this},then:function(){var a=arguments;return n.Deferred(function(c){n.each(b,function(b,f){var g=n.isFunction(a[b])&&a[b];e[f[1]](function(){var a=g&&g.apply(this,arguments);a&&n.isFunction(a.promise)?a.promise().done(c.resolve).fail(c.reject).progress(c.notify):c[f[0]+\"With\"](this===d?c.promise():this,g?[a]:arguments)})}),a=null}).promise()},promise:function(a){return null!=a?n.extend(a,d):d}},e={};return d.pipe=d.then,n.each(b,function(a,f){var g=f[2],h=f[3];d[f[1]]=g.add,h&&g.add(function(){c=h},b[1^a][2].disable,b[2][2].lock),e[f[0]]=function(){return e[f[0]+\"With\"](this===e?d:this,arguments),this},e[f[0]+\"With\"]=g.fireWith}),d.promise(e),a&&a.call(e,e),e},when:function(a){var b=0,c=d.call(arguments),e=c.length,f=1!==e||a&&n.isFunction(a.promise)?e:0,g=1===f?a:n.Deferred(),h=function(a,b,c){return function(e){b[a]=this,c[a]=arguments.length>1?d.call(arguments):e,c===i?g.notifyWith(b,c):--f||g.resolveWith(b,c)}},i,j,k;if(e>1)for(i=new Array(e),j=new Array(e),k=new Array(e);e>b;b++)c[b]&&n.isFunction(c[b].promise)?c[b].promise().done(h(b,k,c)).fail(g.reject).progress(h(b,j,i)):--f;return f||g.resolveWith(k,c),g.promise()}});var H;n.fn.ready=function(a){return n.ready.promise().done(a),this},n.extend({isReady:!1,readyWait:1,holdReady:function(a){a?n.readyWait++:n.ready(!0)},ready:function(a){(a===!0?--n.readyWait:n.isReady)||(n.isReady=!0,a!==!0&&--n.readyWait>0||(H.resolveWith(l,[n]),n.fn.triggerHandler&&(n(l).triggerHandler(\"ready\"),n(l).off(\"ready\"))))}});function I(){l.removeEventListener(\"DOMContentLoaded\",I,!1),a.removeEventListener(\"load\",I,!1),n.ready()}n.ready.promise=function(b){return H||(H=n.Deferred(),\"complete\"===l.readyState?setTimeout(n.ready):(l.addEventListener(\"DOMContentLoaded\",I,!1),a.addEventListener(\"load\",I,!1))),H.promise(b)},n.ready.promise();var J=n.access=function(a,b,c,d,e,f,g){var h=0,i=a.length,j=null==c;if(\"object\"===n.type(c)){e=!0;for(h in c)n.access(a,b,h,c[h],!0,f,g)}else if(void 0!==d&&(e=!0,n.isFunction(d)||(g=!0),j&&(g?(b.call(a,d),b=null):(j=b,b=function(a,b,c){return j.call(n(a),c)})),b))for(;i>h;h++)b(a[h],c,g?d:d.call(a[h],h,b(a[h],c)));return e?a:j?b.call(a):i?b(a[0],c):f};n.acceptData=function(a){return 1===a.nodeType||9===a.nodeType||!+a.nodeType};function K(){Object.defineProperty(this.cache={},0,{get:function(){return{}}}),this.expando=n.expando+K.uid++}K.uid=1,K.accepts=n.acceptData,K.prototype={key:function(a){if(!K.accepts(a))return 0;var b={},c=a[this.expando];if(!c){c=K.uid++;try{b[this.expando]={value:c},Object.defineProperties(a,b)}catch(d){b[this.expando]=c,n.extend(a,b)}}return this.cache[c]||(this.cache[c]={}),c},set:function(a,b,c){var d,e=this.key(a),f=this.cache[e];if(\"string\"==typeof b)f[b]=c;else if(n.isEmptyObject(f))n.extend(this.cache[e],b);else for(d in b)f[d]=b[d];return f},get:function(a,b){var c=this.cache[this.key(a)];return void 0===b?c:c[b]},access:function(a,b,c){var d;return void 0===b||b&&\"string\"==typeof b&&void 0===c?(d=this.get(a,b),void 0!==d?d:this.get(a,n.camelCase(b))):(this.set(a,b,c),void 0!==c?c:b)},remove:function(a,b){var c,d,e,f=this.key(a),g=this.cache[f];if(void 0===b)this.cache[f]={};else{n.isArray(b)?d=b.concat(b.map(n.camelCase)):(e=n.camelCase(b),b in g?d=[b,e]:(d=e,d=d in g?[d]:d.match(E)||[])),c=d.length;while(c--)delete g[d[c]]}},hasData:function(a){return!n.isEmptyObject(this.cache[a[this.expando]]||{})},discard:function(a){a[this.expando]&&delete this.cache[a[this.expando]]}};var L=new K,M=new K,N=/^(?:\\{[\\w\\W]*\\}|\\[[\\w\\W]*\\])$/,O=/([A-Z])/g;function P(a,b,c){var d;if(void 0===c&&1===a.nodeType)if(d=\"data-\"+b.replace(O,\"-$1\").toLowerCase(),c=a.getAttribute(d),\"string\"==typeof c){try{c=\"true\"===c?!0:\"false\"===c?!1:\"null\"===c?null:+c+\"\"===c?+c:N.test(c)?n.parseJSON(c):c}catch(e){}M.set(a,b,c)}else c=void 0;return c}n.extend({hasData:function(a){return M.hasData(a)||L.hasData(a)},data:function(a,b,c){return M.access(a,b,c)\n},removeData:function(a,b){M.remove(a,b)},_data:function(a,b,c){return L.access(a,b,c)},_removeData:function(a,b){L.remove(a,b)}}),n.fn.extend({data:function(a,b){var c,d,e,f=this[0],g=f&&f.attributes;if(void 0===a){if(this.length&&(e=M.get(f),1===f.nodeType&&!L.get(f,\"hasDataAttrs\"))){c=g.length;while(c--)g[c]&&(d=g[c].name,0===d.indexOf(\"data-\")&&(d=n.camelCase(d.slice(5)),P(f,d,e[d])));L.set(f,\"hasDataAttrs\",!0)}return e}return\"object\"==typeof a?this.each(function(){M.set(this,a)}):J(this,function(b){var c,d=n.camelCase(a);if(f&&void 0===b){if(c=M.get(f,a),void 0!==c)return c;if(c=M.get(f,d),void 0!==c)return c;if(c=P(f,d,void 0),void 0!==c)return c}else this.each(function(){var c=M.get(this,d);M.set(this,d,b),-1!==a.indexOf(\"-\")&&void 0!==c&&M.set(this,a,b)})},null,b,arguments.length>1,null,!0)},removeData:function(a){return this.each(function(){M.remove(this,a)})}}),n.extend({queue:function(a,b,c){var d;return a?(b=(b||\"fx\")+\"queue\",d=L.get(a,b),c&&(!d||n.isArray(c)?d=L.access(a,b,n.makeArray(c)):d.push(c)),d||[]):void 0},dequeue:function(a,b){b=b||\"fx\";var c=n.queue(a,b),d=c.length,e=c.shift(),f=n._queueHooks(a,b),g=function(){n.dequeue(a,b)};\"inprogress\"===e&&(e=c.shift(),d--),e&&(\"fx\"===b&&c.unshift(\"inprogress\"),delete f.stop,e.call(a,g,f)),!d&&f&&f.empty.fire()},_queueHooks:function(a,b){var c=b+\"queueHooks\";return L.get(a,c)||L.access(a,c,{empty:n.Callbacks(\"once memory\").add(function(){L.remove(a,[b+\"queue\",c])})})}}),n.fn.extend({queue:function(a,b){var c=2;return\"string\"!=typeof a&&(b=a,a=\"fx\",c--),arguments.length<c?n.queue(this[0],a):void 0===b?this:this.each(function(){var c=n.queue(this,a,b);n._queueHooks(this,a),\"fx\"===a&&\"inprogress\"!==c[0]&&n.dequeue(this,a)})},dequeue:function(a){return this.each(function(){n.dequeue(this,a)})},clearQueue:function(a){return this.queue(a||\"fx\",[])},promise:function(a,b){var c,d=1,e=n.Deferred(),f=this,g=this.length,h=function(){--d||e.resolveWith(f,[f])};\"string\"!=typeof a&&(b=a,a=void 0),a=a||\"fx\";while(g--)c=L.get(f[g],a+\"queueHooks\"),c&&c.empty&&(d++,c.empty.add(h));return h(),e.promise(b)}});var Q=/[+-]?(?:\\d*\\.|)\\d+(?:[eE][+-]?\\d+|)/.source,R=[\"Top\",\"Right\",\"Bottom\",\"Left\"],S=function(a,b){return a=b||a,\"none\"===n.css(a,\"display\")||!n.contains(a.ownerDocument,a)},T=/^(?:checkbox|radio)$/i;!function(){var a=l.createDocumentFragment(),b=a.appendChild(l.createElement(\"div\")),c=l.createElement(\"input\");c.setAttribute(\"type\",\"radio\"),c.setAttribute(\"checked\",\"checked\"),c.setAttribute(\"name\",\"t\"),b.appendChild(c),k.checkClone=b.cloneNode(!0).cloneNode(!0).lastChild.checked,b.innerHTML=\"<textarea>x</textarea>\",k.noCloneChecked=!!b.cloneNode(!0).lastChild.defaultValue}();var U=\"undefined\";k.focusinBubbles=\"onfocusin\"in a;var V=/^key/,W=/^(?:mouse|pointer|contextmenu)|click/,X=/^(?:focusinfocus|focusoutblur)$/,Y=/^([^.]*)(?:\\.(.+)|)$/;function Z(){return!0}function $(){return!1}function _(){try{return l.activeElement}catch(a){}}n.event={global:{},add:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,o,p,q,r=L.get(a);if(r){c.handler&&(f=c,c=f.handler,e=f.selector),c.guid||(c.guid=n.guid++),(i=r.events)||(i=r.events={}),(g=r.handle)||(g=r.handle=function(b){return typeof n!==U&&n.event.triggered!==b.type?n.event.dispatch.apply(a,arguments):void 0}),b=(b||\"\").match(E)||[\"\"],j=b.length;while(j--)h=Y.exec(b[j])||[],o=q=h[1],p=(h[2]||\"\").split(\".\").sort(),o&&(l=n.event.special[o]||{},o=(e?l.delegateType:l.bindType)||o,l=n.event.special[o]||{},k=n.extend({type:o,origType:q,data:d,handler:c,guid:c.guid,selector:e,needsContext:e&&n.expr.match.needsContext.test(e),namespace:p.join(\".\")},f),(m=i[o])||(m=i[o]=[],m.delegateCount=0,l.setup&&l.setup.call(a,d,p,g)!==!1||a.addEventListener&&a.addEventListener(o,g,!1)),l.add&&(l.add.call(a,k),k.handler.guid||(k.handler.guid=c.guid)),e?m.splice(m.delegateCount++,0,k):m.push(k),n.event.global[o]=!0)}},remove:function(a,b,c,d,e){var f,g,h,i,j,k,l,m,o,p,q,r=L.hasData(a)&&L.get(a);if(r&&(i=r.events)){b=(b||\"\").match(E)||[\"\"],j=b.length;while(j--)if(h=Y.exec(b[j])||[],o=q=h[1],p=(h[2]||\"\").split(\".\").sort(),o){l=n.event.special[o]||{},o=(d?l.delegateType:l.bindType)||o,m=i[o]||[],h=h[2]&&new RegExp(\"(^|\\\\.)\"+p.join(\"\\\\.(?:.*\\\\.|)\")+\"(\\\\.|$)\"),g=f=m.length;while(f--)k=m[f],!e&&q!==k.origType||c&&c.guid!==k.guid||h&&!h.test(k.namespace)||d&&d!==k.selector&&(\"**\"!==d||!k.selector)||(m.splice(f,1),k.selector&&m.delegateCount--,l.remove&&l.remove.call(a,k));g&&!m.length&&(l.teardown&&l.teardown.call(a,p,r.handle)!==!1||n.removeEvent(a,o,r.handle),delete i[o])}else for(o in i)n.event.remove(a,o+b[j],c,d,!0);n.isEmptyObject(i)&&(delete r.handle,L.remove(a,\"events\"))}},trigger:function(b,c,d,e){var f,g,h,i,k,m,o,p=[d||l],q=j.call(b,\"type\")?b.type:b,r=j.call(b,\"namespace\")?b.namespace.split(\".\"):[];if(g=h=d=d||l,3!==d.nodeType&&8!==d.nodeType&&!X.test(q+n.event.triggered)&&(q.indexOf(\".\")>=0&&(r=q.split(\".\"),q=r.shift(),r.sort()),k=q.indexOf(\":\")<0&&\"on\"+q,b=b[n.expando]?b:new n.Event(q,\"object\"==typeof b&&b),b.isTrigger=e?2:3,b.namespace=r.join(\".\"),b.namespace_re=b.namespace?new RegExp(\"(^|\\\\.)\"+r.join(\"\\\\.(?:.*\\\\.|)\")+\"(\\\\.|$)\"):null,b.result=void 0,b.target||(b.target=d),c=null==c?[b]:n.makeArray(c,[b]),o=n.event.special[q]||{},e||!o.trigger||o.trigger.apply(d,c)!==!1)){if(!e&&!o.noBubble&&!n.isWindow(d)){for(i=o.delegateType||q,X.test(i+q)||(g=g.parentNode);g;g=g.parentNode)p.push(g),h=g;h===(d.ownerDocument||l)&&p.push(h.defaultView||h.parentWindow||a)}f=0;while((g=p[f++])&&!b.isPropagationStopped())b.type=f>1?i:o.bindType||q,m=(L.get(g,\"events\")||{})[b.type]&&L.get(g,\"handle\"),m&&m.apply(g,c),m=k&&g[k],m&&m.apply&&n.acceptData(g)&&(b.result=m.apply(g,c),b.result===!1&&b.preventDefault());return b.type=q,e||b.isDefaultPrevented()||o._default&&o._default.apply(p.pop(),c)!==!1||!n.acceptData(d)||k&&n.isFunction(d[q])&&!n.isWindow(d)&&(h=d[k],h&&(d[k]=null),n.event.triggered=q,d[q](),n.event.triggered=void 0,h&&(d[k]=h)),b.result}},dispatch:function(a){a=n.event.fix(a);var b,c,e,f,g,h=[],i=d.call(arguments),j=(L.get(this,\"events\")||{})[a.type]||[],k=n.event.special[a.type]||{};if(i[0]=a,a.delegateTarget=this,!k.preDispatch||k.preDispatch.call(this,a)!==!1){h=n.event.handlers.call(this,a,j),b=0;while((f=h[b++])&&!a.isPropagationStopped()){a.currentTarget=f.elem,c=0;while((g=f.handlers[c++])&&!a.isImmediatePropagationStopped())(!a.namespace_re||a.namespace_re.test(g.namespace))&&(a.handleObj=g,a.data=g.data,e=((n.event.special[g.origType]||{}).handle||g.handler).apply(f.elem,i),void 0!==e&&(a.result=e)===!1&&(a.preventDefault(),a.stopPropagation()))}return k.postDispatch&&k.postDispatch.call(this,a),a.result}},handlers:function(a,b){var c,d,e,f,g=[],h=b.delegateCount,i=a.target;if(h&&i.nodeType&&(!a.button||\"click\"!==a.type))for(;i!==this;i=i.parentNode||this)if(i.disabled!==!0||\"click\"!==a.type){for(d=[],c=0;h>c;c++)f=b[c],e=f.selector+\" \",void 0===d[e]&&(d[e]=f.needsContext?n(e,this).index(i)>=0:n.find(e,this,null,[i]).length),d[e]&&d.push(f);d.length&&g.push({elem:i,handlers:d})}return h<b.length&&g.push({elem:this,handlers:b.slice(h)}),g},props:\"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which\".split(\" \"),fixHooks:{},keyHooks:{props:\"char charCode key keyCode\".split(\" \"),filter:function(a,b){return null==a.which&&(a.which=null!=b.charCode?b.charCode:b.keyCode),a}},mouseHooks:{props:\"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement\".split(\" \"),filter:function(a,b){var c,d,e,f=b.button;return null==a.pageX&&null!=b.clientX&&(c=a.target.ownerDocument||l,d=c.documentElement,e=c.body,a.pageX=b.clientX+(d&&d.scrollLeft||e&&e.scrollLeft||0)-(d&&d.clientLeft||e&&e.clientLeft||0),a.pageY=b.clientY+(d&&d.scrollTop||e&&e.scrollTop||0)-(d&&d.clientTop||e&&e.clientTop||0)),a.which||void 0===f||(a.which=1&f?1:2&f?3:4&f?2:0),a}},fix:function(a){if(a[n.expando])return a;var b,c,d,e=a.type,f=a,g=this.fixHooks[e];g||(this.fixHooks[e]=g=W.test(e)?this.mouseHooks:V.test(e)?this.keyHooks:{}),d=g.props?this.props.concat(g.props):this.props,a=new n.Event(f),b=d.length;while(b--)c=d[b],a[c]=f[c];return a.target||(a.target=l),3===a.target.nodeType&&(a.target=a.target.parentNode),g.filter?g.filter(a,f):a},special:{load:{noBubble:!0},focus:{trigger:function(){return this!==_()&&this.focus?(this.focus(),!1):void 0},delegateType:\"focusin\"},blur:{trigger:function(){return this===_()&&this.blur?(this.blur(),!1):void 0},delegateType:\"focusout\"},click:{trigger:function(){return\"checkbox\"===this.type&&this.click&&n.nodeName(this,\"input\")?(this.click(),!1):void 0},_default:function(a){return n.nodeName(a.target,\"a\")}},beforeunload:{postDispatch:function(a){void 0!==a.result&&a.originalEvent&&(a.originalEvent.returnValue=a.result)}}},simulate:function(a,b,c,d){var e=n.extend(new n.Event,c,{type:a,isSimulated:!0,originalEvent:{}});d?n.event.trigger(e,null,b):n.event.dispatch.call(b,e),e.isDefaultPrevented()&&c.preventDefault()}},n.removeEvent=function(a,b,c){a.removeEventListener&&a.removeEventListener(b,c,!1)},n.Event=function(a,b){return this instanceof n.Event?(a&&a.type?(this.originalEvent=a,this.type=a.type,this.isDefaultPrevented=a.defaultPrevented||void 0===a.defaultPrevented&&a.returnValue===!1?Z:$):this.type=a,b&&n.extend(this,b),this.timeStamp=a&&a.timeStamp||n.now(),void(this[n.expando]=!0)):new n.Event(a,b)},n.Event.prototype={isDefaultPrevented:$,isPropagationStopped:$,isImmediatePropagationStopped:$,preventDefault:function(){var a=this.originalEvent;this.isDefaultPrevented=Z,a&&a.preventDefault&&a.preventDefault()},stopPropagation:function(){var a=this.originalEvent;this.isPropagationStopped=Z,a&&a.stopPropagation&&a.stopPropagation()},stopImmediatePropagation:function(){var a=this.originalEvent;this.isImmediatePropagationStopped=Z,a&&a.stopImmediatePropagation&&a.stopImmediatePropagation(),this.stopPropagation()}},n.each({mouseenter:\"mouseover\",mouseleave:\"mouseout\",pointerenter:\"pointerover\",pointerleave:\"pointerout\"},function(a,b){n.event.special[a]={delegateType:b,bindType:b,handle:function(a){var c,d=this,e=a.relatedTarget,f=a.handleObj;return(!e||e!==d&&!n.contains(d,e))&&(a.type=f.origType,c=f.handler.apply(this,arguments),a.type=b),c}}}),k.focusinBubbles||n.each({focus:\"focusin\",blur:\"focusout\"},function(a,b){var c=function(a){n.event.simulate(b,a.target,n.event.fix(a),!0)};n.event.special[b]={setup:function(){var d=this.ownerDocument||this,e=L.access(d,b);e||d.addEventListener(a,c,!0),L.access(d,b,(e||0)+1)},teardown:function(){var d=this.ownerDocument||this,e=L.access(d,b)-1;e?L.access(d,b,e):(d.removeEventListener(a,c,!0),L.remove(d,b))}}}),n.fn.extend({on:function(a,b,c,d,e){var f,g;if(\"object\"==typeof a){\"string\"!=typeof b&&(c=c||b,b=void 0);for(g in a)this.on(g,b,c,a[g],e);return this}if(null==c&&null==d?(d=b,c=b=void 0):null==d&&(\"string\"==typeof b?(d=c,c=void 0):(d=c,c=b,b=void 0)),d===!1)d=$;else if(!d)return this;return 1===e&&(f=d,d=function(a){return n().off(a),f.apply(this,arguments)},d.guid=f.guid||(f.guid=n.guid++)),this.each(function(){n.event.add(this,a,d,c,b)})},one:function(a,b,c,d){return this.on(a,b,c,d,1)},off:function(a,b,c){var d,e;if(a&&a.preventDefault&&a.handleObj)return d=a.handleObj,n(a.delegateTarget).off(d.namespace?d.origType+\".\"+d.namespace:d.origType,d.selector,d.handler),this;if(\"object\"==typeof a){for(e in a)this.off(e,b,a[e]);return this}return(b===!1||\"function\"==typeof b)&&(c=b,b=void 0),c===!1&&(c=$),this.each(function(){n.event.remove(this,a,c,b)})},trigger:function(a,b){return this.each(function(){n.event.trigger(a,b,this)})},triggerHandler:function(a,b){var c=this[0];return c?n.event.trigger(a,b,c,!0):void 0}});var ab=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\\w:]+)[^>]*)\\/>/gi,bb=/<([\\w:]+)/,cb=/<|&#?\\w+;/,db=/<(?:script|style|link)/i,eb=/checked\\s*(?:[^=]|=\\s*.checked.)/i,fb=/^$|\\/(?:java|ecma)script/i,gb=/^true\\/(.*)/,hb=/^\\s*<!(?:\\[CDATA\\[|--)|(?:\\]\\]|--)>\\s*$/g,ib={option:[1,\"<select multiple='multiple'>\",\"</select>\"],thead:[1,\"<table>\",\"</table>\"],col:[2,\"<table><colgroup>\",\"</colgroup></table>\"],tr:[2,\"<table><tbody>\",\"</tbody></table>\"],td:[3,\"<table><tbody><tr>\",\"</tr></tbody></table>\"],_default:[0,\"\",\"\"]};ib.optgroup=ib.option,ib.tbody=ib.tfoot=ib.colgroup=ib.caption=ib.thead,ib.th=ib.td;function jb(a,b){return n.nodeName(a,\"table\")&&n.nodeName(11!==b.nodeType?b:b.firstChild,\"tr\")?a.getElementsByTagName(\"tbody\")[0]||a.appendChild(a.ownerDocument.createElement(\"tbody\")):a}function kb(a){return a.type=(null!==a.getAttribute(\"type\"))+\"/\"+a.type,a}function lb(a){var b=gb.exec(a.type);return b?a.type=b[1]:a.removeAttribute(\"type\"),a}function mb(a,b){for(var c=0,d=a.length;d>c;c++)L.set(a[c],\"globalEval\",!b||L.get(b[c],\"globalEval\"))}function nb(a,b){var c,d,e,f,g,h,i,j;if(1===b.nodeType){if(L.hasData(a)&&(f=L.access(a),g=L.set(b,f),j=f.events)){delete g.handle,g.events={};for(e in j)for(c=0,d=j[e].length;d>c;c++)n.event.add(b,e,j[e][c])}M.hasData(a)&&(h=M.access(a),i=n.extend({},h),M.set(b,i))}}function ob(a,b){var c=a.getElementsByTagName?a.getElementsByTagName(b||\"*\"):a.querySelectorAll?a.querySelectorAll(b||\"*\"):[];return void 0===b||b&&n.nodeName(a,b)?n.merge([a],c):c}function pb(a,b){var c=b.nodeName.toLowerCase();\"input\"===c&&T.test(a.type)?b.checked=a.checked:(\"input\"===c||\"textarea\"===c)&&(b.defaultValue=a.defaultValue)}n.extend({clone:function(a,b,c){var d,e,f,g,h=a.cloneNode(!0),i=n.contains(a.ownerDocument,a);if(!(k.noCloneChecked||1!==a.nodeType&&11!==a.nodeType||n.isXMLDoc(a)))for(g=ob(h),f=ob(a),d=0,e=f.length;e>d;d++)pb(f[d],g[d]);if(b)if(c)for(f=f||ob(a),g=g||ob(h),d=0,e=f.length;e>d;d++)nb(f[d],g[d]);else nb(a,h);return g=ob(h,\"script\"),g.length>0&&mb(g,!i&&ob(a,\"script\")),h},buildFragment:function(a,b,c,d){for(var e,f,g,h,i,j,k=b.createDocumentFragment(),l=[],m=0,o=a.length;o>m;m++)if(e=a[m],e||0===e)if(\"object\"===n.type(e))n.merge(l,e.nodeType?[e]:e);else if(cb.test(e)){f=f||k.appendChild(b.createElement(\"div\")),g=(bb.exec(e)||[\"\",\"\"])[1].toLowerCase(),h=ib[g]||ib._default,f.innerHTML=h[1]+e.replace(ab,\"<$1></$2>\")+h[2],j=h[0];while(j--)f=f.lastChild;n.merge(l,f.childNodes),f=k.firstChild,f.textContent=\"\"}else l.push(b.createTextNode(e));k.textContent=\"\",m=0;while(e=l[m++])if((!d||-1===n.inArray(e,d))&&(i=n.contains(e.ownerDocument,e),f=ob(k.appendChild(e),\"script\"),i&&mb(f),c)){j=0;while(e=f[j++])fb.test(e.type||\"\")&&c.push(e)}return k},cleanData:function(a){for(var b,c,d,e,f=n.event.special,g=0;void 0!==(c=a[g]);g++){if(n.acceptData(c)&&(e=c[L.expando],e&&(b=L.cache[e]))){if(b.events)for(d in b.events)f[d]?n.event.remove(c,d):n.removeEvent(c,d,b.handle);L.cache[e]&&delete L.cache[e]}delete M.cache[c[M.expando]]}}}),n.fn.extend({text:function(a){return J(this,function(a){return void 0===a?n.text(this):this.empty().each(function(){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&(this.textContent=a)})},null,a,arguments.length)},append:function(){return this.domManip(arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=jb(this,a);b.appendChild(a)}})},prepend:function(){return this.domManip(arguments,function(a){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var b=jb(this,a);b.insertBefore(a,b.firstChild)}})},before:function(){return this.domManip(arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this)})},after:function(){return this.domManip(arguments,function(a){this.parentNode&&this.parentNode.insertBefore(a,this.nextSibling)})},remove:function(a,b){for(var c,d=a?n.filter(a,this):this,e=0;null!=(c=d[e]);e++)b||1!==c.nodeType||n.cleanData(ob(c)),c.parentNode&&(b&&n.contains(c.ownerDocument,c)&&mb(ob(c,\"script\")),c.parentNode.removeChild(c));return this},empty:function(){for(var a,b=0;null!=(a=this[b]);b++)1===a.nodeType&&(n.cleanData(ob(a,!1)),a.textContent=\"\");return this},clone:function(a,b){return a=null==a?!1:a,b=null==b?a:b,this.map(function(){return n.clone(this,a,b)})},html:function(a){return J(this,function(a){var b=this[0]||{},c=0,d=this.length;if(void 0===a&&1===b.nodeType)return b.innerHTML;if(\"string\"==typeof a&&!db.test(a)&&!ib[(bb.exec(a)||[\"\",\"\"])[1].toLowerCase()]){a=a.replace(ab,\"<$1></$2>\");try{for(;d>c;c++)b=this[c]||{},1===b.nodeType&&(n.cleanData(ob(b,!1)),b.innerHTML=a);b=0}catch(e){}}b&&this.empty().append(a)},null,a,arguments.length)},replaceWith:function(){var a=arguments[0];return this.domManip(arguments,function(b){a=this.parentNode,n.cleanData(ob(this)),a&&a.replaceChild(b,this)}),a&&(a.length||a.nodeType)?this:this.remove()},detach:function(a){return this.remove(a,!0)},domManip:function(a,b){a=e.apply([],a);var c,d,f,g,h,i,j=0,l=this.length,m=this,o=l-1,p=a[0],q=n.isFunction(p);if(q||l>1&&\"string\"==typeof p&&!k.checkClone&&eb.test(p))return this.each(function(c){var d=m.eq(c);q&&(a[0]=p.call(this,c,d.html())),d.domManip(a,b)});if(l&&(c=n.buildFragment(a,this[0].ownerDocument,!1,this),d=c.firstChild,1===c.childNodes.length&&(c=d),d)){for(f=n.map(ob(c,\"script\"),kb),g=f.length;l>j;j++)h=c,j!==o&&(h=n.clone(h,!0,!0),g&&n.merge(f,ob(h,\"script\"))),b.call(this[j],h,j);if(g)for(i=f[f.length-1].ownerDocument,n.map(f,lb),j=0;g>j;j++)h=f[j],fb.test(h.type||\"\")&&!L.access(h,\"globalEval\")&&n.contains(i,h)&&(h.src?n._evalUrl&&n._evalUrl(h.src):n.globalEval(h.textContent.replace(hb,\"\")))}return this}}),n.each({appendTo:\"append\",prependTo:\"prepend\",insertBefore:\"before\",insertAfter:\"after\",replaceAll:\"replaceWith\"},function(a,b){n.fn[a]=function(a){for(var c,d=[],e=n(a),g=e.length-1,h=0;g>=h;h++)c=h===g?this:this.clone(!0),n(e[h])[b](c),f.apply(d,c.get());return this.pushStack(d)}});var qb,rb={};function sb(b,c){var d,e=n(c.createElement(b)).appendTo(c.body),f=a.getDefaultComputedStyle&&(d=a.getDefaultComputedStyle(e[0]))?d.display:n.css(e[0],\"display\");return e.detach(),f}function tb(a){var b=l,c=rb[a];return c||(c=sb(a,b),\"none\"!==c&&c||(qb=(qb||n(\"<iframe frameborder='0' width='0' height='0'/>\")).appendTo(b.documentElement),b=qb[0].contentDocument,b.write(),b.close(),c=sb(a,b),qb.detach()),rb[a]=c),c}var ub=/^margin/,vb=new RegExp(\"^(\"+Q+\")(?!px)[a-z%]+$\",\"i\"),wb=function(b){return b.ownerDocument.defaultView.opener?b.ownerDocument.defaultView.getComputedStyle(b,null):a.getComputedStyle(b,null)};function xb(a,b,c){var d,e,f,g,h=a.style;return c=c||wb(a),c&&(g=c.getPropertyValue(b)||c[b]),c&&(\"\"!==g||n.contains(a.ownerDocument,a)||(g=n.style(a,b)),vb.test(g)&&ub.test(b)&&(d=h.width,e=h.minWidth,f=h.maxWidth,h.minWidth=h.maxWidth=h.width=g,g=c.width,h.width=d,h.minWidth=e,h.maxWidth=f)),void 0!==g?g+\"\":g}function yb(a,b){return{get:function(){return a()?void delete this.get:(this.get=b).apply(this,arguments)}}}!function(){var b,c,d=l.documentElement,e=l.createElement(\"div\"),f=l.createElement(\"div\");if(f.style){f.style.backgroundClip=\"content-box\",f.cloneNode(!0).style.backgroundClip=\"\",k.clearCloneStyle=\"content-box\"===f.style.backgroundClip,e.style.cssText=\"border:0;width:0;height:0;top:0;left:-9999px;margin-top:1px;position:absolute\",e.appendChild(f);function g(){f.style.cssText=\"-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute\",f.innerHTML=\"\",d.appendChild(e);var g=a.getComputedStyle(f,null);b=\"1%\"!==g.top,c=\"4px\"===g.width,d.removeChild(e)}a.getComputedStyle&&n.extend(k,{pixelPosition:function(){return g(),b},boxSizingReliable:function(){return null==c&&g(),c},reliableMarginRight:function(){var b,c=f.appendChild(l.createElement(\"div\"));return c.style.cssText=f.style.cssText=\"-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0\",c.style.marginRight=c.style.width=\"0\",f.style.width=\"1px\",d.appendChild(e),b=!parseFloat(a.getComputedStyle(c,null).marginRight),d.removeChild(e),f.removeChild(c),b}})}}(),n.swap=function(a,b,c,d){var e,f,g={};for(f in b)g[f]=a.style[f],a.style[f]=b[f];e=c.apply(a,d||[]);for(f in b)a.style[f]=g[f];return e};var zb=/^(none|table(?!-c[ea]).+)/,Ab=new RegExp(\"^(\"+Q+\")(.*)$\",\"i\"),Bb=new RegExp(\"^([+-])=(\"+Q+\")\",\"i\"),Cb={position:\"absolute\",visibility:\"hidden\",display:\"block\"},Db={letterSpacing:\"0\",fontWeight:\"400\"},Eb=[\"Webkit\",\"O\",\"Moz\",\"ms\"];function Fb(a,b){if(b in a)return b;var c=b[0].toUpperCase()+b.slice(1),d=b,e=Eb.length;while(e--)if(b=Eb[e]+c,b in a)return b;return d}function Gb(a,b,c){var d=Ab.exec(b);return d?Math.max(0,d[1]-(c||0))+(d[2]||\"px\"):b}function Hb(a,b,c,d,e){for(var f=c===(d?\"border\":\"content\")?4:\"width\"===b?1:0,g=0;4>f;f+=2)\"margin\"===c&&(g+=n.css(a,c+R[f],!0,e)),d?(\"content\"===c&&(g-=n.css(a,\"padding\"+R[f],!0,e)),\"margin\"!==c&&(g-=n.css(a,\"border\"+R[f]+\"Width\",!0,e))):(g+=n.css(a,\"padding\"+R[f],!0,e),\"padding\"!==c&&(g+=n.css(a,\"border\"+R[f]+\"Width\",!0,e)));return g}function Ib(a,b,c){var d=!0,e=\"width\"===b?a.offsetWidth:a.offsetHeight,f=wb(a),g=\"border-box\"===n.css(a,\"boxSizing\",!1,f);if(0>=e||null==e){if(e=xb(a,b,f),(0>e||null==e)&&(e=a.style[b]),vb.test(e))return e;d=g&&(k.boxSizingReliable()||e===a.style[b]),e=parseFloat(e)||0}return e+Hb(a,b,c||(g?\"border\":\"content\"),d,f)+\"px\"}function Jb(a,b){for(var c,d,e,f=[],g=0,h=a.length;h>g;g++)d=a[g],d.style&&(f[g]=L.get(d,\"olddisplay\"),c=d.style.display,b?(f[g]||\"none\"!==c||(d.style.display=\"\"),\"\"===d.style.display&&S(d)&&(f[g]=L.access(d,\"olddisplay\",tb(d.nodeName)))):(e=S(d),\"none\"===c&&e||L.set(d,\"olddisplay\",e?c:n.css(d,\"display\"))));for(g=0;h>g;g++)d=a[g],d.style&&(b&&\"none\"!==d.style.display&&\"\"!==d.style.display||(d.style.display=b?f[g]||\"\":\"none\"));return a}n.extend({cssHooks:{opacity:{get:function(a,b){if(b){var c=xb(a,\"opacity\");return\"\"===c?\"1\":c}}}},cssNumber:{columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{\"float\":\"cssFloat\"},style:function(a,b,c,d){if(a&&3!==a.nodeType&&8!==a.nodeType&&a.style){var e,f,g,h=n.camelCase(b),i=a.style;return b=n.cssProps[h]||(n.cssProps[h]=Fb(i,h)),g=n.cssHooks[b]||n.cssHooks[h],void 0===c?g&&\"get\"in g&&void 0!==(e=g.get(a,!1,d))?e:i[b]:(f=typeof c,\"string\"===f&&(e=Bb.exec(c))&&(c=(e[1]+1)*e[2]+parseFloat(n.css(a,b)),f=\"number\"),null!=c&&c===c&&(\"number\"!==f||n.cssNumber[h]||(c+=\"px\"),k.clearCloneStyle||\"\"!==c||0!==b.indexOf(\"background\")||(i[b]=\"inherit\"),g&&\"set\"in g&&void 0===(c=g.set(a,c,d))||(i[b]=c)),void 0)}},css:function(a,b,c,d){var e,f,g,h=n.camelCase(b);return b=n.cssProps[h]||(n.cssProps[h]=Fb(a.style,h)),g=n.cssHooks[b]||n.cssHooks[h],g&&\"get\"in g&&(e=g.get(a,!0,c)),void 0===e&&(e=xb(a,b,d)),\"normal\"===e&&b in Db&&(e=Db[b]),\"\"===c||c?(f=parseFloat(e),c===!0||n.isNumeric(f)?f||0:e):e}}),n.each([\"height\",\"width\"],function(a,b){n.cssHooks[b]={get:function(a,c,d){return c?zb.test(n.css(a,\"display\"))&&0===a.offsetWidth?n.swap(a,Cb,function(){return Ib(a,b,d)}):Ib(a,b,d):void 0},set:function(a,c,d){var e=d&&wb(a);return Gb(a,c,d?Hb(a,b,d,\"border-box\"===n.css(a,\"boxSizing\",!1,e),e):0)}}}),n.cssHooks.marginRight=yb(k.reliableMarginRight,function(a,b){return b?n.swap(a,{display:\"inline-block\"},xb,[a,\"marginRight\"]):void 0}),n.each({margin:\"\",padding:\"\",border:\"Width\"},function(a,b){n.cssHooks[a+b]={expand:function(c){for(var d=0,e={},f=\"string\"==typeof c?c.split(\" \"):[c];4>d;d++)e[a+R[d]+b]=f[d]||f[d-2]||f[0];return e}},ub.test(a)||(n.cssHooks[a+b].set=Gb)}),n.fn.extend({css:function(a,b){return J(this,function(a,b,c){var d,e,f={},g=0;if(n.isArray(b)){for(d=wb(a),e=b.length;e>g;g++)f[b[g]]=n.css(a,b[g],!1,d);return f}return void 0!==c?n.style(a,b,c):n.css(a,b)},a,b,arguments.length>1)},show:function(){return Jb(this,!0)},hide:function(){return Jb(this)},toggle:function(a){return\"boolean\"==typeof a?a?this.show():this.hide():this.each(function(){S(this)?n(this).show():n(this).hide()})}});function Kb(a,b,c,d,e){return new Kb.prototype.init(a,b,c,d,e)}n.Tween=Kb,Kb.prototype={constructor:Kb,init:function(a,b,c,d,e,f){this.elem=a,this.prop=c,this.easing=e||\"swing\",this.options=b,this.start=this.now=this.cur(),this.end=d,this.unit=f||(n.cssNumber[c]?\"\":\"px\")},cur:function(){var a=Kb.propHooks[this.prop];return a&&a.get?a.get(this):Kb.propHooks._default.get(this)},run:function(a){var b,c=Kb.propHooks[this.prop];return this.pos=b=this.options.duration?n.easing[this.easing](a,this.options.duration*a,0,1,this.options.duration):a,this.now=(this.end-this.start)*b+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),c&&c.set?c.set(this):Kb.propHooks._default.set(this),this}},Kb.prototype.init.prototype=Kb.prototype,Kb.propHooks={_default:{get:function(a){var b;return null==a.elem[a.prop]||a.elem.style&&null!=a.elem.style[a.prop]?(b=n.css(a.elem,a.prop,\"\"),b&&\"auto\"!==b?b:0):a.elem[a.prop]},set:function(a){n.fx.step[a.prop]?n.fx.step[a.prop](a):a.elem.style&&(null!=a.elem.style[n.cssProps[a.prop]]||n.cssHooks[a.prop])?n.style(a.elem,a.prop,a.now+a.unit):a.elem[a.prop]=a.now}}},Kb.propHooks.scrollTop=Kb.propHooks.scrollLeft={set:function(a){a.elem.nodeType&&a.elem.parentNode&&(a.elem[a.prop]=a.now)}},n.easing={linear:function(a){return a},swing:function(a){return.5-Math.cos(a*Math.PI)/2}},n.fx=Kb.prototype.init,n.fx.step={};var Lb,Mb,Nb=/^(?:toggle|show|hide)$/,Ob=new RegExp(\"^(?:([+-])=|)(\"+Q+\")([a-z%]*)$\",\"i\"),Pb=/queueHooks$/,Qb=[Vb],Rb={\"*\":[function(a,b){var c=this.createTween(a,b),d=c.cur(),e=Ob.exec(b),f=e&&e[3]||(n.cssNumber[a]?\"\":\"px\"),g=(n.cssNumber[a]||\"px\"!==f&&+d)&&Ob.exec(n.css(c.elem,a)),h=1,i=20;if(g&&g[3]!==f){f=f||g[3],e=e||[],g=+d||1;do h=h||\".5\",g/=h,n.style(c.elem,a,g+f);while(h!==(h=c.cur()/d)&&1!==h&&--i)}return e&&(g=c.start=+g||+d||0,c.unit=f,c.end=e[1]?g+(e[1]+1)*e[2]:+e[2]),c}]};function Sb(){return setTimeout(function(){Lb=void 0}),Lb=n.now()}function Tb(a,b){var c,d=0,e={height:a};for(b=b?1:0;4>d;d+=2-b)c=R[d],e[\"margin\"+c]=e[\"padding\"+c]=a;return b&&(e.opacity=e.width=a),e}function Ub(a,b,c){for(var d,e=(Rb[b]||[]).concat(Rb[\"*\"]),f=0,g=e.length;g>f;f++)if(d=e[f].call(c,b,a))return d}function Vb(a,b,c){var d,e,f,g,h,i,j,k,l=this,m={},o=a.style,p=a.nodeType&&S(a),q=L.get(a,\"fxshow\");c.queue||(h=n._queueHooks(a,\"fx\"),null==h.unqueued&&(h.unqueued=0,i=h.empty.fire,h.empty.fire=function(){h.unqueued||i()}),h.unqueued++,l.always(function(){l.always(function(){h.unqueued--,n.queue(a,\"fx\").length||h.empty.fire()})})),1===a.nodeType&&(\"height\"in b||\"width\"in b)&&(c.overflow=[o.overflow,o.overflowX,o.overflowY],j=n.css(a,\"display\"),k=\"none\"===j?L.get(a,\"olddisplay\")||tb(a.nodeName):j,\"inline\"===k&&\"none\"===n.css(a,\"float\")&&(o.display=\"inline-block\")),c.overflow&&(o.overflow=\"hidden\",l.always(function(){o.overflow=c.overflow[0],o.overflowX=c.overflow[1],o.overflowY=c.overflow[2]}));for(d in b)if(e=b[d],Nb.exec(e)){if(delete b[d],f=f||\"toggle\"===e,e===(p?\"hide\":\"show\")){if(\"show\"!==e||!q||void 0===q[d])continue;p=!0}m[d]=q&&q[d]||n.style(a,d)}else j=void 0;if(n.isEmptyObject(m))\"inline\"===(\"none\"===j?tb(a.nodeName):j)&&(o.display=j);else{q?\"hidden\"in q&&(p=q.hidden):q=L.access(a,\"fxshow\",{}),f&&(q.hidden=!p),p?n(a).show():l.done(function(){n(a).hide()}),l.done(function(){var b;L.remove(a,\"fxshow\");for(b in m)n.style(a,b,m[b])});for(d in m)g=Ub(p?q[d]:0,d,l),d in q||(q[d]=g.start,p&&(g.end=g.start,g.start=\"width\"===d||\"height\"===d?1:0))}}function Wb(a,b){var c,d,e,f,g;for(c in a)if(d=n.camelCase(c),e=b[d],f=a[c],n.isArray(f)&&(e=f[1],f=a[c]=f[0]),c!==d&&(a[d]=f,delete a[c]),g=n.cssHooks[d],g&&\"expand\"in g){f=g.expand(f),delete a[d];for(c in f)c in a||(a[c]=f[c],b[c]=e)}else b[d]=e}function Xb(a,b,c){var d,e,f=0,g=Qb.length,h=n.Deferred().always(function(){delete i.elem}),i=function(){if(e)return!1;for(var b=Lb||Sb(),c=Math.max(0,j.startTime+j.duration-b),d=c/j.duration||0,f=1-d,g=0,i=j.tweens.length;i>g;g++)j.tweens[g].run(f);return h.notifyWith(a,[j,f,c]),1>f&&i?c:(h.resolveWith(a,[j]),!1)},j=h.promise({elem:a,props:n.extend({},b),opts:n.extend(!0,{specialEasing:{}},c),originalProperties:b,originalOptions:c,startTime:Lb||Sb(),duration:c.duration,tweens:[],createTween:function(b,c){var d=n.Tween(a,j.opts,b,c,j.opts.specialEasing[b]||j.opts.easing);return j.tweens.push(d),d},stop:function(b){var c=0,d=b?j.tweens.length:0;if(e)return this;for(e=!0;d>c;c++)j.tweens[c].run(1);return b?h.resolveWith(a,[j,b]):h.rejectWith(a,[j,b]),this}}),k=j.props;for(Wb(k,j.opts.specialEasing);g>f;f++)if(d=Qb[f].call(j,a,k,j.opts))return d;return n.map(k,Ub,j),n.isFunction(j.opts.start)&&j.opts.start.call(a,j),n.fx.timer(n.extend(i,{elem:a,anim:j,queue:j.opts.queue})),j.progress(j.opts.progress).done(j.opts.done,j.opts.complete).fail(j.opts.fail).always(j.opts.always)}n.Animation=n.extend(Xb,{tweener:function(a,b){n.isFunction(a)?(b=a,a=[\"*\"]):a=a.split(\" \");for(var c,d=0,e=a.length;e>d;d++)c=a[d],Rb[c]=Rb[c]||[],Rb[c].unshift(b)},prefilter:function(a,b){b?Qb.unshift(a):Qb.push(a)}}),n.speed=function(a,b,c){var d=a&&\"object\"==typeof a?n.extend({},a):{complete:c||!c&&b||n.isFunction(a)&&a,duration:a,easing:c&&b||b&&!n.isFunction(b)&&b};return d.duration=n.fx.off?0:\"number\"==typeof d.duration?d.duration:d.duration in n.fx.speeds?n.fx.speeds[d.duration]:n.fx.speeds._default,(null==d.queue||d.queue===!0)&&(d.queue=\"fx\"),d.old=d.complete,d.complete=function(){n.isFunction(d.old)&&d.old.call(this),d.queue&&n.dequeue(this,d.queue)},d},n.fn.extend({fadeTo:function(a,b,c,d){return this.filter(S).css(\"opacity\",0).show().end().animate({opacity:b},a,c,d)},animate:function(a,b,c,d){var e=n.isEmptyObject(a),f=n.speed(b,c,d),g=function(){var b=Xb(this,n.extend({},a),f);(e||L.get(this,\"finish\"))&&b.stop(!0)};return g.finish=g,e||f.queue===!1?this.each(g):this.queue(f.queue,g)},stop:function(a,b,c){var d=function(a){var b=a.stop;delete a.stop,b(c)};return\"string\"!=typeof a&&(c=b,b=a,a=void 0),b&&a!==!1&&this.queue(a||\"fx\",[]),this.each(function(){var b=!0,e=null!=a&&a+\"queueHooks\",f=n.timers,g=L.get(this);if(e)g[e]&&g[e].stop&&d(g[e]);else for(e in g)g[e]&&g[e].stop&&Pb.test(e)&&d(g[e]);for(e=f.length;e--;)f[e].elem!==this||null!=a&&f[e].queue!==a||(f[e].anim.stop(c),b=!1,f.splice(e,1));(b||!c)&&n.dequeue(this,a)})},finish:function(a){return a!==!1&&(a=a||\"fx\"),this.each(function(){var b,c=L.get(this),d=c[a+\"queue\"],e=c[a+\"queueHooks\"],f=n.timers,g=d?d.length:0;for(c.finish=!0,n.queue(this,a,[]),e&&e.stop&&e.stop.call(this,!0),b=f.length;b--;)f[b].elem===this&&f[b].queue===a&&(f[b].anim.stop(!0),f.splice(b,1));for(b=0;g>b;b++)d[b]&&d[b].finish&&d[b].finish.call(this);delete c.finish})}}),n.each([\"toggle\",\"show\",\"hide\"],function(a,b){var c=n.fn[b];n.fn[b]=function(a,d,e){return null==a||\"boolean\"==typeof a?c.apply(this,arguments):this.animate(Tb(b,!0),a,d,e)}}),n.each({slideDown:Tb(\"show\"),slideUp:Tb(\"hide\"),slideToggle:Tb(\"toggle\"),fadeIn:{opacity:\"show\"},fadeOut:{opacity:\"hide\"},fadeToggle:{opacity:\"toggle\"}},function(a,b){n.fn[a]=function(a,c,d){return this.animate(b,a,c,d)}}),n.timers=[],n.fx.tick=function(){var a,b=0,c=n.timers;for(Lb=n.now();b<c.length;b++)a=c[b],a()||c[b]!==a||c.splice(b--,1);c.length||n.fx.stop(),Lb=void 0},n.fx.timer=function(a){n.timers.push(a),a()?n.fx.start():n.timers.pop()},n.fx.interval=13,n.fx.start=function(){Mb||(Mb=setInterval(n.fx.tick,n.fx.interval))},n.fx.stop=function(){clearInterval(Mb),Mb=null},n.fx.speeds={slow:600,fast:200,_default:400},n.fn.delay=function(a,b){return a=n.fx?n.fx.speeds[a]||a:a,b=b||\"fx\",this.queue(b,function(b,c){var d=setTimeout(b,a);c.stop=function(){clearTimeout(d)}})},function(){var a=l.createElement(\"input\"),b=l.createElement(\"select\"),c=b.appendChild(l.createElement(\"option\"));a.type=\"checkbox\",k.checkOn=\"\"!==a.value,k.optSelected=c.selected,b.disabled=!0,k.optDisabled=!c.disabled,a=l.createElement(\"input\"),a.value=\"t\",a.type=\"radio\",k.radioValue=\"t\"===a.value}();var Yb,Zb,$b=n.expr.attrHandle;n.fn.extend({attr:function(a,b){return J(this,n.attr,a,b,arguments.length>1)},removeAttr:function(a){return this.each(function(){n.removeAttr(this,a)})}}),n.extend({attr:function(a,b,c){var d,e,f=a.nodeType;if(a&&3!==f&&8!==f&&2!==f)return typeof a.getAttribute===U?n.prop(a,b,c):(1===f&&n.isXMLDoc(a)||(b=b.toLowerCase(),d=n.attrHooks[b]||(n.expr.match.bool.test(b)?Zb:Yb)),void 0===c?d&&\"get\"in d&&null!==(e=d.get(a,b))?e:(e=n.find.attr(a,b),null==e?void 0:e):null!==c?d&&\"set\"in d&&void 0!==(e=d.set(a,c,b))?e:(a.setAttribute(b,c+\"\"),c):void n.removeAttr(a,b))\n},removeAttr:function(a,b){var c,d,e=0,f=b&&b.match(E);if(f&&1===a.nodeType)while(c=f[e++])d=n.propFix[c]||c,n.expr.match.bool.test(c)&&(a[d]=!1),a.removeAttribute(c)},attrHooks:{type:{set:function(a,b){if(!k.radioValue&&\"radio\"===b&&n.nodeName(a,\"input\")){var c=a.value;return a.setAttribute(\"type\",b),c&&(a.value=c),b}}}}}),Zb={set:function(a,b,c){return b===!1?n.removeAttr(a,c):a.setAttribute(c,c),c}},n.each(n.expr.match.bool.source.match(/\\w+/g),function(a,b){var c=$b[b]||n.find.attr;$b[b]=function(a,b,d){var e,f;return d||(f=$b[b],$b[b]=e,e=null!=c(a,b,d)?b.toLowerCase():null,$b[b]=f),e}});var _b=/^(?:input|select|textarea|button)$/i;n.fn.extend({prop:function(a,b){return J(this,n.prop,a,b,arguments.length>1)},removeProp:function(a){return this.each(function(){delete this[n.propFix[a]||a]})}}),n.extend({propFix:{\"for\":\"htmlFor\",\"class\":\"className\"},prop:function(a,b,c){var d,e,f,g=a.nodeType;if(a&&3!==g&&8!==g&&2!==g)return f=1!==g||!n.isXMLDoc(a),f&&(b=n.propFix[b]||b,e=n.propHooks[b]),void 0!==c?e&&\"set\"in e&&void 0!==(d=e.set(a,c,b))?d:a[b]=c:e&&\"get\"in e&&null!==(d=e.get(a,b))?d:a[b]},propHooks:{tabIndex:{get:function(a){return a.hasAttribute(\"tabindex\")||_b.test(a.nodeName)||a.href?a.tabIndex:-1}}}}),k.optSelected||(n.propHooks.selected={get:function(a){var b=a.parentNode;return b&&b.parentNode&&b.parentNode.selectedIndex,null}}),n.each([\"tabIndex\",\"readOnly\",\"maxLength\",\"cellSpacing\",\"cellPadding\",\"rowSpan\",\"colSpan\",\"useMap\",\"frameBorder\",\"contentEditable\"],function(){n.propFix[this.toLowerCase()]=this});var ac=/[\\t\\r\\n\\f]/g;n.fn.extend({addClass:function(a){var b,c,d,e,f,g,h=\"string\"==typeof a&&a,i=0,j=this.length;if(n.isFunction(a))return this.each(function(b){n(this).addClass(a.call(this,b,this.className))});if(h)for(b=(a||\"\").match(E)||[];j>i;i++)if(c=this[i],d=1===c.nodeType&&(c.className?(\" \"+c.className+\" \").replace(ac,\" \"):\" \")){f=0;while(e=b[f++])d.indexOf(\" \"+e+\" \")<0&&(d+=e+\" \");g=n.trim(d),c.className!==g&&(c.className=g)}return this},removeClass:function(a){var b,c,d,e,f,g,h=0===arguments.length||\"string\"==typeof a&&a,i=0,j=this.length;if(n.isFunction(a))return this.each(function(b){n(this).removeClass(a.call(this,b,this.className))});if(h)for(b=(a||\"\").match(E)||[];j>i;i++)if(c=this[i],d=1===c.nodeType&&(c.className?(\" \"+c.className+\" \").replace(ac,\" \"):\"\")){f=0;while(e=b[f++])while(d.indexOf(\" \"+e+\" \")>=0)d=d.replace(\" \"+e+\" \",\" \");g=a?n.trim(d):\"\",c.className!==g&&(c.className=g)}return this},toggleClass:function(a,b){var c=typeof a;return\"boolean\"==typeof b&&\"string\"===c?b?this.addClass(a):this.removeClass(a):this.each(n.isFunction(a)?function(c){n(this).toggleClass(a.call(this,c,this.className,b),b)}:function(){if(\"string\"===c){var b,d=0,e=n(this),f=a.match(E)||[];while(b=f[d++])e.hasClass(b)?e.removeClass(b):e.addClass(b)}else(c===U||\"boolean\"===c)&&(this.className&&L.set(this,\"__className__\",this.className),this.className=this.className||a===!1?\"\":L.get(this,\"__className__\")||\"\")})},hasClass:function(a){for(var b=\" \"+a+\" \",c=0,d=this.length;d>c;c++)if(1===this[c].nodeType&&(\" \"+this[c].className+\" \").replace(ac,\" \").indexOf(b)>=0)return!0;return!1}});var bc=/\\r/g;n.fn.extend({val:function(a){var b,c,d,e=this[0];{if(arguments.length)return d=n.isFunction(a),this.each(function(c){var e;1===this.nodeType&&(e=d?a.call(this,c,n(this).val()):a,null==e?e=\"\":\"number\"==typeof e?e+=\"\":n.isArray(e)&&(e=n.map(e,function(a){return null==a?\"\":a+\"\"})),b=n.valHooks[this.type]||n.valHooks[this.nodeName.toLowerCase()],b&&\"set\"in b&&void 0!==b.set(this,e,\"value\")||(this.value=e))});if(e)return b=n.valHooks[e.type]||n.valHooks[e.nodeName.toLowerCase()],b&&\"get\"in b&&void 0!==(c=b.get(e,\"value\"))?c:(c=e.value,\"string\"==typeof c?c.replace(bc,\"\"):null==c?\"\":c)}}}),n.extend({valHooks:{option:{get:function(a){var b=n.find.attr(a,\"value\");return null!=b?b:n.trim(n.text(a))}},select:{get:function(a){for(var b,c,d=a.options,e=a.selectedIndex,f=\"select-one\"===a.type||0>e,g=f?null:[],h=f?e+1:d.length,i=0>e?h:f?e:0;h>i;i++)if(c=d[i],!(!c.selected&&i!==e||(k.optDisabled?c.disabled:null!==c.getAttribute(\"disabled\"))||c.parentNode.disabled&&n.nodeName(c.parentNode,\"optgroup\"))){if(b=n(c).val(),f)return b;g.push(b)}return g},set:function(a,b){var c,d,e=a.options,f=n.makeArray(b),g=e.length;while(g--)d=e[g],(d.selected=n.inArray(d.value,f)>=0)&&(c=!0);return c||(a.selectedIndex=-1),f}}}}),n.each([\"radio\",\"checkbox\"],function(){n.valHooks[this]={set:function(a,b){return n.isArray(b)?a.checked=n.inArray(n(a).val(),b)>=0:void 0}},k.checkOn||(n.valHooks[this].get=function(a){return null===a.getAttribute(\"value\")?\"on\":a.value})}),n.each(\"blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu\".split(\" \"),function(a,b){n.fn[b]=function(a,c){return arguments.length>0?this.on(b,null,a,c):this.trigger(b)}}),n.fn.extend({hover:function(a,b){return this.mouseenter(a).mouseleave(b||a)},bind:function(a,b,c){return this.on(a,null,b,c)},unbind:function(a,b){return this.off(a,null,b)},delegate:function(a,b,c,d){return this.on(b,a,c,d)},undelegate:function(a,b,c){return 1===arguments.length?this.off(a,\"**\"):this.off(b,a||\"**\",c)}});var cc=n.now(),dc=/\\?/;n.parseJSON=function(a){return JSON.parse(a+\"\")},n.parseXML=function(a){var b,c;if(!a||\"string\"!=typeof a)return null;try{c=new DOMParser,b=c.parseFromString(a,\"text/xml\")}catch(d){b=void 0}return(!b||b.getElementsByTagName(\"parsererror\").length)&&n.error(\"Invalid XML: \"+a),b};var ec=/#.*$/,fc=/([?&])_=[^&]*/,gc=/^(.*?):[ \\t]*([^\\r\\n]*)$/gm,hc=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,ic=/^(?:GET|HEAD)$/,jc=/^\\/\\//,kc=/^([\\w.+-]+:)(?:\\/\\/(?:[^\\/?#]*@|)([^\\/?#:]*)(?::(\\d+)|)|)/,lc={},mc={},nc=\"*/\".concat(\"*\"),oc=a.location.href,pc=kc.exec(oc.toLowerCase())||[];function qc(a){return function(b,c){\"string\"!=typeof b&&(c=b,b=\"*\");var d,e=0,f=b.toLowerCase().match(E)||[];if(n.isFunction(c))while(d=f[e++])\"+\"===d[0]?(d=d.slice(1)||\"*\",(a[d]=a[d]||[]).unshift(c)):(a[d]=a[d]||[]).push(c)}}function rc(a,b,c,d){var e={},f=a===mc;function g(h){var i;return e[h]=!0,n.each(a[h]||[],function(a,h){var j=h(b,c,d);return\"string\"!=typeof j||f||e[j]?f?!(i=j):void 0:(b.dataTypes.unshift(j),g(j),!1)}),i}return g(b.dataTypes[0])||!e[\"*\"]&&g(\"*\")}function sc(a,b){var c,d,e=n.ajaxSettings.flatOptions||{};for(c in b)void 0!==b[c]&&((e[c]?a:d||(d={}))[c]=b[c]);return d&&n.extend(!0,a,d),a}function tc(a,b,c){var d,e,f,g,h=a.contents,i=a.dataTypes;while(\"*\"===i[0])i.shift(),void 0===d&&(d=a.mimeType||b.getResponseHeader(\"Content-Type\"));if(d)for(e in h)if(h[e]&&h[e].test(d)){i.unshift(e);break}if(i[0]in c)f=i[0];else{for(e in c){if(!i[0]||a.converters[e+\" \"+i[0]]){f=e;break}g||(g=e)}f=f||g}return f?(f!==i[0]&&i.unshift(f),c[f]):void 0}function uc(a,b,c,d){var e,f,g,h,i,j={},k=a.dataTypes.slice();if(k[1])for(g in a.converters)j[g.toLowerCase()]=a.converters[g];f=k.shift();while(f)if(a.responseFields[f]&&(c[a.responseFields[f]]=b),!i&&d&&a.dataFilter&&(b=a.dataFilter(b,a.dataType)),i=f,f=k.shift())if(\"*\"===f)f=i;else if(\"*\"!==i&&i!==f){if(g=j[i+\" \"+f]||j[\"* \"+f],!g)for(e in j)if(h=e.split(\" \"),h[1]===f&&(g=j[i+\" \"+h[0]]||j[\"* \"+h[0]])){g===!0?g=j[e]:j[e]!==!0&&(f=h[0],k.unshift(h[1]));break}if(g!==!0)if(g&&a[\"throws\"])b=g(b);else try{b=g(b)}catch(l){return{state:\"parsererror\",error:g?l:\"No conversion from \"+i+\" to \"+f}}}return{state:\"success\",data:b}}n.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:oc,type:\"GET\",isLocal:hc.test(pc[1]),global:!0,processData:!0,async:!0,contentType:\"application/x-www-form-urlencoded; charset=UTF-8\",accepts:{\"*\":nc,text:\"text/plain\",html:\"text/html\",xml:\"application/xml, text/xml\",json:\"application/json, text/javascript\"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:\"responseXML\",text:\"responseText\",json:\"responseJSON\"},converters:{\"* text\":String,\"text html\":!0,\"text json\":n.parseJSON,\"text xml\":n.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(a,b){return b?sc(sc(a,n.ajaxSettings),b):sc(n.ajaxSettings,a)},ajaxPrefilter:qc(lc),ajaxTransport:qc(mc),ajax:function(a,b){\"object\"==typeof a&&(b=a,a=void 0),b=b||{};var c,d,e,f,g,h,i,j,k=n.ajaxSetup({},b),l=k.context||k,m=k.context&&(l.nodeType||l.jquery)?n(l):n.event,o=n.Deferred(),p=n.Callbacks(\"once memory\"),q=k.statusCode||{},r={},s={},t=0,u=\"canceled\",v={readyState:0,getResponseHeader:function(a){var b;if(2===t){if(!f){f={};while(b=gc.exec(e))f[b[1].toLowerCase()]=b[2]}b=f[a.toLowerCase()]}return null==b?null:b},getAllResponseHeaders:function(){return 2===t?e:null},setRequestHeader:function(a,b){var c=a.toLowerCase();return t||(a=s[c]=s[c]||a,r[a]=b),this},overrideMimeType:function(a){return t||(k.mimeType=a),this},statusCode:function(a){var b;if(a)if(2>t)for(b in a)q[b]=[q[b],a[b]];else v.always(a[v.status]);return this},abort:function(a){var b=a||u;return c&&c.abort(b),x(0,b),this}};if(o.promise(v).complete=p.add,v.success=v.done,v.error=v.fail,k.url=((a||k.url||oc)+\"\").replace(ec,\"\").replace(jc,pc[1]+\"//\"),k.type=b.method||b.type||k.method||k.type,k.dataTypes=n.trim(k.dataType||\"*\").toLowerCase().match(E)||[\"\"],null==k.crossDomain&&(h=kc.exec(k.url.toLowerCase()),k.crossDomain=!(!h||h[1]===pc[1]&&h[2]===pc[2]&&(h[3]||(\"http:\"===h[1]?\"80\":\"443\"))===(pc[3]||(\"http:\"===pc[1]?\"80\":\"443\")))),k.data&&k.processData&&\"string\"!=typeof k.data&&(k.data=n.param(k.data,k.traditional)),rc(lc,k,b,v),2===t)return v;i=n.event&&k.global,i&&0===n.active++&&n.event.trigger(\"ajaxStart\"),k.type=k.type.toUpperCase(),k.hasContent=!ic.test(k.type),d=k.url,k.hasContent||(k.data&&(d=k.url+=(dc.test(d)?\"&\":\"?\")+k.data,delete k.data),k.cache===!1&&(k.url=fc.test(d)?d.replace(fc,\"$1_=\"+cc++):d+(dc.test(d)?\"&\":\"?\")+\"_=\"+cc++)),k.ifModified&&(n.lastModified[d]&&v.setRequestHeader(\"If-Modified-Since\",n.lastModified[d]),n.etag[d]&&v.setRequestHeader(\"If-None-Match\",n.etag[d])),(k.data&&k.hasContent&&k.contentType!==!1||b.contentType)&&v.setRequestHeader(\"Content-Type\",k.contentType),v.setRequestHeader(\"Accept\",k.dataTypes[0]&&k.accepts[k.dataTypes[0]]?k.accepts[k.dataTypes[0]]+(\"*\"!==k.dataTypes[0]?\", \"+nc+\"; q=0.01\":\"\"):k.accepts[\"*\"]);for(j in k.headers)v.setRequestHeader(j,k.headers[j]);if(k.beforeSend&&(k.beforeSend.call(l,v,k)===!1||2===t))return v.abort();u=\"abort\";for(j in{success:1,error:1,complete:1})v[j](k[j]);if(c=rc(mc,k,b,v)){v.readyState=1,i&&m.trigger(\"ajaxSend\",[v,k]),k.async&&k.timeout>0&&(g=setTimeout(function(){v.abort(\"timeout\")},k.timeout));try{t=1,c.send(r,x)}catch(w){if(!(2>t))throw w;x(-1,w)}}else x(-1,\"No Transport\");function x(a,b,f,h){var j,r,s,u,w,x=b;2!==t&&(t=2,g&&clearTimeout(g),c=void 0,e=h||\"\",v.readyState=a>0?4:0,j=a>=200&&300>a||304===a,f&&(u=tc(k,v,f)),u=uc(k,u,v,j),j?(k.ifModified&&(w=v.getResponseHeader(\"Last-Modified\"),w&&(n.lastModified[d]=w),w=v.getResponseHeader(\"etag\"),w&&(n.etag[d]=w)),204===a||\"HEAD\"===k.type?x=\"nocontent\":304===a?x=\"notmodified\":(x=u.state,r=u.data,s=u.error,j=!s)):(s=x,(a||!x)&&(x=\"error\",0>a&&(a=0))),v.status=a,v.statusText=(b||x)+\"\",j?o.resolveWith(l,[r,x,v]):o.rejectWith(l,[v,x,s]),v.statusCode(q),q=void 0,i&&m.trigger(j?\"ajaxSuccess\":\"ajaxError\",[v,k,j?r:s]),p.fireWith(l,[v,x]),i&&(m.trigger(\"ajaxComplete\",[v,k]),--n.active||n.event.trigger(\"ajaxStop\")))}return v},getJSON:function(a,b,c){return n.get(a,b,c,\"json\")},getScript:function(a,b){return n.get(a,void 0,b,\"script\")}}),n.each([\"get\",\"post\"],function(a,b){n[b]=function(a,c,d,e){return n.isFunction(c)&&(e=e||d,d=c,c=void 0),n.ajax({url:a,type:b,dataType:e,data:c,success:d})}}),n._evalUrl=function(a){return n.ajax({url:a,type:\"GET\",dataType:\"script\",async:!1,global:!1,\"throws\":!0})},n.fn.extend({wrapAll:function(a){var b;return n.isFunction(a)?this.each(function(b){n(this).wrapAll(a.call(this,b))}):(this[0]&&(b=n(a,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&b.insertBefore(this[0]),b.map(function(){var a=this;while(a.firstElementChild)a=a.firstElementChild;return a}).append(this)),this)},wrapInner:function(a){return this.each(n.isFunction(a)?function(b){n(this).wrapInner(a.call(this,b))}:function(){var b=n(this),c=b.contents();c.length?c.wrapAll(a):b.append(a)})},wrap:function(a){var b=n.isFunction(a);return this.each(function(c){n(this).wrapAll(b?a.call(this,c):a)})},unwrap:function(){return this.parent().each(function(){n.nodeName(this,\"body\")||n(this).replaceWith(this.childNodes)}).end()}}),n.expr.filters.hidden=function(a){return a.offsetWidth<=0&&a.offsetHeight<=0},n.expr.filters.visible=function(a){return!n.expr.filters.hidden(a)};var vc=/%20/g,wc=/\\[\\]$/,xc=/\\r?\\n/g,yc=/^(?:submit|button|image|reset|file)$/i,zc=/^(?:input|select|textarea|keygen)/i;function Ac(a,b,c,d){var e;if(n.isArray(b))n.each(b,function(b,e){c||wc.test(a)?d(a,e):Ac(a+\"[\"+(\"object\"==typeof e?b:\"\")+\"]\",e,c,d)});else if(c||\"object\"!==n.type(b))d(a,b);else for(e in b)Ac(a+\"[\"+e+\"]\",b[e],c,d)}n.param=function(a,b){var c,d=[],e=function(a,b){b=n.isFunction(b)?b():null==b?\"\":b,d[d.length]=encodeURIComponent(a)+\"=\"+encodeURIComponent(b)};if(void 0===b&&(b=n.ajaxSettings&&n.ajaxSettings.traditional),n.isArray(a)||a.jquery&&!n.isPlainObject(a))n.each(a,function(){e(this.name,this.value)});else for(c in a)Ac(c,a[c],b,e);return d.join(\"&\").replace(vc,\"+\")},n.fn.extend({serialize:function(){return n.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var a=n.prop(this,\"elements\");return a?n.makeArray(a):this}).filter(function(){var a=this.type;return this.name&&!n(this).is(\":disabled\")&&zc.test(this.nodeName)&&!yc.test(a)&&(this.checked||!T.test(a))}).map(function(a,b){var c=n(this).val();return null==c?null:n.isArray(c)?n.map(c,function(a){return{name:b.name,value:a.replace(xc,\"\\r\\n\")}}):{name:b.name,value:c.replace(xc,\"\\r\\n\")}}).get()}}),n.ajaxSettings.xhr=function(){try{return new XMLHttpRequest}catch(a){}};var Bc=0,Cc={},Dc={0:200,1223:204},Ec=n.ajaxSettings.xhr();a.attachEvent&&a.attachEvent(\"onunload\",function(){for(var a in Cc)Cc[a]()}),k.cors=!!Ec&&\"withCredentials\"in Ec,k.ajax=Ec=!!Ec,n.ajaxTransport(function(a){var b;return k.cors||Ec&&!a.crossDomain?{send:function(c,d){var e,f=a.xhr(),g=++Bc;if(f.open(a.type,a.url,a.async,a.username,a.password),a.xhrFields)for(e in a.xhrFields)f[e]=a.xhrFields[e];a.mimeType&&f.overrideMimeType&&f.overrideMimeType(a.mimeType),a.crossDomain||c[\"X-Requested-With\"]||(c[\"X-Requested-With\"]=\"XMLHttpRequest\");for(e in c)f.setRequestHeader(e,c[e]);b=function(a){return function(){b&&(delete Cc[g],b=f.onload=f.onerror=null,\"abort\"===a?f.abort():\"error\"===a?d(f.status,f.statusText):d(Dc[f.status]||f.status,f.statusText,\"string\"==typeof f.responseText?{text:f.responseText}:void 0,f.getAllResponseHeaders()))}},f.onload=b(),f.onerror=b(\"error\"),b=Cc[g]=b(\"abort\");try{f.send(a.hasContent&&a.data||null)}catch(h){if(b)throw h}},abort:function(){b&&b()}}:void 0}),n.ajaxSetup({accepts:{script:\"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript\"},contents:{script:/(?:java|ecma)script/},converters:{\"text script\":function(a){return n.globalEval(a),a}}}),n.ajaxPrefilter(\"script\",function(a){void 0===a.cache&&(a.cache=!1),a.crossDomain&&(a.type=\"GET\")}),n.ajaxTransport(\"script\",function(a){if(a.crossDomain){var b,c;return{send:function(d,e){b=n(\"<script>\").prop({async:!0,charset:a.scriptCharset,src:a.url}).on(\"load error\",c=function(a){b.remove(),c=null,a&&e(\"error\"===a.type?404:200,a.type)}),l.head.appendChild(b[0])},abort:function(){c&&c()}}}});var Fc=[],Gc=/(=)\\?(?=&|$)|\\?\\?/;n.ajaxSetup({jsonp:\"callback\",jsonpCallback:function(){var a=Fc.pop()||n.expando+\"_\"+cc++;return this[a]=!0,a}}),n.ajaxPrefilter(\"json jsonp\",function(b,c,d){var e,f,g,h=b.jsonp!==!1&&(Gc.test(b.url)?\"url\":\"string\"==typeof b.data&&!(b.contentType||\"\").indexOf(\"application/x-www-form-urlencoded\")&&Gc.test(b.data)&&\"data\");return h||\"jsonp\"===b.dataTypes[0]?(e=b.jsonpCallback=n.isFunction(b.jsonpCallback)?b.jsonpCallback():b.jsonpCallback,h?b[h]=b[h].replace(Gc,\"$1\"+e):b.jsonp!==!1&&(b.url+=(dc.test(b.url)?\"&\":\"?\")+b.jsonp+\"=\"+e),b.converters[\"script json\"]=function(){return g||n.error(e+\" was not called\"),g[0]},b.dataTypes[0]=\"json\",f=a[e],a[e]=function(){g=arguments},d.always(function(){a[e]=f,b[e]&&(b.jsonpCallback=c.jsonpCallback,Fc.push(e)),g&&n.isFunction(f)&&f(g[0]),g=f=void 0}),\"script\"):void 0}),n.parseHTML=function(a,b,c){if(!a||\"string\"!=typeof a)return null;\"boolean\"==typeof b&&(c=b,b=!1),b=b||l;var d=v.exec(a),e=!c&&[];return d?[b.createElement(d[1])]:(d=n.buildFragment([a],b,e),e&&e.length&&n(e).remove(),n.merge([],d.childNodes))};var Hc=n.fn.load;n.fn.load=function(a,b,c){if(\"string\"!=typeof a&&Hc)return Hc.apply(this,arguments);var d,e,f,g=this,h=a.indexOf(\" \");return h>=0&&(d=n.trim(a.slice(h)),a=a.slice(0,h)),n.isFunction(b)?(c=b,b=void 0):b&&\"object\"==typeof b&&(e=\"POST\"),g.length>0&&n.ajax({url:a,type:e,dataType:\"html\",data:b}).done(function(a){f=arguments,g.html(d?n(\"<div>\").append(n.parseHTML(a)).find(d):a)}).complete(c&&function(a,b){g.each(c,f||[a.responseText,b,a])}),this},n.each([\"ajaxStart\",\"ajaxStop\",\"ajaxComplete\",\"ajaxError\",\"ajaxSuccess\",\"ajaxSend\"],function(a,b){n.fn[b]=function(a){return this.on(b,a)}}),n.expr.filters.animated=function(a){return n.grep(n.timers,function(b){return a===b.elem}).length};var Ic=a.document.documentElement;function Jc(a){return n.isWindow(a)?a:9===a.nodeType&&a.defaultView}n.offset={setOffset:function(a,b,c){var d,e,f,g,h,i,j,k=n.css(a,\"position\"),l=n(a),m={};\"static\"===k&&(a.style.position=\"relative\"),h=l.offset(),f=n.css(a,\"top\"),i=n.css(a,\"left\"),j=(\"absolute\"===k||\"fixed\"===k)&&(f+i).indexOf(\"auto\")>-1,j?(d=l.position(),g=d.top,e=d.left):(g=parseFloat(f)||0,e=parseFloat(i)||0),n.isFunction(b)&&(b=b.call(a,c,h)),null!=b.top&&(m.top=b.top-h.top+g),null!=b.left&&(m.left=b.left-h.left+e),\"using\"in b?b.using.call(a,m):l.css(m)}},n.fn.extend({offset:function(a){if(arguments.length)return void 0===a?this:this.each(function(b){n.offset.setOffset(this,a,b)});var b,c,d=this[0],e={top:0,left:0},f=d&&d.ownerDocument;if(f)return b=f.documentElement,n.contains(b,d)?(typeof d.getBoundingClientRect!==U&&(e=d.getBoundingClientRect()),c=Jc(f),{top:e.top+c.pageYOffset-b.clientTop,left:e.left+c.pageXOffset-b.clientLeft}):e},position:function(){if(this[0]){var a,b,c=this[0],d={top:0,left:0};return\"fixed\"===n.css(c,\"position\")?b=c.getBoundingClientRect():(a=this.offsetParent(),b=this.offset(),n.nodeName(a[0],\"html\")||(d=a.offset()),d.top+=n.css(a[0],\"borderTopWidth\",!0),d.left+=n.css(a[0],\"borderLeftWidth\",!0)),{top:b.top-d.top-n.css(c,\"marginTop\",!0),left:b.left-d.left-n.css(c,\"marginLeft\",!0)}}},offsetParent:function(){return this.map(function(){var a=this.offsetParent||Ic;while(a&&!n.nodeName(a,\"html\")&&\"static\"===n.css(a,\"position\"))a=a.offsetParent;return a||Ic})}}),n.each({scrollLeft:\"pageXOffset\",scrollTop:\"pageYOffset\"},function(b,c){var d=\"pageYOffset\"===c;n.fn[b]=function(e){return J(this,function(b,e,f){var g=Jc(b);return void 0===f?g?g[c]:b[e]:void(g?g.scrollTo(d?a.pageXOffset:f,d?f:a.pageYOffset):b[e]=f)},b,e,arguments.length,null)}}),n.each([\"top\",\"left\"],function(a,b){n.cssHooks[b]=yb(k.pixelPosition,function(a,c){return c?(c=xb(a,b),vb.test(c)?n(a).position()[b]+\"px\":c):void 0})}),n.each({Height:\"height\",Width:\"width\"},function(a,b){n.each({padding:\"inner\"+a,content:b,\"\":\"outer\"+a},function(c,d){n.fn[d]=function(d,e){var f=arguments.length&&(c||\"boolean\"!=typeof d),g=c||(d===!0||e===!0?\"margin\":\"border\");return J(this,function(b,c,d){var e;return n.isWindow(b)?b.document.documentElement[\"client\"+a]:9===b.nodeType?(e=b.documentElement,Math.max(b.body[\"scroll\"+a],e[\"scroll\"+a],b.body[\"offset\"+a],e[\"offset\"+a],e[\"client\"+a])):void 0===d?n.css(b,c,g):n.style(b,c,d,g)},b,f?d:void 0,f,null)}})}),n.fn.size=function(){return this.length},n.fn.andSelf=n.fn.addBack,\"function\"==typeof define&&define.amd&&define(\"jquery\",[],function(){return n});var Kc=a.jQuery,Lc=a.$;return n.noConflict=function(b){return a.$===n&&(a.$=Lc),b&&a.jQuery===n&&(a.jQuery=Kc),n},typeof b===U&&(a.jQuery=a.$=n),n});\n"
			},
			{
				"name": "bootbox.min.js",
				"source": "/**\n * bootbox.js v4.4.0\n *\n * http://bootboxjs.com/license.txt\n */\n!function(a,b){\"use strict\";\"function\"==typeof define&&define.amd?define([\"jquery\"],b):\"object\"==typeof exports?module.exports=b(require(\"jquery\")):a.bootbox=b(a.jQuery)}(this,function a(b,c){\"use strict\";function d(a){var b=q[o.locale];return b?b[a]:q.en[a]}function e(a,c,d){a.stopPropagation(),a.preventDefault();var e=b.isFunction(d)&&d.call(c,a)===!1;e||c.modal(\"hide\")}function f(a){var b,c=0;for(b in a)c++;return c}function g(a,c){var d=0;b.each(a,function(a,b){c(a,b,d++)})}function h(a){var c,d;if(\"object\"!=typeof a)throw new Error(\"Please supply an object of options\");if(!a.message)throw new Error(\"Please specify a message\");return a=b.extend({},o,a),a.buttons||(a.buttons={}),c=a.buttons,d=f(c),g(c,function(a,e,f){if(b.isFunction(e)&&(e=c[a]={callback:e}),\"object\"!==b.type(e))throw new Error(\"button with key \"+a+\" must be an object\");e.label||(e.label=a),e.className||(e.className=2>=d&&f===d-1?\"btn-primary\":\"btn-default\")}),a}function i(a,b){var c=a.length,d={};if(1>c||c>2)throw new Error(\"Invalid argument length\");return 2===c||\"string\"==typeof a[0]?(d[b[0]]=a[0],d[b[1]]=a[1]):d=a[0],d}function j(a,c,d){return b.extend(!0,{},a,i(c,d))}function k(a,b,c,d){var e={className:\"bootbox-\"+a,buttons:l.apply(null,b)};return m(j(e,d,c),b)}function l(){for(var a={},b=0,c=arguments.length;c>b;b++){var e=arguments[b],f=e.toLowerCase(),g=e.toUpperCase();a[f]={label:d(g)}}return a}function m(a,b){var d={};return g(b,function(a,b){d[b]=!0}),g(a.buttons,function(a){if(d[a]===c)throw new Error(\"button key \"+a+\" is not allowed (options are \"+b.join(\"\\n\")+\")\")}),a}var n={dialog:\"<div class='bootbox modal' tabindex='-1' role='dialog'><div class='modal-dialog'><div class='modal-content'><div class='modal-body'><div class='bootbox-body'></div></div></div></div></div>\",header:\"<div class='modal-header'><h4 class='modal-title'></h4></div>\",footer:\"<div class='modal-footer'></div>\",closeButton:\"<button type='button' class='bootbox-close-button close' data-dismiss='modal' aria-hidden='true'>&times;</button>\",form:\"<form class='bootbox-form'></form>\",inputs:{text:\"<input class='bootbox-input bootbox-input-text form-control' autocomplete=off type=text />\",textarea:\"<textarea class='bootbox-input bootbox-input-textarea form-control'></textarea>\",email:\"<input class='bootbox-input bootbox-input-email form-control' autocomplete='off' type='email' />\",select:\"<select class='bootbox-input bootbox-input-select form-control'></select>\",checkbox:\"<div class='checkbox'><label><input class='bootbox-input bootbox-input-checkbox' type='checkbox' /></label></div>\",date:\"<input class='bootbox-input bootbox-input-date form-control' autocomplete=off type='date' />\",time:\"<input class='bootbox-input bootbox-input-time form-control' autocomplete=off type='time' />\",number:\"<input class='bootbox-input bootbox-input-number form-control' autocomplete=off type='number' />\",password:\"<input class='bootbox-input bootbox-input-password form-control' autocomplete='off' type='password' />\"}},o={locale:\"en\",backdrop:\"static\",animate:!0,className:null,closeButton:!0,show:!0,container:\"body\"},p={};p.alert=function(){var a;if(a=k(\"alert\",[\"ok\"],[\"message\",\"callback\"],arguments),a.callback&&!b.isFunction(a.callback))throw new Error(\"alert requires callback property to be a function when provided\");return a.buttons.ok.callback=a.onEscape=function(){return b.isFunction(a.callback)?a.callback.call(this):!0},p.dialog(a)},p.confirm=function(){var a;if(a=k(\"confirm\",[\"cancel\",\"confirm\"],[\"message\",\"callback\"],arguments),a.buttons.cancel.callback=a.onEscape=function(){return a.callback.call(this,!1)},a.buttons.confirm.callback=function(){return a.callback.call(this,!0)},!b.isFunction(a.callback))throw new Error(\"confirm requires a callback\");return p.dialog(a)},p.prompt=function(){var a,d,e,f,h,i,k;if(f=b(n.form),d={className:\"bootbox-prompt\",buttons:l(\"cancel\",\"confirm\"),value:\"\",inputType:\"text\"},a=m(j(d,arguments,[\"title\",\"callback\"]),[\"cancel\",\"confirm\"]),i=a.show===c?!0:a.show,a.message=f,a.buttons.cancel.callback=a.onEscape=function(){return a.callback.call(this,null)},a.buttons.confirm.callback=function(){var c;switch(a.inputType){case\"text\":case\"textarea\":case\"email\":case\"select\":case\"date\":case\"time\":case\"number\":case\"password\":c=h.val();break;case\"checkbox\":var d=h.find(\"input:checked\");c=[],g(d,function(a,d){c.push(b(d).val())})}return a.callback.call(this,c)},a.show=!1,!a.title)throw new Error(\"prompt requires a title\");if(!b.isFunction(a.callback))throw new Error(\"prompt requires a callback\");if(!n.inputs[a.inputType])throw new Error(\"invalid prompt type\");switch(h=b(n.inputs[a.inputType]),a.inputType){case\"text\":case\"textarea\":case\"email\":case\"date\":case\"time\":case\"number\":case\"password\":h.val(a.value);break;case\"select\":var o={};if(k=a.inputOptions||[],!b.isArray(k))throw new Error(\"Please pass an array of input options\");if(!k.length)throw new Error(\"prompt with select requires options\");g(k,function(a,d){var e=h;if(d.value===c||d.text===c)throw new Error(\"given options in wrong format\");d.group&&(o[d.group]||(o[d.group]=b(\"<optgroup/>\").attr(\"label\",d.group)),e=o[d.group]),e.append(\"<option value='\"+d.value+\"'>\"+d.text+\"</option>\")}),g(o,function(a,b){h.append(b)}),h.val(a.value);break;case\"checkbox\":var q=b.isArray(a.value)?a.value:[a.value];if(k=a.inputOptions||[],!k.length)throw new Error(\"prompt with checkbox requires options\");if(!k[0].value||!k[0].text)throw new Error(\"given options in wrong format\");h=b(\"<div/>\"),g(k,function(c,d){var e=b(n.inputs[a.inputType]);e.find(\"input\").attr(\"value\",d.value),e.find(\"label\").append(d.text),g(q,function(a,b){b===d.value&&e.find(\"input\").prop(\"checked\",!0)}),h.append(e)})}return a.placeholder&&h.attr(\"placeholder\",a.placeholder),a.pattern&&h.attr(\"pattern\",a.pattern),a.maxlength&&h.attr(\"maxlength\",a.maxlength),f.append(h),f.on(\"submit\",function(a){a.preventDefault(),a.stopPropagation(),e.find(\".btn-primary\").click()}),e=p.dialog(a),e.off(\"shown.bs.modal\"),e.on(\"shown.bs.modal\",function(){h.focus()}),i===!0&&e.modal(\"show\"),e},p.dialog=function(a){a=h(a);var d=b(n.dialog),f=d.find(\".modal-dialog\"),i=d.find(\".modal-body\"),j=a.buttons,k=\"\",l={onEscape:a.onEscape};if(b.fn.modal===c)throw new Error(\"$.fn.modal is not defined; please double check you have included the Bootstrap JavaScript library. See http://getbootstrap.com/javascript/ for more details.\");if(g(j,function(a,b){k+=\"<button data-bb-handler='\"+a+\"' type='button' class='btn \"+b.className+\"'>\"+b.label+\"</button>\",l[a]=b.callback}),i.find(\".bootbox-body\").html(a.message),a.animate===!0&&d.addClass(\"fade\"),a.className&&d.addClass(a.className),\"large\"===a.size?f.addClass(\"modal-lg\"):\"small\"===a.size&&f.addClass(\"modal-sm\"),a.title&&i.before(n.header),a.closeButton){var m=b(n.closeButton);a.title?d.find(\".modal-header\").prepend(m):m.css(\"margin-top\",\"-10px\").prependTo(i)}return a.title&&d.find(\".modal-title\").html(a.title),k.length&&(i.after(n.footer),d.find(\".modal-footer\").html(k)),d.on(\"hidden.bs.modal\",function(a){a.target===this&&d.remove()}),d.on(\"shown.bs.modal\",function(){d.find(\".btn-primary:first\").focus()}),\"static\"!==a.backdrop&&d.on(\"click.dismiss.bs.modal\",function(a){d.children(\".modal-backdrop\").length&&(a.currentTarget=d.children(\".modal-backdrop\").get(0)),a.target===a.currentTarget&&d.trigger(\"escape.close.bb\")}),d.on(\"escape.close.bb\",function(a){l.onEscape&&e(a,d,l.onEscape)}),d.on(\"click\",\".modal-footer button\",function(a){var c=b(this).data(\"bb-handler\");e(a,d,l[c])}),d.on(\"click\",\".bootbox-close-button\",function(a){e(a,d,l.onEscape)}),d.on(\"keyup\",function(a){27===a.which&&d.trigger(\"escape.close.bb\")}),b(a.container).append(d),d.modal({backdrop:a.backdrop?\"static\":!1,keyboard:!1,show:!1}),a.show&&d.modal(\"show\"),d},p.setDefaults=function(){var a={};2===arguments.length?a[arguments[0]]=arguments[1]:a=arguments[0],b.extend(o,a)},p.hideAll=function(){return b(\".bootbox\").modal(\"hide\"),p};var q={bg_BG:{OK:\"\",CANCEL:\"\",CONFIRM:\"\"},br:{OK:\"OK\",CANCEL:\"Cancelar\",CONFIRM:\"Sim\"},cs:{OK:\"OK\",CANCEL:\"Zruit\",CONFIRM:\"Potvrdit\"},da:{OK:\"OK\",CANCEL:\"Annuller\",CONFIRM:\"Accepter\"},de:{OK:\"OK\",CANCEL:\"Abbrechen\",CONFIRM:\"Akzeptieren\"},el:{OK:\"\",CANCEL:\"\",CONFIRM:\"\"},en:{OK:\"OK\",CANCEL:\"Cancel\",CONFIRM:\"OK\"},es:{OK:\"OK\",CANCEL:\"Cancelar\",CONFIRM:\"Aceptar\"},et:{OK:\"OK\",CANCEL:\"Katkesta\",CONFIRM:\"OK\"},fa:{OK:\"\",CANCEL:\"\",CONFIRM:\"\"},fi:{OK:\"OK\",CANCEL:\"Peruuta\",CONFIRM:\"OK\"},fr:{OK:\"OK\",CANCEL:\"Annuler\",CONFIRM:\"D'accord\"},he:{OK:\"\",CANCEL:\"\",CONFIRM:\"\"},hu:{OK:\"OK\",CANCEL:\"Mgsem\",CONFIRM:\"Megerst\"},hr:{OK:\"OK\",CANCEL:\"Odustani\",CONFIRM:\"Potvrdi\"},id:{OK:\"OK\",CANCEL:\"Batal\",CONFIRM:\"OK\"},it:{OK:\"OK\",CANCEL:\"Annulla\",CONFIRM:\"Conferma\"},ja:{OK:\"OK\",CANCEL:\"\",CONFIRM:\"\"},lt:{OK:\"Gerai\",CANCEL:\"Ataukti\",CONFIRM:\"Patvirtinti\"},lv:{OK:\"Labi\",CANCEL:\"Atcelt\",CONFIRM:\"Apstiprint\"},nl:{OK:\"OK\",CANCEL:\"Annuleren\",CONFIRM:\"Accepteren\"},no:{OK:\"OK\",CANCEL:\"Avbryt\",CONFIRM:\"OK\"},pl:{OK:\"OK\",CANCEL:\"Anuluj\",CONFIRM:\"Potwierd\"},pt:{OK:\"OK\",CANCEL:\"Cancelar\",CONFIRM:\"Confirmar\"},ru:{OK:\"OK\",CANCEL:\"\",CONFIRM:\"\"},sq:{OK:\"OK\",CANCEL:\"Anulo\",CONFIRM:\"Prano\"},sv:{OK:\"OK\",CANCEL:\"Avbryt\",CONFIRM:\"OK\"},th:{OK:\"\",CANCEL:\"\",CONFIRM:\"\"},tr:{OK:\"Tamam\",CANCEL:\"ptal\",CONFIRM:\"Onayla\"},zh_CN:{OK:\"OK\",CANCEL:\"\",CONFIRM:\"\"},zh_TW:{OK:\"OK\",CANCEL:\"\",CONFIRM:\"\"}};return p.addLocale=function(a,c){return b.each([\"OK\",\"CANCEL\",\"CONFIRM\"],function(a,b){if(!c[b])throw new Error(\"Please supply a translation for '\"+b+\"'\")}),q[a]={OK:c.OK,CANCEL:c.CANCEL,CONFIRM:c.CONFIRM},p},p.removeLocale=function(a){return delete q[a],p},p.setLocale=function(a){return p.setDefaults(\"locale\",a)},p.init=function(c){return a(c||b)},p});"
			},
			{
				"name": "bootstrap.min.js",
				"source": "/*!\n * Bootstrap v3.3.6 (http://getbootstrap.com)\n * Copyright 2011-2015 Twitter, Inc.\n * Licensed under the MIT license\n */\nif(\"undefined\"==typeof jQuery)throw new Error(\"Bootstrap's JavaScript requires jQuery\");+function(a){\"use strict\";var b=a.fn.jquery.split(\" \")[0].split(\".\");if(b[0]<2&&b[1]<9||1==b[0]&&9==b[1]&&b[2]<1||b[0]>2)throw new Error(\"Bootstrap's JavaScript requires jQuery version 1.9.1 or higher, but lower than version 3\")}(jQuery),+function(a){\"use strict\";function b(){var a=document.createElement(\"bootstrap\"),b={WebkitTransition:\"webkitTransitionEnd\",MozTransition:\"transitionend\",OTransition:\"oTransitionEnd otransitionend\",transition:\"transitionend\"};for(var c in b)if(void 0!==a.style[c])return{end:b[c]};return!1}a.fn.emulateTransitionEnd=function(b){var c=!1,d=this;a(this).one(\"bsTransitionEnd\",function(){c=!0});var e=function(){c||a(d).trigger(a.support.transition.end)};return setTimeout(e,b),this},a(function(){a.support.transition=b(),a.support.transition&&(a.event.special.bsTransitionEnd={bindType:a.support.transition.end,delegateType:a.support.transition.end,handle:function(b){return a(b.target).is(this)?b.handleObj.handler.apply(this,arguments):void 0}})})}(jQuery),+function(a){\"use strict\";function b(b){return this.each(function(){var c=a(this),e=c.data(\"bs.alert\");e||c.data(\"bs.alert\",e=new d(this)),\"string\"==typeof b&&e[b].call(c)})}var c='[data-dismiss=\"alert\"]',d=function(b){a(b).on(\"click\",c,this.close)};d.VERSION=\"3.3.6\",d.TRANSITION_DURATION=150,d.prototype.close=function(b){function c(){g.detach().trigger(\"closed.bs.alert\").remove()}var e=a(this),f=e.attr(\"data-target\");f||(f=e.attr(\"href\"),f=f&&f.replace(/.*(?=#[^\\s]*$)/,\"\"));var g=a(f);b&&b.preventDefault(),g.length||(g=e.closest(\".alert\")),g.trigger(b=a.Event(\"close.bs.alert\")),b.isDefaultPrevented()||(g.removeClass(\"in\"),a.support.transition&&g.hasClass(\"fade\")?g.one(\"bsTransitionEnd\",c).emulateTransitionEnd(d.TRANSITION_DURATION):c())};var e=a.fn.alert;a.fn.alert=b,a.fn.alert.Constructor=d,a.fn.alert.noConflict=function(){return a.fn.alert=e,this},a(document).on(\"click.bs.alert.data-api\",c,d.prototype.close)}(jQuery),+function(a){\"use strict\";function b(b){return this.each(function(){var d=a(this),e=d.data(\"bs.button\"),f=\"object\"==typeof b&&b;e||d.data(\"bs.button\",e=new c(this,f)),\"toggle\"==b?e.toggle():b&&e.setState(b)})}var c=function(b,d){this.$element=a(b),this.options=a.extend({},c.DEFAULTS,d),this.isLoading=!1};c.VERSION=\"3.3.6\",c.DEFAULTS={loadingText:\"loading...\"},c.prototype.setState=function(b){var c=\"disabled\",d=this.$element,e=d.is(\"input\")?\"val\":\"html\",f=d.data();b+=\"Text\",null==f.resetText&&d.data(\"resetText\",d[e]()),setTimeout(a.proxy(function(){d[e](null==f[b]?this.options[b]:f[b]),\"loadingText\"==b?(this.isLoading=!0,d.addClass(c).attr(c,c)):this.isLoading&&(this.isLoading=!1,d.removeClass(c).removeAttr(c))},this),0)},c.prototype.toggle=function(){var a=!0,b=this.$element.closest('[data-toggle=\"buttons\"]');if(b.length){var c=this.$element.find(\"input\");\"radio\"==c.prop(\"type\")?(c.prop(\"checked\")&&(a=!1),b.find(\".active\").removeClass(\"active\"),this.$element.addClass(\"active\")):\"checkbox\"==c.prop(\"type\")&&(c.prop(\"checked\")!==this.$element.hasClass(\"active\")&&(a=!1),this.$element.toggleClass(\"active\")),c.prop(\"checked\",this.$element.hasClass(\"active\")),a&&c.trigger(\"change\")}else this.$element.attr(\"aria-pressed\",!this.$element.hasClass(\"active\")),this.$element.toggleClass(\"active\")};var d=a.fn.button;a.fn.button=b,a.fn.button.Constructor=c,a.fn.button.noConflict=function(){return a.fn.button=d,this},a(document).on(\"click.bs.button.data-api\",'[data-toggle^=\"button\"]',function(c){var d=a(c.target);d.hasClass(\"btn\")||(d=d.closest(\".btn\")),b.call(d,\"toggle\"),a(c.target).is('input[type=\"radio\"]')||a(c.target).is('input[type=\"checkbox\"]')||c.preventDefault()}).on(\"focus.bs.button.data-api blur.bs.button.data-api\",'[data-toggle^=\"button\"]',function(b){a(b.target).closest(\".btn\").toggleClass(\"focus\",/^focus(in)?$/.test(b.type))})}(jQuery),+function(a){\"use strict\";function b(b){return this.each(function(){var d=a(this),e=d.data(\"bs.carousel\"),f=a.extend({},c.DEFAULTS,d.data(),\"object\"==typeof b&&b),g=\"string\"==typeof b?b:f.slide;e||d.data(\"bs.carousel\",e=new c(this,f)),\"number\"==typeof b?e.to(b):g?e[g]():f.interval&&e.pause().cycle()})}var c=function(b,c){this.$element=a(b),this.$indicators=this.$element.find(\".carousel-indicators\"),this.options=c,this.paused=null,this.sliding=null,this.interval=null,this.$active=null,this.$items=null,this.options.keyboard&&this.$element.on(\"keydown.bs.carousel\",a.proxy(this.keydown,this)),\"hover\"==this.options.pause&&!(\"ontouchstart\"in document.documentElement)&&this.$element.on(\"mouseenter.bs.carousel\",a.proxy(this.pause,this)).on(\"mouseleave.bs.carousel\",a.proxy(this.cycle,this))};c.VERSION=\"3.3.6\",c.TRANSITION_DURATION=600,c.DEFAULTS={interval:5e3,pause:\"hover\",wrap:!0,keyboard:!0},c.prototype.keydown=function(a){if(!/input|textarea/i.test(a.target.tagName)){switch(a.which){case 37:this.prev();break;case 39:this.next();break;default:return}a.preventDefault()}},c.prototype.cycle=function(b){return b||(this.paused=!1),this.interval&&clearInterval(this.interval),this.options.interval&&!this.paused&&(this.interval=setInterval(a.proxy(this.next,this),this.options.interval)),this},c.prototype.getItemIndex=function(a){return this.$items=a.parent().children(\".item\"),this.$items.index(a||this.$active)},c.prototype.getItemForDirection=function(a,b){var c=this.getItemIndex(b),d=\"prev\"==a&&0===c||\"next\"==a&&c==this.$items.length-1;if(d&&!this.options.wrap)return b;var e=\"prev\"==a?-1:1,f=(c+e)%this.$items.length;return this.$items.eq(f)},c.prototype.to=function(a){var b=this,c=this.getItemIndex(this.$active=this.$element.find(\".item.active\"));return a>this.$items.length-1||0>a?void 0:this.sliding?this.$element.one(\"slid.bs.carousel\",function(){b.to(a)}):c==a?this.pause().cycle():this.slide(a>c?\"next\":\"prev\",this.$items.eq(a))},c.prototype.pause=function(b){return b||(this.paused=!0),this.$element.find(\".next, .prev\").length&&a.support.transition&&(this.$element.trigger(a.support.transition.end),this.cycle(!0)),this.interval=clearInterval(this.interval),this},c.prototype.next=function(){return this.sliding?void 0:this.slide(\"next\")},c.prototype.prev=function(){return this.sliding?void 0:this.slide(\"prev\")},c.prototype.slide=function(b,d){var e=this.$element.find(\".item.active\"),f=d||this.getItemForDirection(b,e),g=this.interval,h=\"next\"==b?\"left\":\"right\",i=this;if(f.hasClass(\"active\"))return this.sliding=!1;var j=f[0],k=a.Event(\"slide.bs.carousel\",{relatedTarget:j,direction:h});if(this.$element.trigger(k),!k.isDefaultPrevented()){if(this.sliding=!0,g&&this.pause(),this.$indicators.length){this.$indicators.find(\".active\").removeClass(\"active\");var l=a(this.$indicators.children()[this.getItemIndex(f)]);l&&l.addClass(\"active\")}var m=a.Event(\"slid.bs.carousel\",{relatedTarget:j,direction:h});return a.support.transition&&this.$element.hasClass(\"slide\")?(f.addClass(b),f[0].offsetWidth,e.addClass(h),f.addClass(h),e.one(\"bsTransitionEnd\",function(){f.removeClass([b,h].join(\" \")).addClass(\"active\"),e.removeClass([\"active\",h].join(\" \")),i.sliding=!1,setTimeout(function(){i.$element.trigger(m)},0)}).emulateTransitionEnd(c.TRANSITION_DURATION)):(e.removeClass(\"active\"),f.addClass(\"active\"),this.sliding=!1,this.$element.trigger(m)),g&&this.cycle(),this}};var d=a.fn.carousel;a.fn.carousel=b,a.fn.carousel.Constructor=c,a.fn.carousel.noConflict=function(){return a.fn.carousel=d,this};var e=function(c){var d,e=a(this),f=a(e.attr(\"data-target\")||(d=e.attr(\"href\"))&&d.replace(/.*(?=#[^\\s]+$)/,\"\"));if(f.hasClass(\"carousel\")){var g=a.extend({},f.data(),e.data()),h=e.attr(\"data-slide-to\");h&&(g.interval=!1),b.call(f,g),h&&f.data(\"bs.carousel\").to(h),c.preventDefault()}};a(document).on(\"click.bs.carousel.data-api\",\"[data-slide]\",e).on(\"click.bs.carousel.data-api\",\"[data-slide-to]\",e),a(window).on(\"load\",function(){a('[data-ride=\"carousel\"]').each(function(){var c=a(this);b.call(c,c.data())})})}(jQuery),+function(a){\"use strict\";function b(b){var c,d=b.attr(\"data-target\")||(c=b.attr(\"href\"))&&c.replace(/.*(?=#[^\\s]+$)/,\"\");return a(d)}function c(b){return this.each(function(){var c=a(this),e=c.data(\"bs.collapse\"),f=a.extend({},d.DEFAULTS,c.data(),\"object\"==typeof b&&b);!e&&f.toggle&&/show|hide/.test(b)&&(f.toggle=!1),e||c.data(\"bs.collapse\",e=new d(this,f)),\"string\"==typeof b&&e[b]()})}var d=function(b,c){this.$element=a(b),this.options=a.extend({},d.DEFAULTS,c),this.$trigger=a('[data-toggle=\"collapse\"][href=\"#'+b.id+'\"],[data-toggle=\"collapse\"][data-target=\"#'+b.id+'\"]'),this.transitioning=null,this.options.parent?this.$parent=this.getParent():this.addAriaAndCollapsedClass(this.$element,this.$trigger),this.options.toggle&&this.toggle()};d.VERSION=\"3.3.6\",d.TRANSITION_DURATION=350,d.DEFAULTS={toggle:!0},d.prototype.dimension=function(){var a=this.$element.hasClass(\"width\");return a?\"width\":\"height\"},d.prototype.show=function(){if(!this.transitioning&&!this.$element.hasClass(\"in\")){var b,e=this.$parent&&this.$parent.children(\".panel\").children(\".in, .collapsing\");if(!(e&&e.length&&(b=e.data(\"bs.collapse\"),b&&b.transitioning))){var f=a.Event(\"show.bs.collapse\");if(this.$element.trigger(f),!f.isDefaultPrevented()){e&&e.length&&(c.call(e,\"hide\"),b||e.data(\"bs.collapse\",null));var g=this.dimension();this.$element.removeClass(\"collapse\").addClass(\"collapsing\")[g](0).attr(\"aria-expanded\",!0),this.$trigger.removeClass(\"collapsed\").attr(\"aria-expanded\",!0),this.transitioning=1;var h=function(){this.$element.removeClass(\"collapsing\").addClass(\"collapse in\")[g](\"\"),this.transitioning=0,this.$element.trigger(\"shown.bs.collapse\")};if(!a.support.transition)return h.call(this);var i=a.camelCase([\"scroll\",g].join(\"-\"));this.$element.one(\"bsTransitionEnd\",a.proxy(h,this)).emulateTransitionEnd(d.TRANSITION_DURATION)[g](this.$element[0][i])}}}},d.prototype.hide=function(){if(!this.transitioning&&this.$element.hasClass(\"in\")){var b=a.Event(\"hide.bs.collapse\");if(this.$element.trigger(b),!b.isDefaultPrevented()){var c=this.dimension();this.$element[c](this.$element[c]())[0].offsetHeight,this.$element.addClass(\"collapsing\").removeClass(\"collapse in\").attr(\"aria-expanded\",!1),this.$trigger.addClass(\"collapsed\").attr(\"aria-expanded\",!1),this.transitioning=1;var e=function(){this.transitioning=0,this.$element.removeClass(\"collapsing\").addClass(\"collapse\").trigger(\"hidden.bs.collapse\")};return a.support.transition?void this.$element[c](0).one(\"bsTransitionEnd\",a.proxy(e,this)).emulateTransitionEnd(d.TRANSITION_DURATION):e.call(this)}}},d.prototype.toggle=function(){this[this.$element.hasClass(\"in\")?\"hide\":\"show\"]()},d.prototype.getParent=function(){return a(this.options.parent).find('[data-toggle=\"collapse\"][data-parent=\"'+this.options.parent+'\"]').each(a.proxy(function(c,d){var e=a(d);this.addAriaAndCollapsedClass(b(e),e)},this)).end()},d.prototype.addAriaAndCollapsedClass=function(a,b){var c=a.hasClass(\"in\");a.attr(\"aria-expanded\",c),b.toggleClass(\"collapsed\",!c).attr(\"aria-expanded\",c)};var e=a.fn.collapse;a.fn.collapse=c,a.fn.collapse.Constructor=d,a.fn.collapse.noConflict=function(){return a.fn.collapse=e,this},a(document).on(\"click.bs.collapse.data-api\",'[data-toggle=\"collapse\"]',function(d){var e=a(this);e.attr(\"data-target\")||d.preventDefault();var f=b(e),g=f.data(\"bs.collapse\"),h=g?\"toggle\":e.data();c.call(f,h)})}(jQuery),+function(a){\"use strict\";function b(b){var c=b.attr(\"data-target\");c||(c=b.attr(\"href\"),c=c&&/#[A-Za-z]/.test(c)&&c.replace(/.*(?=#[^\\s]*$)/,\"\"));var d=c&&a(c);return d&&d.length?d:b.parent()}function c(c){c&&3===c.which||(a(e).remove(),a(f).each(function(){var d=a(this),e=b(d),f={relatedTarget:this};e.hasClass(\"open\")&&(c&&\"click\"==c.type&&/input|textarea/i.test(c.target.tagName)&&a.contains(e[0],c.target)||(e.trigger(c=a.Event(\"hide.bs.dropdown\",f)),c.isDefaultPrevented()||(d.attr(\"aria-expanded\",\"false\"),e.removeClass(\"open\").trigger(a.Event(\"hidden.bs.dropdown\",f)))))}))}function d(b){return this.each(function(){var c=a(this),d=c.data(\"bs.dropdown\");d||c.data(\"bs.dropdown\",d=new g(this)),\"string\"==typeof b&&d[b].call(c)})}var e=\".dropdown-backdrop\",f='[data-toggle=\"dropdown\"]',g=function(b){a(b).on(\"click.bs.dropdown\",this.toggle)};g.VERSION=\"3.3.6\",g.prototype.toggle=function(d){var e=a(this);if(!e.is(\".disabled, :disabled\")){var f=b(e),g=f.hasClass(\"open\");if(c(),!g){\"ontouchstart\"in document.documentElement&&!f.closest(\".navbar-nav\").length&&a(document.createElement(\"div\")).addClass(\"dropdown-backdrop\").insertAfter(a(this)).on(\"click\",c);var h={relatedTarget:this};if(f.trigger(d=a.Event(\"show.bs.dropdown\",h)),d.isDefaultPrevented())return;e.trigger(\"focus\").attr(\"aria-expanded\",\"true\"),f.toggleClass(\"open\").trigger(a.Event(\"shown.bs.dropdown\",h))}return!1}},g.prototype.keydown=function(c){if(/(38|40|27|32)/.test(c.which)&&!/input|textarea/i.test(c.target.tagName)){var d=a(this);if(c.preventDefault(),c.stopPropagation(),!d.is(\".disabled, :disabled\")){var e=b(d),g=e.hasClass(\"open\");if(!g&&27!=c.which||g&&27==c.which)return 27==c.which&&e.find(f).trigger(\"focus\"),d.trigger(\"click\");var h=\" li:not(.disabled):visible a\",i=e.find(\".dropdown-menu\"+h);if(i.length){var j=i.index(c.target);38==c.which&&j>0&&j--,40==c.which&&j<i.length-1&&j++,~j||(j=0),i.eq(j).trigger(\"focus\")}}}};var h=a.fn.dropdown;a.fn.dropdown=d,a.fn.dropdown.Constructor=g,a.fn.dropdown.noConflict=function(){return a.fn.dropdown=h,this},a(document).on(\"click.bs.dropdown.data-api\",c).on(\"click.bs.dropdown.data-api\",\".dropdown form\",function(a){a.stopPropagation()}).on(\"click.bs.dropdown.data-api\",f,g.prototype.toggle).on(\"keydown.bs.dropdown.data-api\",f,g.prototype.keydown).on(\"keydown.bs.dropdown.data-api\",\".dropdown-menu\",g.prototype.keydown)}(jQuery),+function(a){\"use strict\";function b(b,d){return this.each(function(){var e=a(this),f=e.data(\"bs.modal\"),g=a.extend({},c.DEFAULTS,e.data(),\"object\"==typeof b&&b);f||e.data(\"bs.modal\",f=new c(this,g)),\"string\"==typeof b?f[b](d):g.show&&f.show(d)})}var c=function(b,c){this.options=c,this.$body=a(document.body),this.$element=a(b),this.$dialog=this.$element.find(\".modal-dialog\"),this.$backdrop=null,this.isShown=null,this.originalBodyPad=null,this.scrollbarWidth=0,this.ignoreBackdropClick=!1,this.options.remote&&this.$element.find(\".modal-content\").load(this.options.remote,a.proxy(function(){this.$element.trigger(\"loaded.bs.modal\")},this))};c.VERSION=\"3.3.6\",c.TRANSITION_DURATION=300,c.BACKDROP_TRANSITION_DURATION=150,c.DEFAULTS={backdrop:!0,keyboard:!0,show:!0},c.prototype.toggle=function(a){return this.isShown?this.hide():this.show(a)},c.prototype.show=function(b){var d=this,e=a.Event(\"show.bs.modal\",{relatedTarget:b});this.$element.trigger(e),this.isShown||e.isDefaultPrevented()||(this.isShown=!0,this.checkScrollbar(),this.setScrollbar(),this.$body.addClass(\"modal-open\"),this.escape(),this.resize(),this.$element.on(\"click.dismiss.bs.modal\",'[data-dismiss=\"modal\"]',a.proxy(this.hide,this)),this.$dialog.on(\"mousedown.dismiss.bs.modal\",function(){d.$element.one(\"mouseup.dismiss.bs.modal\",function(b){a(b.target).is(d.$element)&&(d.ignoreBackdropClick=!0)})}),this.backdrop(function(){var e=a.support.transition&&d.$element.hasClass(\"fade\");d.$element.parent().length||d.$element.appendTo(d.$body),d.$element.show().scrollTop(0),d.adjustDialog(),e&&d.$element[0].offsetWidth,d.$element.addClass(\"in\"),d.enforceFocus();var f=a.Event(\"shown.bs.modal\",{relatedTarget:b});e?d.$dialog.one(\"bsTransitionEnd\",function(){d.$element.trigger(\"focus\").trigger(f)}).emulateTransitionEnd(c.TRANSITION_DURATION):d.$element.trigger(\"focus\").trigger(f)}))},c.prototype.hide=function(b){b&&b.preventDefault(),b=a.Event(\"hide.bs.modal\"),this.$element.trigger(b),this.isShown&&!b.isDefaultPrevented()&&(this.isShown=!1,this.escape(),this.resize(),a(document).off(\"focusin.bs.modal\"),this.$element.removeClass(\"in\").off(\"click.dismiss.bs.modal\").off(\"mouseup.dismiss.bs.modal\"),this.$dialog.off(\"mousedown.dismiss.bs.modal\"),a.support.transition&&this.$element.hasClass(\"fade\")?this.$element.one(\"bsTransitionEnd\",a.proxy(this.hideModal,this)).emulateTransitionEnd(c.TRANSITION_DURATION):this.hideModal())},c.prototype.enforceFocus=function(){a(document).off(\"focusin.bs.modal\").on(\"focusin.bs.modal\",a.proxy(function(a){this.$element[0]===a.target||this.$element.has(a.target).length||this.$element.trigger(\"focus\")},this))},c.prototype.escape=function(){this.isShown&&this.options.keyboard?this.$element.on(\"keydown.dismiss.bs.modal\",a.proxy(function(a){27==a.which&&this.hide()},this)):this.isShown||this.$element.off(\"keydown.dismiss.bs.modal\")},c.prototype.resize=function(){this.isShown?a(window).on(\"resize.bs.modal\",a.proxy(this.handleUpdate,this)):a(window).off(\"resize.bs.modal\")},c.prototype.hideModal=function(){var a=this;this.$element.hide(),this.backdrop(function(){a.$body.removeClass(\"modal-open\"),a.resetAdjustments(),a.resetScrollbar(),a.$element.trigger(\"hidden.bs.modal\")})},c.prototype.removeBackdrop=function(){this.$backdrop&&this.$backdrop.remove(),this.$backdrop=null},c.prototype.backdrop=function(b){var d=this,e=this.$element.hasClass(\"fade\")?\"fade\":\"\";if(this.isShown&&this.options.backdrop){var f=a.support.transition&&e;if(this.$backdrop=a(document.createElement(\"div\")).addClass(\"modal-backdrop \"+e).appendTo(this.$body),this.$element.on(\"click.dismiss.bs.modal\",a.proxy(function(a){return this.ignoreBackdropClick?void(this.ignoreBackdropClick=!1):void(a.target===a.currentTarget&&(\"static\"==this.options.backdrop?this.$element[0].focus():this.hide()))},this)),f&&this.$backdrop[0].offsetWidth,this.$backdrop.addClass(\"in\"),!b)return;f?this.$backdrop.one(\"bsTransitionEnd\",b).emulateTransitionEnd(c.BACKDROP_TRANSITION_DURATION):b()}else if(!this.isShown&&this.$backdrop){this.$backdrop.removeClass(\"in\");var g=function(){d.removeBackdrop(),b&&b()};a.support.transition&&this.$element.hasClass(\"fade\")?this.$backdrop.one(\"bsTransitionEnd\",g).emulateTransitionEnd(c.BACKDROP_TRANSITION_DURATION):g()}else b&&b()},c.prototype.handleUpdate=function(){this.adjustDialog()},c.prototype.adjustDialog=function(){var a=this.$element[0].scrollHeight>document.documentElement.clientHeight;this.$element.css({paddingLeft:!this.bodyIsOverflowing&&a?this.scrollbarWidth:\"\",paddingRight:this.bodyIsOverflowing&&!a?this.scrollbarWidth:\"\"})},c.prototype.resetAdjustments=function(){this.$element.css({paddingLeft:\"\",paddingRight:\"\"})},c.prototype.checkScrollbar=function(){var a=window.innerWidth;if(!a){var b=document.documentElement.getBoundingClientRect();a=b.right-Math.abs(b.left)}this.bodyIsOverflowing=document.body.clientWidth<a,this.scrollbarWidth=this.measureScrollbar()},c.prototype.setScrollbar=function(){var a=parseInt(this.$body.css(\"padding-right\")||0,10);this.originalBodyPad=document.body.style.paddingRight||\"\",this.bodyIsOverflowing&&this.$body.css(\"padding-right\",a+this.scrollbarWidth)},c.prototype.resetScrollbar=function(){this.$body.css(\"padding-right\",this.originalBodyPad)},c.prototype.measureScrollbar=function(){var a=document.createElement(\"div\");a.className=\"modal-scrollbar-measure\",this.$body.append(a);var b=a.offsetWidth-a.clientWidth;return this.$body[0].removeChild(a),b};var d=a.fn.modal;a.fn.modal=b,a.fn.modal.Constructor=c,a.fn.modal.noConflict=function(){return a.fn.modal=d,this},a(document).on(\"click.bs.modal.data-api\",'[data-toggle=\"modal\"]',function(c){var d=a(this),e=d.attr(\"href\"),f=a(d.attr(\"data-target\")||e&&e.replace(/.*(?=#[^\\s]+$)/,\"\")),g=f.data(\"bs.modal\")?\"toggle\":a.extend({remote:!/#/.test(e)&&e},f.data(),d.data());d.is(\"a\")&&c.preventDefault(),f.one(\"show.bs.modal\",function(a){a.isDefaultPrevented()||f.one(\"hidden.bs.modal\",function(){d.is(\":visible\")&&d.trigger(\"focus\")})}),b.call(f,g,this)})}(jQuery),+function(a){\"use strict\";function b(b){return this.each(function(){var d=a(this),e=d.data(\"bs.tooltip\"),f=\"object\"==typeof b&&b;(e||!/destroy|hide/.test(b))&&(e||d.data(\"bs.tooltip\",e=new c(this,f)),\"string\"==typeof b&&e[b]())})}var c=function(a,b){this.type=null,this.options=null,this.enabled=null,this.timeout=null,this.hoverState=null,this.$element=null,this.inState=null,this.init(\"tooltip\",a,b)};c.VERSION=\"3.3.6\",c.TRANSITION_DURATION=150,c.DEFAULTS={animation:!0,placement:\"top\",selector:!1,template:'<div class=\"tooltip\" role=\"tooltip\"><div class=\"tooltip-arrow\"></div><div class=\"tooltip-inner\"></div></div>',trigger:\"hover focus\",title:\"\",delay:0,html:!1,container:!1,viewport:{selector:\"body\",padding:0}},c.prototype.init=function(b,c,d){if(this.enabled=!0,this.type=b,this.$element=a(c),this.options=this.getOptions(d),this.$viewport=this.options.viewport&&a(a.isFunction(this.options.viewport)?this.options.viewport.call(this,this.$element):this.options.viewport.selector||this.options.viewport),this.inState={click:!1,hover:!1,focus:!1},this.$element[0]instanceof document.constructor&&!this.options.selector)throw new Error(\"`selector` option must be specified when initializing \"+this.type+\" on the window.document object!\");for(var e=this.options.trigger.split(\" \"),f=e.length;f--;){var g=e[f];if(\"click\"==g)this.$element.on(\"click.\"+this.type,this.options.selector,a.proxy(this.toggle,this));else if(\"manual\"!=g){var h=\"hover\"==g?\"mouseenter\":\"focusin\",i=\"hover\"==g?\"mouseleave\":\"focusout\";this.$element.on(h+\".\"+this.type,this.options.selector,a.proxy(this.enter,this)),this.$element.on(i+\".\"+this.type,this.options.selector,a.proxy(this.leave,this))}}this.options.selector?this._options=a.extend({},this.options,{trigger:\"manual\",selector:\"\"}):this.fixTitle()},c.prototype.getDefaults=function(){return c.DEFAULTS},c.prototype.getOptions=function(b){return b=a.extend({},this.getDefaults(),this.$element.data(),b),b.delay&&\"number\"==typeof b.delay&&(b.delay={show:b.delay,hide:b.delay}),b},c.prototype.getDelegateOptions=function(){var b={},c=this.getDefaults();return this._options&&a.each(this._options,function(a,d){c[a]!=d&&(b[a]=d)}),b},c.prototype.enter=function(b){var c=b instanceof this.constructor?b:a(b.currentTarget).data(\"bs.\"+this.type);return c||(c=new this.constructor(b.currentTarget,this.getDelegateOptions()),a(b.currentTarget).data(\"bs.\"+this.type,c)),b instanceof a.Event&&(c.inState[\"focusin\"==b.type?\"focus\":\"hover\"]=!0),c.tip().hasClass(\"in\")||\"in\"==c.hoverState?void(c.hoverState=\"in\"):(clearTimeout(c.timeout),c.hoverState=\"in\",c.options.delay&&c.options.delay.show?void(c.timeout=setTimeout(function(){\"in\"==c.hoverState&&c.show()},c.options.delay.show)):c.show())},c.prototype.isInStateTrue=function(){for(var a in this.inState)if(this.inState[a])return!0;return!1},c.prototype.leave=function(b){var c=b instanceof this.constructor?b:a(b.currentTarget).data(\"bs.\"+this.type);return c||(c=new this.constructor(b.currentTarget,this.getDelegateOptions()),a(b.currentTarget).data(\"bs.\"+this.type,c)),b instanceof a.Event&&(c.inState[\"focusout\"==b.type?\"focus\":\"hover\"]=!1),c.isInStateTrue()?void 0:(clearTimeout(c.timeout),c.hoverState=\"out\",c.options.delay&&c.options.delay.hide?void(c.timeout=setTimeout(function(){\"out\"==c.hoverState&&c.hide()},c.options.delay.hide)):c.hide())},c.prototype.show=function(){var b=a.Event(\"show.bs.\"+this.type);if(this.hasContent()&&this.enabled){this.$element.trigger(b);var d=a.contains(this.$element[0].ownerDocument.documentElement,this.$element[0]);if(b.isDefaultPrevented()||!d)return;var e=this,f=this.tip(),g=this.getUID(this.type);this.setContent(),f.attr(\"id\",g),this.$element.attr(\"aria-describedby\",g),this.options.animation&&f.addClass(\"fade\");var h=\"function\"==typeof this.options.placement?this.options.placement.call(this,f[0],this.$element[0]):this.options.placement,i=/\\s?auto?\\s?/i,j=i.test(h);j&&(h=h.replace(i,\"\")||\"top\"),f.detach().css({top:0,left:0,display:\"block\"}).addClass(h).data(\"bs.\"+this.type,this),this.options.container?f.appendTo(this.options.container):f.insertAfter(this.$element),this.$element.trigger(\"inserted.bs.\"+this.type);var k=this.getPosition(),l=f[0].offsetWidth,m=f[0].offsetHeight;if(j){var n=h,o=this.getPosition(this.$viewport);h=\"bottom\"==h&&k.bottom+m>o.bottom?\"top\":\"top\"==h&&k.top-m<o.top?\"bottom\":\"right\"==h&&k.right+l>o.width?\"left\":\"left\"==h&&k.left-l<o.left?\"right\":h,f.removeClass(n).addClass(h)}var p=this.getCalculatedOffset(h,k,l,m);this.applyPlacement(p,h);var q=function(){var a=e.hoverState;e.$element.trigger(\"shown.bs.\"+e.type),e.hoverState=null,\"out\"==a&&e.leave(e)};a.support.transition&&this.$tip.hasClass(\"fade\")?f.one(\"bsTransitionEnd\",q).emulateTransitionEnd(c.TRANSITION_DURATION):q()}},c.prototype.applyPlacement=function(b,c){var d=this.tip(),e=d[0].offsetWidth,f=d[0].offsetHeight,g=parseInt(d.css(\"margin-top\"),10),h=parseInt(d.css(\"margin-left\"),10);isNaN(g)&&(g=0),isNaN(h)&&(h=0),b.top+=g,b.left+=h,a.offset.setOffset(d[0],a.extend({using:function(a){d.css({top:Math.round(a.top),left:Math.round(a.left)})}},b),0),d.addClass(\"in\");var i=d[0].offsetWidth,j=d[0].offsetHeight;\"top\"==c&&j!=f&&(b.top=b.top+f-j);var k=this.getViewportAdjustedDelta(c,b,i,j);k.left?b.left+=k.left:b.top+=k.top;var l=/top|bottom/.test(c),m=l?2*k.left-e+i:2*k.top-f+j,n=l?\"offsetWidth\":\"offsetHeight\";d.offset(b),this.replaceArrow(m,d[0][n],l)},c.prototype.replaceArrow=function(a,b,c){this.arrow().css(c?\"left\":\"top\",50*(1-a/b)+\"%\").css(c?\"top\":\"left\",\"\")},c.prototype.setContent=function(){var a=this.tip(),b=this.getTitle();a.find(\".tooltip-inner\")[this.options.html?\"html\":\"text\"](b),a.removeClass(\"fade in top bottom left right\")},c.prototype.hide=function(b){function d(){\"in\"!=e.hoverState&&f.detach(),e.$element.removeAttr(\"aria-describedby\").trigger(\"hidden.bs.\"+e.type),b&&b()}var e=this,f=a(this.$tip),g=a.Event(\"hide.bs.\"+this.type);return this.$element.trigger(g),g.isDefaultPrevented()?void 0:(f.removeClass(\"in\"),a.support.transition&&f.hasClass(\"fade\")?f.one(\"bsTransitionEnd\",d).emulateTransitionEnd(c.TRANSITION_DURATION):d(),this.hoverState=null,this)},c.prototype.fixTitle=function(){var a=this.$element;(a.attr(\"title\")||\"string\"!=typeof a.attr(\"data-original-title\"))&&a.attr(\"data-original-title\",a.attr(\"title\")||\"\").attr(\"title\",\"\")},c.prototype.hasContent=function(){return this.getTitle()},c.prototype.getPosition=function(b){b=b||this.$element;var c=b[0],d=\"BODY\"==c.tagName,e=c.getBoundingClientRect();null==e.width&&(e=a.extend({},e,{width:e.right-e.left,height:e.bottom-e.top}));var f=d?{top:0,left:0}:b.offset(),g={scroll:d?document.documentElement.scrollTop||document.body.scrollTop:b.scrollTop()},h=d?{width:a(window).width(),height:a(window).height()}:null;return a.extend({},e,g,h,f)},c.prototype.getCalculatedOffset=function(a,b,c,d){return\"bottom\"==a?{top:b.top+b.height,left:b.left+b.width/2-c/2}:\"top\"==a?{top:b.top-d,left:b.left+b.width/2-c/2}:\"left\"==a?{top:b.top+b.height/2-d/2,left:b.left-c}:{top:b.top+b.height/2-d/2,left:b.left+b.width}},c.prototype.getViewportAdjustedDelta=function(a,b,c,d){var e={top:0,left:0};if(!this.$viewport)return e;var f=this.options.viewport&&this.options.viewport.padding||0,g=this.getPosition(this.$viewport);if(/right|left/.test(a)){var h=b.top-f-g.scroll,i=b.top+f-g.scroll+d;h<g.top?e.top=g.top-h:i>g.top+g.height&&(e.top=g.top+g.height-i)}else{var j=b.left-f,k=b.left+f+c;j<g.left?e.left=g.left-j:k>g.right&&(e.left=g.left+g.width-k)}return e},c.prototype.getTitle=function(){var a,b=this.$element,c=this.options;return a=b.attr(\"data-original-title\")||(\"function\"==typeof c.title?c.title.call(b[0]):c.title)},c.prototype.getUID=function(a){do a+=~~(1e6*Math.random());while(document.getElementById(a));return a},c.prototype.tip=function(){if(!this.$tip&&(this.$tip=a(this.options.template),1!=this.$tip.length))throw new Error(this.type+\" `template` option must consist of exactly 1 top-level element!\");return this.$tip},c.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(\".tooltip-arrow\")},c.prototype.enable=function(){this.enabled=!0},c.prototype.disable=function(){this.enabled=!1},c.prototype.toggleEnabled=function(){this.enabled=!this.enabled},c.prototype.toggle=function(b){var c=this;b&&(c=a(b.currentTarget).data(\"bs.\"+this.type),c||(c=new this.constructor(b.currentTarget,this.getDelegateOptions()),a(b.currentTarget).data(\"bs.\"+this.type,c))),b?(c.inState.click=!c.inState.click,c.isInStateTrue()?c.enter(c):c.leave(c)):c.tip().hasClass(\"in\")?c.leave(c):c.enter(c)},c.prototype.destroy=function(){var a=this;clearTimeout(this.timeout),this.hide(function(){a.$element.off(\".\"+a.type).removeData(\"bs.\"+a.type),a.$tip&&a.$tip.detach(),a.$tip=null,a.$arrow=null,a.$viewport=null})};var d=a.fn.tooltip;a.fn.tooltip=b,a.fn.tooltip.Constructor=c,a.fn.tooltip.noConflict=function(){return a.fn.tooltip=d,this}}(jQuery),+function(a){\"use strict\";function b(b){return this.each(function(){var d=a(this),e=d.data(\"bs.popover\"),f=\"object\"==typeof b&&b;(e||!/destroy|hide/.test(b))&&(e||d.data(\"bs.popover\",e=new c(this,f)),\"string\"==typeof b&&e[b]())})}var c=function(a,b){this.init(\"popover\",a,b)};if(!a.fn.tooltip)throw new Error(\"Popover requires tooltip.js\");c.VERSION=\"3.3.6\",c.DEFAULTS=a.extend({},a.fn.tooltip.Constructor.DEFAULTS,{placement:\"right\",trigger:\"click\",content:\"\",template:'<div class=\"popover\" role=\"tooltip\"><div class=\"arrow\"></div><h3 class=\"popover-title\"></h3><div class=\"popover-content\"></div></div>'}),c.prototype=a.extend({},a.fn.tooltip.Constructor.prototype),c.prototype.constructor=c,c.prototype.getDefaults=function(){return c.DEFAULTS},c.prototype.setContent=function(){var a=this.tip(),b=this.getTitle(),c=this.getContent();a.find(\".popover-title\")[this.options.html?\"html\":\"text\"](b),a.find(\".popover-content\").children().detach().end()[this.options.html?\"string\"==typeof c?\"html\":\"append\":\"text\"](c),a.removeClass(\"fade top bottom left right in\"),a.find(\".popover-title\").html()||a.find(\".popover-title\").hide()},c.prototype.hasContent=function(){return this.getTitle()||this.getContent()},c.prototype.getContent=function(){var a=this.$element,b=this.options;return a.attr(\"data-content\")||(\"function\"==typeof b.content?b.content.call(a[0]):b.content)},c.prototype.arrow=function(){return this.$arrow=this.$arrow||this.tip().find(\".arrow\")};var d=a.fn.popover;a.fn.popover=b,a.fn.popover.Constructor=c,a.fn.popover.noConflict=function(){return a.fn.popover=d,this}}(jQuery),+function(a){\"use strict\";function b(c,d){this.$body=a(document.body),this.$scrollElement=a(a(c).is(document.body)?window:c),this.options=a.extend({},b.DEFAULTS,d),this.selector=(this.options.target||\"\")+\" .nav li > a\",this.offsets=[],this.targets=[],this.activeTarget=null,this.scrollHeight=0,this.$scrollElement.on(\"scroll.bs.scrollspy\",a.proxy(this.process,this)),this.refresh(),this.process()}function c(c){return this.each(function(){var d=a(this),e=d.data(\"bs.scrollspy\"),f=\"object\"==typeof c&&c;e||d.data(\"bs.scrollspy\",e=new b(this,f)),\"string\"==typeof c&&e[c]()})}b.VERSION=\"3.3.6\",b.DEFAULTS={offset:10},b.prototype.getScrollHeight=function(){return this.$scrollElement[0].scrollHeight||Math.max(this.$body[0].scrollHeight,document.documentElement.scrollHeight)},b.prototype.refresh=function(){var b=this,c=\"offset\",d=0;this.offsets=[],this.targets=[],this.scrollHeight=this.getScrollHeight(),a.isWindow(this.$scrollElement[0])||(c=\"position\",d=this.$scrollElement.scrollTop()),this.$body.find(this.selector).map(function(){var b=a(this),e=b.data(\"target\")||b.attr(\"href\"),f=/^#./.test(e)&&a(e);return f&&f.length&&f.is(\":visible\")&&[[f[c]().top+d,e]]||null}).sort(function(a,b){return a[0]-b[0]}).each(function(){b.offsets.push(this[0]),b.targets.push(this[1])})},b.prototype.process=function(){var a,b=this.$scrollElement.scrollTop()+this.options.offset,c=this.getScrollHeight(),d=this.options.offset+c-this.$scrollElement.height(),e=this.offsets,f=this.targets,g=this.activeTarget;if(this.scrollHeight!=c&&this.refresh(),b>=d)return g!=(a=f[f.length-1])&&this.activate(a);if(g&&b<e[0])return this.activeTarget=null,this.clear();for(a=e.length;a--;)g!=f[a]&&b>=e[a]&&(void 0===e[a+1]||b<e[a+1])&&this.activate(f[a])},b.prototype.activate=function(b){this.activeTarget=b,this.clear();var c=this.selector+'[data-target=\"'+b+'\"],'+this.selector+'[href=\"'+b+'\"]',d=a(c).parents(\"li\").addClass(\"active\");\nd.parent(\".dropdown-menu\").length&&(d=d.closest(\"li.dropdown\").addClass(\"active\")),d.trigger(\"activate.bs.scrollspy\")},b.prototype.clear=function(){a(this.selector).parentsUntil(this.options.target,\".active\").removeClass(\"active\")};var d=a.fn.scrollspy;a.fn.scrollspy=c,a.fn.scrollspy.Constructor=b,a.fn.scrollspy.noConflict=function(){return a.fn.scrollspy=d,this},a(window).on(\"load.bs.scrollspy.data-api\",function(){a('[data-spy=\"scroll\"]').each(function(){var b=a(this);c.call(b,b.data())})})}(jQuery),+function(a){\"use strict\";function b(b){return this.each(function(){var d=a(this),e=d.data(\"bs.tab\");e||d.data(\"bs.tab\",e=new c(this)),\"string\"==typeof b&&e[b]()})}var c=function(b){this.element=a(b)};c.VERSION=\"3.3.6\",c.TRANSITION_DURATION=150,c.prototype.show=function(){var b=this.element,c=b.closest(\"ul:not(.dropdown-menu)\"),d=b.data(\"target\");if(d||(d=b.attr(\"href\"),d=d&&d.replace(/.*(?=#[^\\s]*$)/,\"\")),!b.parent(\"li\").hasClass(\"active\")){var e=c.find(\".active:last a\"),f=a.Event(\"hide.bs.tab\",{relatedTarget:b[0]}),g=a.Event(\"show.bs.tab\",{relatedTarget:e[0]});if(e.trigger(f),b.trigger(g),!g.isDefaultPrevented()&&!f.isDefaultPrevented()){var h=a(d);this.activate(b.closest(\"li\"),c),this.activate(h,h.parent(),function(){e.trigger({type:\"hidden.bs.tab\",relatedTarget:b[0]}),b.trigger({type:\"shown.bs.tab\",relatedTarget:e[0]})})}}},c.prototype.activate=function(b,d,e){function f(){g.removeClass(\"active\").find(\"> .dropdown-menu > .active\").removeClass(\"active\").end().find('[data-toggle=\"tab\"]').attr(\"aria-expanded\",!1),b.addClass(\"active\").find('[data-toggle=\"tab\"]').attr(\"aria-expanded\",!0),h?(b[0].offsetWidth,b.addClass(\"in\")):b.removeClass(\"fade\"),b.parent(\".dropdown-menu\").length&&b.closest(\"li.dropdown\").addClass(\"active\").end().find('[data-toggle=\"tab\"]').attr(\"aria-expanded\",!0),e&&e()}var g=d.find(\"> .active\"),h=e&&a.support.transition&&(g.length&&g.hasClass(\"fade\")||!!d.find(\"> .fade\").length);g.length&&h?g.one(\"bsTransitionEnd\",f).emulateTransitionEnd(c.TRANSITION_DURATION):f(),g.removeClass(\"in\")};var d=a.fn.tab;a.fn.tab=b,a.fn.tab.Constructor=c,a.fn.tab.noConflict=function(){return a.fn.tab=d,this};var e=function(c){c.preventDefault(),b.call(a(this),\"show\")};a(document).on(\"click.bs.tab.data-api\",'[data-toggle=\"tab\"]',e).on(\"click.bs.tab.data-api\",'[data-toggle=\"pill\"]',e)}(jQuery),+function(a){\"use strict\";function b(b){return this.each(function(){var d=a(this),e=d.data(\"bs.affix\"),f=\"object\"==typeof b&&b;e||d.data(\"bs.affix\",e=new c(this,f)),\"string\"==typeof b&&e[b]()})}var c=function(b,d){this.options=a.extend({},c.DEFAULTS,d),this.$target=a(this.options.target).on(\"scroll.bs.affix.data-api\",a.proxy(this.checkPosition,this)).on(\"click.bs.affix.data-api\",a.proxy(this.checkPositionWithEventLoop,this)),this.$element=a(b),this.affixed=null,this.unpin=null,this.pinnedOffset=null,this.checkPosition()};c.VERSION=\"3.3.6\",c.RESET=\"affix affix-top affix-bottom\",c.DEFAULTS={offset:0,target:window},c.prototype.getState=function(a,b,c,d){var e=this.$target.scrollTop(),f=this.$element.offset(),g=this.$target.height();if(null!=c&&\"top\"==this.affixed)return c>e?\"top\":!1;if(\"bottom\"==this.affixed)return null!=c?e+this.unpin<=f.top?!1:\"bottom\":a-d>=e+g?!1:\"bottom\";var h=null==this.affixed,i=h?e:f.top,j=h?g:b;return null!=c&&c>=e?\"top\":null!=d&&i+j>=a-d?\"bottom\":!1},c.prototype.getPinnedOffset=function(){if(this.pinnedOffset)return this.pinnedOffset;this.$element.removeClass(c.RESET).addClass(\"affix\");var a=this.$target.scrollTop(),b=this.$element.offset();return this.pinnedOffset=b.top-a},c.prototype.checkPositionWithEventLoop=function(){setTimeout(a.proxy(this.checkPosition,this),1)},c.prototype.checkPosition=function(){if(this.$element.is(\":visible\")){var b=this.$element.height(),d=this.options.offset,e=d.top,f=d.bottom,g=Math.max(a(document).height(),a(document.body).height());\"object\"!=typeof d&&(f=e=d),\"function\"==typeof e&&(e=d.top(this.$element)),\"function\"==typeof f&&(f=d.bottom(this.$element));var h=this.getState(g,b,e,f);if(this.affixed!=h){null!=this.unpin&&this.$element.css(\"top\",\"\");var i=\"affix\"+(h?\"-\"+h:\"\"),j=a.Event(i+\".bs.affix\");if(this.$element.trigger(j),j.isDefaultPrevented())return;this.affixed=h,this.unpin=\"bottom\"==h?this.getPinnedOffset():null,this.$element.removeClass(c.RESET).addClass(i).trigger(i.replace(\"affix\",\"affixed\")+\".bs.affix\")}\"bottom\"==h&&this.$element.offset({top:g-b-f})}};var d=a.fn.affix;a.fn.affix=b,a.fn.affix.Constructor=c,a.fn.affix.noConflict=function(){return a.fn.affix=d,this},a(window).on(\"load\",function(){a('[data-spy=\"affix\"]').each(function(){var c=a(this),d=c.data();d.offset=d.offset||{},null!=d.offsetBottom&&(d.offset.bottom=d.offsetBottom),null!=d.offsetTop&&(d.offset.top=d.offsetTop),b.call(c,d)})})}(jQuery);"
			},
			{
				"name": "DeviceDetector.js",
				"source": "//  Device Detector.\n\n    var isMobile = ( function () {\n        var ua = navigator.userAgent,\n            apple_phone      = /iPhone/i,\n            apple_ipod       = /iPod/i,\n            apple_tablet     = /iPad/i,\n            android_phone    = /(?=.*\\bAndroid\\b)(?=.*\\bMobile\\b)/i, // Match 'Android' AND 'Mobile'\n            android_tablet   = /Android/i,\n            windows_phone    = /IEMobile/i,\n            windows_tablet   = /(?=.*\\bWindows\\b)(?=.*\\bARM\\b)/i, // Match 'Windows' AND 'ARM'\n            other_blackberry = /BlackBerry/i,\n            other_opera      = /Opera Mini/i,\n            other_firefox    = /(?=.*\\bFirefox\\b)(?=.*\\bMobile\\b)/i; // Match 'Firefox' AND 'Mobile'\n\n        if (\n        apple_phone.test( ua )      ||\n        apple_phone.test( ua )      ||\n        apple_ipod.test( ua )       ||\n        apple_tablet.test( ua )     ||\n        android_phone.test( ua )    ||\n        android_tablet.test( ua )   ||\n        windows_phone.test( ua )    ||\n        windows_tablet.test( ua )   ||\n        other_blackberry.test( ua ) ||\n        other_opera.test( ua )      ||\n        other_firefox.test( ua )\n        ){\n\n            return true;\n\n        } else {\n\n            return false;\n\n        }\n    })();\n"
			},
			{
				"name": "validator.min.js",
				"source": "/*!\n * Copyright (c) 2016 Chris O'Hara <cohara87@gmail.com>\n * \n * Permission is hereby granted, free of charge, to any person obtaining\n * a copy of this software and associated documentation files (the\n * \"Software\"), to deal in the Software without restriction, including\n * without limitation the rights to use, copy, modify, merge, publish,\n * distribute, sublicense, and/or sell copies of the Software, and to\n * permit persons to whom the Software is furnished to do so, subject to\n * the following conditions:\n * \n * The above copyright notice and this permission notice shall be\n * included in all copies or substantial portions of the Software.\n * \n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\n * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND\n * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE\n * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION\n * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION\n * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n */\n!function(e,t){\"object\"==typeof exports&&\"undefined\"!=typeof module?module.exports=t():\"function\"==typeof define&&define.amd?define(t):e.validator=t()}(this,function(){\"use strict\";function f(e){if(!(\"string\"==typeof e||e instanceof String))throw new TypeError(\"This library (validator.js) validates strings only\")}function i(e){return f(e),e=Date.parse(e),isNaN(e)?null:new Date(e)}function r(e){return f(e),parseFloat(e)}var a=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&\"function\"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?\"symbol\":typeof e};function n(e){return\"object\"===(void 0===e?\"undefined\":a(e))&&null!==e?e=\"function\"==typeof e.toString?e.toString():\"[object Object]\":(null==e||isNaN(e)&&!e.length)&&(e=\"\"),String(e)}function c(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:{},t=arguments[1];for(var r in t)void 0===e[r]&&(e[r]=t[r]);return e}function d(e,t){f(e);var r=void 0,o=void 0;\"object\"===(void 0===t?\"undefined\":a(t))?(r=t.min||0,o=t.max):(r=t,o=arguments[2]);var i=encodeURI(e).split(/%..|./).length-1;return r<=i&&(void 0===o||i<=o)}var l={require_tld:!0,allow_underscores:!1,allow_trailing_dot:!1};function p(e,t){f(e),(t=c(t,l)).allow_trailing_dot&&\".\"===e[e.length-1]&&(e=e.substring(0,e.length-1));for(var r=e.split(\".\"),o=0;o<r.length;o++)if(63<r[o].length)return!1;if(t.require_tld){var i=r.pop();if(!r.length||!/^([a-z\\u00a1-\\uffff]{2,}|xn[a-z0-9-]{2,})$/i.test(i))return!1;if(/[\\s\\u2002-\\u200B\\u202F\\u205F\\u3000\\uFEFF\\uDB40\\uDC20]/.test(i))return!1}for(var n,a=0;a<r.length;a++){if(n=r[a],t.allow_underscores&&(n=n.replace(/_/g,\"\")),!/^[a-z\\u00a1-\\uffff0-9-]+$/i.test(n))return!1;if(/[\\uff01-\\uff5e]/.test(n))return!1;if(\"-\"===n[0]||\"-\"===n[n.length-1])return!1}return!0}var g={allow_display_name:!1,require_display_name:!1,allow_utf8_local_part:!0,require_tld:!0},A=/^[a-z\\d!#\\$%&'\\*\\+\\-\\/=\\?\\^_`{\\|}~\\.\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]+[a-z\\d!#\\$%&'\\*\\+\\-\\/=\\?\\^_`{\\|}~\\,\\.\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF\\s]*<(.+)>$/i,h=/^[a-z\\d!#\\$%&'\\*\\+\\-\\/=\\?\\^_`{\\|}~]+$/i,v=/^([\\s\\x01-\\x08\\x0b\\x0c\\x0e-\\x1f\\x7f\\x21\\x23-\\x5b\\x5d-\\x7e]|(\\\\[\\x01-\\x09\\x0b\\x0c\\x0d-\\x7f]))*$/i,m=/^[a-z\\d!#\\$%&'\\*\\+\\-\\/=\\?\\^_`{\\|}~\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]+$/i,_=/^([\\s\\x01-\\x08\\x0b\\x0c\\x0e-\\x1f\\x7f\\x21\\x23-\\x5b\\x5d-\\x7e\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]|(\\\\[\\x01-\\x09\\x0b\\x0c\\x0d-\\x7f\\u00A0-\\uD7FF\\uF900-\\uFDCF\\uFDF0-\\uFFEF]))*$/i;var s=/^(\\d{1,3})\\.(\\d{1,3})\\.(\\d{1,3})\\.(\\d{1,3})$/,u=/^[0-9A-F]{1,4}$/i;function F(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:\"\";if(f(e),!(t=String(t)))return F(e,4)||F(e,6);if(\"4\"===t)return!!s.test(e)&&e.split(\".\").sort(function(e,t){return e-t})[3]<=255;if(\"6\"===t){var r=e.split(\":\"),o=!1,i=F(r[r.length-1],4),n=i?7:8;if(r.length>n)return!1;if(\"::\"===e)return!0;\"::\"===e.substr(0,2)?(r.shift(),r.shift(),o=!0):\"::\"===e.substr(e.length-2)&&(r.pop(),r.pop(),o=!0);for(var a=0;a<r.length;++a)if(\"\"===r[a]&&0<a&&a<r.length-1){if(o)return!1;o=!0}else if(i&&a===r.length-1);else if(!u.test(r[a]))return!1;return o?1<=r.length:r.length===n}return!1}var $={protocols:[\"http\",\"https\",\"ftp\"],require_tld:!0,require_protocol:!1,require_host:!0,require_valid_protocol:!0,allow_underscores:!1,allow_trailing_dot:!1,allow_protocol_relative_urls:!1},S=/^\\[([^\\]]+)\\](?::([0-9]+))?$/;function R(e,t){for(var r=0;r<t.length;r++){var o=t[r];if(e===o||(i=o,\"[object RegExp]\"===Object.prototype.toString.call(i)&&o.test(e)))return!0}var i;return!1}var t=/^([0-9a-fA-F][0-9a-fA-F]:){5}([0-9a-fA-F][0-9a-fA-F])$/;for(var e,o={\"en-US\":/^[A-Z]+$/i,\"bg-BG\":/^[-]+$/i,\"cs-CZ\":/^[A-Z]+$/i,\"da-DK\":/^[A-Z]+$/i,\"de-DE\":/^[A-Z]+$/i,\"el-GR\":/^[-]+$/i,\"es-ES\":/^[A-Z]+$/i,\"fr-FR\":/^[A-Z]+$/i,\"it-IT\":/^[A-Z]+$/i,\"nb-NO\":/^[A-Z]+$/i,\"nl-NL\":/^[A-Z]+$/i,\"nn-NO\":/^[A-Z]+$/i,\"hu-HU\":/^[A-Z]+$/i,\"pl-PL\":/^[A-Z]+$/i,\"pt-PT\":/^[A-Z]+$/i,\"ru-RU\":/^[-]+$/i,\"sk-SK\":/^[A-Z]+$/i,\"sr-RS@latin\":/^[A-Z]+$/i,\"sr-RS\":/^[-]+$/i,\"sv-SE\":/^[A-Z]+$/i,\"tr-TR\":/^[A-Z]+$/i,\"uk-UA\":/^[-I]+$/i,ar:/^[]+$/},E={\"en-US\":/^[0-9A-Z]+$/i,\"bg-BG\":/^[0-9-]+$/i,\"cs-CZ\":/^[0-9A-Z]+$/i,\"da-DK\":/^[0-9A-Z]+$/i,\"de-DE\":/^[0-9A-Z]+$/i,\"el-GR\":/^[0-9-]+$/i,\"es-ES\":/^[0-9A-Z]+$/i,\"fr-FR\":/^[0-9A-Z]+$/i,\"it-IT\":/^[0-9A-Z]+$/i,\"hu-HU\":/^[0-9A-Z]+$/i,\"nb-NO\":/^[0-9A-Z]+$/i,\"nl-NL\":/^[0-9A-Z]+$/i,\"nn-NO\":/^[0-9A-Z]+$/i,\"pl-PL\":/^[0-9A-Z]+$/i,\"pt-PT\":/^[0-9A-Z]+$/i,\"ru-RU\":/^[0-9-]+$/i,\"sk-SK\":/^[0-9A-Z]+$/i,\"sr-RS@latin\":/^[0-9A-Z]+$/i,\"sr-RS\":/^[0-9-]+$/i,\"sv-SE\":/^[0-9A-Z]+$/i,\"tr-TR\":/^[0-9A-Z]+$/i,\"uk-UA\":/^[0-9-I]+$/i,ar:/^[0-9]+$/},x={\"en-US\":\".\",ar:\"\"},M=[\"AU\",\"GB\",\"HK\",\"IN\",\"NZ\",\"ZA\",\"ZM\"],C=0;C<M.length;C++)o[e=\"en-\"+M[C]]=o[\"en-US\"],E[e]=E[\"en-US\"],x[e]=x[\"en-US\"];for(var N,w=[\"AE\",\"BH\",\"DZ\",\"EG\",\"IQ\",\"JO\",\"KW\",\"LB\",\"LY\",\"MA\",\"QM\",\"QA\",\"SA\",\"SD\",\"SY\",\"TN\",\"YE\"],T=0;T<w.length;T++)o[N=\"ar-\"+w[T]]=o.ar,E[N]=E.ar,x[N]=x.ar;for(var Z=[],B=[\"bg-BG\",\"cs-CZ\",\"da-DK\",\"de-DE\",\"el-GR\",\"es-ES\",\"fr-FR\",\"it-IT\",\"hu-HU\",\"nb-NO\",\"nn-NO\",\"nl-NL\",\"pl-Pl\",\"pt-PT\",\"ru-RU\",\"sr-RS@latin\",\"sr-RS\",\"sv-SE\",\"tr-TR\",\"uk-UA\"],I=0;I<Z.length;I++)x[Z[I]]=x[\"en-US\"];for(var L=0;L<B.length;L++)x[B[L]]=\",\";o[\"pt-BR\"]=o[\"pt-PT\"],E[\"pt-BR\"]=E[\"pt-PT\"],x[\"pt-BR\"]=x[\"pt-PT\"];var y=/^[+-]?([0-9]*[.])?[0-9]+$/;var G=/^(?:[-+]?(?:0|[1-9][0-9]*))$/,D=/^[-+]?[0-9]+$/;function O(e,t){f(e);var r=(t=t||{}).hasOwnProperty(\"allow_leading_zeroes\")&&!t.allow_leading_zeroes?G:D,o=!t.hasOwnProperty(\"min\")||e>=t.min,i=!t.hasOwnProperty(\"max\")||e<=t.max,n=!t.hasOwnProperty(\"lt\")||e<t.lt,a=!t.hasOwnProperty(\"gt\")||e>t.gt;return r.test(e)&&o&&i&&n&&a}var U=/^[\\x00-\\x7F]+$/;var b=/[^\\u0020-\\u007E\\uFF61-\\uFF9F\\uFFA0-\\uFFDC\\uFFE8-\\uFFEE0-9a-zA-Z]/;var P=/[\\u0020-\\u007E\\uFF61-\\uFF9F\\uFFA0-\\uFFDC\\uFFE8-\\uFFEE0-9a-zA-Z]/;var K=/[^\\x00-\\x7F]/;var k=/[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]/;var H={force_decimal:!1,decimal_digits:\"1,\",locale:\"en-US\"},z=[\"\",\"-\",\"+\"];var V=/^[0-9A-F]+$/i;function W(e){return f(e),V.test(e)}var Y=/^#?([0-9A-F]{3}|[0-9A-F]{6})$/i;var j=/^[A-Z]{2}[0-9A-Z]{3}\\d{2}\\d{5}$/;var J=/^[a-f0-9]{32}$/;var q={md5:32,md4:32,sha1:40,sha256:64,sha384:96,sha512:128,ripemd128:32,ripemd160:40,tiger128:32,tiger160:40,tiger192:48,crc32:8,crc32b:8};var Q={3:/^[0-9A-F]{8}-[0-9A-F]{4}-3[0-9A-F]{3}-[0-9A-F]{4}-[0-9A-F]{12}$/i,4:/^[0-9A-F]{8}-[0-9A-F]{4}-4[0-9A-F]{3}-[89AB][0-9A-F]{3}-[0-9A-F]{12}$/i,5:/^[0-9A-F]{8}-[0-9A-F]{4}-5[0-9A-F]{3}-[89AB][0-9A-F]{3}-[0-9A-F]{12}$/i,all:/^[0-9A-F]{8}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{4}-[0-9A-F]{12}$/i};var X=/^(?:4[0-9]{12}(?:[0-9]{3})?|5[1-5][0-9]{14}|(222[1-9]|22[3-9][0-9]|2[3-6][0-9]{2}|27[01][0-9]|2720)[0-9]{12}|6(?:011|5[0-9][0-9])[0-9]{12}|3[47][0-9]{13}|3(?:0[0-5]|[68][0-9])[0-9]{11}|(?:2131|1800|35\\d{3})\\d{11}|6[27][0-9]{14})$/;var ee=/^[A-Z]{2}[0-9A-Z]{9}[0-9]$/;var te=/^(?:[0-9]{9}X|[0-9]{10})$/,re=/^(?:[0-9]{13})$/,oe=[1,3];var ie=\"^\\\\d{4}-?\\\\d{3}[\\\\dX]$\";var ne={\"ar-AE\":/^((\\+?971)|0)?5[024568]\\d{7}$/,\"ar-DZ\":/^(\\+?213|0)(5|6|7)\\d{8}$/,\"ar-EG\":/^((\\+?20)|0)?1[012]\\d{8}$/,\"ar-JO\":/^(\\+?962|0)?7[789]\\d{7}$/,\"ar-SA\":/^(!?(\\+?966)|0)?5\\d{8}$/,\"ar-SY\":/^(!?(\\+?963)|0)?9\\d{8}$/,\"be-BY\":/^(\\+?375)?(24|25|29|33|44)\\d{7}$/,\"bg-BG\":/^(\\+?359|0)?8[789]\\d{7}$/,\"cs-CZ\":/^(\\+?420)? ?[1-9][0-9]{2} ?[0-9]{3} ?[0-9]{3}$/,\"da-DK\":/^(\\+?45)?\\s?\\d{2}\\s?\\d{2}\\s?\\d{2}\\s?\\d{2}$/,\"de-DE\":/^(\\+?49[ \\.\\-])?([\\(]{1}[0-9]{1,6}[\\)])?([0-9 \\.\\-\\/]{3,20})((x|ext|extension)[ ]?[0-9]{1,4})?$/,\"el-GR\":/^(\\+?30|0)?(69\\d{8})$/,\"en-AU\":/^(\\+?61|0)4\\d{8}$/,\"en-GB\":/^(\\+?44|0)7\\d{9}$/,\"en-HK\":/^(\\+?852\\-?)?[456789]\\d{3}\\-?\\d{4}$/,\"en-IN\":/^(\\+?91|0)?[6789]\\d{9}$/,\"en-KE\":/^(\\+?254|0)?[7]\\d{8}$/,\"en-NG\":/^(\\+?234|0)?[789]\\d{9}$/,\"en-NZ\":/^(\\+?64|0)2\\d{7,9}$/,\"en-PK\":/^((\\+92)|(0092))-{0,1}\\d{3}-{0,1}\\d{7}$|^\\d{11}$|^\\d{4}-\\d{7}$/,\"en-RW\":/^(\\+?250|0)?[7]\\d{8}$/,\"en-SG\":/^(\\+65)?[89]\\d{7}$/,\"en-TZ\":/^(\\+?255|0)?[67]\\d{8}$/,\"en-UG\":/^(\\+?256|0)?[7]\\d{8}$/,\"en-US\":/^(\\+?1)?[2-9]\\d{2}[2-9](?!11)\\d{6}$/,\"en-ZA\":/^(\\+?27|0)\\d{9}$/,\"en-ZM\":/^(\\+?26)?09[567]\\d{7}$/,\"es-ES\":/^(\\+?34)?(6\\d{1}|7[1234])\\d{7}$/,\"et-EE\":/^(\\+?372)?\\s?(5|8[1-4])\\s?([0-9]\\s?){6,7}$/,\"fa-IR\":/^(\\+?98[\\-\\s]?|0)9[0-39]\\d[\\-\\s]?\\d{3}[\\-\\s]?\\d{4}$/,\"fi-FI\":/^(\\+?358|0)\\s?(4(0|1|2|4|5|6)?|50)\\s?(\\d\\s?){4,8}\\d$/,\"fo-FO\":/^(\\+?298)?\\s?\\d{2}\\s?\\d{2}\\s?\\d{2}$/,\"fr-FR\":/^(\\+?33|0)[67]\\d{8}$/,\"he-IL\":/^(\\+972|0)([23489]|5[012345689]|77)[1-9]\\d{6}/,\"hu-HU\":/^(\\+?36)(20|30|70)\\d{7}$/,\"id-ID\":/^(\\+?62|0[1-9])[\\s|\\d]+$/,\"it-IT\":/^(\\+?39)?\\s?3\\d{2} ?\\d{6,7}$/,\"ja-JP\":/^(\\+?81|0)[789]0[ \\-]?[1-9]\\d{2}[ \\-]?\\d{5}$/,\"kk-KZ\":/^(\\+?7|8)?7\\d{9}$/,\"kl-GL\":/^(\\+?299)?\\s?\\d{2}\\s?\\d{2}\\s?\\d{2}$/,\"ko-KR\":/^((\\+?82)[ \\-]?)?0?1([0|1|6|7|8|9]{1})[ \\-]?\\d{3,4}[ \\-]?\\d{4}$/,\"lt-LT\":/^(\\+370|8)\\d{8}$/,\"ms-MY\":/^(\\+?6?01){1}(([145]{1}(\\-|\\s)?\\d{7,8})|([236789]{1}(\\s|\\-)?\\d{7}))$/,\"nb-NO\":/^(\\+?47)?[49]\\d{7}$/,\"nl-BE\":/^(\\+?32|0)4?\\d{8}$/,\"nn-NO\":/^(\\+?47)?[49]\\d{7}$/,\"pl-PL\":/^(\\+?48)? ?[5-8]\\d ?\\d{3} ?\\d{2} ?\\d{2}$/,\"pt-BR\":/^(\\+?55|0)\\-?[1-9]{2}\\-?[2-9]{1}\\d{3,4}\\-?\\d{4}$/,\"pt-PT\":/^(\\+?351)?9[1236]\\d{7}$/,\"ro-RO\":/^(\\+?4?0)\\s?7\\d{2}(\\/|\\s|\\.|\\-)?\\d{3}(\\s|\\.|\\-)?\\d{3}$/,\"ru-RU\":/^(\\+?7|8)?9\\d{9}$/,\"sk-SK\":/^(\\+?421)? ?[1-9][0-9]{2} ?[0-9]{3} ?[0-9]{3}$/,\"sr-RS\":/^(\\+3816|06)[- \\d]{5,9}$/,\"th-TH\":/^(\\+66|66|0)\\d{9}$/,\"tr-TR\":/^(\\+?90|0)?5\\d{9}$/,\"uk-UA\":/^(\\+?38|8)?0\\d{9}$/,\"vi-VN\":/^(\\+?84|0)?((1(2([0-9])|6([2-9])|88|99))|(9((?!5)[0-9])))([0-9]{7})$/,\"zh-CN\":/^(\\+?0?86\\-?)?1[3456789]\\d{9}$/,\"zh-TW\":/^(\\+?886\\-?|0)?9\\d{8}$/};ne[\"en-CA\"]=ne[\"en-US\"],ne[\"fr-BE\"]=ne[\"nl-BE\"],ne[\"zh-HK\"]=ne[\"en-HK\"];var ae={symbol:\"$\",require_symbol:!1,allow_space_after_symbol:!1,symbol_after_digits:!1,allow_negatives:!0,parens_for_negatives:!1,negative_sign_before_digits:!1,negative_sign_after_digits:!1,allow_negative_sign_placeholder:!1,thousands_separator:\",\",decimal_separator:\".\",allow_decimal:!0,require_decimal:!1,digits_after_decimal:[2],allow_space_after_digits:!1};var le=/^([\\+-]?\\d{4}(?!\\d{2}\\b))((-?)((0[1-9]|1[0-2])(\\3([12]\\d|0[1-9]|3[01]))?|W([0-4]\\d|5[0-2])(-?[1-7])?|(00[1-9]|0[1-9]\\d|[12]\\d{2}|3([0-5]\\d|6[1-6])))([T\\s]((([01]\\d|2[0-3])((:?)[0-5]\\d)?|24:?00)([\\.,]\\d+(?!:))?)?(\\17[0-5]\\d([\\.,]\\d+)?)?([zZ]|([\\+-])([01]\\d|2[0-3]):?([0-5]\\d)?)?)?)?$/;var se=/([01][0-9]|2[0-3])/,ue=/[0-5][0-9]/,de=new RegExp(\"[-+]\"+se.source+\":\"+ue.source),ce=new RegExp(\"([zZ]|\"+de.source+\")\"),fe=new RegExp(se.source+\":\"+ue.source+\":\"+/([0-5][0-9]|60)/.source+/(\\.[0-9]+)?/.source),pe=new RegExp(/[0-9]{4}/.source+\"-\"+/(0[1-9]|1[0-2])/.source+\"-\"+/([12]\\d|0[1-9]|3[01])/.source),ge=new RegExp(\"\"+fe.source+ce.source),Ae=new RegExp(pe.source+\"[ tT]\"+ge.source);var he=[\"AD\",\"AE\",\"AF\",\"AG\",\"AI\",\"AL\",\"AM\",\"AO\",\"AQ\",\"AR\",\"AS\",\"AT\",\"AU\",\"AW\",\"AX\",\"AZ\",\"BA\",\"BB\",\"BD\",\"BE\",\"BF\",\"BG\",\"BH\",\"BI\",\"BJ\",\"BL\",\"BM\",\"BN\",\"BO\",\"BQ\",\"BR\",\"BS\",\"BT\",\"BV\",\"BW\",\"BY\",\"BZ\",\"CA\",\"CC\",\"CD\",\"CF\",\"CG\",\"CH\",\"CI\",\"CK\",\"CL\",\"CM\",\"CN\",\"CO\",\"CR\",\"CU\",\"CV\",\"CW\",\"CX\",\"CY\",\"CZ\",\"DE\",\"DJ\",\"DK\",\"DM\",\"DO\",\"DZ\",\"EC\",\"EE\",\"EG\",\"EH\",\"ER\",\"ES\",\"ET\",\"FI\",\"FJ\",\"FK\",\"FM\",\"FO\",\"FR\",\"GA\",\"GB\",\"GD\",\"GE\",\"GF\",\"GG\",\"GH\",\"GI\",\"GL\",\"GM\",\"GN\",\"GP\",\"GQ\",\"GR\",\"GS\",\"GT\",\"GU\",\"GW\",\"GY\",\"HK\",\"HM\",\"HN\",\"HR\",\"HT\",\"HU\",\"ID\",\"IE\",\"IL\",\"IM\",\"IN\",\"IO\",\"IQ\",\"IR\",\"IS\",\"IT\",\"JE\",\"JM\",\"JO\",\"JP\",\"KE\",\"KG\",\"KH\",\"KI\",\"KM\",\"KN\",\"KP\",\"KR\",\"KW\",\"KY\",\"KZ\",\"LA\",\"LB\",\"LC\",\"LI\",\"LK\",\"LR\",\"LS\",\"LT\",\"LU\",\"LV\",\"LY\",\"MA\",\"MC\",\"MD\",\"ME\",\"MF\",\"MG\",\"MH\",\"MK\",\"ML\",\"MM\",\"MN\",\"MO\",\"MP\",\"MQ\",\"MR\",\"MS\",\"MT\",\"MU\",\"MV\",\"MW\",\"MX\",\"MY\",\"MZ\",\"NA\",\"NC\",\"NE\",\"NF\",\"NG\",\"NI\",\"NL\",\"NO\",\"NP\",\"NR\",\"NU\",\"NZ\",\"OM\",\"PA\",\"PE\",\"PF\",\"PG\",\"PH\",\"PK\",\"PL\",\"PM\",\"PN\",\"PR\",\"PS\",\"PT\",\"PW\",\"PY\",\"QA\",\"RE\",\"RO\",\"RS\",\"RU\",\"RW\",\"SA\",\"SB\",\"SC\",\"SD\",\"SE\",\"SG\",\"SH\",\"SI\",\"SJ\",\"SK\",\"SL\",\"SM\",\"SN\",\"SO\",\"SR\",\"SS\",\"ST\",\"SV\",\"SX\",\"SY\",\"SZ\",\"TC\",\"TD\",\"TF\",\"TG\",\"TH\",\"TJ\",\"TK\",\"TL\",\"TM\",\"TN\",\"TO\",\"TR\",\"TT\",\"TV\",\"TW\",\"TZ\",\"UA\",\"UG\",\"UM\",\"US\",\"UY\",\"UZ\",\"VA\",\"VC\",\"VE\",\"VG\",\"VI\",\"VN\",\"VU\",\"WF\",\"WS\",\"YE\",\"YT\",\"ZA\",\"ZM\",\"ZW\"];var ve=[\"AFG\",\"ALA\",\"ALB\",\"DZA\",\"ASM\",\"AND\",\"AGO\",\"AIA\",\"ATA\",\"ATG\",\"ARG\",\"ARM\",\"ABW\",\"AUS\",\"AUT\",\"AZE\",\"BHS\",\"BHR\",\"BGD\",\"BRB\",\"BLR\",\"BEL\",\"BLZ\",\"BEN\",\"BMU\",\"BTN\",\"BOL\",\"BES\",\"BIH\",\"BWA\",\"BVT\",\"BRA\",\"IOT\",\"BRN\",\"BGR\",\"BFA\",\"BDI\",\"KHM\",\"CMR\",\"CAN\",\"CPV\",\"CYM\",\"CAF\",\"TCD\",\"CHL\",\"CHN\",\"CXR\",\"CCK\",\"COL\",\"COM\",\"COG\",\"COD\",\"COK\",\"CRI\",\"CIV\",\"HRV\",\"CUB\",\"CUW\",\"CYP\",\"CZE\",\"DNK\",\"DJI\",\"DMA\",\"DOM\",\"ECU\",\"EGY\",\"SLV\",\"GNQ\",\"ERI\",\"EST\",\"ETH\",\"FLK\",\"FRO\",\"FJI\",\"FIN\",\"FRA\",\"GUF\",\"PYF\",\"ATF\",\"GAB\",\"GMB\",\"GEO\",\"DEU\",\"GHA\",\"GIB\",\"GRC\",\"GRL\",\"GRD\",\"GLP\",\"GUM\",\"GTM\",\"GGY\",\"GIN\",\"GNB\",\"GUY\",\"HTI\",\"HMD\",\"VAT\",\"HND\",\"HKG\",\"HUN\",\"ISL\",\"IND\",\"IDN\",\"IRN\",\"IRQ\",\"IRL\",\"IMN\",\"ISR\",\"ITA\",\"JAM\",\"JPN\",\"JEY\",\"JOR\",\"KAZ\",\"KEN\",\"KIR\",\"PRK\",\"KOR\",\"KWT\",\"KGZ\",\"LAO\",\"LVA\",\"LBN\",\"LSO\",\"LBR\",\"LBY\",\"LIE\",\"LTU\",\"LUX\",\"MAC\",\"MKD\",\"MDG\",\"MWI\",\"MYS\",\"MDV\",\"MLI\",\"MLT\",\"MHL\",\"MTQ\",\"MRT\",\"MUS\",\"MYT\",\"MEX\",\"FSM\",\"MDA\",\"MCO\",\"MNG\",\"MNE\",\"MSR\",\"MAR\",\"MOZ\",\"MMR\",\"NAM\",\"NRU\",\"NPL\",\"NLD\",\"NCL\",\"NZL\",\"NIC\",\"NER\",\"NGA\",\"NIU\",\"NFK\",\"MNP\",\"NOR\",\"OMN\",\"PAK\",\"PLW\",\"PSE\",\"PAN\",\"PNG\",\"PRY\",\"PER\",\"PHL\",\"PCN\",\"POL\",\"PRT\",\"PRI\",\"QAT\",\"REU\",\"ROU\",\"RUS\",\"RWA\",\"BLM\",\"SHN\",\"KNA\",\"LCA\",\"MAF\",\"SPM\",\"VCT\",\"WSM\",\"SMR\",\"STP\",\"SAU\",\"SEN\",\"SRB\",\"SYC\",\"SLE\",\"SGP\",\"SXM\",\"SVK\",\"SVN\",\"SLB\",\"SOM\",\"ZAF\",\"SGS\",\"SSD\",\"ESP\",\"LKA\",\"SDN\",\"SUR\",\"SJM\",\"SWZ\",\"SWE\",\"CHE\",\"SYR\",\"TWN\",\"TJK\",\"TZA\",\"THA\",\"TLS\",\"TGO\",\"TKL\",\"TON\",\"TTO\",\"TUN\",\"TUR\",\"TKM\",\"TCA\",\"TUV\",\"UGA\",\"UKR\",\"ARE\",\"GBR\",\"USA\",\"UMI\",\"URY\",\"UZB\",\"VUT\",\"VEN\",\"VNM\",\"VGB\",\"VIR\",\"WLF\",\"ESH\",\"YEM\",\"ZMB\",\"ZWE\"];var me=/[^A-Z0-9+\\/=]/i;var _e=/^[a-z]+\\/[a-z0-9\\-\\+]+$/i,Fe=/^[a-z\\-]+=[a-z0-9\\-]+$/i,$e=/^[a-z0-9!\\$&'\\(\\)\\*\\+,;=\\-\\._~:@\\/\\?%\\s]*$/i;var Se=/^(application|audio|font|image|message|model|multipart|text|video)\\/[a-zA-Z0-9\\.\\-\\+]{1,100}$/i,Re=/^text\\/[a-zA-Z0-9\\.\\-\\+]{1,100};\\s?charset=(\"[a-zA-Z0-9\\.\\-\\+\\s]{0,70}\"|[a-zA-Z0-9\\.\\-\\+]{0,70})(\\s?\\([a-zA-Z0-9\\.\\-\\+\\s]{1,20}\\))?$/i,Ee=/^multipart\\/[a-zA-Z0-9\\.\\-\\+]{1,100}(;\\s?(boundary|charset)=(\"[a-zA-Z0-9\\.\\-\\+\\s]{0,70}\"|[a-zA-Z0-9\\.\\-\\+]{0,70})(\\s?\\([a-zA-Z0-9\\.\\-\\+\\s]{1,20}\\))?){0,2}$/i;var xe=/^\\(?[+-]?(90(\\.0+)?|[1-8]?\\d(\\.\\d+)?)$/,Me=/^\\s?[+-]?(180(\\.0+)?|1[0-7]\\d(\\.\\d+)?|\\d{1,2}(\\.\\d+)?)\\)?$/,Ce=/^\\d{4}$/,Ne=/^\\d{5}$/,we=/^\\d{6}$/,Te={AT:Ce,AU:Ce,BE:Ce,BG:Ce,CA:/^[ABCEGHJKLMNPRSTVXY]\\d[ABCEGHJ-NPRSTV-Z][\\s\\-]?\\d[ABCEGHJ-NPRSTV-Z]\\d$/i,CH:Ce,CZ:/^\\d{3}\\s?\\d{2}$/,DE:Ne,DK:Ce,DZ:Ne,ES:Ne,FI:Ne,FR:/^\\d{2}\\s?\\d{3}$/,GB:/^(gir\\s?0aa|[a-z]{1,2}\\d[\\da-z]?\\s?(\\d[a-z]{2})?)$/i,GR:/^\\d{3}\\s?\\d{2}$/,IL:Ne,IN:we,IS:/^\\d{3}$/,IT:Ne,JP:/^\\d{3}\\-\\d{4}$/,KE:Ne,LI:/^(948[5-9]|949[0-7])$/,MX:Ne,NL:/^\\d{4}\\s?[a-z]{2}$/i,NO:Ce,PL:/^\\d{2}\\-\\d{3}$/,PT:/^\\d{4}\\-\\d{3}?$/,RO:we,RU:we,SA:Ne,SE:/^\\d{3}\\s?\\d{2}$/,SK:/^\\d{3}\\s?\\d{2}$/,TW:/^\\d{3}(\\d{2})?$/,US:/^\\d{5}(-\\d{4})?$/,ZA:Ce,ZM:Ne};function Ze(e,t){f(e);var r=t?new RegExp(\"^[\"+t+\"]+\",\"g\"):/^\\s+/g;return e.replace(r,\"\")}function Be(e,t){f(e);for(var r=t?new RegExp(\"[\"+t+\"]\"):/\\s/,o=e.length-1;0<=o&&r.test(e[o]);)o--;return o<e.length?e.substr(0,o+1):e}function Ie(e,t){return f(e),e.replace(new RegExp(\"[\"+t+\"]+\",\"g\"),\"\")}var Le={all_lowercase:!0,gmail_lowercase:!0,gmail_remove_dots:!0,gmail_remove_subaddress:!0,gmail_convert_googlemaildotcom:!0,outlookdotcom_lowercase:!0,outlookdotcom_remove_subaddress:!0,yahoo_lowercase:!0,yahoo_remove_subaddress:!0,yandex_lowercase:!0,icloud_lowercase:!0,icloud_remove_subaddress:!0},ye=[\"icloud.com\",\"me.com\"],Ge=[\"hotmail.at\",\"hotmail.be\",\"hotmail.ca\",\"hotmail.cl\",\"hotmail.co.il\",\"hotmail.co.nz\",\"hotmail.co.th\",\"hotmail.co.uk\",\"hotmail.com\",\"hotmail.com.ar\",\"hotmail.com.au\",\"hotmail.com.br\",\"hotmail.com.gr\",\"hotmail.com.mx\",\"hotmail.com.pe\",\"hotmail.com.tr\",\"hotmail.com.vn\",\"hotmail.cz\",\"hotmail.de\",\"hotmail.dk\",\"hotmail.es\",\"hotmail.fr\",\"hotmail.hu\",\"hotmail.id\",\"hotmail.ie\",\"hotmail.in\",\"hotmail.it\",\"hotmail.jp\",\"hotmail.kr\",\"hotmail.lv\",\"hotmail.my\",\"hotmail.ph\",\"hotmail.pt\",\"hotmail.sa\",\"hotmail.sg\",\"hotmail.sk\",\"live.be\",\"live.co.uk\",\"live.com\",\"live.com.ar\",\"live.com.mx\",\"live.de\",\"live.es\",\"live.eu\",\"live.fr\",\"live.it\",\"live.nl\",\"msn.com\",\"outlook.at\",\"outlook.be\",\"outlook.cl\",\"outlook.co.il\",\"outlook.co.nz\",\"outlook.co.th\",\"outlook.com\",\"outlook.com.ar\",\"outlook.com.au\",\"outlook.com.br\",\"outlook.com.gr\",\"outlook.com.pe\",\"outlook.com.tr\",\"outlook.com.vn\",\"outlook.cz\",\"outlook.de\",\"outlook.dk\",\"outlook.es\",\"outlook.fr\",\"outlook.hu\",\"outlook.id\",\"outlook.ie\",\"outlook.in\",\"outlook.it\",\"outlook.jp\",\"outlook.kr\",\"outlook.lv\",\"outlook.my\",\"outlook.ph\",\"outlook.pt\",\"outlook.sa\",\"outlook.sg\",\"outlook.sk\",\"passport.com\"],De=[\"rocketmail.com\",\"yahoo.ca\",\"yahoo.co.uk\",\"yahoo.com\",\"yahoo.de\",\"yahoo.fr\",\"yahoo.in\",\"yahoo.it\",\"ymail.com\"],Oe=[\"yandex.ru\",\"yandex.ua\",\"yandex.kz\",\"yandex.com\",\"yandex.by\",\"ya.ru\"];function Ue(e){return 1<e.length?e:\"\"}return{version:\"10.1.0\",toDate:i,toFloat:r,toInt:function(e,t){return f(e),parseInt(e,t||10)},toBoolean:function(e,t){return f(e),t?\"1\"===e||\"true\"===e:\"0\"!==e&&\"false\"!==e&&\"\"!==e},equals:function(e,t){return f(e),e===t},contains:function(e,t){return f(e),0<=e.indexOf(n(t))},matches:function(e,t,r){return f(e),\"[object RegExp]\"!==Object.prototype.toString.call(t)&&(t=new RegExp(t,r)),t.test(e)},isEmail:function(e,t){if(f(e),(t=c(t,g)).require_display_name||t.allow_display_name){var r=e.match(A);if(r)e=r[1];else if(t.require_display_name)return!1}var o=e.split(\"@\"),i=o.pop(),n=o.join(\"@\"),a=i.toLowerCase();if(\"gmail.com\"!==a&&\"googlemail.com\"!==a||(n=n.toLowerCase()),!d(n,{max:64})||!d(i,{max:254}))return!1;if(!p(i,{require_tld:t.require_tld}))return!1;if('\"'===n[0])return n=n.slice(1,n.length-1),t.allow_utf8_local_part?_.test(n):v.test(n);for(var l=t.allow_utf8_local_part?m:h,s=n.split(\".\"),u=0;u<s.length;u++)if(!l.test(s[u]))return!1;return!0},isURL:function(e,t){if(f(e),!e||2083<=e.length||/[\\s<>]/.test(e))return!1;if(0===e.indexOf(\"mailto:\"))return!1;t=c(t,$);var r=void 0,o=void 0,i=void 0,n=void 0,a=void 0,l=void 0,s=void 0,u=void 0;if(1<(s=(e=(s=(e=(s=e.split(\"#\")).shift()).split(\"?\")).shift()).split(\"://\")).length){if(r=s.shift(),t.require_valid_protocol&&-1===t.protocols.indexOf(r))return!1}else{if(t.require_protocol)return!1;t.allow_protocol_relative_urls&&\"//\"===e.substr(0,2)&&(s[0]=e.substr(2))}if(\"\"===(e=s.join(\"://\")))return!1;if(\"\"===(e=(s=e.split(\"/\")).shift())&&!t.require_host)return!0;if(1<(s=e.split(\"@\")).length&&0<=(o=s.shift()).indexOf(\":\")&&2<o.split(\":\").length)return!1;u=l=null;var d=(n=s.join(\"@\")).match(S);return d?(i=\"\",u=d[1],l=d[2]||null):(i=(s=n.split(\":\")).shift(),s.length&&(l=s.join(\":\"))),!(null!==l&&(a=parseInt(l,10),!/^[0-9]+$/.test(l)||a<=0||65535<a)||!(F(i)||p(i,t)||u&&F(u,6))||(i=i||u,t.host_whitelist&&!R(i,t.host_whitelist)||t.host_blacklist&&R(i,t.host_blacklist)))},isMACAddress:function(e){return f(e),t.test(e)},isIP:F,isFQDN:p,isBoolean:function(e){return f(e),0<=[\"true\",\"false\",\"1\",\"0\"].indexOf(e)},isAlpha:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:\"en-US\";if(f(e),t in o)return o[t].test(e);throw new Error(\"Invalid locale '\"+t+\"'\")},isAlphanumeric:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:\"en-US\";if(f(e),t in E)return E[t].test(e);throw new Error(\"Invalid locale '\"+t+\"'\")},isNumeric:function(e){return f(e),y.test(e)},isPort:function(e){return O(e,{min:0,max:65535})},isLowercase:function(e){return f(e),e===e.toLowerCase()},isUppercase:function(e){return f(e),e===e.toUpperCase()},isAscii:function(e){return f(e),U.test(e)},isFullWidth:function(e){return f(e),b.test(e)},isHalfWidth:function(e){return f(e),P.test(e)},isVariableWidth:function(e){return f(e),b.test(e)&&P.test(e)},isMultibyte:function(e){return f(e),K.test(e)},isSurrogatePair:function(e){return f(e),k.test(e)},isInt:O,isFloat:function(e,t){f(e),t=t||{};var r=new RegExp(\"^(?:[-+])?(?:[0-9]+)?(?:\\\\\"+(t.locale?x[t.locale]:\".\")+\"[0-9]*)?(?:[eE][\\\\+\\\\-]?(?:[0-9]+))?$\");if(\"\"===e||\".\"===e||\"-\"===e||\"+\"===e)return!1;var o=parseFloat(e.replace(\",\",\".\"));return r.test(e)&&(!t.hasOwnProperty(\"min\")||o>=t.min)&&(!t.hasOwnProperty(\"max\")||o<=t.max)&&(!t.hasOwnProperty(\"lt\")||o<t.lt)&&(!t.hasOwnProperty(\"gt\")||o>t.gt)},isDecimal:function(e,t){if(f(e),(t=c(t,H)).locale in x)return!z.includes(e.replace(/ /g,\"\"))&&(r=t,new RegExp(\"^[-+]?([0-9]+)?(\\\\\"+x[r.locale]+\"[0-9]{\"+r.decimal_digits+\"})\"+(r.force_decimal?\"\":\"?\")+\"$\")).test(e);var r;throw new Error(\"Invalid locale '\"+t.locale+\"'\")},isHexadecimal:W,isDivisibleBy:function(e,t){return f(e),r(e)%parseInt(t,10)==0},isHexColor:function(e){return f(e),Y.test(e)},isISRC:function(e){return f(e),j.test(e)},isMD5:function(e){return f(e),J.test(e)},isHash:function(e,t){return f(e),new RegExp(\"^[a-f0-9]{\"+q[t]+\"}$\").test(e)},isJSON:function(e){f(e);try{var t=JSON.parse(e);return!!t&&\"object\"===(void 0===t?\"undefined\":a(t))}catch(e){}return!1},isEmpty:function(e){return f(e),0===e.length},isLength:function(e,t){f(e);var r=void 0,o=void 0;\"object\"===(void 0===t?\"undefined\":a(t))?(r=t.min||0,o=t.max):(r=t,o=arguments[2]);var i=e.match(/[\\uD800-\\uDBFF][\\uDC00-\\uDFFF]/g)||[],n=e.length-i.length;return r<=n&&(void 0===o||n<=o)},isByteLength:d,isUUID:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:\"all\";f(e);var r=Q[t];return r&&r.test(e)},isMongoId:function(e){return f(e),W(e)&&24===e.length},isAfter:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:String(new Date);f(e);var r=i(t),o=i(e);return!!(o&&r&&r<o)},isBefore:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:String(new Date);f(e);var r=i(t),o=i(e);return!!(o&&r&&o<r)},isIn:function(e,t){f(e);var r=void 0;if(\"[object Array]\"===Object.prototype.toString.call(t)){var o=[];for(r in t)({}).hasOwnProperty.call(t,r)&&(o[r]=n(t[r]));return 0<=o.indexOf(e)}return\"object\"===(void 0===t?\"undefined\":a(t))?t.hasOwnProperty(e):!(!t||\"function\"!=typeof t.indexOf)&&0<=t.indexOf(e)},isCreditCard:function(e){f(e);var t=e.replace(/[- ]+/g,\"\");if(!X.test(t))return!1;for(var r=0,o=void 0,i=void 0,n=void 0,a=t.length-1;0<=a;a--)o=t.substring(a,a+1),i=parseInt(o,10),r+=n&&10<=(i*=2)?i%10+1:i,n=!n;return!(r%10!=0||!t)},isISIN:function(e){if(f(e),!ee.test(e))return!1;for(var t=e.replace(/[A-Z]/g,function(e){return parseInt(e,36)}),r=0,o=void 0,i=void 0,n=!0,a=t.length-2;0<=a;a--)o=t.substring(a,a+1),i=parseInt(o,10),r+=n&&10<=(i*=2)?i+1:i,n=!n;return parseInt(e.substr(e.length-1),10)===(1e4-r)%10},isISBN:function e(t){var r=1<arguments.length&&void 0!==arguments[1]?arguments[1]:\"\";if(f(t),!(r=String(r)))return e(t,10)||e(t,13);var o=t.replace(/[\\s-]+/g,\"\"),i=0,n=void 0;if(\"10\"===r){if(!te.test(o))return!1;for(n=0;n<9;n++)i+=(n+1)*o.charAt(n);if(\"X\"===o.charAt(9)?i+=100:i+=10*o.charAt(9),i%11==0)return!!o}else if(\"13\"===r){if(!re.test(o))return!1;for(n=0;n<12;n++)i+=oe[n%2]*o.charAt(n);if(o.charAt(12)-(10-i%10)%10==0)return!!o}return!1},isISSN:function(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};f(e);var r=ie;if(r=t.require_hyphen?r.replace(\"?\",\"\"):r,!(r=t.case_sensitive?new RegExp(r):new RegExp(r,\"i\")).test(e))return!1;var o=e.replace(\"-\",\"\"),i=8,n=0,a=!0,l=!1,s=void 0;try{for(var u,d=o[Symbol.iterator]();!(a=(u=d.next()).done);a=!0){var c=u.value;n+=(\"X\"===c.toUpperCase()?10:+c)*i,--i}}catch(e){l=!0,s=e}finally{try{!a&&d.return&&d.return()}finally{if(l)throw s}}return n%11==0},isMobilePhone:function(e,t,r){if(f(e),r&&r.strictMode&&!e.startsWith(\"+\"))return!1;if(t in ne)return ne[t].test(e);if(\"any\"===t){for(var o in ne)if(ne.hasOwnProperty(o)&&ne[o].test(e))return!0;return!1}throw new Error(\"Invalid locale '\"+t+\"'\")},isPostalCode:function(e,t){if(f(e),t in Te)return Te[t].test(e);if(\"any\"===t){for(var r in Te)if(Te.hasOwnProperty(r)&&Te[r].test(e))return!0;return!1}throw new Error(\"Invalid locale '\"+t+\"'\")},isCurrency:function(e,t){return f(e),function(e){var r=\"\\\\d{\"+e.digits_after_decimal[0]+\"}\";e.digits_after_decimal.forEach(function(e,t){0!==t&&(r=r+\"|\\\\d{\"+e+\"}\")});var t=\"(\\\\\"+e.symbol.replace(/\\./g,\"\\\\.\")+\")\"+(e.require_symbol?\"\":\"?\"),o=\"(\"+[\"0\",\"[1-9]\\\\d*\",\"[1-9]\\\\d{0,2}(\\\\\"+e.thousands_separator+\"\\\\d{3})*\"].join(\"|\")+\")?\",i=\"(\\\\\"+e.decimal_separator+\"(\"+r+\"))\"+(e.require_decimal?\"\":\"?\"),n=o+(e.allow_decimal||e.require_decimal?i:\"\");return e.allow_negatives&&!e.parens_for_negatives&&(e.negative_sign_after_digits?n+=\"-?\":e.negative_sign_before_digits&&(n=\"-?\"+n)),e.allow_negative_sign_placeholder?n=\"( (?!\\\\-))?\"+n:e.allow_space_after_symbol?n=\" ?\"+n:e.allow_space_after_digits&&(n+=\"( (?!$))?\"),e.symbol_after_digits?n+=t:n=t+n,e.allow_negatives&&(e.parens_for_negatives?n=\"(\\\\(\"+n+\"\\\\)|\"+n+\")\":e.negative_sign_before_digits||e.negative_sign_after_digits||(n=\"-?\"+n)),new RegExp(\"^(?!-? )(?=.*\\\\d)\"+n+\"$\")}(t=c(t,ae)).test(e)},isISO8601:function(e){return f(e),le.test(e)},isRFC3339:function(e){return f(e),Ae.test(e)},isISO31661Alpha2:function(e){return f(e),he.includes(e.toUpperCase())},isISO31661Alpha3:function(e){return f(e),ve.includes(e.toUpperCase())},isBase64:function(e){f(e);var t=e.length;if(!t||t%4!=0||me.test(e))return!1;var r=e.indexOf(\"=\");return-1===r||r===t-1||r===t-2&&\"=\"===e[t-1]},isDataURI:function(e){f(e);var t=e.split(\",\");if(t.length<2)return!1;var r=t.shift().trim().split(\";\"),o=r.shift();if(\"data:\"!==o.substr(0,5))return!1;var i=o.substr(5);if(\"\"!==i&&!_e.test(i))return!1;for(var n=0;n<r.length;n++)if(n===r.length-1&&\"base64\"===r[n].toLowerCase());else if(!Fe.test(r[n]))return!1;for(var a=0;a<t.length;a++)if(!$e.test(t[a]))return!1;return!0},isMimeType:function(e){return f(e),Se.test(e)||Re.test(e)||Ee.test(e)},isLatLong:function(e){if(f(e),!e.includes(\",\"))return!1;var t=e.split(\",\");return xe.test(t[0])&&Me.test(t[1])},ltrim:Ze,rtrim:Be,trim:function(e,t){return Be(Ze(e,t),t)},escape:function(e){return f(e),e.replace(/&/g,\"&amp;\").replace(/\"/g,\"&quot;\").replace(/'/g,\"&#x27;\").replace(/</g,\"&lt;\").replace(/>/g,\"&gt;\").replace(/\\//g,\"&#x2F;\").replace(/\\\\/g,\"&#x5C;\").replace(/`/g,\"&#96;\")},unescape:function(e){return f(e),e.replace(/&amp;/g,\"&\").replace(/&quot;/g,'\"').replace(/&#x27;/g,\"'\").replace(/&lt;/g,\"<\").replace(/&gt;/g,\">\").replace(/&#x2F;/g,\"/\").replace(/&#x5C;/g,\"\\\\\").replace(/&#96;/g,\"`\")},stripLow:function(e,t){return f(e),Ie(e,t?\"\\\\x00-\\\\x09\\\\x0B\\\\x0C\\\\x0E-\\\\x1F\\\\x7F\":\"\\\\x00-\\\\x1F\\\\x7F\")},whitelist:function(e,t){return f(e),e.replace(new RegExp(\"[^\"+t+\"]+\",\"g\"),\"\")},blacklist:Ie,isWhitelisted:function(e,t){f(e);for(var r=e.length-1;0<=r;r--)if(-1===t.indexOf(e[r]))return!1;return!0},normalizeEmail:function(e,t){t=c(t,Le);var r=e.split(\"@\"),o=r.pop(),i=[r.join(\"@\"),o];if(i[1]=i[1].toLowerCase(),\"gmail.com\"===i[1]||\"googlemail.com\"===i[1]){if(t.gmail_remove_subaddress&&(i[0]=i[0].split(\"+\")[0]),t.gmail_remove_dots&&(i[0]=i[0].replace(/\\.+/g,Ue)),!i[0].length)return!1;(t.all_lowercase||t.gmail_lowercase)&&(i[0]=i[0].toLowerCase()),i[1]=t.gmail_convert_googlemaildotcom?\"gmail.com\":i[1]}else if(~ye.indexOf(i[1])){if(t.icloud_remove_subaddress&&(i[0]=i[0].split(\"+\")[0]),!i[0].length)return!1;(t.all_lowercase||t.icloud_lowercase)&&(i[0]=i[0].toLowerCase())}else if(~Ge.indexOf(i[1])){if(t.outlookdotcom_remove_subaddress&&(i[0]=i[0].split(\"+\")[0]),!i[0].length)return!1;(t.all_lowercase||t.outlookdotcom_lowercase)&&(i[0]=i[0].toLowerCase())}else if(~De.indexOf(i[1])){if(t.yahoo_remove_subaddress){var n=i[0].split(\"-\");i[0]=1<n.length?n.slice(0,-1).join(\"-\"):n[0]}if(!i[0].length)return!1;(t.all_lowercase||t.yahoo_lowercase)&&(i[0]=i[0].toLowerCase())}else~Oe.indexOf(i[1])?((t.all_lowercase||t.yandex_lowercase)&&(i[0]=i[0].toLowerCase()),i[1]=\"yandex.ru\"):t.all_lowercase&&(i[0]=i[0].toLowerCase());return i.join(\"@\")},toString:n}});"
			},
			{
				"name": "rawinflate-rawdeflate.js",
				"source": "/*\n * $Id: rawinflate.js,v 0.3 2013/04/09 14:25:38 dankogai Exp dankogai $\n *\n * GNU General Public License, version 2 (GPL-2.0)\n *   http://opensource.org/licenses/GPL-2.0\n * original:\n *   http://www.onicos.com/staff/iz/amuse/javascript/expert/inflate.txt\n */\n\n(function(ctx){\n\n/* Copyright (C) 1999 Masanao Izumo <iz@onicos.co.jp>\n * Version: 1.0.0.1\n * LastModified: Dec 25 1999\n */\n\n/* Interface:\n * data = zip_inflate(src);\n */\n\n/* constant parameters */\nvar zip_WSIZE = 32768;\t\t// Sliding Window size\nvar zip_STORED_BLOCK = 0;\nvar zip_STATIC_TREES = 1;\nvar zip_DYN_TREES    = 2;\n\n/* for inflate */\nvar zip_lbits = 9; \t\t// bits in base literal/length lookup table\nvar zip_dbits = 6; \t\t// bits in base distance lookup table\nvar zip_INBUFSIZ = 32768;\t// Input buffer size\nvar zip_INBUF_EXTRA = 64;\t// Extra buffer\n\n/* variables (inflate) */\nvar zip_slide;\nvar zip_wp;\t\t\t// current position in slide\nvar zip_fixed_tl = null;\t// inflate static\nvar zip_fixed_td;\t\t// inflate static\nvar zip_fixed_bl, zip_fixed_bd;\t// inflate static\nvar zip_bit_buf;\t\t// bit buffer\nvar zip_bit_len;\t\t// bits in bit buffer\nvar zip_method;\nvar zip_eof;\nvar zip_copy_leng;\nvar zip_copy_dist;\nvar zip_tl, zip_td;\t// literal/length and distance decoder tables\nvar zip_bl, zip_bd;\t// number of bits decoded by tl and td\n\nvar zip_inflate_data;\nvar zip_inflate_pos;\n\n\n/* constant tables (inflate) */\nvar zip_MASK_BITS = new Array(\n    0x0000,\n    0x0001, 0x0003, 0x0007, 0x000f, 0x001f, 0x003f, 0x007f, 0x00ff,\n    0x01ff, 0x03ff, 0x07ff, 0x0fff, 0x1fff, 0x3fff, 0x7fff, 0xffff);\n// Tables for deflate from PKZIP's appnote.txt.\nvar zip_cplens = new Array( // Copy lengths for literal codes 257..285\n    3, 4, 5, 6, 7, 8, 9, 10, 11, 13, 15, 17, 19, 23, 27, 31,\n    35, 43, 51, 59, 67, 83, 99, 115, 131, 163, 195, 227, 258, 0, 0);\n/* note: see note #13 above about the 258 in this list. */\nvar zip_cplext = new Array( // Extra bits for literal codes 257..285\n    0, 0, 0, 0, 0, 0, 0, 0, 1, 1, 1, 1, 2, 2, 2, 2,\n    3, 3, 3, 3, 4, 4, 4, 4, 5, 5, 5, 5, 0, 99, 99); // 99==invalid\nvar zip_cpdist = new Array( // Copy offsets for distance codes 0..29\n    1, 2, 3, 4, 5, 7, 9, 13, 17, 25, 33, 49, 65, 97, 129, 193,\n    257, 385, 513, 769, 1025, 1537, 2049, 3073, 4097, 6145,\n    8193, 12289, 16385, 24577);\nvar zip_cpdext = new Array( // Extra bits for distance codes\n    0, 0, 0, 0, 1, 1, 2, 2, 3, 3, 4, 4, 5, 5, 6, 6,\n    7, 7, 8, 8, 9, 9, 10, 10, 11, 11,\n    12, 12, 13, 13);\nvar zip_border = new Array(  // Order of the bit length code lengths\n    16, 17, 18, 0, 8, 7, 9, 6, 10, 5, 11, 4, 12, 3, 13, 2, 14, 1, 15);\n/* objects (inflate) */\n\nvar zip_HuftList = function() {\n    this.next = null;\n    this.list = null;\n}\n\nvar zip_HuftNode = function() {\n    this.e = 0; // number of extra bits or operation\n    this.b = 0; // number of bits in this code or subcode\n\n    // union\n    this.n = 0; // literal, length base, or distance base\n    this.t = null; // (zip_HuftNode) pointer to next level of table\n}\n\nvar zip_HuftBuild = function(b,\t// code lengths in bits (all assumed <= BMAX)\n\t\t       n,\t// number of codes (assumed <= N_MAX)\n\t\t       s,\t// number of simple-valued codes (0..s-1)\n\t\t       d,\t// list of base values for non-simple codes\n\t\t       e,\t// list of extra bits for non-simple codes\n\t\t       mm\t// maximum lookup bits\n\t\t   ) {\n    this.BMAX = 16;   // maximum bit length of any code\n    this.N_MAX = 288; // maximum number of codes in any set\n    this.status = 0;\t// 0: success, 1: incomplete table, 2: bad input\n    this.root = null;\t// (zip_HuftList) starting table\n    this.m = 0;\t\t// maximum lookup bits, returns actual\n\n/* Given a list of code lengths and a maximum table size, make a set of\n   tables to decode that set of codes.\tReturn zero on success, one if\n   the given code set is incomplete (the tables are still built in this\n   case), two if the input is invalid (all zero length codes or an\n   oversubscribed set of lengths), and three if not enough memory.\n   The code with value 256 is special, and the tables are constructed\n   so that no bits beyond that code are fetched when that code is\n   decoded. */\n    {\n\tvar a;\t\t\t// counter for codes of length k\n\tvar c = new Array(this.BMAX+1);\t// bit length count table\n\tvar el;\t\t\t// length of EOB code (value 256)\n\tvar f;\t\t\t// i repeats in table every f entries\n\tvar g;\t\t\t// maximum code length\n\tvar h;\t\t\t// table level\n\tvar i;\t\t\t// counter, current code\n\tvar j;\t\t\t// counter\n\tvar k;\t\t\t// number of bits in current code\n\tvar lx = new Array(this.BMAX+1);\t// stack of bits per table\n\tvar p;\t\t\t// pointer into c[], b[], or v[]\n\tvar pidx;\t\t// index of p\n\tvar q;\t\t\t// (zip_HuftNode) points to current table\n\tvar r = new zip_HuftNode(); // table entry for structure assignment\n\tvar u = new Array(this.BMAX); // zip_HuftNode[BMAX][]  table stack\n\tvar v = new Array(this.N_MAX); // values in order of bit length\n\tvar w;\n\tvar x = new Array(this.BMAX+1);// bit offsets, then code stack\n\tvar xp;\t\t\t// pointer into x or c\n\tvar y;\t\t\t// number of dummy codes added\n\tvar z;\t\t\t// number of entries in current table\n\tvar o;\n\tvar tail;\t\t// (zip_HuftList)\n\n\ttail = this.root = null;\n\tfor(i = 0; i < c.length; i++)\n\t    c[i] = 0;\n\tfor(i = 0; i < lx.length; i++)\n\t    lx[i] = 0;\n\tfor(i = 0; i < u.length; i++)\n\t    u[i] = null;\n\tfor(i = 0; i < v.length; i++)\n\t    v[i] = 0;\n\tfor(i = 0; i < x.length; i++)\n\t    x[i] = 0;\n\n\t// Generate counts for each bit length\n\tel = n > 256 ? b[256] : this.BMAX; // set length of EOB code, if any\n\tp = b; pidx = 0;\n\ti = n;\n\tdo {\n\t    c[p[pidx]]++;\t// assume all entries <= BMAX\n\t    pidx++;\n\t} while(--i > 0);\n\tif(c[0] == n) {\t// null input--all zero length codes\n\t    this.root = null;\n\t    this.m = 0;\n\t    this.status = 0;\n\t    return;\n\t}\n\n\t// Find minimum and maximum length, bound *m by those\n\tfor(j = 1; j <= this.BMAX; j++)\n\t    if(c[j] != 0)\n\t\tbreak;\n\tk = j;\t\t\t// minimum code length\n\tif(mm < j)\n\t    mm = j;\n\tfor(i = this.BMAX; i != 0; i--)\n\t    if(c[i] != 0)\n\t\tbreak;\n\tg = i;\t\t\t// maximum code length\n\tif(mm > i)\n\t    mm = i;\n\n\t// Adjust last length count to fill out codes, if needed\n\tfor(y = 1 << j; j < i; j++, y <<= 1)\n\t    if((y -= c[j]) < 0) {\n\t\tthis.status = 2;\t// bad input: more codes than bits\n\t\tthis.m = mm;\n\t\treturn;\n\t    }\n\tif((y -= c[i]) < 0) {\n\t    this.status = 2;\n\t    this.m = mm;\n\t    return;\n\t}\n\tc[i] += y;\n\n\t// Generate starting offsets into the value table for each length\n\tx[1] = j = 0;\n\tp = c;\n\tpidx = 1;\n\txp = 2;\n\twhile(--i > 0)\t\t// note that i == g from above\n\t    x[xp++] = (j += p[pidx++]);\n\n\t// Make a table of values in order of bit lengths\n\tp = b; pidx = 0;\n\ti = 0;\n\tdo {\n\t    if((j = p[pidx++]) != 0)\n\t\tv[x[j]++] = i;\n\t} while(++i < n);\n\tn = x[g];\t\t\t// set n to length of v\n\n\t// Generate the Huffman codes and for each, make the table entries\n\tx[0] = i = 0;\t\t// first Huffman code is zero\n\tp = v; pidx = 0;\t\t// grab values in bit order\n\th = -1;\t\t\t// no tables yet--level -1\n\tw = lx[0] = 0;\t\t// no bits decoded yet\n\tq = null;\t\t\t// ditto\n\tz = 0;\t\t\t// ditto\n\n\t// go through the bit lengths (k already is bits in shortest code)\n\tfor(; k <= g; k++) {\n\t    a = c[k];\n\t    while(a-- > 0) {\n\t\t// here i is the Huffman code of length k bits for value p[pidx]\n\t\t// make tables up to required level\n\t\twhile(k > w + lx[1 + h]) {\n\t\t    w += lx[1 + h]; // add bits already decoded\n\t\t    h++;\n\n\t\t    // compute minimum size table less than or equal to *m bits\n\t\t    z = (z = g - w) > mm ? mm : z; // upper limit\n\t\t    if((f = 1 << (j = k - w)) > a + 1) { // try a k-w bit table\n\t\t\t// too few codes for k-w bit table\n\t\t\tf -= a + 1;\t// deduct codes from patterns left\n\t\t\txp = k;\n\t\t\twhile(++j < z) { // try smaller tables up to z bits\n\t\t\t    if((f <<= 1) <= c[++xp])\n\t\t\t\tbreak;\t// enough codes to use up j bits\n\t\t\t    f -= c[xp];\t// else deduct codes from patterns\n\t\t\t}\n\t\t    }\n\t\t    if(w + j > el && w < el)\n\t\t\tj = el - w;\t// make EOB code end at table\n\t\t    z = 1 << j;\t// table entries for j-bit table\n\t\t    lx[1 + h] = j; // set table size in stack\n\n\t\t    // allocate and link in new table\n\t\t    q = new Array(z);\n\t\t    for(o = 0; o < z; o++) {\n\t\t\tq[o] = new zip_HuftNode();\n\t\t    }\n\n\t\t    if(tail == null)\n\t\t\ttail = this.root = new zip_HuftList();\n\t\t    else\n\t\t\ttail = tail.next = new zip_HuftList();\n\t\t    tail.next = null;\n\t\t    tail.list = q;\n\t\t    u[h] = q;\t// table starts after link\n\n\t\t    /* connect to last table, if there is one */\n\t\t    if(h > 0) {\n\t\t\tx[h] = i;\t\t// save pattern for backing up\n\t\t\tr.b = lx[h];\t// bits to dump before this table\n\t\t\tr.e = 16 + j;\t// bits in this table\n\t\t\tr.t = q;\t\t// pointer to this table\n\t\t\tj = (i & ((1 << w) - 1)) >> (w - lx[h]);\n\t\t\tu[h-1][j].e = r.e;\n\t\t\tu[h-1][j].b = r.b;\n\t\t\tu[h-1][j].n = r.n;\n\t\t\tu[h-1][j].t = r.t;\n\t\t    }\n\t\t}\n\n\t\t// set up table entry in r\n\t\tr.b = k - w;\n\t\tif(pidx >= n)\n\t\t    r.e = 99;\t\t// out of values--invalid code\n\t\telse if(p[pidx] < s) {\n\t\t    r.e = (p[pidx] < 256 ? 16 : 15); // 256 is end-of-block code\n\t\t    r.n = p[pidx++];\t// simple code is just the value\n\t\t} else {\n\t\t    r.e = e[p[pidx] - s];\t// non-simple--look up in lists\n\t\t    r.n = d[p[pidx++] - s];\n\t\t}\n\n\t\t// fill code-like entries with r //\n\t\tf = 1 << (k - w);\n\t\tfor(j = i >> w; j < z; j += f) {\n\t\t    q[j].e = r.e;\n\t\t    q[j].b = r.b;\n\t\t    q[j].n = r.n;\n\t\t    q[j].t = r.t;\n\t\t}\n\n\t\t// backwards increment the k-bit code i\n\t\tfor(j = 1 << (k - 1); (i & j) != 0; j >>= 1)\n\t\t    i ^= j;\n\t\ti ^= j;\n\n\t\t// backup over finished tables\n\t\twhile((i & ((1 << w) - 1)) != x[h]) {\n\t\t    w -= lx[h];\t\t// don't need to update q\n\t\t    h--;\n\t\t}\n\t    }\n\t}\n\n\t/* return actual size of base table */\n\tthis.m = lx[1];\n\n\t/* Return true (1) if we were given an incomplete table */\n\tthis.status = ((y != 0 && g != 1) ? 1 : 0);\n    } /* end of constructor */\n}\n\n\n/* routines (inflate) */\n\nvar zip_GET_BYTE = function() {\n    if(zip_inflate_data.length == zip_inflate_pos)\n\treturn -1;\n    return zip_inflate_data.charCodeAt(zip_inflate_pos++) & 0xff;\n}\n\nvar zip_NEEDBITS = function(n) {\n    while(zip_bit_len < n) {\n\tzip_bit_buf |= zip_GET_BYTE() << zip_bit_len;\n\tzip_bit_len += 8;\n    }\n}\n\nvar zip_GETBITS = function(n) {\n    return zip_bit_buf & zip_MASK_BITS[n];\n}\n\nvar zip_DUMPBITS = function(n) {\n    zip_bit_buf >>= n;\n    zip_bit_len -= n;\n}\n\nvar zip_inflate_codes = function(buff, off, size) {\n    /* inflate (decompress) the codes in a deflated (compressed) block.\n       Return an error code or zero if it all goes ok. */\n    var e;\t\t// table entry flag/number of extra bits\n    var t;\t\t// (zip_HuftNode) pointer to table entry\n    var n;\n\n    if(size == 0)\n      return 0;\n\n    // inflate the coded data\n    n = 0;\n    for(;;) {\t\t\t// do until end of block\n\tzip_NEEDBITS(zip_bl);\n\tt = zip_tl.list[zip_GETBITS(zip_bl)];\n\te = t.e;\n\twhile(e > 16) {\n\t    if(e == 99)\n\t\treturn -1;\n\t    zip_DUMPBITS(t.b);\n\t    e -= 16;\n\t    zip_NEEDBITS(e);\n\t    t = t.t[zip_GETBITS(e)];\n\t    e = t.e;\n\t}\n\tzip_DUMPBITS(t.b);\n\n\tif(e == 16) {\t\t// then it's a literal\n\t    zip_wp &= zip_WSIZE - 1;\n\t    buff[off + n++] = zip_slide[zip_wp++] = t.n;\n\t    if(n == size)\n\t\treturn size;\n\t    continue;\n\t}\n\n\t// exit if end of block\n\tif(e == 15)\n\t    break;\n\n\t// it's an EOB or a length\n\n\t// get length of block to copy\n\tzip_NEEDBITS(e);\n\tzip_copy_leng = t.n + zip_GETBITS(e);\n\tzip_DUMPBITS(e);\n\n\t// decode distance of block to copy\n\tzip_NEEDBITS(zip_bd);\n\tt = zip_td.list[zip_GETBITS(zip_bd)];\n\te = t.e;\n\n\twhile(e > 16) {\n\t    if(e == 99)\n\t\treturn -1;\n\t    zip_DUMPBITS(t.b);\n\t    e -= 16;\n\t    zip_NEEDBITS(e);\n\t    t = t.t[zip_GETBITS(e)];\n\t    e = t.e;\n\t}\n\tzip_DUMPBITS(t.b);\n\tzip_NEEDBITS(e);\n\tzip_copy_dist = zip_wp - t.n - zip_GETBITS(e);\n\tzip_DUMPBITS(e);\n\n\t// do the copy\n\twhile(zip_copy_leng > 0 && n < size) {\n\t    zip_copy_leng--;\n\t    zip_copy_dist &= zip_WSIZE - 1;\n\t    zip_wp &= zip_WSIZE - 1;\n\t    buff[off + n++] = zip_slide[zip_wp++]\n\t\t= zip_slide[zip_copy_dist++];\n\t}\n\n\tif(n == size)\n\t    return size;\n    }\n\n    zip_method = -1; // done\n    return n;\n}\n\nvar zip_inflate_stored = function(buff, off, size) {\n    /* \"decompress\" an inflated type 0 (stored) block. */\n    var n;\n\n    // go to byte boundary\n    n = zip_bit_len & 7;\n    zip_DUMPBITS(n);\n\n    // get the length and its complement\n    zip_NEEDBITS(16);\n    n = zip_GETBITS(16);\n    zip_DUMPBITS(16);\n    zip_NEEDBITS(16);\n    if(n != ((~zip_bit_buf) & 0xffff))\n\treturn -1;\t\t\t// error in compressed data\n    zip_DUMPBITS(16);\n\n    // read and output the compressed data\n    zip_copy_leng = n;\n\n    n = 0;\n    while(zip_copy_leng > 0 && n < size) {\n\tzip_copy_leng--;\n\tzip_wp &= zip_WSIZE - 1;\n\tzip_NEEDBITS(8);\n\tbuff[off + n++] = zip_slide[zip_wp++] =\n\t    zip_GETBITS(8);\n\tzip_DUMPBITS(8);\n    }\n\n    if(zip_copy_leng == 0)\n      zip_method = -1; // done\n    return n;\n}\n\nvar zip_inflate_fixed = function(buff, off, size) {\n    /* decompress an inflated type 1 (fixed Huffman codes) block.  We should\n       either replace this with a custom decoder, or at least precompute the\n       Huffman tables. */\n\n    // if first time, set up tables for fixed blocks\n    if(zip_fixed_tl == null) {\n\tvar i;\t\t\t// temporary variable\n\tvar l = new Array(288);\t// length list for huft_build\n\tvar h;\t// zip_HuftBuild\n\n\t// literal table\n\tfor(i = 0; i < 144; i++)\n\t    l[i] = 8;\n\tfor(; i < 256; i++)\n\t    l[i] = 9;\n\tfor(; i < 280; i++)\n\t    l[i] = 7;\n\tfor(; i < 288; i++)\t// make a complete, but wrong code set\n\t    l[i] = 8;\n\tzip_fixed_bl = 7;\n\n\th = new zip_HuftBuild(l, 288, 257, zip_cplens, zip_cplext,\n\t\t\t      zip_fixed_bl);\n\tif(h.status != 0) {\n\t    alert(\"HufBuild error: \"+h.status);\n\t    return -1;\n\t}\n\tzip_fixed_tl = h.root;\n\tzip_fixed_bl = h.m;\n\n\t// distance table\n\tfor(i = 0; i < 30; i++)\t// make an incomplete code set\n\t    l[i] = 5;\n\tzip_fixed_bd = 5;\n\n\th = new zip_HuftBuild(l, 30, 0, zip_cpdist, zip_cpdext, zip_fixed_bd);\n\tif(h.status > 1) {\n\t    zip_fixed_tl = null;\n\t    alert(\"HufBuild error: \"+h.status);\n\t    return -1;\n\t}\n\tzip_fixed_td = h.root;\n\tzip_fixed_bd = h.m;\n    }\n\n    zip_tl = zip_fixed_tl;\n    zip_td = zip_fixed_td;\n    zip_bl = zip_fixed_bl;\n    zip_bd = zip_fixed_bd;\n    return zip_inflate_codes(buff, off, size);\n}\n\nvar zip_inflate_dynamic = function(buff, off, size) {\n    // decompress an inflated type 2 (dynamic Huffman codes) block.\n    var i;\t\t// temporary variables\n    var j;\n    var l;\t\t// last length\n    var n;\t\t// number of lengths to get\n    var t;\t\t// (zip_HuftNode) literal/length code table\n    var nb;\t\t// number of bit length codes\n    var nl;\t\t// number of literal/length codes\n    var nd;\t\t// number of distance codes\n    var ll = new Array(286+30); // literal/length and distance code lengths\n    var h;\t\t// (zip_HuftBuild)\n\n    for(i = 0; i < ll.length; i++)\n\tll[i] = 0;\n\n    // read in table lengths\n    zip_NEEDBITS(5);\n    nl = 257 + zip_GETBITS(5);\t// number of literal/length codes\n    zip_DUMPBITS(5);\n    zip_NEEDBITS(5);\n    nd = 1 + zip_GETBITS(5);\t// number of distance codes\n    zip_DUMPBITS(5);\n    zip_NEEDBITS(4);\n    nb = 4 + zip_GETBITS(4);\t// number of bit length codes\n    zip_DUMPBITS(4);\n    if(nl > 286 || nd > 30)\n      return -1;\t\t// bad lengths\n\n    // read in bit-length-code lengths\n    for(j = 0; j < nb; j++)\n    {\n\tzip_NEEDBITS(3);\n\tll[zip_border[j]] = zip_GETBITS(3);\n\tzip_DUMPBITS(3);\n    }\n    for(; j < 19; j++)\n\tll[zip_border[j]] = 0;\n\n    // build decoding table for trees--single level, 7 bit lookup\n    zip_bl = 7;\n    h = new zip_HuftBuild(ll, 19, 19, null, null, zip_bl);\n    if(h.status != 0)\n\treturn -1;\t// incomplete code set\n\n    zip_tl = h.root;\n    zip_bl = h.m;\n\n    // read in literal and distance code lengths\n    n = nl + nd;\n    i = l = 0;\n    while(i < n) {\n\tzip_NEEDBITS(zip_bl);\n\tt = zip_tl.list[zip_GETBITS(zip_bl)];\n\tj = t.b;\n\tzip_DUMPBITS(j);\n\tj = t.n;\n\tif(j < 16)\t\t// length of code in bits (0..15)\n\t    ll[i++] = l = j;\t// save last length in l\n\telse if(j == 16) {\t// repeat last length 3 to 6 times\n\t    zip_NEEDBITS(2);\n\t    j = 3 + zip_GETBITS(2);\n\t    zip_DUMPBITS(2);\n\t    if(i + j > n)\n\t\treturn -1;\n\t    while(j-- > 0)\n\t\tll[i++] = l;\n\t} else if(j == 17) {\t// 3 to 10 zero length codes\n\t    zip_NEEDBITS(3);\n\t    j = 3 + zip_GETBITS(3);\n\t    zip_DUMPBITS(3);\n\t    if(i + j > n)\n\t\treturn -1;\n\t    while(j-- > 0)\n\t\tll[i++] = 0;\n\t    l = 0;\n\t} else {\t\t// j == 18: 11 to 138 zero length codes\n\t    zip_NEEDBITS(7);\n\t    j = 11 + zip_GETBITS(7);\n\t    zip_DUMPBITS(7);\n\t    if(i + j > n)\n\t\treturn -1;\n\t    while(j-- > 0)\n\t\tll[i++] = 0;\n\t    l = 0;\n\t}\n    }\n\n    // build the decoding tables for literal/length and distance codes\n    zip_bl = zip_lbits;\n    h = new zip_HuftBuild(ll, nl, 257, zip_cplens, zip_cplext, zip_bl);\n    if(zip_bl == 0)\t// no literals or lengths\n\th.status = 1;\n    if(h.status != 0) {\n\tif(h.status == 1)\n\t    ;// **incomplete literal tree**\n\treturn -1;\t\t// incomplete code set\n    }\n    zip_tl = h.root;\n    zip_bl = h.m;\n\n    for(i = 0; i < nd; i++)\n\tll[i] = ll[i + nl];\n    zip_bd = zip_dbits;\n    h = new zip_HuftBuild(ll, nd, 0, zip_cpdist, zip_cpdext, zip_bd);\n    zip_td = h.root;\n    zip_bd = h.m;\n\n    if(zip_bd == 0 && nl > 257) {   // lengths but no distances\n\t// **incomplete distance tree**\n\treturn -1;\n    }\n\n    if(h.status == 1) {\n\t;// **incomplete distance tree**\n    }\n    if(h.status != 0)\n\treturn -1;\n\n    // decompress until an end-of-block code\n    return zip_inflate_codes(buff, off, size);\n}\n\nvar zip_inflate_start = function() {\n    var i;\n\n    if(zip_slide == null)\n\tzip_slide = new Array(2 * zip_WSIZE);\n    zip_wp = 0;\n    zip_bit_buf = 0;\n    zip_bit_len = 0;\n    zip_method = -1;\n    zip_eof = false;\n    zip_copy_leng = zip_copy_dist = 0;\n    zip_tl = null;\n}\n\nvar zip_inflate_internal = function(buff, off, size) {\n    // decompress an inflated entry\n    var n, i;\n\n    n = 0;\n    while(n < size) {\n\tif(zip_eof && zip_method == -1)\n\t    return n;\n\n\tif(zip_copy_leng > 0) {\n\t    if(zip_method != zip_STORED_BLOCK) {\n\t\t// STATIC_TREES or DYN_TREES\n\t\twhile(zip_copy_leng > 0 && n < size) {\n\t\t    zip_copy_leng--;\n\t\t    zip_copy_dist &= zip_WSIZE - 1;\n\t\t    zip_wp &= zip_WSIZE - 1;\n\t\t    buff[off + n++] = zip_slide[zip_wp++] =\n\t\t\tzip_slide[zip_copy_dist++];\n\t\t}\n\t    } else {\n\t\twhile(zip_copy_leng > 0 && n < size) {\n\t\t    zip_copy_leng--;\n\t\t    zip_wp &= zip_WSIZE - 1;\n\t\t    zip_NEEDBITS(8);\n\t\t    buff[off + n++] = zip_slide[zip_wp++] = zip_GETBITS(8);\n\t\t    zip_DUMPBITS(8);\n\t\t}\n\t\tif(zip_copy_leng == 0)\n\t\t    zip_method = -1; // done\n\t    }\n\t    if(n == size)\n\t\treturn n;\n\t}\n\n\tif(zip_method == -1) {\n\t    if(zip_eof)\n\t\tbreak;\n\n\t    // read in last block bit\n\t    zip_NEEDBITS(1);\n\t    if(zip_GETBITS(1) != 0)\n\t\tzip_eof = true;\n\t    zip_DUMPBITS(1);\n\n\t    // read in block type\n\t    zip_NEEDBITS(2);\n\t    zip_method = zip_GETBITS(2);\n\t    zip_DUMPBITS(2);\n\t    zip_tl = null;\n\t    zip_copy_leng = 0;\n\t}\n\n\tswitch(zip_method) {\n\t  case 0: // zip_STORED_BLOCK\n\t    i = zip_inflate_stored(buff, off + n, size - n);\n\t    break;\n\n\t  case 1: // zip_STATIC_TREES\n\t    if(zip_tl != null)\n\t\ti = zip_inflate_codes(buff, off + n, size - n);\n\t    else\n\t\ti = zip_inflate_fixed(buff, off + n, size - n);\n\t    break;\n\n\t  case 2: // zip_DYN_TREES\n\t    if(zip_tl != null)\n\t\ti = zip_inflate_codes(buff, off + n, size - n);\n\t    else\n\t\ti = zip_inflate_dynamic(buff, off + n, size - n);\n\t    break;\n\n\t  default: // error\n\t    i = -1;\n\t    break;\n\t}\n\n\tif(i == -1) {\n\t    if(zip_eof)\n\t\treturn 0;\n\t    return -1;\n\t}\n\tn += i;\n    }\n    return n;\n}\n\nvar zip_inflate = function(str) {\n    var i, j;\n\n    zip_inflate_start();\n    zip_inflate_data = str;\n    zip_inflate_pos = 0;\n\n    var buff = new Array(1024);\n    var aout = [];\n    while((i = zip_inflate_internal(buff, 0, buff.length)) > 0) {\n\tvar cbuf = new Array(i);\n\tfor(j = 0; j < i; j++){\n\t    cbuf[j] = String.fromCharCode(buff[j]);\n\t}\n\taout[aout.length] = cbuf.join(\"\");\n    }\n    zip_inflate_data = null; // G.C.\n    return aout.join(\"\");\n}\n\nif (! ctx.RawDeflate) ctx.RawDeflate = {};\nctx.RawDeflate.inflate = zip_inflate;\n\n})(this);\n\n/*\n * $Id: rawdeflate.js,v 0.5 2013/04/09 14:25:38 dankogai Exp dankogai $\n *\n * GNU General Public License, version 2 (GPL-2.0)\n *   http://opensource.org/licenses/GPL-2.0\n * Original:\n *  http://www.onicos.com/staff/iz/amuse/javascript/expert/deflate.txt\n */\n\n(function(ctx){\n\n/* Copyright (C) 1999 Masanao Izumo <iz@onicos.co.jp>\n * Version: 1.0.1\n * LastModified: Dec 25 1999\n */\n\n/* Interface:\n * data = zip_deflate(src);\n */\n\n/* constant parameters */\nvar zip_WSIZE = 32768;\t\t// Sliding Window size\nvar zip_STORED_BLOCK = 0;\nvar zip_STATIC_TREES = 1;\nvar zip_DYN_TREES    = 2;\n\n/* for deflate */\nvar zip_DEFAULT_LEVEL = 6;\nvar zip_FULL_SEARCH = true;\nvar zip_INBUFSIZ = 32768;\t// Input buffer size\nvar zip_INBUF_EXTRA = 64;\t// Extra buffer\nvar zip_OUTBUFSIZ = 1024 * 8;\nvar zip_window_size = 2 * zip_WSIZE;\nvar zip_MIN_MATCH = 3;\nvar zip_MAX_MATCH = 258;\nvar zip_BITS = 16;\n// for SMALL_MEM\nvar zip_LIT_BUFSIZE = 0x2000;\nvar zip_HASH_BITS = 13;\n// for MEDIUM_MEM\n// var zip_LIT_BUFSIZE = 0x4000;\n// var zip_HASH_BITS = 14;\n// for BIG_MEM\n// var zip_LIT_BUFSIZE = 0x8000;\n// var zip_HASH_BITS = 15;\nif(zip_LIT_BUFSIZE > zip_INBUFSIZ)\n    alert(\"error: zip_INBUFSIZ is too small\");\nif((zip_WSIZE<<1) > (1<<zip_BITS))\n    alert(\"error: zip_WSIZE is too large\");\nif(zip_HASH_BITS > zip_BITS-1)\n    alert(\"error: zip_HASH_BITS is too large\");\nif(zip_HASH_BITS < 8 || zip_MAX_MATCH != 258)\n    alert(\"error: Code too clever\");\nvar zip_DIST_BUFSIZE = zip_LIT_BUFSIZE;\nvar zip_HASH_SIZE = 1 << zip_HASH_BITS;\nvar zip_HASH_MASK = zip_HASH_SIZE - 1;\nvar zip_WMASK = zip_WSIZE - 1;\nvar zip_NIL = 0; // Tail of hash chains\nvar zip_TOO_FAR = 4096;\nvar zip_MIN_LOOKAHEAD = zip_MAX_MATCH + zip_MIN_MATCH + 1;\nvar zip_MAX_DIST = zip_WSIZE - zip_MIN_LOOKAHEAD;\nvar zip_SMALLEST = 1;\nvar zip_MAX_BITS = 15;\nvar zip_MAX_BL_BITS = 7;\nvar zip_LENGTH_CODES = 29;\nvar zip_LITERALS =256;\nvar zip_END_BLOCK = 256;\nvar zip_L_CODES = zip_LITERALS + 1 + zip_LENGTH_CODES;\nvar zip_D_CODES = 30;\nvar zip_BL_CODES = 19;\nvar zip_REP_3_6 = 16;\nvar zip_REPZ_3_10 = 17;\nvar zip_REPZ_11_138 = 18;\nvar zip_HEAP_SIZE = 2 * zip_L_CODES + 1;\nvar zip_H_SHIFT = parseInt((zip_HASH_BITS + zip_MIN_MATCH - 1) /\n\t\t\t   zip_MIN_MATCH);\n\n/* variables */\nvar zip_free_queue;\nvar zip_qhead, zip_qtail;\nvar zip_initflag;\nvar zip_outbuf = null;\nvar zip_outcnt, zip_outoff;\nvar zip_complete;\nvar zip_window;\nvar zip_d_buf;\nvar zip_l_buf;\nvar zip_prev;\nvar zip_bi_buf;\nvar zip_bi_valid;\nvar zip_block_start;\nvar zip_ins_h;\nvar zip_hash_head;\nvar zip_prev_match;\nvar zip_match_available;\nvar zip_match_length;\nvar zip_prev_length;\nvar zip_strstart;\nvar zip_match_start;\nvar zip_eofile;\nvar zip_lookahead;\nvar zip_max_chain_length;\nvar zip_max_lazy_match;\nvar zip_compr_level;\nvar zip_good_match;\nvar zip_nice_match;\nvar zip_dyn_ltree;\nvar zip_dyn_dtree;\nvar zip_static_ltree;\nvar zip_static_dtree;\nvar zip_bl_tree;\nvar zip_l_desc;\nvar zip_d_desc;\nvar zip_bl_desc;\nvar zip_bl_count;\nvar zip_heap;\nvar zip_heap_len;\nvar zip_heap_max;\nvar zip_depth;\nvar zip_length_code;\nvar zip_dist_code;\nvar zip_base_length;\nvar zip_base_dist;\nvar zip_flag_buf;\nvar zip_last_lit;\nvar zip_last_dist;\nvar zip_last_flags;\nvar zip_flags;\nvar zip_flag_bit;\nvar zip_opt_len;\nvar zip_static_len;\nvar zip_deflate_data;\nvar zip_deflate_pos;\n\n/* objects (deflate) */\n\nvar zip_DeflateCT = function() {\n    this.fc = 0; // frequency count or bit string\n    this.dl = 0; // father node in Huffman tree or length of bit string\n}\n\nvar zip_DeflateTreeDesc = function() {\n    this.dyn_tree = null;\t// the dynamic tree\n    this.static_tree = null;\t// corresponding static tree or NULL\n    this.extra_bits = null;\t// extra bits for each code or NULL\n    this.extra_base = 0;\t// base index for extra_bits\n    this.elems = 0;\t\t// max number of elements in the tree\n    this.max_length = 0;\t// max bit length for the codes\n    this.max_code = 0;\t\t// largest code with non zero frequency\n}\n\n/* Values for max_lazy_match, good_match and max_chain_length, depending on\n * the desired pack level (0..9). The values given below have been tuned to\n * exclude worst case performance for pathological files. Better values may be\n * found for specific files.\n */\nvar zip_DeflateConfiguration = function(a, b, c, d) {\n    this.good_length = a; // reduce lazy search above this match length\n    this.max_lazy = b;    // do not perform lazy search above this match length\n    this.nice_length = c; // quit search above this match length\n    this.max_chain = d;\n}\n\nvar zip_DeflateBuffer = function() {\n    this.next = null;\n    this.len = 0;\n    this.ptr = new Array(zip_OUTBUFSIZ);\n    this.off = 0;\n}\n\n/* constant tables */\nvar zip_extra_lbits = new Array(\n    0,0,0,0,0,0,0,0,1,1,1,1,2,2,2,2,3,3,3,3,4,4,4,4,5,5,5,5,0);\nvar zip_extra_dbits = new Array(\n    0,0,0,0,1,1,2,2,3,3,4,4,5,5,6,6,7,7,8,8,9,9,10,10,11,11,12,12,13,13);\nvar zip_extra_blbits = new Array(\n    0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,2,3,7);\nvar zip_bl_order = new Array(\n    16,17,18,0,8,7,9,6,10,5,11,4,12,3,13,2,14,1,15);\nvar zip_configuration_table = new Array(\n\tnew zip_DeflateConfiguration(0,    0,   0,    0),\n\tnew zip_DeflateConfiguration(4,    4,   8,    4),\n\tnew zip_DeflateConfiguration(4,    5,  16,    8),\n\tnew zip_DeflateConfiguration(4,    6,  32,   32),\n\tnew zip_DeflateConfiguration(4,    4,  16,   16),\n\tnew zip_DeflateConfiguration(8,   16,  32,   32),\n\tnew zip_DeflateConfiguration(8,   16, 128,  128),\n\tnew zip_DeflateConfiguration(8,   32, 128,  256),\n\tnew zip_DeflateConfiguration(32, 128, 258, 1024),\n\tnew zip_DeflateConfiguration(32, 258, 258, 4096));\n\n\n/* routines (deflate) */\n\nvar zip_deflate_start = function(level) {\n    var i;\n\n    if(!level)\n\tlevel = zip_DEFAULT_LEVEL;\n    else if(level < 1)\n\tlevel = 1;\n    else if(level > 9)\n\tlevel = 9;\n\n    zip_compr_level = level;\n    zip_initflag = false;\n    zip_eofile = false;\n    if(zip_outbuf != null)\n\treturn;\n\n    zip_free_queue = zip_qhead = zip_qtail = null;\n    zip_outbuf = new Array(zip_OUTBUFSIZ);\n    zip_window = new Array(zip_window_size);\n    zip_d_buf = new Array(zip_DIST_BUFSIZE);\n    zip_l_buf = new Array(zip_INBUFSIZ + zip_INBUF_EXTRA);\n    zip_prev = new Array(1 << zip_BITS);\n    zip_dyn_ltree = new Array(zip_HEAP_SIZE);\n    for(i = 0; i < zip_HEAP_SIZE; i++)\n\tzip_dyn_ltree[i] = new zip_DeflateCT();\n    zip_dyn_dtree = new Array(2*zip_D_CODES+1);\n    for(i = 0; i < 2*zip_D_CODES+1; i++)\n\tzip_dyn_dtree[i] = new zip_DeflateCT();\n    zip_static_ltree = new Array(zip_L_CODES+2);\n    for(i = 0; i < zip_L_CODES+2; i++)\n\tzip_static_ltree[i] = new zip_DeflateCT();\n    zip_static_dtree = new Array(zip_D_CODES);\n    for(i = 0; i < zip_D_CODES; i++)\n\tzip_static_dtree[i] = new zip_DeflateCT();\n    zip_bl_tree = new Array(2*zip_BL_CODES+1);\n    for(i = 0; i < 2*zip_BL_CODES+1; i++)\n\tzip_bl_tree[i] = new zip_DeflateCT();\n    zip_l_desc = new zip_DeflateTreeDesc();\n    zip_d_desc = new zip_DeflateTreeDesc();\n    zip_bl_desc = new zip_DeflateTreeDesc();\n    zip_bl_count = new Array(zip_MAX_BITS+1);\n    zip_heap = new Array(2*zip_L_CODES+1);\n    zip_depth = new Array(2*zip_L_CODES+1);\n    zip_length_code = new Array(zip_MAX_MATCH-zip_MIN_MATCH+1);\n    zip_dist_code = new Array(512);\n    zip_base_length = new Array(zip_LENGTH_CODES);\n    zip_base_dist = new Array(zip_D_CODES);\n    zip_flag_buf = new Array(parseInt(zip_LIT_BUFSIZE / 8));\n}\n\nvar zip_deflate_end = function() {\n    zip_free_queue = zip_qhead = zip_qtail = null;\n    zip_outbuf = null;\n    zip_window = null;\n    zip_d_buf = null;\n    zip_l_buf = null;\n    zip_prev = null;\n    zip_dyn_ltree = null;\n    zip_dyn_dtree = null;\n    zip_static_ltree = null;\n    zip_static_dtree = null;\n    zip_bl_tree = null;\n    zip_l_desc = null;\n    zip_d_desc = null;\n    zip_bl_desc = null;\n    zip_bl_count = null;\n    zip_heap = null;\n    zip_depth = null;\n    zip_length_code = null;\n    zip_dist_code = null;\n    zip_base_length = null;\n    zip_base_dist = null;\n    zip_flag_buf = null;\n}\n\nvar zip_reuse_queue = function(p) {\n    p.next = zip_free_queue;\n    zip_free_queue = p;\n}\n\nvar zip_new_queue = function() {\n    var p;\n\n    if(zip_free_queue != null)\n    {\n\tp = zip_free_queue;\n\tzip_free_queue = zip_free_queue.next;\n    }\n    else\n\tp = new zip_DeflateBuffer();\n    p.next = null;\n    p.len = p.off = 0;\n\n    return p;\n}\n\nvar zip_head1 = function(i) {\n    return zip_prev[zip_WSIZE + i];\n}\n\nvar zip_head2 = function(i, val) {\n    return zip_prev[zip_WSIZE + i] = val;\n}\n\n/* put_byte is used for the compressed output, put_ubyte for the\n * uncompressed output. However unlzw() uses window for its\n * suffix table instead of its output buffer, so it does not use put_ubyte\n * (to be cleaned up).\n */\nvar zip_put_byte = function(c) {\n    zip_outbuf[zip_outoff + zip_outcnt++] = c;\n    if(zip_outoff + zip_outcnt == zip_OUTBUFSIZ)\n\tzip_qoutbuf();\n}\n\n/* Output a 16 bit value, lsb first */\nvar zip_put_short = function(w) {\n    w &= 0xffff;\n    if(zip_outoff + zip_outcnt < zip_OUTBUFSIZ - 2) {\n\tzip_outbuf[zip_outoff + zip_outcnt++] = (w & 0xff);\n\tzip_outbuf[zip_outoff + zip_outcnt++] = (w >>> 8);\n    } else {\n\tzip_put_byte(w & 0xff);\n\tzip_put_byte(w >>> 8);\n    }\n}\n\n/* ==========================================================================\n * Insert string s in the dictionary and set match_head to the previous head\n * of the hash chain (the most recent string with same hash key). Return\n * the previous length of the hash chain.\n * IN  assertion: all calls to to INSERT_STRING are made with consecutive\n *    input characters and the first MIN_MATCH bytes of s are valid\n *    (except for the last MIN_MATCH-1 bytes of the input file).\n */\nvar zip_INSERT_STRING = function() {\n    zip_ins_h = ((zip_ins_h << zip_H_SHIFT)\n\t\t ^ (zip_window[zip_strstart + zip_MIN_MATCH - 1] & 0xff))\n\t& zip_HASH_MASK;\n    zip_hash_head = zip_head1(zip_ins_h);\n    zip_prev[zip_strstart & zip_WMASK] = zip_hash_head;\n    zip_head2(zip_ins_h, zip_strstart);\n}\n\n/* Send a code of the given tree. c and tree must not have side effects */\nvar zip_SEND_CODE = function(c, tree) {\n    zip_send_bits(tree[c].fc, tree[c].dl);\n}\n\n/* Mapping from a distance to a distance code. dist is the distance - 1 and\n * must not have side effects. dist_code[256] and dist_code[257] are never\n * used.\n */\nvar zip_D_CODE = function(dist) {\n    return (dist < 256 ? zip_dist_code[dist]\n\t    : zip_dist_code[256 + (dist>>7)]) & 0xff;\n}\n\n/* ==========================================================================\n * Compares to subtrees, using the tree depth as tie breaker when\n * the subtrees have equal frequency. This minimizes the worst case length.\n */\nvar zip_SMALLER = function(tree, n, m) {\n    return tree[n].fc < tree[m].fc ||\n      (tree[n].fc == tree[m].fc && zip_depth[n] <= zip_depth[m]);\n}\n\n/* ==========================================================================\n * read string data\n */\nvar zip_read_buff = function(buff, offset, n) {\n    var i;\n    for(i = 0; i < n && zip_deflate_pos < zip_deflate_data.length; i++)\n\tbuff[offset + i] =\n\t    zip_deflate_data.charCodeAt(zip_deflate_pos++) & 0xff;\n    return i;\n}\n\n/* ==========================================================================\n * Initialize the \"longest match\" routines for a new file\n */\nvar zip_lm_init = function() {\n    var j;\n\n    /* Initialize the hash table. */\n    for(j = 0; j < zip_HASH_SIZE; j++)\n//\tzip_head2(j, zip_NIL);\n\tzip_prev[zip_WSIZE + j] = 0;\n    /* prev will be initialized on the fly */\n\n    /* Set the default configuration parameters:\n     */\n    zip_max_lazy_match = zip_configuration_table[zip_compr_level].max_lazy;\n    zip_good_match     = zip_configuration_table[zip_compr_level].good_length;\n    if(!zip_FULL_SEARCH)\n\tzip_nice_match = zip_configuration_table[zip_compr_level].nice_length;\n    zip_max_chain_length = zip_configuration_table[zip_compr_level].max_chain;\n\n    zip_strstart = 0;\n    zip_block_start = 0;\n\n    zip_lookahead = zip_read_buff(zip_window, 0, 2 * zip_WSIZE);\n    if(zip_lookahead <= 0) {\n\tzip_eofile = true;\n\tzip_lookahead = 0;\n\treturn;\n    }\n    zip_eofile = false;\n    /* Make sure that we always have enough lookahead. This is important\n     * if input comes from a device such as a tty.\n     */\n    while(zip_lookahead < zip_MIN_LOOKAHEAD && !zip_eofile)\n\tzip_fill_window();\n\n    /* If lookahead < MIN_MATCH, ins_h is garbage, but this is\n     * not important since only literal bytes will be emitted.\n     */\n    zip_ins_h = 0;\n    for(j = 0; j < zip_MIN_MATCH - 1; j++) {\n//      UPDATE_HASH(ins_h, window[j]);\n\tzip_ins_h = ((zip_ins_h << zip_H_SHIFT) ^ (zip_window[j] & 0xff)) & zip_HASH_MASK;\n    }\n}\n\n/* ==========================================================================\n * Set match_start to the longest match starting at the given string and\n * return its length. Matches shorter or equal to prev_length are discarded,\n * in which case the result is equal to prev_length and match_start is\n * garbage.\n * IN assertions: cur_match is the head of the hash chain for the current\n *   string (strstart) and its distance is <= MAX_DIST, and prev_length >= 1\n */\nvar zip_longest_match = function(cur_match) {\n    var chain_length = zip_max_chain_length; // max hash chain length\n    var scanp = zip_strstart; // current string\n    var matchp;\t\t// matched string\n    var len;\t\t// length of current match\n    var best_len = zip_prev_length;\t// best match length so far\n\n    /* Stop when cur_match becomes <= limit. To simplify the code,\n     * we prevent matches with the string of window index 0.\n     */\n    var limit = (zip_strstart > zip_MAX_DIST ? zip_strstart - zip_MAX_DIST : zip_NIL);\n\n    var strendp = zip_strstart + zip_MAX_MATCH;\n    var scan_end1 = zip_window[scanp + best_len - 1];\n    var scan_end  = zip_window[scanp + best_len];\n\n    /* Do not waste too much time if we already have a good match: */\n    if(zip_prev_length >= zip_good_match)\n\tchain_length >>= 2;\n\n//  Assert(encoder->strstart <= window_size-MIN_LOOKAHEAD, \"insufficient lookahead\");\n\n    do {\n//    Assert(cur_match < encoder->strstart, \"no future\");\n\tmatchp = cur_match;\n\n\t/* Skip to next match if the match length cannot increase\n\t    * or if the match length is less than 2:\n\t*/\n\tif(zip_window[matchp + best_len]\t!= scan_end  ||\n\t   zip_window[matchp + best_len - 1]\t!= scan_end1 ||\n\t   zip_window[matchp]\t\t\t!= zip_window[scanp] ||\n\t   zip_window[++matchp]\t\t\t!= zip_window[scanp + 1]) {\n\t    continue;\n\t}\n\n\t/* The check at best_len-1 can be removed because it will be made\n         * again later. (This heuristic is not always a win.)\n         * It is not necessary to compare scan[2] and match[2] since they\n         * are always equal when the other bytes match, given that\n         * the hash keys are equal and that HASH_BITS >= 8.\n         */\n\tscanp += 2;\n\tmatchp++;\n\n\t/* We check for insufficient lookahead only every 8th comparison;\n         * the 256th check will be made at strstart+258.\n         */\n\tdo {\n\t} while(zip_window[++scanp] == zip_window[++matchp] &&\n\t\tzip_window[++scanp] == zip_window[++matchp] &&\n\t\tzip_window[++scanp] == zip_window[++matchp] &&\n\t\tzip_window[++scanp] == zip_window[++matchp] &&\n\t\tzip_window[++scanp] == zip_window[++matchp] &&\n\t\tzip_window[++scanp] == zip_window[++matchp] &&\n\t\tzip_window[++scanp] == zip_window[++matchp] &&\n\t\tzip_window[++scanp] == zip_window[++matchp] &&\n\t\tscanp < strendp);\n\n      len = zip_MAX_MATCH - (strendp - scanp);\n      scanp = strendp - zip_MAX_MATCH;\n\n      if(len > best_len) {\n\t  zip_match_start = cur_match;\n\t  best_len = len;\n\t  if(zip_FULL_SEARCH) {\n\t      if(len >= zip_MAX_MATCH) break;\n\t  } else {\n\t      if(len >= zip_nice_match) break;\n\t  }\n\n\t  scan_end1  = zip_window[scanp + best_len-1];\n\t  scan_end   = zip_window[scanp + best_len];\n      }\n    } while((cur_match = zip_prev[cur_match & zip_WMASK]) > limit\n\t    && --chain_length != 0);\n\n    return best_len;\n}\n\n/* ==========================================================================\n * Fill the window when the lookahead becomes insufficient.\n * Updates strstart and lookahead, and sets eofile if end of input file.\n * IN assertion: lookahead < MIN_LOOKAHEAD && strstart + lookahead > 0\n * OUT assertions: at least one byte has been read, or eofile is set;\n *    file reads are performed for at least two bytes (required for the\n *    translate_eol option).\n */\nvar zip_fill_window = function() {\n    var n, m;\n\n    // Amount of free space at the end of the window.\n    var more = zip_window_size - zip_lookahead - zip_strstart;\n\n    /* If the window is almost full and there is insufficient lookahead,\n     * move the upper half to the lower one to make room in the upper half.\n     */\n    if(more == -1) {\n\t/* Very unlikely, but possible on 16 bit machine if strstart == 0\n         * and lookahead == 1 (input done one byte at time)\n         */\n\tmore--;\n    } else if(zip_strstart >= zip_WSIZE + zip_MAX_DIST) {\n\t/* By the IN assertion, the window is not empty so we can't confuse\n         * more == 0 with more == 64K on a 16 bit machine.\n         */\n//\tAssert(window_size == (ulg)2*WSIZE, \"no sliding with BIG_MEM\");\n\n//\tSystem.arraycopy(window, WSIZE, window, 0, WSIZE);\n\tfor(n = 0; n < zip_WSIZE; n++)\n\t    zip_window[n] = zip_window[n + zip_WSIZE];\n      \n\tzip_match_start -= zip_WSIZE;\n\tzip_strstart    -= zip_WSIZE; /* we now have strstart >= MAX_DIST: */\n\tzip_block_start -= zip_WSIZE;\n\n\tfor(n = 0; n < zip_HASH_SIZE; n++) {\n\t    m = zip_head1(n);\n\t    zip_head2(n, m >= zip_WSIZE ? m - zip_WSIZE : zip_NIL);\n\t}\n\tfor(n = 0; n < zip_WSIZE; n++) {\n\t    /* If n is not on any hash chain, prev[n] is garbage but\n\t     * its value will never be used.\n\t     */\n\t    m = zip_prev[n];\n\t    zip_prev[n] = (m >= zip_WSIZE ? m - zip_WSIZE : zip_NIL);\n\t}\n\tmore += zip_WSIZE;\n    }\n    // At this point, more >= 2\n    if(!zip_eofile) {\n\tn = zip_read_buff(zip_window, zip_strstart + zip_lookahead, more);\n\tif(n <= 0)\n\t    zip_eofile = true;\n\telse\n\t    zip_lookahead += n;\n    }\n}\n\n/* ==========================================================================\n * Processes a new input file and return its compressed length. This\n * function does not perform lazy evaluationof matches and inserts\n * new strings in the dictionary only for unmatched strings or for short\n * matches. It is used only for the fast compression options.\n */\nvar zip_deflate_fast = function() {\n    while(zip_lookahead != 0 && zip_qhead == null) {\n\tvar flush; // set if current block must be flushed\n\n\t/* Insert the string window[strstart .. strstart+2] in the\n\t * dictionary, and set hash_head to the head of the hash chain:\n\t */\n\tzip_INSERT_STRING();\n\n\t/* Find the longest match, discarding those <= prev_length.\n\t * At this point we have always match_length < MIN_MATCH\n\t */\n\tif(zip_hash_head != zip_NIL &&\n\t   zip_strstart - zip_hash_head <= zip_MAX_DIST) {\n\t    /* To simplify the code, we prevent matches with the string\n\t     * of window index 0 (in particular we have to avoid a match\n\t     * of the string with itself at the start of the input file).\n\t     */\n\t    zip_match_length = zip_longest_match(zip_hash_head);\n\t    /* longest_match() sets match_start */\n\t    if(zip_match_length > zip_lookahead)\n\t\tzip_match_length = zip_lookahead;\n\t}\n\tif(zip_match_length >= zip_MIN_MATCH) {\n//\t    check_match(strstart, match_start, match_length);\n\n\t    flush = zip_ct_tally(zip_strstart - zip_match_start,\n\t\t\t\t zip_match_length - zip_MIN_MATCH);\n\t    zip_lookahead -= zip_match_length;\n\n\t    /* Insert new strings in the hash table only if the match length\n\t     * is not too large. This saves time but degrades compression.\n\t     */\n\t    if(zip_match_length <= zip_max_lazy_match) {\n\t\tzip_match_length--; // string at strstart already in hash table\n\t\tdo {\n\t\t    zip_strstart++;\n\t\t    zip_INSERT_STRING();\n\t\t    /* strstart never exceeds WSIZE-MAX_MATCH, so there are\n\t\t     * always MIN_MATCH bytes ahead. If lookahead < MIN_MATCH\n\t\t     * these bytes are garbage, but it does not matter since\n\t\t     * the next lookahead bytes will be emitted as literals.\n\t\t     */\n\t\t} while(--zip_match_length != 0);\n\t\tzip_strstart++;\n\t    } else {\n\t\tzip_strstart += zip_match_length;\n\t\tzip_match_length = 0;\n\t\tzip_ins_h = zip_window[zip_strstart] & 0xff;\n//\t\tUPDATE_HASH(ins_h, window[strstart + 1]);\n\t\tzip_ins_h = ((zip_ins_h<<zip_H_SHIFT) ^ (zip_window[zip_strstart + 1] & 0xff)) & zip_HASH_MASK;\n\n//#if MIN_MATCH != 3\n//\t\tCall UPDATE_HASH() MIN_MATCH-3 more times\n//#endif\n\n\t    }\n\t} else {\n\t    /* No match, output a literal byte */\n\t    flush = zip_ct_tally(0, zip_window[zip_strstart] & 0xff);\n\t    zip_lookahead--;\n\t    zip_strstart++;\n\t}\n\tif(flush) {\n\t    zip_flush_block(0);\n\t    zip_block_start = zip_strstart;\n\t}\n\n\t/* Make sure that we always have enough lookahead, except\n\t * at the end of the input file. We need MAX_MATCH bytes\n\t * for the next match, plus MIN_MATCH bytes to insert the\n\t * string following the next match.\n\t */\n\twhile(zip_lookahead < zip_MIN_LOOKAHEAD && !zip_eofile)\n\t    zip_fill_window();\n    }\n}\n\nvar zip_deflate_better = function() {\n    /* Process the input block. */\n    while(zip_lookahead != 0 && zip_qhead == null) {\n\t/* Insert the string window[strstart .. strstart+2] in the\n\t * dictionary, and set hash_head to the head of the hash chain:\n\t */\n\tzip_INSERT_STRING();\n\n\t/* Find the longest match, discarding those <= prev_length.\n\t */\n\tzip_prev_length = zip_match_length;\n\tzip_prev_match = zip_match_start;\n\tzip_match_length = zip_MIN_MATCH - 1;\n\n\tif(zip_hash_head != zip_NIL &&\n\t   zip_prev_length < zip_max_lazy_match &&\n\t   zip_strstart - zip_hash_head <= zip_MAX_DIST) {\n\t    /* To simplify the code, we prevent matches with the string\n\t     * of window index 0 (in particular we have to avoid a match\n\t     * of the string with itself at the start of the input file).\n\t     */\n\t    zip_match_length = zip_longest_match(zip_hash_head);\n\t    /* longest_match() sets match_start */\n\t    if(zip_match_length > zip_lookahead)\n\t\tzip_match_length = zip_lookahead;\n\n\t    /* Ignore a length 3 match if it is too distant: */\n\t    if(zip_match_length == zip_MIN_MATCH &&\n\t       zip_strstart - zip_match_start > zip_TOO_FAR) {\n\t\t/* If prev_match is also MIN_MATCH, match_start is garbage\n\t\t * but we will ignore the current match anyway.\n\t\t */\n\t\tzip_match_length--;\n\t    }\n\t}\n\t/* If there was a match at the previous step and the current\n\t * match is not better, output the previous match:\n\t */\n\tif(zip_prev_length >= zip_MIN_MATCH &&\n\t   zip_match_length <= zip_prev_length) {\n\t    var flush; // set if current block must be flushed\n\n//\t    check_match(strstart - 1, prev_match, prev_length);\n\t    flush = zip_ct_tally(zip_strstart - 1 - zip_prev_match,\n\t\t\t\t zip_prev_length - zip_MIN_MATCH);\n\n\t    /* Insert in hash table all strings up to the end of the match.\n\t     * strstart-1 and strstart are already inserted.\n\t     */\n\t    zip_lookahead -= zip_prev_length - 1;\n\t    zip_prev_length -= 2;\n\t    do {\n\t\tzip_strstart++;\n\t\tzip_INSERT_STRING();\n\t\t/* strstart never exceeds WSIZE-MAX_MATCH, so there are\n\t\t * always MIN_MATCH bytes ahead. If lookahead < MIN_MATCH\n\t\t * these bytes are garbage, but it does not matter since the\n\t\t * next lookahead bytes will always be emitted as literals.\n\t\t */\n\t    } while(--zip_prev_length != 0);\n\t    zip_match_available = 0;\n\t    zip_match_length = zip_MIN_MATCH - 1;\n\t    zip_strstart++;\n\t    if(flush) {\n\t\tzip_flush_block(0);\n\t\tzip_block_start = zip_strstart;\n\t    }\n\t} else if(zip_match_available != 0) {\n\t    /* If there was no match at the previous position, output a\n\t     * single literal. If there was a match but the current match\n\t     * is longer, truncate the previous match to a single literal.\n\t     */\n\t    if(zip_ct_tally(0, zip_window[zip_strstart - 1] & 0xff)) {\n\t\tzip_flush_block(0);\n\t\tzip_block_start = zip_strstart;\n\t    }\n\t    zip_strstart++;\n\t    zip_lookahead--;\n\t} else {\n\t    /* There is no previous match to compare with, wait for\n\t     * the next step to decide.\n\t     */\n\t    zip_match_available = 1;\n\t    zip_strstart++;\n\t    zip_lookahead--;\n\t}\n\n\t/* Make sure that we always have enough lookahead, except\n\t * at the end of the input file. We need MAX_MATCH bytes\n\t * for the next match, plus MIN_MATCH bytes to insert the\n\t * string following the next match.\n\t */\n\twhile(zip_lookahead < zip_MIN_LOOKAHEAD && !zip_eofile)\n\t    zip_fill_window();\n    }\n}\n\nvar zip_init_deflate = function() {\n    if(zip_eofile)\n\treturn;\n    zip_bi_buf = 0;\n    zip_bi_valid = 0;\n    zip_ct_init();\n    zip_lm_init();\n\n    zip_qhead = null;\n    zip_outcnt = 0;\n    zip_outoff = 0;\n    zip_match_available = 0;\n\n    if(zip_compr_level <= 3)\n    {\n\tzip_prev_length = zip_MIN_MATCH - 1;\n\tzip_match_length = 0;\n    }\n    else\n    {\n\tzip_match_length = zip_MIN_MATCH - 1;\n\tzip_match_available = 0;\n        zip_match_available = 0;\n    }\n\n    zip_complete = false;\n}\n\n/* ==========================================================================\n * Same as above, but achieves better compression. We use a lazy\n * evaluation for matches: a match is finally adopted only if there is\n * no better match at the next window position.\n */\nvar zip_deflate_internal = function(buff, off, buff_size) {\n    var n;\n\n    if(!zip_initflag)\n    {\n\tzip_init_deflate();\n\tzip_initflag = true;\n\tif(zip_lookahead == 0) { // empty\n\t    zip_complete = true;\n\t    return 0;\n\t}\n    }\n\n    if((n = zip_qcopy(buff, off, buff_size)) == buff_size)\n\treturn buff_size;\n\n    if(zip_complete)\n\treturn n;\n\n    if(zip_compr_level <= 3) // optimized for speed\n\tzip_deflate_fast();\n    else\n\tzip_deflate_better();\n    if(zip_lookahead == 0) {\n\tif(zip_match_available != 0)\n\t    zip_ct_tally(0, zip_window[zip_strstart - 1] & 0xff);\n\tzip_flush_block(1);\n\tzip_complete = true;\n    }\n    return n + zip_qcopy(buff, n + off, buff_size - n);\n}\n\nvar zip_qcopy = function(buff, off, buff_size) {\n    var n, i, j;\n\n    n = 0;\n    while(zip_qhead != null && n < buff_size)\n    {\n\ti = buff_size - n;\n\tif(i > zip_qhead.len)\n\t    i = zip_qhead.len;\n//      System.arraycopy(qhead.ptr, qhead.off, buff, off + n, i);\n\tfor(j = 0; j < i; j++)\n\t    buff[off + n + j] = zip_qhead.ptr[zip_qhead.off + j];\n\t\n\tzip_qhead.off += i;\n\tzip_qhead.len -= i;\n\tn += i;\n\tif(zip_qhead.len == 0) {\n\t    var p;\n\t    p = zip_qhead;\n\t    zip_qhead = zip_qhead.next;\n\t    zip_reuse_queue(p);\n\t}\n    }\n\n    if(n == buff_size)\n\treturn n;\n\n    if(zip_outoff < zip_outcnt) {\n\ti = buff_size - n;\n\tif(i > zip_outcnt - zip_outoff)\n\t    i = zip_outcnt - zip_outoff;\n\t// System.arraycopy(outbuf, outoff, buff, off + n, i);\n\tfor(j = 0; j < i; j++)\n\t    buff[off + n + j] = zip_outbuf[zip_outoff + j];\n\tzip_outoff += i;\n\tn += i;\n\tif(zip_outcnt == zip_outoff)\n\t    zip_outcnt = zip_outoff = 0;\n    }\n    return n;\n}\n\n/* ==========================================================================\n * Allocate the match buffer, initialize the various tables and save the\n * location of the internal file attribute (ascii/binary) and method\n * (DEFLATE/STORE).\n */\nvar zip_ct_init = function() {\n    var n;\t// iterates over tree elements\n    var bits;\t// bit counter\n    var length;\t// length value\n    var code;\t// code value\n    var dist;\t// distance index\n\n    if(zip_static_dtree[0].dl != 0) return; // ct_init already called\n\n    zip_l_desc.dyn_tree\t\t= zip_dyn_ltree;\n    zip_l_desc.static_tree\t= zip_static_ltree;\n    zip_l_desc.extra_bits\t= zip_extra_lbits;\n    zip_l_desc.extra_base\t= zip_LITERALS + 1;\n    zip_l_desc.elems\t\t= zip_L_CODES;\n    zip_l_desc.max_length\t= zip_MAX_BITS;\n    zip_l_desc.max_code\t\t= 0;\n\n    zip_d_desc.dyn_tree\t\t= zip_dyn_dtree;\n    zip_d_desc.static_tree\t= zip_static_dtree;\n    zip_d_desc.extra_bits\t= zip_extra_dbits;\n    zip_d_desc.extra_base\t= 0;\n    zip_d_desc.elems\t\t= zip_D_CODES;\n    zip_d_desc.max_length\t= zip_MAX_BITS;\n    zip_d_desc.max_code\t\t= 0;\n\n    zip_bl_desc.dyn_tree\t= zip_bl_tree;\n    zip_bl_desc.static_tree\t= null;\n    zip_bl_desc.extra_bits\t= zip_extra_blbits;\n    zip_bl_desc.extra_base\t= 0;\n    zip_bl_desc.elems\t\t= zip_BL_CODES;\n    zip_bl_desc.max_length\t= zip_MAX_BL_BITS;\n    zip_bl_desc.max_code\t= 0;\n\n    // Initialize the mapping length (0..255) -> length code (0..28)\n    length = 0;\n    for(code = 0; code < zip_LENGTH_CODES-1; code++) {\n\tzip_base_length[code] = length;\n\tfor(n = 0; n < (1<<zip_extra_lbits[code]); n++)\n\t    zip_length_code[length++] = code;\n    }\n    // Assert (length == 256, \"ct_init: length != 256\");\n\n    /* Note that the length 255 (match length 258) can be represented\n     * in two different ways: code 284 + 5 bits or code 285, so we\n     * overwrite length_code[255] to use the best encoding:\n     */\n    zip_length_code[length-1] = code;\n\n    /* Initialize the mapping dist (0..32K) -> dist code (0..29) */\n    dist = 0;\n    for(code = 0 ; code < 16; code++) {\n\tzip_base_dist[code] = dist;\n\tfor(n = 0; n < (1<<zip_extra_dbits[code]); n++) {\n\t    zip_dist_code[dist++] = code;\n\t}\n    }\n    // Assert (dist == 256, \"ct_init: dist != 256\");\n    dist >>= 7; // from now on, all distances are divided by 128\n    for( ; code < zip_D_CODES; code++) {\n\tzip_base_dist[code] = dist << 7;\n\tfor(n = 0; n < (1<<(zip_extra_dbits[code]-7)); n++)\n\t    zip_dist_code[256 + dist++] = code;\n    }\n    // Assert (dist == 256, \"ct_init: 256+dist != 512\");\n\n    // Construct the codes of the static literal tree\n    for(bits = 0; bits <= zip_MAX_BITS; bits++)\n\tzip_bl_count[bits] = 0;\n    n = 0;\n    while(n <= 143) { zip_static_ltree[n++].dl = 8; zip_bl_count[8]++; }\n    while(n <= 255) { zip_static_ltree[n++].dl = 9; zip_bl_count[9]++; }\n    while(n <= 279) { zip_static_ltree[n++].dl = 7; zip_bl_count[7]++; }\n    while(n <= 287) { zip_static_ltree[n++].dl = 8; zip_bl_count[8]++; }\n    /* Codes 286 and 287 do not exist, but we must include them in the\n     * tree construction to get a canonical Huffman tree (longest code\n     * all ones)\n     */\n    zip_gen_codes(zip_static_ltree, zip_L_CODES + 1);\n\n    /* The static distance tree is trivial: */\n    for(n = 0; n < zip_D_CODES; n++) {\n\tzip_static_dtree[n].dl = 5;\n\tzip_static_dtree[n].fc = zip_bi_reverse(n, 5);\n    }\n\n    // Initialize the first block of the first file:\n    zip_init_block();\n}\n\n/* ==========================================================================\n * Initialize a new block.\n */\nvar zip_init_block = function() {\n    var n; // iterates over tree elements\n\n    // Initialize the trees.\n    for(n = 0; n < zip_L_CODES;  n++) zip_dyn_ltree[n].fc = 0;\n    for(n = 0; n < zip_D_CODES;  n++) zip_dyn_dtree[n].fc = 0;\n    for(n = 0; n < zip_BL_CODES; n++) zip_bl_tree[n].fc = 0;\n\n    zip_dyn_ltree[zip_END_BLOCK].fc = 1;\n    zip_opt_len = zip_static_len = 0;\n    zip_last_lit = zip_last_dist = zip_last_flags = 0;\n    zip_flags = 0;\n    zip_flag_bit = 1;\n}\n\n/* ==========================================================================\n * Restore the heap property by moving down the tree starting at node k,\n * exchanging a node with the smallest of its two sons if necessary, stopping\n * when the heap property is re-established (each father smaller than its\n * two sons).\n */\nvar zip_pqdownheap = function(\n    tree,\t// the tree to restore\n    k) {\t// node to move down\n    var v = zip_heap[k];\n    var j = k << 1;\t// left son of k\n\n    while(j <= zip_heap_len) {\n\t// Set j to the smallest of the two sons:\n\tif(j < zip_heap_len &&\n\t   zip_SMALLER(tree, zip_heap[j + 1], zip_heap[j]))\n\t    j++;\n\n\t// Exit if v is smaller than both sons\n\tif(zip_SMALLER(tree, v, zip_heap[j]))\n\t    break;\n\n\t// Exchange v with the smallest son\n\tzip_heap[k] = zip_heap[j];\n\tk = j;\n\n\t// And continue down the tree, setting j to the left son of k\n\tj <<= 1;\n    }\n    zip_heap[k] = v;\n}\n\n/* ==========================================================================\n * Compute the optimal bit lengths for a tree and update the total bit length\n * for the current block.\n * IN assertion: the fields freq and dad are set, heap[heap_max] and\n *    above are the tree nodes sorted by increasing frequency.\n * OUT assertions: the field len is set to the optimal bit length, the\n *     array bl_count contains the frequencies for each bit length.\n *     The length opt_len is updated; static_len is also updated if stree is\n *     not null.\n */\nvar zip_gen_bitlen = function(desc) { // the tree descriptor\n    var tree\t\t= desc.dyn_tree;\n    var extra\t\t= desc.extra_bits;\n    var base\t\t= desc.extra_base;\n    var max_code\t= desc.max_code;\n    var max_length\t= desc.max_length;\n    var stree\t\t= desc.static_tree;\n    var h;\t\t// heap index\n    var n, m;\t\t// iterate over the tree elements\n    var bits;\t\t// bit length\n    var xbits;\t\t// extra bits\n    var f;\t\t// frequency\n    var overflow = 0;\t// number of elements with bit length too large\n\n    for(bits = 0; bits <= zip_MAX_BITS; bits++)\n\tzip_bl_count[bits] = 0;\n\n    /* In a first pass, compute the optimal bit lengths (which may\n     * overflow in the case of the bit length tree).\n     */\n    tree[zip_heap[zip_heap_max]].dl = 0; // root of the heap\n\n    for(h = zip_heap_max + 1; h < zip_HEAP_SIZE; h++) {\n\tn = zip_heap[h];\n\tbits = tree[tree[n].dl].dl + 1;\n\tif(bits > max_length) {\n\t    bits = max_length;\n\t    overflow++;\n\t}\n\ttree[n].dl = bits;\n\t// We overwrite tree[n].dl which is no longer needed\n\n\tif(n > max_code)\n\t    continue; // not a leaf node\n\n\tzip_bl_count[bits]++;\n\txbits = 0;\n\tif(n >= base)\n\t    xbits = extra[n - base];\n\tf = tree[n].fc;\n\tzip_opt_len += f * (bits + xbits);\n\tif(stree != null)\n\t    zip_static_len += f * (stree[n].dl + xbits);\n    }\n    if(overflow == 0)\n\treturn;\n\n    // This happens for example on obj2 and pic of the Calgary corpus\n\n    // Find the first bit length which could increase:\n    do {\n\tbits = max_length - 1;\n\twhile(zip_bl_count[bits] == 0)\n\t    bits--;\n\tzip_bl_count[bits]--;\t\t// move one leaf down the tree\n\tzip_bl_count[bits + 1] += 2;\t// move one overflow item as its brother\n\tzip_bl_count[max_length]--;\n\t/* The brother of the overflow item also moves one step up,\n\t * but this does not affect bl_count[max_length]\n\t */\n\toverflow -= 2;\n    } while(overflow > 0);\n\n    /* Now recompute all bit lengths, scanning in increasing frequency.\n     * h is still equal to HEAP_SIZE. (It is simpler to reconstruct all\n     * lengths instead of fixing only the wrong ones. This idea is taken\n     * from 'ar' written by Haruhiko Okumura.)\n     */\n    for(bits = max_length; bits != 0; bits--) {\n\tn = zip_bl_count[bits];\n\twhile(n != 0) {\n\t    m = zip_heap[--h];\n\t    if(m > max_code)\n\t\tcontinue;\n\t    if(tree[m].dl != bits) {\n\t\tzip_opt_len += (bits - tree[m].dl) * tree[m].fc;\n\t\ttree[m].fc = bits;\n\t    }\n\t    n--;\n\t}\n    }\n}\n\n  /* ==========================================================================\n   * Generate the codes for a given tree and bit counts (which need not be\n   * optimal).\n   * IN assertion: the array bl_count contains the bit length statistics for\n   * the given tree and the field len is set for all tree elements.\n   * OUT assertion: the field code is set for all tree elements of non\n   *     zero code length.\n   */\nvar zip_gen_codes = function(tree,\t// the tree to decorate\n\t\t   max_code) {\t// largest code with non zero frequency\n    var next_code = new Array(zip_MAX_BITS+1); // next code value for each bit length\n    var code = 0;\t\t// running code value\n    var bits;\t\t\t// bit index\n    var n;\t\t\t// code index\n\n    /* The distribution counts are first used to generate the code values\n     * without bit reversal.\n     */\n    for(bits = 1; bits <= zip_MAX_BITS; bits++) {\n\tcode = ((code + zip_bl_count[bits-1]) << 1);\n\tnext_code[bits] = code;\n    }\n\n    /* Check that the bit counts in bl_count are consistent. The last code\n     * must be all ones.\n     */\n//    Assert (code + encoder->bl_count[MAX_BITS]-1 == (1<<MAX_BITS)-1,\n//\t    \"inconsistent bit counts\");\n//    Tracev((stderr,\"\\ngen_codes: max_code %d \", max_code));\n\n    for(n = 0; n <= max_code; n++) {\n\tvar len = tree[n].dl;\n\tif(len == 0)\n\t    continue;\n\t// Now reverse the bits\n\ttree[n].fc = zip_bi_reverse(next_code[len]++, len);\n\n//      Tracec(tree != static_ltree, (stderr,\"\\nn %3d %c l %2d c %4x (%x) \",\n//\t  n, (isgraph(n) ? n : ' '), len, tree[n].fc, next_code[len]-1));\n    }\n}\n\n/* ==========================================================================\n * Construct one Huffman tree and assigns the code bit strings and lengths.\n * Update the total bit length for the current block.\n * IN assertion: the field freq is set for all tree elements.\n * OUT assertions: the fields len and code are set to the optimal bit length\n *     and corresponding code. The length opt_len is updated; static_len is\n *     also updated if stree is not null. The field max_code is set.\n */\nvar zip_build_tree = function(desc) { // the tree descriptor\n    var tree\t= desc.dyn_tree;\n    var stree\t= desc.static_tree;\n    var elems\t= desc.elems;\n    var n, m;\t\t// iterate over heap elements\n    var max_code = -1;\t// largest code with non zero frequency\n    var node = elems;\t// next internal node of the tree\n\n    /* Construct the initial heap, with least frequent element in\n     * heap[SMALLEST]. The sons of heap[n] are heap[2*n] and heap[2*n+1].\n     * heap[0] is not used.\n     */\n    zip_heap_len = 0;\n    zip_heap_max = zip_HEAP_SIZE;\n\n    for(n = 0; n < elems; n++) {\n\tif(tree[n].fc != 0) {\n\t    zip_heap[++zip_heap_len] = max_code = n;\n\t    zip_depth[n] = 0;\n\t} else\n\t    tree[n].dl = 0;\n    }\n\n    /* The pkzip format requires that at least one distance code exists,\n     * and that at least one bit should be sent even if there is only one\n     * possible code. So to avoid special checks later on we force at least\n     * two codes of non zero frequency.\n     */\n    while(zip_heap_len < 2) {\n\tvar xnew = zip_heap[++zip_heap_len] = (max_code < 2 ? ++max_code : 0);\n\ttree[xnew].fc = 1;\n\tzip_depth[xnew] = 0;\n\tzip_opt_len--;\n\tif(stree != null)\n\t    zip_static_len -= stree[xnew].dl;\n\t// new is 0 or 1 so it does not have extra bits\n    }\n    desc.max_code = max_code;\n\n    /* The elements heap[heap_len/2+1 .. heap_len] are leaves of the tree,\n     * establish sub-heaps of increasing lengths:\n     */\n    for(n = zip_heap_len >> 1; n >= 1; n--)\n\tzip_pqdownheap(tree, n);\n\n    /* Construct the Huffman tree by repeatedly combining the least two\n     * frequent nodes.\n     */\n    do {\n\tn = zip_heap[zip_SMALLEST];\n\tzip_heap[zip_SMALLEST] = zip_heap[zip_heap_len--];\n\tzip_pqdownheap(tree, zip_SMALLEST);\n\n\tm = zip_heap[zip_SMALLEST];  // m = node of next least frequency\n\n\t// keep the nodes sorted by frequency\n\tzip_heap[--zip_heap_max] = n;\n\tzip_heap[--zip_heap_max] = m;\n\n\t// Create a new node father of n and m\n\ttree[node].fc = tree[n].fc + tree[m].fc;\n//\tdepth[node] = (char)(MAX(depth[n], depth[m]) + 1);\n\tif(zip_depth[n] > zip_depth[m] + 1)\n\t    zip_depth[node] = zip_depth[n];\n\telse\n\t    zip_depth[node] = zip_depth[m] + 1;\n\ttree[n].dl = tree[m].dl = node;\n\n\t// and insert the new node in the heap\n\tzip_heap[zip_SMALLEST] = node++;\n\tzip_pqdownheap(tree, zip_SMALLEST);\n\n    } while(zip_heap_len >= 2);\n\n    zip_heap[--zip_heap_max] = zip_heap[zip_SMALLEST];\n\n    /* At this point, the fields freq and dad are set. We can now\n     * generate the bit lengths.\n     */\n    zip_gen_bitlen(desc);\n\n    // The field len is now set, we can generate the bit codes\n    zip_gen_codes(tree, max_code);\n}\n\n/* ==========================================================================\n * Scan a literal or distance tree to determine the frequencies of the codes\n * in the bit length tree. Updates opt_len to take into account the repeat\n * counts. (The contribution of the bit length codes will be added later\n * during the construction of bl_tree.)\n */\nvar zip_scan_tree = function(tree,// the tree to be scanned\n\t\t       max_code) {  // and its largest code of non zero frequency\n    var n;\t\t\t// iterates over all tree elements\n    var prevlen = -1;\t\t// last emitted length\n    var curlen;\t\t\t// length of current code\n    var nextlen = tree[0].dl;\t// length of next code\n    var count = 0;\t\t// repeat count of the current code\n    var max_count = 7;\t\t// max repeat count\n    var min_count = 4;\t\t// min repeat count\n\n    if(nextlen == 0) {\n\tmax_count = 138;\n\tmin_count = 3;\n    }\n    tree[max_code + 1].dl = 0xffff; // guard\n\n    for(n = 0; n <= max_code; n++) {\n\tcurlen = nextlen;\n\tnextlen = tree[n + 1].dl;\n\tif(++count < max_count && curlen == nextlen)\n\t    continue;\n\telse if(count < min_count)\n\t    zip_bl_tree[curlen].fc += count;\n\telse if(curlen != 0) {\n\t    if(curlen != prevlen)\n\t\tzip_bl_tree[curlen].fc++;\n\t    zip_bl_tree[zip_REP_3_6].fc++;\n\t} else if(count <= 10)\n\t    zip_bl_tree[zip_REPZ_3_10].fc++;\n\telse\n\t    zip_bl_tree[zip_REPZ_11_138].fc++;\n\tcount = 0; prevlen = curlen;\n\tif(nextlen == 0) {\n\t    max_count = 138;\n\t    min_count = 3;\n\t} else if(curlen == nextlen) {\n\t    max_count = 6;\n\t    min_count = 3;\n\t} else {\n\t    max_count = 7;\n\t    min_count = 4;\n\t}\n    }\n}\n\n  /* ==========================================================================\n   * Send a literal or distance tree in compressed form, using the codes in\n   * bl_tree.\n   */\nvar zip_send_tree = function(tree, // the tree to be scanned\n\t\t   max_code) { // and its largest code of non zero frequency\n    var n;\t\t\t// iterates over all tree elements\n    var prevlen = -1;\t\t// last emitted length\n    var curlen;\t\t\t// length of current code\n    var nextlen = tree[0].dl;\t// length of next code\n    var count = 0;\t\t// repeat count of the current code\n    var max_count = 7;\t\t// max repeat count\n    var min_count = 4;\t\t// min repeat count\n\n    /* tree[max_code+1].dl = -1; */  /* guard already set */\n    if(nextlen == 0) {\n      max_count = 138;\n      min_count = 3;\n    }\n\n    for(n = 0; n <= max_code; n++) {\n\tcurlen = nextlen;\n\tnextlen = tree[n+1].dl;\n\tif(++count < max_count && curlen == nextlen) {\n\t    continue;\n\t} else if(count < min_count) {\n\t    do { zip_SEND_CODE(curlen, zip_bl_tree); } while(--count != 0);\n\t} else if(curlen != 0) {\n\t    if(curlen != prevlen) {\n\t\tzip_SEND_CODE(curlen, zip_bl_tree);\n\t\tcount--;\n\t    }\n\t    // Assert(count >= 3 && count <= 6, \" 3_6?\");\n\t    zip_SEND_CODE(zip_REP_3_6, zip_bl_tree);\n\t    zip_send_bits(count - 3, 2);\n\t} else if(count <= 10) {\n\t    zip_SEND_CODE(zip_REPZ_3_10, zip_bl_tree);\n\t    zip_send_bits(count-3, 3);\n\t} else {\n\t    zip_SEND_CODE(zip_REPZ_11_138, zip_bl_tree);\n\t    zip_send_bits(count-11, 7);\n\t}\n\tcount = 0;\n\tprevlen = curlen;\n\tif(nextlen == 0) {\n\t    max_count = 138;\n\t    min_count = 3;\n\t} else if(curlen == nextlen) {\n\t    max_count = 6;\n\t    min_count = 3;\n\t} else {\n\t    max_count = 7;\n\t    min_count = 4;\n\t}\n    }\n}\n\n/* ==========================================================================\n * Construct the Huffman tree for the bit lengths and return the index in\n * bl_order of the last bit length code to send.\n */\nvar zip_build_bl_tree = function() {\n    var max_blindex;  // index of last bit length code of non zero freq\n\n    // Determine the bit length frequencies for literal and distance trees\n    zip_scan_tree(zip_dyn_ltree, zip_l_desc.max_code);\n    zip_scan_tree(zip_dyn_dtree, zip_d_desc.max_code);\n\n    // Build the bit length tree:\n    zip_build_tree(zip_bl_desc);\n    /* opt_len now includes the length of the tree representations, except\n     * the lengths of the bit lengths codes and the 5+5+4 bits for the counts.\n     */\n\n    /* Determine the number of bit length codes to send. The pkzip format\n     * requires that at least 4 bit length codes be sent. (appnote.txt says\n     * 3 but the actual value used is 4.)\n     */\n    for(max_blindex = zip_BL_CODES-1; max_blindex >= 3; max_blindex--) {\n\tif(zip_bl_tree[zip_bl_order[max_blindex]].dl != 0) break;\n    }\n    /* Update opt_len to include the bit length tree and counts */\n    zip_opt_len += 3*(max_blindex+1) + 5+5+4;\n//    Tracev((stderr, \"\\ndyn trees: dyn %ld, stat %ld\",\n//\t    encoder->opt_len, encoder->static_len));\n\n    return max_blindex;\n}\n\n/* ==========================================================================\n * Send the header for a block using dynamic Huffman trees: the counts, the\n * lengths of the bit length codes, the literal tree and the distance tree.\n * IN assertion: lcodes >= 257, dcodes >= 1, blcodes >= 4.\n */\nvar zip_send_all_trees = function(lcodes, dcodes, blcodes) { // number of codes for each tree\n    var rank; // index in bl_order\n\n//    Assert (lcodes >= 257 && dcodes >= 1 && blcodes >= 4, \"not enough codes\");\n//    Assert (lcodes <= L_CODES && dcodes <= D_CODES && blcodes <= BL_CODES,\n//\t    \"too many codes\");\n//    Tracev((stderr, \"\\nbl counts: \"));\n    zip_send_bits(lcodes-257, 5); // not +255 as stated in appnote.txt\n    zip_send_bits(dcodes-1,   5);\n    zip_send_bits(blcodes-4,  4); // not -3 as stated in appnote.txt\n    for(rank = 0; rank < blcodes; rank++) {\n//      Tracev((stderr, \"\\nbl code %2d \", bl_order[rank]));\n\tzip_send_bits(zip_bl_tree[zip_bl_order[rank]].dl, 3);\n    }\n\n    // send the literal tree\n    zip_send_tree(zip_dyn_ltree,lcodes-1);\n\n    // send the distance tree\n    zip_send_tree(zip_dyn_dtree,dcodes-1);\n}\n\n/* ==========================================================================\n * Determine the best encoding for the current block: dynamic trees, static\n * trees or store, and output the encoded block to the zip file.\n */\nvar zip_flush_block = function(eof) { // true if this is the last block for a file\n    var opt_lenb, static_lenb; // opt_len and static_len in bytes\n    var max_blindex;\t// index of last bit length code of non zero freq\n    var stored_len;\t// length of input block\n\n    stored_len = zip_strstart - zip_block_start;\n    zip_flag_buf[zip_last_flags] = zip_flags; // Save the flags for the last 8 items\n\n    // Construct the literal and distance trees\n    zip_build_tree(zip_l_desc);\n//    Tracev((stderr, \"\\nlit data: dyn %ld, stat %ld\",\n//\t    encoder->opt_len, encoder->static_len));\n\n    zip_build_tree(zip_d_desc);\n//    Tracev((stderr, \"\\ndist data: dyn %ld, stat %ld\",\n//\t    encoder->opt_len, encoder->static_len));\n    /* At this point, opt_len and static_len are the total bit lengths of\n     * the compressed block data, excluding the tree representations.\n     */\n\n    /* Build the bit length tree for the above two trees, and get the index\n     * in bl_order of the last bit length code to send.\n     */\n    max_blindex = zip_build_bl_tree();\n\n    // Determine the best encoding. Compute first the block length in bytes\n    opt_lenb\t= (zip_opt_len   +3+7)>>3;\n    static_lenb = (zip_static_len+3+7)>>3;\n\n//    Trace((stderr, \"\\nopt %lu(%lu) stat %lu(%lu) stored %lu lit %u dist %u \",\n//\t   opt_lenb, encoder->opt_len,\n//\t   static_lenb, encoder->static_len, stored_len,\n//\t   encoder->last_lit, encoder->last_dist));\n\n    if(static_lenb <= opt_lenb)\n\topt_lenb = static_lenb;\n    if(stored_len + 4 <= opt_lenb // 4: two words for the lengths\n       && zip_block_start >= 0) {\n\tvar i;\n\n\t/* The test buf != NULL is only necessary if LIT_BUFSIZE > WSIZE.\n\t * Otherwise we can't have processed more than WSIZE input bytes since\n\t * the last block flush, because compression would have been\n\t * successful. If LIT_BUFSIZE <= WSIZE, it is never too late to\n\t * transform a block into a stored block.\n\t */\n\tzip_send_bits((zip_STORED_BLOCK<<1)+eof, 3);  /* send block type */\n\tzip_bi_windup();\t\t /* align on byte boundary */\n\tzip_put_short(stored_len);\n\tzip_put_short(~stored_len);\n\n      // copy block\n/*\n      p = &window[block_start];\n      for(i = 0; i < stored_len; i++)\n\tput_byte(p[i]);\n*/\n\tfor(i = 0; i < stored_len; i++)\n\t    zip_put_byte(zip_window[zip_block_start + i]);\n\n    } else if(static_lenb == opt_lenb) {\n\tzip_send_bits((zip_STATIC_TREES<<1)+eof, 3);\n\tzip_compress_block(zip_static_ltree, zip_static_dtree);\n    } else {\n\tzip_send_bits((zip_DYN_TREES<<1)+eof, 3);\n\tzip_send_all_trees(zip_l_desc.max_code+1,\n\t\t\t   zip_d_desc.max_code+1,\n\t\t\t   max_blindex+1);\n\tzip_compress_block(zip_dyn_ltree, zip_dyn_dtree);\n    }\n\n    zip_init_block();\n\n    if(eof != 0)\n\tzip_bi_windup();\n}\n\n/* ==========================================================================\n * Save the match info and tally the frequency counts. Return true if\n * the current block must be flushed.\n */\nvar zip_ct_tally = function(\n\tdist, // distance of matched string\n\tlc) { // match length-MIN_MATCH or unmatched char (if dist==0)\n    zip_l_buf[zip_last_lit++] = lc;\n    if(dist == 0) {\n\t// lc is the unmatched char\n\tzip_dyn_ltree[lc].fc++;\n    } else {\n\t// Here, lc is the match length - MIN_MATCH\n\tdist--;\t\t    // dist = match distance - 1\n//      Assert((ush)dist < (ush)MAX_DIST &&\n//\t     (ush)lc <= (ush)(MAX_MATCH-MIN_MATCH) &&\n//\t     (ush)D_CODE(dist) < (ush)D_CODES,  \"ct_tally: bad match\");\n\n\tzip_dyn_ltree[zip_length_code[lc]+zip_LITERALS+1].fc++;\n\tzip_dyn_dtree[zip_D_CODE(dist)].fc++;\n\n\tzip_d_buf[zip_last_dist++] = dist;\n\tzip_flags |= zip_flag_bit;\n    }\n    zip_flag_bit <<= 1;\n\n    // Output the flags if they fill a byte\n    if((zip_last_lit & 7) == 0) {\n\tzip_flag_buf[zip_last_flags++] = zip_flags;\n\tzip_flags = 0;\n\tzip_flag_bit = 1;\n    }\n    // Try to guess if it is profitable to stop the current block here\n    if(zip_compr_level > 2 && (zip_last_lit & 0xfff) == 0) {\n\t// Compute an upper bound for the compressed length\n\tvar out_length = zip_last_lit * 8;\n\tvar in_length = zip_strstart - zip_block_start;\n\tvar dcode;\n\n\tfor(dcode = 0; dcode < zip_D_CODES; dcode++) {\n\t    out_length += zip_dyn_dtree[dcode].fc * (5 + zip_extra_dbits[dcode]);\n\t}\n\tout_length >>= 3;\n//      Trace((stderr,\"\\nlast_lit %u, last_dist %u, in %ld, out ~%ld(%ld%%) \",\n//\t     encoder->last_lit, encoder->last_dist, in_length, out_length,\n//\t     100L - out_length*100L/in_length));\n\tif(zip_last_dist < parseInt(zip_last_lit/2) &&\n\t   out_length < parseInt(in_length/2))\n\t    return true;\n    }\n    return (zip_last_lit == zip_LIT_BUFSIZE-1 ||\n\t    zip_last_dist == zip_DIST_BUFSIZE);\n    /* We avoid equality with LIT_BUFSIZE because of wraparound at 64K\n     * on 16 bit machines and because stored blocks are restricted to\n     * 64K-1 bytes.\n     */\n}\n\n  /* ==========================================================================\n   * Send the block data compressed using the given Huffman trees\n   */\nvar zip_compress_block = function(\n\tltree,\t// literal tree\n\tdtree) {\t// distance tree\n    var dist;\t\t// distance of matched string\n    var lc;\t\t// match length or unmatched char (if dist == 0)\n    var lx = 0;\t\t// running index in l_buf\n    var dx = 0;\t\t// running index in d_buf\n    var fx = 0;\t\t// running index in flag_buf\n    var flag = 0;\t// current flags\n    var code;\t\t// the code to send\n    var extra;\t\t// number of extra bits to send\n\n    if(zip_last_lit != 0) do {\n\tif((lx & 7) == 0)\n\t    flag = zip_flag_buf[fx++];\n\tlc = zip_l_buf[lx++] & 0xff;\n\tif((flag & 1) == 0) {\n\t    zip_SEND_CODE(lc, ltree); /* send a literal byte */\n//\tTracecv(isgraph(lc), (stderr,\" '%c' \", lc));\n\t} else {\n\t    // Here, lc is the match length - MIN_MATCH\n\t    code = zip_length_code[lc];\n\t    zip_SEND_CODE(code+zip_LITERALS+1, ltree); // send the length code\n\t    extra = zip_extra_lbits[code];\n\t    if(extra != 0) {\n\t\tlc -= zip_base_length[code];\n\t\tzip_send_bits(lc, extra); // send the extra length bits\n\t    }\n\t    dist = zip_d_buf[dx++];\n\t    // Here, dist is the match distance - 1\n\t    code = zip_D_CODE(dist);\n//\tAssert (code < D_CODES, \"bad d_code\");\n\n\t    zip_SEND_CODE(code, dtree);\t  // send the distance code\n\t    extra = zip_extra_dbits[code];\n\t    if(extra != 0) {\n\t\tdist -= zip_base_dist[code];\n\t\tzip_send_bits(dist, extra);   // send the extra distance bits\n\t    }\n\t} // literal or match pair ?\n\tflag >>= 1;\n    } while(lx < zip_last_lit);\n\n    zip_SEND_CODE(zip_END_BLOCK, ltree);\n}\n\n/* ==========================================================================\n * Send a value on a given number of bits.\n * IN assertion: length <= 16 and value fits in length bits.\n */\nvar zip_Buf_size = 16; // bit size of bi_buf\nvar zip_send_bits = function(\n\tvalue,\t// value to send\n\tlength) {\t// number of bits\n    /* If not enough room in bi_buf, use (valid) bits from bi_buf and\n     * (16 - bi_valid) bits from value, leaving (width - (16-bi_valid))\n     * unused bits in value.\n     */\n    if(zip_bi_valid > zip_Buf_size - length) {\n\tzip_bi_buf |= (value << zip_bi_valid);\n\tzip_put_short(zip_bi_buf);\n\tzip_bi_buf = (value >> (zip_Buf_size - zip_bi_valid));\n\tzip_bi_valid += length - zip_Buf_size;\n    } else {\n\tzip_bi_buf |= value << zip_bi_valid;\n\tzip_bi_valid += length;\n    }\n}\n\n/* ==========================================================================\n * Reverse the first len bits of a code, using straightforward code (a faster\n * method would use a table)\n * IN assertion: 1 <= len <= 15\n */\nvar zip_bi_reverse = function(\n\tcode,\t// the value to invert\n\tlen) {\t// its bit length\n    var res = 0;\n    do {\n\tres |= code & 1;\n\tcode >>= 1;\n\tres <<= 1;\n    } while(--len > 0);\n    return res >> 1;\n}\n\n/* ==========================================================================\n * Write out any remaining bits in an incomplete byte.\n */\nvar zip_bi_windup = function() {\n    if(zip_bi_valid > 8) {\n\tzip_put_short(zip_bi_buf);\n    } else if(zip_bi_valid > 0) {\n\tzip_put_byte(zip_bi_buf);\n    }\n    zip_bi_buf = 0;\n    zip_bi_valid = 0;\n}\n\nvar zip_qoutbuf = function() {\n    if(zip_outcnt != 0) {\n\tvar q, i;\n\tq = zip_new_queue();\n\tif(zip_qhead == null)\n\t    zip_qhead = zip_qtail = q;\n\telse\n\t    zip_qtail = zip_qtail.next = q;\n\tq.len = zip_outcnt - zip_outoff;\n//      System.arraycopy(zip_outbuf, zip_outoff, q.ptr, 0, q.len);\n\tfor(i = 0; i < q.len; i++)\n\t    q.ptr[i] = zip_outbuf[zip_outoff + i];\n\tzip_outcnt = zip_outoff = 0;\n    }\n}\n\nvar zip_deflate = function(str, level) {\n    var i, j;\n\n    zip_deflate_data = str;\n    zip_deflate_pos = 0;\n    if(typeof level == \"undefined\")\n\tlevel = zip_DEFAULT_LEVEL;\n    zip_deflate_start(level);\n\n    var buff = new Array(1024);\n    var aout = [];\n    while((i = zip_deflate_internal(buff, 0, buff.length)) > 0) {\n\tvar cbuf = new Array(i);\n\tfor(j = 0; j < i; j++){\n\t    cbuf[j] = String.fromCharCode(buff[j]);\n\t}\n\taout[aout.length] = cbuf.join(\"\");\n    }\n    zip_deflate_data = null; // G.C.\n    return aout.join(\"\");\n}\n\nif (! ctx.RawDeflate) ctx.RawDeflate = {};\nctx.RawDeflate.deflate = zip_deflate;\n\n})(this);\n\n"
			},
			{
				"name": "store2.min.js",
				"source": "/*! store2 - v2.7.0 - 2018-03-04\n* Copyright (c) 2018 Nathan Bubna; Licensed (MIT OR GPL-3.0) */\n\n!function(a,b){var c={version:\"2.7.0\",areas:{},apis:{},inherit:function(a,b){for(var c in a)b.hasOwnProperty(c)||(b[c]=a[c]);return b},stringify:function(a){return void 0===a||\"function\"==typeof a?a+\"\":JSON.stringify(a)},parse:function(a){try{return JSON.parse(a)}catch(b){return a}},fn:function(a,b){c.storeAPI[a]=b;for(var d in c.apis)c.apis[d][a]=b},get:function(a,b){return a.getItem(b)},set:function(a,b,c){a.setItem(b,c)},remove:function(a,b){a.removeItem(b)},key:function(a,b){return a.key(b)},length:function(a){return a.length},clear:function(a){a.clear()},Store:function(a,b,d){var e=c.inherit(c.storeAPI,function(a,b,c){return 0===arguments.length?e.getAll():\"function\"==typeof b?e.transact(a,b,c):void 0!==b?e.set(a,b,c):\"string\"==typeof a||\"number\"==typeof a?e.get(a):a?e.setAll(a,b):e.clear()});e._id=a;try{b.setItem(\"_-bad-_\",\"wolf\"),e._area=b,b.removeItem(\"_-bad-_\")}catch(a){}return e._area||(e._area=c.inherit(c.storageAPI,{items:{},name:\"fake\"})),e._ns=d||\"\",c.areas[a]||(c.areas[a]=e._area),c.apis[e._ns+e._id]||(c.apis[e._ns+e._id]=e),e},storeAPI:{area:function(a,b){var d=this[a];return d&&d.area||(d=c.Store(a,b,this._ns),this[a]||(this[a]=d)),d},namespace:function(a,b){if(!a)return this._ns?this._ns.substring(0,this._ns.length-1):\"\";var d=a,e=this[d];return e&&e.namespace||(e=c.Store(this._id,this._area,this._ns+d+\".\"),this[d]||(this[d]=e),b||e.area(\"session\",c.areas.session)),e},isFake:function(){return\"fake\"===this._area.name},toString:function(){return\"store\"+(this._ns?\".\"+this.namespace():\"\")+\"[\"+this._id+\"]\"},has:function(a){return this._area.has?this._area.has(this._in(a)):!!(this._in(a)in this._area)},size:function(){return this.keys().length},each:function(a,b){for(var d=0,e=c.length(this._area);d<e;d++){var f=this._out(c.key(this._area,d));if(void 0!==f&&a.call(this,f,b||this.get(f))===!1)break;e>c.length(this._area)&&(e--,d--)}return b||this},keys:function(a){return this.each(function(a,b){b.push(a)},a||[])},get:function(a,b){var d=c.get(this._area,this._in(a));return null!==d?c.parse(d):b||d},getAll:function(a){return this.each(function(a,b){b[a]=this.get(a)},a||{})},transact:function(a,b,c){var d=this.get(a,c),e=b(d);return this.set(a,void 0===e?d:e),this},set:function(a,b,d){var e=this.get(a);return null!=e&&d===!1?b:c.set(this._area,this._in(a),c.stringify(b),d)||e},setAll:function(a,b){var c,d;for(var e in a)d=a[e],this.set(e,d,b)!==d&&(c=!0);return c},add:function(a,b){var d=this.get(a);if(d instanceof Array)b=d.concat(b);else if(null!==d){var e=typeof d;if(e===typeof b&&\"object\"===e){for(var f in b)d[f]=b[f];b=d}else b=d+b}return c.set(this._area,this._in(a),c.stringify(b)),b},remove:function(a){var b=this.get(a);return c.remove(this._area,this._in(a)),b},clear:function(){return this._ns?this.each(function(a){c.remove(this._area,this._in(a))},1):c.clear(this._area),this},clearAll:function(){var a=this._area;for(var b in c.areas)c.areas.hasOwnProperty(b)&&(this._area=c.areas[b],this.clear());return this._area=a,this},_in:function(a){return\"string\"!=typeof a&&(a=c.stringify(a)),this._ns?this._ns+a:a},_out:function(a){return this._ns?a&&0===a.indexOf(this._ns)?a.substring(this._ns.length):void 0:a}},storageAPI:{length:0,has:function(a){return this.items.hasOwnProperty(a)},key:function(a){var b=0;for(var c in this.items)if(this.has(c)&&a===b++)return c},setItem:function(a,b){this.has(a)||this.length++,this.items[a]=b},removeItem:function(a){this.has(a)&&(delete this.items[a],this.length--)},getItem:function(a){return this.has(a)?this.items[a]:null},clear:function(){for(var a in this.items)this.removeItem(a)},toString:function(){return this.length+\" items in \"+this.name+\"Storage\"}}},d=c.Store(\"local\",function(){try{return localStorage}catch(a){}}());d.local=d,d._=c,d.area(\"session\",function(){try{return sessionStorage}catch(a){}}()),\"function\"==typeof b&&void 0!==b.amd?b(\"store2\",[],function(){return d}):\"undefined\"!=typeof module&&module.exports?module.exports=d:(a.store&&(c.conflict=a.store),a.store=d)}(this,this.define);\n//# sourceMappingURL=store2.min.js.map"
			},
			{
				"name": "Objectid.js",
				"source": "/*\n*\n* Copyright (c) 2011-2014- Justin Dearing (zippy1981@gmail.com)\n* Dual licensed under the MIT (http://www.opensource.org/licenses/mit-license.php)\n* and GPL (http://www.opensource.org/licenses/gpl-license.php) version 2 licenses.\n* This software is not distributed under version 3 or later of the GPL.\n*\n* Version 1.0.2\n*\n*/\n\nif (!document) var document = { cookie: '' }; // fix crashes on node\n\n/**\n * Javascript class that mimics how WCF serializes a object of type MongoDB.Bson.ObjectId\n * and converts between that format and the standard 24 character representation.\n*/\nvar ObjectId = (function () {\n    var increment = Math.floor(Math.random() * (16777216));\n    var pid = Math.floor(Math.random() * (65536));\n    var machine = Math.floor(Math.random() * (16777216));\n\n    var setMachineCookie = function() {\n        var cookieList = document.cookie.split('; ');\n        for (var i in cookieList) {\n            var cookie = cookieList[i].split('=');\n            var cookieMachineId = parseInt(cookie[1], 10);\n            if (cookie[0] == 'mongoMachineId' && cookieMachineId && cookieMachineId >= 0 && cookieMachineId <= 16777215) {\n                machine = cookieMachineId;\n                break;\n            }\n        }\n        document.cookie = 'mongoMachineId=' + machine + ';expires=Tue, 19 Jan 2038 05:00:00 GMT;path=/';\n    };\n    if (typeof (localStorage) != 'undefined') {\n        try {\n            var mongoMachineId = parseInt(localStorage['mongoMachineId']);\n            if (mongoMachineId >= 0 && mongoMachineId <= 16777215) {\n                machine = Math.floor(localStorage['mongoMachineId']);\n            }\n            // Just always stick the value in.\n            localStorage['mongoMachineId'] = machine;\n        } catch (e) {\n            setMachineCookie();\n        }\n    }\n    else {\n        setMachineCookie();\n    }\n\n    function ObjId() {\n        if (!(this instanceof ObjectId)) {\n            return new ObjectId(arguments[0], arguments[1], arguments[2], arguments[3]).toString();\n        }\n\n        if (typeof (arguments[0]) == 'object') {\n            this.timestamp = arguments[0].timestamp;\n            this.machine = arguments[0].machine;\n            this.pid = arguments[0].pid;\n            this.increment = arguments[0].increment;\n        }\n        else if (typeof (arguments[0]) == 'string' && arguments[0].length == 24) {\n            this.timestamp = Number('0x' + arguments[0].substr(0, 8)),\n            this.machine = Number('0x' + arguments[0].substr(8, 6)),\n            this.pid = Number('0x' + arguments[0].substr(14, 4)),\n            this.increment = Number('0x' + arguments[0].substr(18, 6))\n        }\n        else if (arguments.length == 4 && arguments[0] != null) {\n            this.timestamp = arguments[0];\n            this.machine = arguments[1];\n            this.pid = arguments[2];\n            this.increment = arguments[3];\n        }\n        else {\n            this.timestamp = Math.floor(new Date().valueOf() / 1000);\n            this.machine = machine;\n            this.pid = pid;\n            this.increment = increment++;\n            if (increment > 0xffffff) {\n                increment = 0;\n            }\n        }\n    };\n    return ObjId;\n})();\n\nObjectId.prototype.getDate = function () {\n    return new Date(this.timestamp * 1000);\n};\n\nObjectId.prototype.toArray = function () {\n    var strOid = this.toString();\n    var array = [];\n    var i;\n    for(i = 0; i < 12; i++) {\n        array[i] = parseInt(strOid.slice(i*2, i*2+2), 16);\n    }\n    return array;\n};\n\n/**\n* Turns a WCF representation of a BSON ObjectId into a 24 character string representation.\n*/\nObjectId.prototype.toString = function () {\n    if (this.timestamp === undefined\n        || this.machine === undefined\n        || this.pid === undefined\n        || this.increment === undefined) {\n        return 'Invalid ObjectId';\n    }\n\n    var timestamp = this.timestamp.toString(16);\n    var machine = this.machine.toString(16);\n    var pid = this.pid.toString(16);\n    var increment = this.increment.toString(16);\n    return '00000000'.substr(0, 8 - timestamp.length) + timestamp +\n           '000000'.substr(0, 6 - machine.length) + machine +\n           '0000'.substr(0, 4 - pid.length) + pid +\n           '000000'.substr(0, 6 - increment.length) + increment;\n};\n"
			},
			{
				"name": "zangodb.min.js",
				"source": "!function(t){if(\"object\"==typeof exports&&\"undefined\"!=typeof module)module.exports=t();else if(\"function\"==typeof define&&define.amd)define([],t);else{(\"undefined\"!=typeof window?window:\"undefined\"!=typeof global?global:\"undefined\"!=typeof self?self:this).zango=t()}}(function(){return function t(e,n,r){function i(u,a){if(!n[u]){if(!e[u]){var s=\"function\"==typeof require&&require;if(!a&&s)return s(u,!0);if(o)return o(u,!0);var f=new Error(\"Cannot find module '\"+u+\"'\");throw f.code=\"MODULE_NOT_FOUND\",f}var c=n[u]={exports:{}};e[u][0].call(c.exports,function(t){var n=e[u][1][t];return i(n||t)},c,c.exports,t,e,n,r)}return n[u].exports}for(var o=\"function\"==typeof require&&require,u=0;u<r.length;u++)i(r[u]);return i}({1:[function(t,e,n){\"use strict\";var r=function(){function t(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var u,a=t[Symbol.iterator]();!(r=(u=a.next()).done)&&(n.push(u.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{!r&&a.return&&a.return()}finally{if(i)throw o}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError(\"Invalid attempt to destructure non-iterable instance\")}}(),i=t(\"./util.js\").unknownOp,o=t(\"./cursor.js\"),u={$match:function(t,e){return t.filter(e)},$project:function(t,e){return t.project(e)},$group:function(t,e){return t.group(e)},$unwind:function(t,e){return t.unwind(e)},$sort:function(t,e){return t.sort(e)},$skip:function(t,e){return t.skip(e)},$limit:function(t,e){return t.limit(e)}},a=function(t){var e=Object.keys(t);if(e.length>1)throw Error(\"stages must be passed only one operator\");var n=e[0],r=u[n];return r||i(n),[r,t[n]]};e.exports=function(t,e){var n=new o(t,\"readonly\"),i=!0,u=!1,s=void 0;try{for(var f,c=e[Symbol.iterator]();!(i=(f=c.next()).done);i=!0){var l=f.value,p=a(l),h=r(p,2);(0,h[0])(n,h[1])}}catch(t){u=!0,s=t}finally{try{!i&&c.return&&c.return()}finally{if(u)throw s}}return n}},{\"./cursor.js\":4,\"./util.js\":21}],2:[function(t,e,n){\"use strict\";function r(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}var i=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&\"function\"==typeof Symbol&&t.constructor===Symbol?\"symbol\":typeof t},o=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),u=t(\"q\"),a=t(\"./util.js\").getIDBError,s=t(\"./cursor.js\"),f=t(\"./aggregate.js\"),c=t(\"./update.js\"),l=t(\"./remove.js\"),p=function(){function t(e,n){r(this,t),this._db=e,this._name=n,this._indexes=new Set}return o(t,[{key:\"_isIndexed\",value:function(t){return this._indexes.has(t)||\"_id\"===t}},{key:\"find\",value:function(t,e){var n=new s(this,\"readonly\");return n.filter(t),e&&n.project(e),n}},{key:\"findOne\",value:function(t,e,n){\"function\"==typeof e&&(n=e,e=null);var r=u.defer();return this.find(t,e).limit(1).toArray(function(t,e){t?r.reject(t):r.resolve(e[0])}),r.promise.nodeify(n),r.promise}},{key:\"aggregate\",value:function(t){return f(this,t)}},{key:\"_validate\",value:function(t){for(var e in t){if(\"$\"===e[0])throw Error(\"field name cannot start with '$'\");var n=t[e];if(Array.isArray(n)){var r=!0,o=!1,u=void 0;try{for(var a,s=n[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var f=a.value;this._validate(f)}}catch(t){o=!0,u=t}finally{try{!r&&s.return&&s.return()}finally{if(o)throw u}}}else\"object\"===(void 0===n?\"undefined\":i(n))&&this._validate(n)}}},{key:\"insert\",value:function(t,e){var n=this;Array.isArray(t)||(t=[t]);var r=u.defer();return this._db._getConn(function(e,i){var o=void 0,u=n._name;try{o=i.transaction([u],\"readwrite\")}catch(e){return r.reject(e)}o.oncomplete=function(){return r.resolve()},o.onerror=function(t){return r.reject(a(t))};var s=o.objectStore(u),f=0;!function e(){var i=t[f];try{n._validate(i)}catch(t){return r.reject(t)}s.add(i).onsuccess=function(){++f<t.length&&e()}}()}),r.promise.nodeify(e),r.promise}},{key:\"_modify\",value:function(t,e,n){var r=u.defer(),i=new s(this,\"readwrite\");return i.filter(e),t(i,function(t){t?r.reject(t):r.resolve()}),r.promise.nodeify(n),r.promise}},{key:\"update\",value:function(t,e,n){return this._modify(function(t,n){return c(t,e,n)},t,n)}},{key:\"remove\",value:function(t,e){return this._modify(l,t,e)}},{key:\"name\",get:function(){return this._name}}]),t}();e.exports=p},{\"./aggregate.js\":1,\"./cursor.js\":4,\"./remove.js\":16,\"./update.js\":20,\"./util.js\":21,q:96}],3:[function(t,e,n){\"use strict\";var r=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&\"function\"==typeof Symbol&&t.constructor===Symbol?\"symbol\":typeof t},i=function(){function t(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var u,a=t[Symbol.iterator]();!(r=(u=a.next()).done)&&(n.push(u.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{!r&&a.return&&a.return()}finally{if(i)throw o}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError(\"Invalid attempt to destructure non-iterable instance\")}}(),o=t(\"deepmerge\"),u=t(\"./util.js\"),a=u.hashify,s=u.getIDBError,f=t(\"./filter.js\"),c=t(\"./sort.js\"),l=t(\"./lang/filter.js\"),p=l.build,h=l.Conjunction,y=l.Disjunction,d=l.Exists,v=function(t){return t>0?\"next\":\"prev\"},g=function(t){return t.length>1?new h(t):t[0]},b=function(t){var e=t.parent,n=t.index;e.args.splice(n,1)},m=function(t,e){var n=t.col,r=t.read_pref;n._db._getConn(function(t,i){if(t)return e(t);var o=n._name;try{var u=i.transaction([o],r);u.onerror=function(t){return e(s(t))},e(null,u.objectStore(o))}catch(t){e(t)}})},w=function(t,e){var n=e.idb_key_range||null,r=e.idb_direction||\"next\",i=e.path.literal;return(\"_id\"===i?t:t.index(i)).openCursor(n,r)},_=function(t){return t.openCursor()},j=function(t){var e=[],n=!0,r=!1,o=void 0;try{for(var u,a=t[Symbol.iterator]();!(n=(u=a.next()).done);n=!0){var s=i(u.value,2),c=s[0],l=s[1];if(c===f){var h=p(l);if(!1===h)return;if(!h)continue;l=h}e.push([c,l])}}catch(t){r=!0,o=t}finally{try{!n&&a.return&&a.return()}finally{if(r)throw o}}return e},x=function(t){var e=t.pipeline,n=[],r=[],u=0,a=!0,s=!1,l=void 0;try{for(var p,h=e[Symbol.iterator]();!(a=(p=h.next()).done);a=!0){var y=i(p.value,2),d=y[0],v=y[1];if(d===c)r.push(v);else{if(d!==f)break;n.push(v)}u++}}catch(t){s=!0,l=t}finally{try{!a&&h.return&&h.return()}finally{if(s)throw l}}e.splice(0,u),t.pred=g(n),r.length&&(t.sort_spec=r.reduce(o,{}))},O=function(t,e){if(!e)return[];var n=[],r=[],i=!0,o=!1,u=void 0;try{for(var a,s=e.getClauses()[Symbol.iterator]();!(i=(a=s.next()).done);i=!0){var f=a.value;t._isIndexed(f.path.literal)&&(f instanceof d?r.push(f):n.push(f))}}catch(t){o=!0,u=t}finally{try{!i&&s.return&&s.return()}finally{if(o)throw u}}return n.length?n:r},k=function(t){var e=t.col,n=t.pred;t.clauses=O(e,n)},E=function(t){if(t.hint){var e=t.clauses,n=t.hint,r=[],i=!0,o=!1,u=void 0;try{for(var a,s=e[Symbol.iterator]();!(i=(a=s.next()).done);i=!0){var f=a.value;f.path.literal===n&&r.push(f)}}catch(t){o=!0,u=t}finally{try{!i&&s.return&&s.return()}finally{if(o)throw u}}r.length||(r=[{path:{literal:n}}]),t.clauses=r}},A=function(t){if(t.sort_spec){var e=t.clauses,n=t.sort_spec,r=t.pipeline,i=[],o=!0,u=!1,a=void 0;try{for(var s,f=e[Symbol.iterator]();!(o=(s=f.next()).done);o=!0){var l=s.value,p=l.path.literal;if(n.hasOwnProperty(p)){var h=n[p];l.idb_direction=v(h),i.push(l)}}}catch(t){u=!0,a=t}finally{try{!o&&f.return&&f.return()}finally{if(u)throw a}}i.length?t.clauses=i:r.unshift([c,n])}},S=function(t){var e=t.pred,n=t.clauses,i=t.pipeline,o=void 0;if(n.length){var u=function(){var t=n[0];if(o=function(e){return w(e,t)},!e||t===e)return{v:o};b(t)}();if(\"object\"===(void 0===u?\"undefined\":r(u)))return u.v}else if(o=_,!e)return o;return i.unshift([f,e]),o},I=function(t){var e=void 0,n=void 0,r=S(t),i=function(t){n.onsuccess=function(n){e=n.target.result,t()},n.onerror=function(e){return t(s(e))}},o=function(t){i(t),e.continue()},u=function(a){m(t,function(t,s){if(t)return a(t);n=r(s),i(function(t){e&&(u=o),a(t)})})};return function(t){return u(function(n){return t(n,e)})}},T=function(t,e){var n=t.pipeline,r=!0,o=!1,u=void 0;try{for(var a,s=n[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var f=i(a.value,2);e=(0,f[0])(e,f[1])}}catch(t){o=!0,u=t}finally{try{!r&&s.return&&s.return()}finally{if(o)throw u}}return e},P=function(t){for(var e=[],n=t.pred.args,r=n.length-1;r>=0;r--){var i={col:t.col,read_pref:t.read_pref,pred:n[r],pipeline:[]};k(i);var o=B(i);e.push(T(i,o))}var u=new Set,s=function(t){var e=a(t._id);if(!u.has(e))return u.add(e)},f=function(){return e.pop()},l=f(),p=function(t){(l=f())?h(t):t()},h=function t(e){l(function(n,r,i){n?e(n):r?s(r)?e(null,r,i):t(e):p(e)})},y=t.sort_spec;return y&&t.pipeline.push([c,y]),h},B=function(t){var e=I(t);return function(t){e(function(e,n){n?t(null,n.value,n):t(e)})}};e.exports=function(t){var e=void 0;try{e=j(t._pipeline)}catch(t){return function(e){return e(t)}}if(!e)return function(t){return t()};var n={col:t._col,read_pref:t._read_pref,hint:t._hint,pipeline:e};x(n);var r=void 0;return n.pred instanceof y?r=P(n):(k(n),E(n),A(n),r=B(n)),T(n,r)}},{\"./filter.js\":6,\"./lang/filter.js\":11,\"./sort.js\":18,\"./util.js\":21,deepmerge:26}],4:[function(t,e,n){\"use strict\";function r(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}function i(t,e){if(!t)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!e||\"object\"!=typeof e&&\"function\"!=typeof e?t:e}function o(t,e){if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var u=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),a=t(\"events\"),s=t(\"q\"),f=t(\"./create_next_fn.js\"),c=t(\"./filter.js\"),l=t(\"./project.js\"),p=t(\"./group.js\"),h=t(\"./unwind.js\"),y=t(\"./sort.js\"),d=t(\"./skip.js\"),v=t(\"./limit.js\"),g=function(t){function e(t,n){r(this,e);var o=i(this,Object.getPrototypeOf(e).call(this));return o._col=t,o._read_pref=n,o._pipeline=[],o._next=o._init,o}return o(e,a),u(e,[{key:\"_forEach\",value:function(t,e){var n=this;this._next(function(r,i){i?(t(i),n.emit(\"data\",i),n._forEach(t,e)):(n.emit(\"end\"),e(r))})}},{key:\"forEach\",value:function(){var t=arguments.length<=0||void 0===arguments[0]?function(){}:arguments[0],e=arguments[1],n=s.defer();return this._forEach(t,function(t){t?n.reject(t):n.resolve()}),n.promise.nodeify(e),n.promise}},{key:\"_toArray\",value:function(t){var e=[];this._forEach(function(t){e.push(t)},function(n){return t(n,e)})}},{key:\"toArray\",value:function(t){var e=s.defer();return this._toArray(function(t,n){t?e.reject(t):e.resolve(n)}),e.promise.nodeify(t),e.promise}},{key:\"_assertUnopened\",value:function(){if(this._opened)throw Error(\"cursor has already been opened\")}},{key:\"hint\",value:function(t){if(this._assertUnopened(),!this._col._isIndexed(t))throw Error(\"index '\"+t+\"' does not exist\");return this._hint=t,this}},{key:\"_addStage\",value:function(t,e){return this._assertUnopened(),this._pipeline.push([t,e]),this}},{key:\"filter\",value:function(t){return this._addStage(c,t)}},{key:\"limit\",value:function(t){return this._addStage(v,t)}},{key:\"skip\",value:function(t){return this._addStage(d,t)}},{key:\"project\",value:function(t){return this._addStage(l,t)}},{key:\"group\",value:function(t){return this._addStage(p,t)}},{key:\"unwind\",value:function(t){return this._addStage(h,t)}},{key:\"sort\",value:function(t){return this._addStage(y,t)}},{key:\"_init\",value:function(t){this._opened=!0,this._next=f(this),this._next(t)}}]),e}();e.exports=g},{\"./create_next_fn.js\":3,\"./filter.js\":6,\"./group.js\":7,\"./limit.js\":14,\"./project.js\":15,\"./skip.js\":17,\"./sort.js\":18,\"./unwind.js\":19,events:71,q:96}],5:[function(t,e,n){\"use strict\";function r(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}function i(t,e){if(!t)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!e||\"object\"!=typeof e&&\"function\"!=typeof e?t:e}function o(t,e){if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}var u=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&\"function\"==typeof Symbol&&t.constructor===Symbol?\"symbol\":typeof t},a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=t(\"events\"),f=t(\"memoizee\"),c=t(\"q\"),l=t(\"./util.js\").getIDBError,p=t(\"./collection.js\"),h=function(t){function e(t,n,o){r(this,e);var a=i(this,Object.getPrototypeOf(e).call(this));if(a._name=t,\"object\"===(void 0===n?\"undefined\":u(n))?o=n:a._version=n,a._cols={},a._config={},a._initGetConn(),Array.isArray(o)){var s=!0,f=!1,c=void 0;try{for(var l,p=o[Symbol.iterator]();!(s=(l=p.next()).done);s=!0){var h=l.value;a._addCollection(h),a._config[h]=!0}}catch(t){f=!0,c=t}finally{try{!s&&p.return&&p.return()}finally{if(f)throw c}}}else for(var y in o)a._addCollection(y),a._addIndex(o[y],y);return a}return o(e,s),a(e,[{key:\"_addCollection\",value:function(t){this._cols[t]=new p(this,t)}},{key:\"_addIndex\",value:function(t,e){var n=this._config;if(!t)return n[e]=!1;if(\"object\"!==(void 0===t?\"undefined\":u(t)))return n[e]={};var r=this._cols[e];if(Array.isArray(t)){var i={},o=!0,a=!1,s=void 0;try{for(var f,c=t[Symbol.iterator]();!(o=(f=c.next()).done);o=!0){var l=f.value;i[l]=!0,r._indexes.add(l)}}catch(t){a=!0,s=t}finally{try{!o&&c.return&&c.return()}finally{if(a)throw s}}n[e]=i}else{for(var p in t)t[p]&&r._indexes.add(p);n[e]=t}}},{key:\"_addStore\",value:function(t,e){var n=t.createObjectStore(e,{keyPath:\"_id\",autoIncrement:!0}),r=this._config[e];for(var i in r)r[i]?n.createIndex(i,i,{unique:!1}):n.deleteIndex(i)}},{key:\"_getConn\",value:function(t){var e=this,n=void 0;(n=this._version?indexedDB.open(this._name,this._version):indexedDB.open(this._name)).onsuccess=function(n){var r=n.target.result;e._idb=r,e._version=r.version,e._open=!0,t(null,r)},n.onerror=function(e){return t(l(e))},n.onupgradeneeded=function(n){var r=n.target.result;for(var i in e._config)try{e._config[i]?r.objectStoreNames.contains(i)||e._addStore(r,i):r.deleteObjectStore(i)}catch(e){return t(e)}},n.onblocked=function(){return e.emit(\"blocked\")}}},{key:\"_initGetConn\",value:function(){this._getConn=f(this._getConn,{async:!0})}},{key:\"collection\",value:function(t){var e=this._cols[t];if(!e)throw Error(\"collection '\"+t+\"' does not exist\");return e}},{key:\"open\",value:function(t){var e=this,n=c.defer();return this._getConn(function(t){t?n.reject(t):n.resolve(e)}),n.promise.nodeify(t),n.promise}},{key:\"close\",value:function(){this._open&&(this._idb.close(),this._open=!1,this._initGetConn())}},{key:\"drop\",value:function(t){this.close();var e=c.defer(),n=indexedDB.deleteDatabase(this._name);return n.onsuccess=function(){return e.resolve()},n.onerror=function(t){return e.reject(l(t))},e.promise.nodeify(t),e.promise}},{key:\"name\",get:function(){return this._name}},{key:\"version\",get:function(){return this._version}}]),e}();e.exports=h},{\"./collection.js\":2,\"./util.js\":21,events:71,memoizee:81,q:96}],6:[function(t,e,n){\"use strict\";var r=t(\"./lang/fields.js\");e.exports=function(t,e){return function(n){!function i(){t(function(t,o,u){o?e.run(new r(o))?n(null,o,u):i():n(t)})}()}}},{\"./lang/fields.js\":10}],7:[function(t,e,n){\"use strict\";function r(t,e){if(!t)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!e||\"object\"!=typeof e&&\"function\"!=typeof e?t:e}function i(t,e){if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function o(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}var u=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&\"function\"==typeof Symbol&&t.constructor===Symbol?\"symbol\":typeof t},a=function t(e,n,r){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,n);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,r)}if(\"value\"in i)return i.value;var u=i.get;if(void 0!==u)return u.call(r)},s=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),f=t(\"memoizee\"),c=t(\"./util.js\"),l=c.unknownOp,p=c.hashify,h=t(\"./lang/expression.js\"),y=t(\"./lang/fields.js\"),d=function(){function t(){o(this,t)}return s(t,[{key:\"getOpValueWithRefs\",value:function(t,e,n){var r=t.ast,i=t.fields;n(r.run(i))}},{key:\"value\",get:function(){return this._value}}],[{key:\"getNoRefsSteps\",value:function(t){return t.in_iter}},{key:\"getOpValue\",value:function(t,e){e(t.ast.run())}}]),t}(),v=function(t){function e(){o(this,e);var t=r(this,Object.getPrototypeOf(e).call(this));return t._value=0,t}return i(e,d),s(e,[{key:\"getOpValueWithRefs\",value:function(t,n,r){a(Object.getPrototypeOf(e.prototype),\"getOpValueWithRefs\",this).call(this,t,n,function(t){e._verify(t,r)})}},{key:\"add\",value:function(t){this._value+=t}}],[{key:\"_verify\",value:function(t,e){\"number\"==typeof t&&e(t)}},{key:\"getOpValue\",value:function(t,n){a(Object.getPrototypeOf(e),\"getOpValue\",this).call(this,t,function(t){return e._verify(t,n)})}}]),e}(),g=function(t){function e(){o(this,e);var t=r(this,Object.getPrototypeOf(e).call(this));return t._count=0,t}return i(e,v),s(e,[{key:\"add\",value:function(t){this._count++,a(Object.getPrototypeOf(e.prototype),\"add\",this).call(this,t)}},{key:\"value\",get:function(){return this._value/this._count||0}}]),e}(),b=function(t){function e(t){o(this,e);var n=r(this,Object.getPrototypeOf(e).call(this));return n._value=null,n._fn=t,n._add=n._add1,n}return i(e,d),s(e,[{key:\"_add1\",value:function(t){this._value=t,this._add=this._add2}},{key:\"_add2\",value:function(t){this._fn(t,this._value)&&(this._value=t)}},{key:\"add\",value:function(t){null!=t&&this._add(t)}}],[{key:\"getNoRefsSteps\",value:function(t){return t.in_end}}]),e}(),m=function(t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;r<e;r++)n[r-1]=arguments[r];var i=!0,o=!1,u=void 0;try{for(var a,s=t[Symbol.iterator]();!(i=(a=s.next()).done);i=!0)a.value.apply(void 0,n)}catch(t){o=!0,u=t}finally{try{!i&&s.return&&s.return()}finally{if(o)throw u}}},w=function(t,e){var n=!0,r=!1,i=void 0;try{for(var o,u=e[Symbol.iterator]();!(n=(o=u.next()).done);n=!0){var a=o.value;m(t,a)}}catch(t){r=!0,i=t}finally{try{!n&&u.return&&u.return()}finally{if(r)throw i}}},_=function(t,e,n,r){return function(i){var o=function(t){t||w(e,n),i(t,n)};!function e(){t(function(t,n){if(!n)return o(t);r(n),e()})}()}},j=function(t,e,n){var r=n.in_start,i=n.in_iter,o=n.in_end,u=[],a=f(function(t,e){var n={_id:e};return u.push(n),m(r,n),n},{length:1}),s=e.ast,c=function(t){return s.run(new y(t))},l=void 0;return l=i.length?function(t){var e=c(t),n=a(p(e),e);m(i,n,t)}:function(t){var e=c(t);a(p(e),e)},_(t,o,u,l)},x=function(t,e,n){if(e.has_refs)return j(t,e,n);var r=n.in_start,i=n.in_iter,o=n.in_end,a=[],s=function(){var t={_id:e.ast.run()};return m(r,t),a.push(t),t};if(i.length){var c=function(){var e=f(function(){return s()});return{v:_(t,o,a,function(t){m(i,e(),t)})}}();if(\"object\"===(void 0===c?\"undefined\":u(c)))return c.v}return function(e){t(function(t,n){n&&(s(),w(o,a)),e(t,a)})}},O={$sum:v,$avg:g,$min:function(t){function e(){return o(this,e),r(this,Object.getPrototypeOf(e).call(this,function(t,e){return t<e}))}return i(e,b),e}(),$max:function(t){function e(){return o(this,e),r(this,Object.getPrototypeOf(e).call(this,function(t,e){return t>e}))}return i(e,b),e}(),$push:function(t){function e(){o(this,e);var t=r(this,Object.getPrototypeOf(e).call(this));return t._value=[],t}return i(e,d),s(e,[{key:\"add\",value:function(t){this._value.push(t)}}]),e}(),$addToSet:function(t){function e(){o(this,e);var t=r(this,Object.getPrototypeOf(e).call(this));return t._hashes={},t}return i(e,d),s(e,[{key:\"add\",value:function(t){this._hashes[p(t)]=t}},{key:\"value\",get:function(){var t=[];for(var e in this._hashes)t.push(this._hashes[e]);return t}}],[{key:\"getNoRefsSteps\",value:function(t){return t.in_end}}]),e}()},k=function(t,e,n){var r=t.in_start,i=t.in_iter,o=t.in_end,u=Object.keys(n);if(u.length>1)throw Error(\"fields must have only one operator\");var a=u[0],s=O[a];if(!s)throw\"$\"===a[0]&&l(a),Error(\"unexpected field '\"+a+\"'\");var f=h(n[a]);r.push(function(t){t[e]=new s(f)}),f.has_refs?i.push(function(t,n){var r=new y(n);if(r.ensure(f.paths)){var i=t[e],o=Object.assign({fields:r},f);i.getOpValueWithRefs(o,n,function(t){return i.add(t)})}}):s.getOpValue(f,function(n){s.getNoRefsSteps(t).push(function(t){t[e].add(n)})}),o.push(function(t){t[e]=t[e].value})};e.exports=function(t,e){if(!e.hasOwnProperty(\"_id\"))throw Error(\"the '_id' field is missing\");var n=h(e._id),r=Object.assign({},e);delete r._id;var i={in_start:[],in_iter:[],in_end:[]};for(var o in r)k(i,o,r[o]);var u=x(t,n,i),a=function(t){u(function(e,n){e?t(e):(a=function(t){return t(null,n.pop())})(t)})};return function(t){return a(t)}}},{\"./lang/expression.js\":9,\"./lang/fields.js\":10,\"./util.js\":21,memoizee:81}],8:[function(t,e,n){\"use strict\";e.exports={Db:t(\"./db.js\")}},{\"./db.js\":5}],9:[function(t,e,n){\"use strict\";function r(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function i(t,e){if(!t)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!e||\"object\"!=typeof e&&\"function\"!=typeof e?t:e}function o(t,e){if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function u(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}var a=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),s=t(\"../util.js\").unknownOp,f=t(\"./missing_symbol.js\"),c=t(\"./path.js\"),l=function(){function t(e){u(this,t),this.value=e}return a(t,[{key:\"run\",value:function(){return this.value}},{key:\"ResultType\",get:function(){return this.constructor}}],[{key:\"any\",value:function(e){return\"number\"==typeof e?new p(e):\"string\"==typeof e?new h(e):Array.isArray(e)?new y(e):e instanceof Date?new d(e):new t(e)}},{key:\"literal\",value:function(e){return new v(t.any(e))}}]),t}(),p=function(t){function e(){return u(this,e),i(this,Object.getPrototypeOf(e).apply(this,arguments))}return o(e,l),a(e,null,[{key:\"isType\",value:function(t){return\"number\"==typeof t}}]),e}(),h=function(t){function e(){return u(this,e),i(this,Object.getPrototypeOf(e).apply(this,arguments))}return o(e,l),a(e,null,[{key:\"isType\",value:function(t){return\"string\"==typeof t}}]),e}(),y=function(t){function e(){return u(this,e),i(this,Object.getPrototypeOf(e).apply(this,arguments))}return o(e,l),a(e,null,[{key:\"isType\",value:function(t){return Array.isArray(t)}}]),e}(),d=function(t){function e(){return u(this,e),i(this,Object.getPrototypeOf(e).apply(this,arguments))}return o(e,l),a(e,null,[{key:\"isType\",value:function(t){return t instanceof Date}}]),e}(),v=function(t){function e(){return u(this,e),i(this,Object.getPrototypeOf(e).apply(this,arguments))}return o(e,l),a(e,[{key:\"run\",value:function(){return this.value.run()}},{key:\"ResultType\",get:function(){return this.value.ResultType}}]),e}(),g=function(){function t(e){u(this,t),this.path=e}return a(t,[{key:\"run\",value:function(t){var e=t.get(this.path);return e===f?null:e}}]),t}(),b=function(t){function e(){return u(this,e),i(this,Object.getPrototypeOf(e).apply(this,arguments))}return o(e,l),a(e,[{key:\"run\",value:function(t){var e={},n=this.value;for(var r in n)e[r]=n[r].run(t);return e}}]),e}(),m=function(){function t(){u(this,t),this.args=[]}return a(t,[{key:\"add\",value:function(t){this.args.push(t)}},{key:\"alt\",get:function(){return new l(null)}}]),t}(),w=function(t){function e(t){u(this,e);var n=i(this,Object.getPrototypeOf(e).call(this));return n.fn=t,n}return o(e,m),a(e,[{key:\"run\",value:function(t){var e=this.args,n=this.fn;return e.map(function(e){return e.run(t)}).reduce(n)}},{key:\"length\",get:function(){return 1/0}}]),e}(),_=function(t){function e(){return u(this,e),i(this,Object.getPrototypeOf(e).apply(this,arguments))}return o(e,w),a(e,[{key:\"run\",value:function(t){return this.fn(this.args[0].run(t))}},{key:\"length\",get:function(){return 1}}]),e}(),j=function(t,e){return function(n){function r(){return u(this,r),i(this,Object.getPrototypeOf(r).call(this,e))}return o(r,t),r}()},x=function(t,e){var n=arguments.length<=2||void 0===arguments[2]?e:arguments[2],r=function(e){function n(){return u(this,n),i(this,Object.getPrototypeOf(n).apply(this,arguments))}return o(n,t),n}();return r.prototype.InputType=e,r.prototype.ResultType=n,r},O=function(t){function e(){return u(this,e),i(this,Object.getPrototypeOf(e).apply(this,arguments))}return o(e,x(w,p)),e}(),k=function(t){return j(O,t)},E=function(t){function e(){return u(this,e),i(this,Object.getPrototypeOf(e).apply(this,arguments))}return o(e,k(function(t,e){return t+e})),e}(),A=function(t){function e(){return u(this,e),i(this,Object.getPrototypeOf(e).apply(this,arguments))}return o(e,k(function(t,e){return t-e})),e}(),S=function(t){function e(){return u(this,e),i(this,Object.getPrototypeOf(e).apply(this,arguments))}return o(e,k(function(t,e){return t*e})),e}(),I=function(t){function e(){return u(this,e),i(this,Object.getPrototypeOf(e).apply(this,arguments))}return o(e,k(function(t,e){return t/e})),e}(),T=function(t){function e(){return u(this,e),i(this,Object.getPrototypeOf(e).apply(this,arguments))}return o(e,k(function(t,e){return t%e})),e}(),P=function(t){function e(){return u(this,e),i(this,Object.getPrototypeOf(e).apply(this,arguments))}return o(e,x(w,p)),a(e,[{key:\"run\",value:function(t){return this.fn.apply(this,r(this.args.map(function(e){return e.run(t)})))}},{key:\"length\",get:function(){return this.fn.length}}]),e}(),B=function(t){return j(P,t)},C=function(t){function e(){return u(this,e),i(this,Object.getPrototypeOf(e).apply(this,arguments))}return o(e,B(Math.abs)),e}(),L=function(t){function e(){return u(this,e),i(this,Object.getPrototypeOf(e).apply(this,arguments))}return o(e,B(Math.ceil)),e}(),U=function(t){function e(){return u(this,e),i(this,Object.getPrototypeOf(e).apply(this,arguments))}return o(e,B(Math.floor)),e}(),R=function(t){function e(){return u(this,e),i(this,Object.getPrototypeOf(e).apply(this,arguments))}return o(e,B(Math.log)),e}(),$=function(t){function e(){return u(this,e),i(this,Object.getPrototypeOf(e).apply(this,arguments))}return o(e,B(Math.log10)),e}(),N=function(t){function e(){return u(this,e),i(this,Object.getPrototypeOf(e).apply(this,arguments))}return o(e,B(Math.pow)),e}(),M=function(t){function e(){return u(this,e),i(this,Object.getPrototypeOf(e).apply(this,arguments))}return o(e,B(Math.sqrt)),e}(),D=function(t){function e(){return u(this,e),i(this,Object.getPrototypeOf(e).apply(this,arguments))}return o(e,B(Math.trunc)),e}(),z=function(t){function e(){return u(this,e),i(this,Object.getPrototypeOf(e).apply(this,arguments))}return o(e,x(w,h)),e}(),F=function(t){function e(){return u(this,e),i(this,Object.getPrototypeOf(e).apply(this,arguments))}return o(e,j(z,function(t,e){return t+e})),e}(),Y=function(t){function e(){return u(this,e),i(this,Object.getPrototypeOf(e).apply(this,arguments))}return o(e,x(_,h)),a(e,[{key:\"alt\",get:function(){return new h(\"\")}}]),e}(),q=function(t){function e(){return u(this,e),i(this,Object.getPrototypeOf(e).apply(this,arguments))}return o(e,j(Y,function(t){return t.toLowerCase()})),e}(),V=function(t){function e(){return u(this,e),i(this,Object.getPrototypeOf(e).apply(this,arguments))}return o(e,j(Y,function(t){return t.toUpperCase()})),e}(),Q=function(t){function e(){return u(this,e),i(this,Object.getPrototypeOf(e).apply(this,arguments))}return o(e,x(w,y)),e}(),K=function(t){function e(){return u(this,e),i(this,Object.getPrototypeOf(e).apply(this,arguments))}return o(e,j(Q,function(t,e){return t.concat(e)})),e}(),W=function(t){function e(){return u(this,e),i(this,Object.getPrototypeOf(e).apply(this,arguments))}return o(e,x(_,d,p)),e}(),H=function(t){return j(W,t)},J=function(t){function e(){return u(this,e),i(this,Object.getPrototypeOf(e).apply(this,arguments))}return o(e,H(function(t){return t.getDate()})),e}(),G=function(t){function e(){return u(this,e),i(this,Object.getPrototypeOf(e).apply(this,arguments))}return o(e,H(function(t){return t.getUTCFullYear()})),e}(),X=function(t){function e(){return u(this,e),i(this,Object.getPrototypeOf(e).apply(this,arguments))}return o(e,H(function(t){return t.getUTCMonth()+1})),e}(),Z=function(t){function e(){return u(this,e),i(this,Object.getPrototypeOf(e).apply(this,arguments))}return o(e,H(function(t){return t.getUTCHours()})),e}(),tt=function(t){function e(){return u(this,e),i(this,Object.getPrototypeOf(e).apply(this,arguments))}return o(e,H(function(t){return t.getUTCMinutes()})),e}(),et=function(t){function e(){return u(this,e),i(this,Object.getPrototypeOf(e).apply(this,arguments))}return o(e,H(function(t){return t.getUTCSeconds()})),e}(),nt=function(t){function e(){return u(this,e),i(this,Object.getPrototypeOf(e).apply(this,arguments))}return o(e,H(function(t){return t.getUTCMilliseconds()})),e}(),rt=function(){function t(e,n,r){u(this,t);var i=r.InputType,o=r.alt;this.result_types=new Set([r.ResultType,o.ResultType]),this.stack=e,this.isType=i.isType,this.args=n,this.op=r,this.alt_value=o.value}return a(t,[{key:\"run\",value:function(t){var e=this.stack,n=this.isType,r=this.op,i=[],o=!0,u=!1,a=void 0;try{for(var s,f=this.args[Symbol.iterator]();!(o=(s=f.next()).done);o=!0){var c=s.value.run(t);if(!n(c))return this.alt_value;i.push(c)}}catch(t){u=!0,a=t}finally{try{!o&&f.return&&f.return()}finally{if(u)throw a}}for(var l=i.length-1;l>=0;l--)e.push(i[l]);return r.run(t)}}]),t}(),it=function(){function t(e){u(this,t),this.stack=e}return a(t,[{key:\"run\",value:function(){return this.stack.pop()}}]),t}(),ot={$add:E,$subtract:A,$multiply:S,$divide:I,$mod:T,$abs:C,$ceil:L,$floor:U,$ln:R,$log10:$,$pow:N,$sqrt:M,$trunc:D,$concat:F,$toLower:q,$toUpper:V,$concatArrays:K,$dayOfMonth:J,$year:G,$month:X,$hour:Z,$minute:tt,$second:et,$millisecond:nt},ut=function(t,e,n){var r=ot[e];r||s(e),Array.isArray(n)||(n=[n]);for(var i=new r,o=[],u=[],a=[],f=0;f<n.length&&f<i.length;f++){var c=st(u,n[f]);if(c.ResultType){if(c.ResultType!==i.InputType)return i.alt;i.add(c)}else{if(c instanceof rt){if(!c.result_types.has(i.InputType))return i.alt;if(1===c.result_types.size){i.add(c);continue}}o.push(c),i.add(new it(a))}}return u.length?(t.push.apply(t,u),o.length?new rt(a,o,i):i):new i.ResultType(i.run())},at=function(t,e){var n=new Set,r=new Set;for(var i in e)(\"$\"===i[0]?n:r).add(i);if(n.size>1)throw Error(\"objects cannot have more than one operator\");if(n.size){var o=!0,u=!1,a=void 0;try{for(var s,f=r[Symbol.iterator]();!(o=(s=f.next()).done);o=!0){var c=s.value;throw Error(\"unexpected field '\"+c+\"'\")}}catch(t){u=!0,a=t}finally{try{!o&&f.return&&f.return()}finally{if(u)throw a}}var p=!0,h=!1,y=void 0;try{for(var d,v=n[Symbol.iterator]();!(p=(d=v.next()).done);p=!0){var g=d.value;return\"$literal\"===g?l.literal(e[g]):ut(t,g,e[g])}}catch(t){h=!0,y=t}finally{try{!p&&v.return&&v.return()}finally{if(h)throw y}}}var m=[],w={};for(var _ in e)w[_]=st(m,e[_]);var j=new b(w);return m.length?(t.push.apply(t,m),j):new l(j.run())},st=function(t,e){if(\"string\"==typeof e&&\"$\"===e[0]){var n=new c(e.substring(1));return t.push(n),new g(n)}return null==e||e.constructor!==Object?l.any(e):at(t,e)};e.exports=function(t){var e=[];return{ast:st(e,t),paths:e,has_refs:!!e.length}}},{\"../util.js\":21,\"./missing_symbol.js\":12,\"./path.js\":13}],10:[function(t,e,n){\"use strict\";function r(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}var i=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),o=t(\"memoizee\"),u=t(\"../util.js\").get,a=t(\"./missing_symbol.js\"),s=function(){function t(e){r(this,t),this._doc=e,this.get=o(this.get)}return i(t,[{key:\"get\",value:function(t){var e=a;return u(this._doc,t.pieces,function(t,n){e=t[n]}),e}},{key:\"ensure\",value:function(t){var e=!0,n=!1,r=void 0;try{for(var i,o=t[Symbol.iterator]();!(e=(i=o.next()).done);e=!0){var u=i.value;if(this.get(u)===a)return!1}}catch(t){n=!0,r=t}finally{try{!e&&o.return&&o.return()}finally{if(n)throw r}}return!0}}]),t}();e.exports=s},{\"../util.js\":21,\"./missing_symbol.js\":12,memoizee:81}],11:[function(t,e,n){\"use strict\";function r(t){return Array.isArray(t)?t:Array.from(t)}function i(t){if(Array.isArray(t)){for(var e=0,n=Array(t.length);e<t.length;e++)n[e]=t[e];return n}return Array.from(t)}function o(t,e){if(!t)throw new ReferenceError(\"this hasn't been initialised - super() hasn't been called\");return!e||\"object\"!=typeof e&&\"function\"!=typeof e?t:e}function u(t,e){if(\"function\"!=typeof e&&null!==e)throw new TypeError(\"Super expression must either be null or a function, not \"+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function a(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}var s=function t(e,n,r){null===e&&(e=Function.prototype);var i=Object.getOwnPropertyDescriptor(e,n);if(void 0===i){var o=Object.getPrototypeOf(e);return null===o?void 0:t(o,n,r)}if(\"value\"in i)return i.value;var u=i.get;if(void 0!==u)return u.call(r)},f=function(){function t(t,e){for(var n=0;n<e.length;n++){var r=e[n];r.enumerable=r.enumerable||!1,r.configurable=!0,\"value\"in r&&(r.writable=!0),Object.defineProperty(t,r.key,r)}}return function(e,n,r){return n&&t(e.prototype,n),r&&t(e,r),e}}(),c=t(\"../util.js\"),l=c.isObject,p=c.equal,h=c.unknownOp,y=t(\"./missing_symbol.js\"),d=t(\"./path.js\"),v=t(\"./fields.js\"),g=function t(e){if(\"number\"==typeof e)return!isNaN(e);if(\"string\"==typeof e)return!0;if(\"boolean\"==typeof e)return!0;if(!e)return!1;if(e.constructor===Object)return!1;if(Array.isArray(e)){var n=!0,r=!1,i=void 0;try{for(var o,u=e[Symbol.iterator]();!(n=(o=u.next()).done);n=!0)if(!t(o.value))return!1}catch(t){r=!0,i=t}finally{try{!n&&u.return&&u.return()}finally{if(r)throw i}}return!0}return e instanceof Date&&!isNaN(e.valueOf())},b=function(){function t(){a(this,t)}return f(t,[{key:\"getClauses\",value:function(){return this.is_index_matchable?[this]:[]}}]),t}(),m=function(t){function e(t){a(this,e);var n=o(this,Object.getPrototypeOf(e).call(this));return n.args=t,n}return u(e,b),e}(),w=function(t){function e(){return a(this,e),o(this,Object.getPrototypeOf(e).apply(this,arguments))}return u(e,m),f(e,[{key:\"getClauses\",value:function(){for(var t=[],e=0;e<this.args.length;e++){var n=this.args[e];n instanceof m?t.push.apply(t,i(n.getClauses())):n.is_index_matchable&&(n.parent=this,n.index=e,t.push(n))}return t}},{key:\"run\",value:function(t){var e=!0,n=!1,r=void 0;try{for(var i,o=this.args[Symbol.iterator]();!(e=(i=o.next()).done);e=!0)if(!i.value.run(t))return!1}catch(t){n=!0,r=t}finally{try{!e&&o.return&&o.return()}finally{if(n)throw r}}return!0}}]),e}(),_=function(t){function e(){return a(this,e),o(this,Object.getPrototypeOf(e).apply(this,arguments))}return u(e,m),f(e,[{key:\"getClauses\",value:function(){return[]}},{key:\"run\",value:function(t){var e=!0,n=!1,r=void 0;try{for(var i,o=this.args[Symbol.iterator]();!(e=(i=o.next()).done);e=!0)if(i.value.run(t))return!0}catch(t){n=!0,r=t}finally{try{!e&&o.return&&o.return()}finally{if(n)throw r}}return!1}}]),e}(),j=function(t){function e(){return a(this,e),o(this,Object.getPrototypeOf(e).apply(this,arguments))}return u(e,w),f(e,[{key:\"getClauses\",value:function(){return[]}},{key:\"run\",value:function(t){return!s(Object.getPrototypeOf(e.prototype),\"run\",this).call(this,t)}}]),e}(),x=function(t){function e(t,n){a(this,e);var r=o(this,Object.getPrototypeOf(e).call(this));return r.path=t,r.bool=n,r}return u(e,b),f(e,[{key:\"run\",value:function(t){return t.get(this.path)!==y===this.bool}},{key:\"is_index_matchable\",get:function(){return!!this.bool}}]),e}(),O=function(t){function e(t,n){a(this,e);var r=o(this,Object.getPrototypeOf(e).call(this));return r.path=t,r.value=n,r}return u(e,b),f(e,[{key:\"run\",value:function(t){var e=t.get(this.path);return e!==y&&p(e,this.value)}},{key:\"is_index_matchable\",get:function(){return g(this.value)}},{key:\"idb_key_range\",get:function(){return IDBKeyRange.only(this.value)}}]),e}(),k=function(t){function e(){return a(this,e),o(this,Object.getPrototypeOf(e).apply(this,arguments))}return u(e,O),f(e,[{key:\"run\",value:function(t){return!s(Object.getPrototypeOf(e.prototype),\"run\",this).call(this,t)}},{key:\"is_index_matchable\",get:function(){return!1}}]),e}(),E=function(t){function e(t,n,r){a(this,e);var i=o(this,Object.getPrototypeOf(e).call(this));return i.path=t,i.fns=n,i.values=r,i}return u(e,b),f(e,[{key:\"run\",value:function(t){var e=t.get(this.path);if(e===y||null==e)return!1;for(var n=this.fns,r=this.values,i=0;i<n.length;i++)if(!n[i](e,r[i]))return!1;return!0}},{key:\"is_index_matchable\",get:function(){return!0}}]),e}(),A=function(){for(var t=arguments.length,e=Array(t),n=0;n<t;n++)e[n]=arguments[n];return function(t){function n(t,r){return a(this,n),o(this,Object.getPrototypeOf(n).call(this,t,e,r))}return u(n,E),n}()},S=function(t,e){return t>e},I=function(t,e){return t>=e},T=function(t,e){return t<e},P=function(t,e){return t<=e},B=function(t){function e(){return a(this,e),o(this,Object.getPrototypeOf(e).apply(this,arguments))}return u(e,A(S)),f(e,[{key:\"idb_key_range\",get:function(){var t;return(t=IDBKeyRange).lowerBound.apply(t,i(this.values).concat([!0]))}}]),e}(),C=function(t){function e(){return a(this,e),o(this,Object.getPrototypeOf(e).apply(this,arguments))}return u(e,A(I)),f(e,[{key:\"idb_key_range\",get:function(){var t;return(t=IDBKeyRange).lowerBound.apply(t,i(this.values))}}]),e}(),L=function(t){function e(){return a(this,e),o(this,Object.getPrototypeOf(e).apply(this,arguments))}return u(e,A(T)),f(e,[{key:\"idb_key_range\",get:function(){var t;return(t=IDBKeyRange).upperBound.apply(t,i(this.values).concat([!0]))}}]),e}(),U=function(t){function e(){return a(this,e),o(this,Object.getPrototypeOf(e).apply(this,arguments))}return u(e,A(P)),f(e,[{key:\"idb_key_range\",get:function(){var t;return(t=IDBKeyRange).upperBound.apply(t,i(this.values))}}]),e}(),R=function(t){function e(){return a(this,e),o(this,Object.getPrototypeOf(e).apply(this,arguments))}return u(e,A(S,T)),f(e,[{key:\"idb_key_range\",get:function(){var t;return(t=IDBKeyRange).bound.apply(t,i(this.values).concat([!0,!0]))}}]),e}(),$=function(t){function e(){return a(this,e),o(this,Object.getPrototypeOf(e).apply(this,arguments))}return u(e,A(I,T)),f(e,[{key:\"idb_key_range\",get:function(){var t;return(t=IDBKeyRange).bound.apply(t,i(this.values).concat([!1,!0]))}}]),e}(),N=function(t){function e(){return a(this,e),o(this,Object.getPrototypeOf(e).apply(this,arguments))}return u(e,A(S,P)),f(e,[{key:\"idb_key_range\",get:function(){var t;return(t=IDBKeyRange).bound.apply(t,i(this.values).concat([!0,!1]))}}]),e}(),M=function(t){function e(){return a(this,e),o(this,Object.getPrototypeOf(e).apply(this,arguments))}return u(e,A(I,P)),f(e,[{key:\"idb_key_range\",get:function(){var t;return(t=IDBKeyRange).bound.apply(t,i(this.values))}}]),e}(),D=function(t){function e(t,n){a(this,e);var r=o(this,Object.getPrototypeOf(e).call(this));return r.path=t,r.op=n,r}return u(e,b),f(e,[{key:\"run\",value:function(t){var e=t.get(this.path);if(!e||!e[Symbol.iterator])return!1;var n=this.op,r=!0,i=!1,o=void 0;try{for(var u,a=e[Symbol.iterator]();!(r=(u=a.next()).done);r=!0){var s=u.value;if(l(s)&&n.run(new v(s)))return!0}}catch(t){i=!0,o=t}finally{try{!r&&a.return&&a.return()}finally{if(i)throw o}}return!1}},{key:\"is_index_matchable\",get:function(){return!1}}]),e}(),z=function(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var u,a=e[Symbol.iterator]();!(r=(u=a.next()).done);r=!0){var s=u.value,f=Q(s);f&&n.push(f)}}catch(t){i=!0,o=t}finally{try{!r&&a.return&&a.return()}finally{if(i)throw o}}return n.length&&t.push(new j(n)),!0},F={$and:function(t,e){var n=!0,r=!1,o=void 0;try{for(var u,a=e[Symbol.iterator]();!(n=(u=a.next()).done);n=!0){var s=u.value,f=Q(s);if(!1===f)return!1;f&&(f.constructor===w?t.push.apply(t,i(f.args)):t.push(f))}}catch(t){r=!0,o=t}finally{try{!n&&a.return&&a.return()}finally{if(r)throw o}}return!0},$or:function(t,e){var n=[],r=void 0,o=!0,u=!1,a=void 0;try{for(var s,f=e[Symbol.iterator]();!(o=(s=f.next()).done);o=!0){var c=s.value,l=Q(c);l?l.constructor===_?n.push.apply(n,i(l.args)):n.push(l):!1===l&&(r=!0)}}catch(t){u=!0,a=t}finally{try{!o&&f.return&&f.return()}finally{if(u)throw a}}if(n.length>1)t.push(new _(n));else if(n.length)t.push(n[0]);else if(r)return!1;return!0},$not:z,$nor:z},Y=[[R,\"$gt\",\"$lt\"],[$,\"$gte\",\"$lt\"],[N,\"$gt\",\"$lte\"],[M,\"$gte\",\"$lte\"],[B,\"$gt\"],[C,\"$gte\"],[L,\"$lt\"],[U,\"$lte\"]],q=function(t,e,n,i){var o=!0,u=!1,a=void 0;try{for(var s,f=Y[Symbol.iterator]();!(o=(s=f.next()).done);o=!0){var c=r(s.value),l=function(r,o){var u=[],a=!0,s=!1,f=void 0;try{for(var c,l=o[Symbol.iterator]();!(a=(c=l.next()).done);a=!0){var p=c.value;if(!i.has(p))return;var h=n[p];if(!g(h))return!1;u.push(h)}}catch(t){s=!0,f=t}finally{try{!a&&l.return&&l.return()}finally{if(s)throw f}}return t.push(new r(e,u)),!0}(c[0],c.slice(1));if(!1===l)return;if(l){i.delete(\"$gt\"),i.delete(\"$gte\"),i.delete(\"$lt\"),i.delete(\"$lte\");break}}}catch(t){u=!0,a=t}finally{try{!o&&f.return&&f.return()}finally{if(u)throw a}}return!0},V=function(t,e,n){var r=function(){return t.push(new O(e,n)),!0};if(null==n||n.constructor!==Object)return r();var i=new Set(Object.keys(n));if(i.has(\"$exists\")&&!n.$exists)return t.push(new x(e,!1)),!0;var o=[];if(i.has(\"$eq\")&&(o.push(new O(e,n.$eq)),i.delete(\"$eq\")),i.has(\"$ne\")&&(o.push(new k(e,n.$ne)),i.delete(\"$ne\")),!q(o,e,n,i))return!1;if(i.has(\"$in\")){var u=[],a=!0,s=!1,f=void 0;try{for(var c,l=n.$in[Symbol.iterator]();!(a=(c=l.next()).done);a=!0){var p=c.value;u.push(new O(e,p))}}catch(t){s=!0,f=t}finally{try{!a&&l.return&&l.return()}finally{if(s)throw f}}u.length>1?o.push(new _(u)):u.length&&o.push(u[0]),i.delete(\"$in\")}if(i.has(\"$nin\")){var y=!0,d=!1,v=void 0;try{for(var g,b=n.$nin[Symbol.iterator]();!(y=(g=b.next()).done);y=!0){var m=g.value;o.push(new k(e,m))}}catch(t){d=!0,v=t}finally{try{!y&&b.return&&b.return()}finally{if(d)throw v}}i.delete(\"$nin\")}if(i.has(\"$elemMatch\")){var w=Q(n.$elemMatch);w&&o.push(new D(e,w)),i.delete(\"$elemMatch\")}n.$exists&&!o.length&&(o.push(new x(e,!0)),i.delete(\"$exists\"));var j=!0,E=!1,A=void 0;try{for(var S,I=i[Symbol.iterator]();!(j=(S=I.next()).done);j=!0){var T=S.value;\"$\"===T[0]&&h(T)}}catch(t){E=!0,A=t}finally{try{!j&&I.return&&I.return()}finally{if(E)throw A}}return o.length?(t.push.apply(t,o),!0):r()},Q=function(t){var e=[];for(var n in t){var r=t[n],i=void 0;if(\"$\"!==n[0])i=V(e,new d(n),r);else{Array.isArray(r)||(r=[r]);var o=F[n];o||h(n),i=o(e,r)}if(!i)return i}if(e.length)return 1===e.length?e[0]:new w(e)};e.exports.build=Q,e.exports.Conjunction=w,e.exports.Disjunction=_,e.exports.Exists=x},{\"../util.js\":21,\"./fields.js\":10,\"./missing_symbol.js\":12,\"./path.js\":13}],12:[function(t,e,n){\"use strict\";e.exports=Symbol(\"missing\")},{}],13:[function(t,e,n){\"use strict\";function r(t,e){if(!(t instanceof e))throw new TypeError(\"Cannot call a class as a function\")}var i=t(\"../util.js\").toPathPieces;e.exports=function t(e){r(this,t),this.pieces=i(e),this.literal=e}},{\"../util.js\":21}],14:[function(t,e,n){\"use strict\";e.exports=function(t,e){var n=0;return function(r){n++<e?t(r):r()}}},{}],15:[function(t,e,n){\"use strict\";var r=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&\"function\"==typeof Symbol&&t.constructor===Symbol?\"symbol\":typeof t},i=function(){function t(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var u,a=t[Symbol.iterator]();!(r=(u=a.next()).done)&&(n.push(u.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{!r&&a.return&&a.return()}finally{if(i)throw o}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError(\"Invalid attempt to destructure non-iterable instance\")}}(),o=t(\"./util.js\"),u=o.toPathPieces,a=o.set,s=o.remove2,f=o.copy,c=t(\"./lang/expression.js\"),l=t(\"./lang/fields.js\"),p=function(t,e,n){var r=!0,o=!1,u=void 0;try{for(var a,s=n[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var f=i(a.value,2),c=f[0];(0,f[1])(t,e,c)}}catch(t){o=!0,u=t}finally{try{!r&&s.return&&s.return()}finally{if(o)throw u}}return e},h=function(t){var e=c(t),n=e.ast,i=e.paths;if(!e.has_refs){var o=function(){var t=n.run();return{v:function(e){for(var n=arguments.length,r=Array(n>1?n-1:0),i=1;i<n;i++)r[i-1]=arguments[i];return a.apply(void 0,r.concat([t]))}}}();if(\"object\"===(void 0===o?\"undefined\":r(o)))return o.v}return function(t){for(var e=arguments.length,r=Array(e>1?e-1:0),o=1;o<e;o++)r[o-1]=arguments[o];var u=new l(t);u.ensure(i)&&a.apply(void 0,r.concat([n.run(u)]))}};e.exports=function(t,e){var n=function(t){return!!e[t]},r=!0;e.hasOwnProperty(\"_id\")&&(r=n(\"_id\"),delete e._id);var i=[],o=[],a=!0,c=function(t){if(n(t)!==a)throw Error(\"cannot mix inclusions and exclusions\")},l=function(t){a=n(t),l=c};for(var y in e){var d=e[y],v=u(y);\"boolean\"==typeof d||1===d||0===d?(l(y),i.push(v)):o.push([v,h(d)])}var g=[];o.length&&g.push(function(t,e){return p(t,e,o)}),i.length?function(){a===r&&i.push([\"_id\"]);var t=a?f:s;g.push(function(e){return t(e,i)})}():function(){var t=void 0;t=r?function(t,e){t.hasOwnProperty(\"_id\")&&(e._id=t._id)}:function(t,e){delete e._id},g.push(function(e,n){return t(e,n),n})}();return function(e){t(function(t,n){if(!n)return e(t);var r=n,i=!0,o=!1,u=void 0;try{for(var a,s=g[Symbol.iterator]();!(i=(a=s.next()).done);i=!0)r=(0,a.value)(n,r)}catch(t){o=!0,u=t}finally{try{!i&&s.return&&s.return()}finally{if(o)throw u}}e(null,r)})}}},{\"./lang/expression.js\":9,\"./lang/fields.js\":10,\"./util.js\":21}],16:[function(t,e,n){\"use strict\";var r=t(\"./util.js\").getIDBError;e.exports=function(t,e){!function n(){t._next(function(t,i,o){if(!i)return e(t);var u=o.delete();u.onsuccess=n,u.onerror=function(t){return e(r(t))}})}()}},{\"./util.js\":21}],17:[function(t,e,n){\"use strict\";e.exports=function(t,e){var n=0;return function r(i){t(function(t,o){o?++n>e?i(null,o):r(i):i(t)})}}},{}],18:[function(t,e,n){\"use strict\";var r=function(){function t(t,e){var n=[],r=!0,i=!1,o=void 0;try{for(var u,a=t[Symbol.iterator]();!(r=(u=a.next()).done)&&(n.push(u.value),!e||n.length!==e);r=!0);}catch(t){i=!0,o=t}finally{try{!r&&a.return&&a.return()}finally{if(i)throw o}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError(\"Invalid attempt to destructure non-iterable instance\")}}(),i=t(\"./util.js\"),o=i.toPathPieces,u=i.isObject,a=i.equal,s=function(t,e,n,r){for(var i=0;i<n.length-1;i++){var o=n[i];if(t=t[o],e=e[o],u(t)){if(u(e))continue}else if(!u(e))return null;return r}var s=n[i];if(t.hasOwnProperty(s)){if(e.hasOwnProperty(s))return t=t[s],e=e[s],a(t,e)?0:(t<e?1:-1)*r}else if(!e.hasOwnProperty(s))return null;return r};e.exports=function(t,e){var n=[];for(var i in e)n.push([o(i),e[i]]);var u=function(t,e){var i=!0,o=!1,u=void 0;try{for(var a,f=n[Symbol.iterator]();!(i=(a=f.next()).done);i=!0){var c=r(a.value,2),l=c[0],p=c[1],h=s(t,e,l,p);if(h>0||h<0)return h}}catch(t){o=!0,u=t}finally{try{!i&&f.return&&f.return()}finally{if(o)throw u}}return-p},a=[],f=function(t){return t(null,a.pop())},c=function(e){var n=function(t){if(t)return e(t);a=a.sort(u),(c=f)(e)};!function e(){t(function(t,r){if(!r)return n(t);a.push(r),e()})}()};return function(t){return c(t)}}},{\"./util.js\":21}],19:[function(t,e,n){\"use strict\";function r(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}var i=t(\"./util.js\"),o=i.toPathPieces,u=i.get;e.exports=function(t,e){var n=o(e.substring(1)),i=[],a=function(t){return t(null,i.pop())},s=function(t,e){var o=i.length;if(u(t,n,function(t,e){var n=t[e];if(n&&n[Symbol.iterator]){var o=!0,u=!1,a=void 0;try{for(var s,f=n[Symbol.iterator]();!(o=(s=f.next()).done);o=!0){var c=s.value;i.push(r({},e,c))}}catch(t){u=!0,a=t}finally{try{!o&&f.return&&f.return()}finally{if(u)throw a}}}}),o===i.length)return f(e);a(e)},f=function(e){t(function(t,n){t?e(t):n?s(n,e):(f=a)(e)})};return function(t){return f(t)}}},{\"./util.js\":21}],20:[function(t,e,n){\"use strict\";var r=t(\"./util.js\"),i=r.toPathPieces,o=r.get,u=r.set,a=r.modify,s=r.remove1,f=r.rename,c=r.equal,l=r.unknownOp,p=r.getIDBError,h={};h.$set=function(t,e){return function(n){u(n,t,e)}},h.$unset=function(t){return function(e){return s(e,t)}},h.$rename=function(t,e){return function(n){f(n,t,e)}};var y=function(t,e,n){return function(r){a(r,t,e,n)}},d=function(t){return function(e,n){return y(e,function(e,r){var i=e[r];\"number\"==typeof i&&(e[r]=t(n,i))},function(t,e){return t[e]=0})}};h.$inc=d(function(t,e){return t+e}),h.$mul=d(function(t,e){return t*e});var v=function(t){return function(e,n){return y(e,function(e,r){t(n,e[r])&&(e[r]=n)},function(t,e){return t[e]=n})}};h.$min=v(function(t,e){return t<e}),h.$max=v(function(t,e){return t>e}),h.$push=function(t,e){return y(t,function(t,n){var r=t[n];Array.isArray(r)&&r.push(e)},function(t,n){return t[n]=[e]})},h.$pop=function(t,e){var n=void 0;return n=e<1?function(t){return t.shift()}:function(t){return t.pop()},function(e){o(e,t,function(t,e){var r=t[e];Array.isArray(r)&&n(r)})}},h.$pullAll=function(t,e){return function(n){o(n,t,function(t,n){var r=t[n];if(Array.isArray(r)){var i=[],o=!0,u=!1,a=void 0;try{for(var s,f=r[Symbol.iterator]();!(o=(s=f.next()).done);o=!0){var l=s.value;(function(t){var n=!0,r=!1,i=void 0;try{for(var o,u=e[Symbol.iterator]();!(n=(o=u.next()).done);n=!0){var a=o.value;if(c(t,a))return!0}}catch(t){r=!0,i=t}finally{try{!n&&u.return&&u.return()}finally{if(r)throw i}}})(l)||i.push(l)}}catch(t){u=!0,a=t}finally{try{!o&&f.return&&f.return()}finally{if(u)throw a}}t[n]=i}})}},h.$pull=function(t,e){return h.$pullAll(t,[e])},h.$addToSet=function(t,e){return function(n){o(n,t,function(t,n){var r=t[n];if(Array.isArray(r)){var i=!0,o=!1,u=void 0;try{for(var a,s=r[Symbol.iterator]();!(i=(a=s.next()).done);i=!0){var f=a.value;if(c(f,e))return}}catch(t){o=!0,u=t}finally{try{!i&&s.return&&s.return()}finally{if(o)throw u}}r.push(e)}})}};var g=function(t,e,n){if(\"$\"!==e[0])return t.push(h.$set(i(e),n));var r=h[e];r||l(e);for(var o in n)t.push(r(i(o),n[o]))};e.exports=function(t,e,n){var r=[];for(var i in e)g(r,i,e[i]);if(!r.length)return n(null);!function e(){t._next(function(t,i,o){if(!i)return n(t);var u=!0,a=!1,s=void 0;try{for(var f,c=r[Symbol.iterator]();!(u=(f=c.next()).done);u=!0)(0,f.value)(i)}catch(t){a=!0,s=t}finally{try{!u&&c.return&&c.return()}finally{if(a)throw s}}var l=o.update(i);l.onsuccess=e,l.onerror=function(t){return n(p(t))}})}()}},{\"./util.js\":21}],21:[function(t,e,n){\"use strict\";var r=\"function\"==typeof Symbol&&\"symbol\"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&\"function\"==typeof Symbol&&t.constructor===Symbol?\"symbol\":typeof t},i=t(\"deepmerge\"),o=t(\"clone\"),u=t(\"object-hash\"),a=function(t,e){for(var n=0;n<e.length-1;n++){var r=e[n];if(!t.hasOwnProperty(r))return;if(t=t[r],!c(t))return}if(t.hasOwnProperty(e[n]))return t},s=function(t,e,n){for(var r=n;r<e.length-1;r++)t[e[r]]={},t=t[e[r]];return t},f=function(t,e,n){(t=a(t,e))&&n(t,e[e.length-1])},c=function(t){return\"object\"===(void 0===t?\"undefined\":r(t))&&null!==t},l=function(t,e,n,r){var i=e[e.length-1],o=function(n){t=s(t,e,n),r(t,i)};if(!t.hasOwnProperty(e[0]))return o(0);if(e.length>1){t=t[e[0]];for(var u=1;u<e.length-1;u++){var a=e[u];if(!c(t[a]))return;if(Array.isArray(t)&&a<0)return;if(!t.hasOwnProperty(a))return o(u);t=t[a]}}n(t,i)},p=function t(e,n,r){for(var i in e)!function(i){var u=[],a=!0,s=!1,f=void 0;try{for(var c,l=r[Symbol.iterator]();!(a=(c=l.next()).done);a=!0){var p=c.value;if(p[0]===i){if(1===p.length)return;u.push(p.slice(1))}}}catch(t){s=!0,f=t}finally{try{!a&&l.return&&l.return()}finally{if(s)throw f}}if(u.length){var h=e[i];n[i]=new h.constructor,t(h,n[i],u)}else n[i]=o(e[i])}(i)},h=function(t,e,n){for(var r=0;r<n.length-1;r++){var i=n[r];if(t=t[i],!c(t))return;e[i]=new t.constructor,e=e[i]}if(t.hasOwnProperty(n[r]))return e[n[r]]=t[n[r]],t},y=function(t){if(void 0!==t)return u(t)};e.exports.toPathPieces=function(t){return t.split(\".\")},e.exports.exists=function(t,e){return!!a(t,e)},e.exports.create=s,e.exports.get=f,e.exports.set=function(t,e,n){var r=function(t,e){return t[e]=n};l(t,e,r,r)},e.exports.isObject=c,e.exports.modify=l,e.exports.remove1=function(t,e){for(var n=0;n<e.length-1;n++)if(t=t[e[n]],!c(t))return;if(Array.isArray(t)){var r=Number.parseFloat(e[n]);Number.isInteger(r)&&t.splice(r,1)}else delete t[e[n]]},e.exports.remove2=function(t,e){var n=new t.constructor;return p(t,n,e),n},e.exports.rename=function(t,e,n){f(t,e,function(t,e){t[n]=t[e],delete t[e]})},e.exports.copy=function(t,e){var n=[],r=!0,o=!1,u=void 0;try{for(var a,s=e[Symbol.iterator]();!(r=(a=s.next()).done);r=!0){var f=a.value,c=new t.constructor;h(t,c,f)&&n.push(c)}}catch(t){o=!0,u=t}finally{try{!r&&s.return&&s.return()}finally{if(o)throw u}}return n.reduce(i,{})},e.exports.equal=function(t,e){return y(t)===y(e)},e.exports.unknownOp=function(t){throw Error(\"unknown operator '\"+t+\"'\")},e.exports.hashify=y,e.exports.getIDBError=function(t){return Error(t.target.error.message)}},{clone:24,deepmerge:26,\"object-hash\":94}],22:[function(t,e,n){\"use strict\";function r(t){var e=t.length;if(e%4>0)throw new Error(\"Invalid string. Length must be a multiple of 4\");return\"=\"===t[e-2]?2:\"=\"===t[e-1]?1:0}function i(t){return u[t>>18&63]+u[t>>12&63]+u[t>>6&63]+u[63&t]}function o(t,e,n){for(var r,o=[],u=e;u<n;u+=3)r=(t[u]<<16)+(t[u+1]<<8)+t[u+2],o.push(i(r));return o.join(\"\")}n.byteLength=function(t){return 3*t.length/4-r(t)},n.toByteArray=function(t){var e,n,i,o,u,f=t.length;o=r(t),u=new s(3*f/4-o),n=o>0?f-4:f;var c=0;for(e=0;e<n;e+=4)i=a[t.charCodeAt(e)]<<18|a[t.charCodeAt(e+1)]<<12|a[t.charCodeAt(e+2)]<<6|a[t.charCodeAt(e+3)],u[c++]=i>>16&255,u[c++]=i>>8&255,u[c++]=255&i;return 2===o?(i=a[t.charCodeAt(e)]<<2|a[t.charCodeAt(e+1)]>>4,u[c++]=255&i):1===o&&(i=a[t.charCodeAt(e)]<<10|a[t.charCodeAt(e+1)]<<4|a[t.charCodeAt(e+2)]>>2,u[c++]=i>>8&255,u[c++]=255&i),u},n.fromByteArray=function(t){for(var e,n=t.length,r=n%3,i=\"\",a=[],s=0,f=n-r;s<f;s+=16383)a.push(o(t,s,s+16383>f?f:s+16383));return 1===r?(e=t[n-1],i+=u[e>>2],i+=u[e<<4&63],i+=\"==\"):2===r&&(e=(t[n-2]<<8)+t[n-1],i+=u[e>>10],i+=u[e>>4&63],i+=u[e<<2&63],i+=\"=\"),a.push(i),a.join(\"\")};for(var u=[],a=[],s=\"undefined\"!=typeof Uint8Array?Uint8Array:Array,f=\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\",c=0,l=f.length;c<l;++c)u[c]=f[c],a[f.charCodeAt(c)]=c;a[\"-\".charCodeAt(0)]=62,a[\"_\".charCodeAt(0)]=63},{}],23:[function(t,e,n){\"use strict\";function r(t){if(t>H)throw new RangeError(\"Invalid typed array length\");var e=new Uint8Array(t);return e.__proto__=i.prototype,e}function i(t,e,n){if(\"number\"==typeof t){if(\"string\"==typeof e)throw new Error(\"If encoding is specified then the first argument must be a string\");return s(t)}return o(t,e,n)}function o(t,e,n){if(\"number\"==typeof t)throw new TypeError('\"value\" argument must not be a number');return q(t)?l(t,e,n):\"string\"==typeof t?f(t,e):p(t)}function u(t){if(\"number\"!=typeof t)throw new TypeError('\"size\" argument must be a number');if(t<0)throw new RangeError('\"size\" argument must not be negative')}function a(t,e,n){return u(t),t<=0?r(t):void 0!==e?\"string\"==typeof n?r(t).fill(e,n):r(t).fill(e):r(t)}function s(t){return u(t),r(t<0?0:0|h(t))}function f(t,e){if(\"string\"==typeof e&&\"\"!==e||(e=\"utf8\"),!i.isEncoding(e))throw new TypeError('\"encoding\" must be a valid string encoding');var n=0|y(t,e),o=r(n),u=o.write(t,e);return u!==n&&(o=o.slice(0,u)),o}function c(t){for(var e=t.length<0?0:0|h(t.length),n=r(e),i=0;i<e;i+=1)n[i]=255&t[i];return n}function l(t,e,n){if(e<0||t.byteLength<e)throw new RangeError(\"'offset' is out of bounds\");if(t.byteLength<e+(n||0))throw new RangeError(\"'length' is out of bounds\");var r;return r=void 0===e&&void 0===n?new Uint8Array(t):void 0===n?new Uint8Array(t,e):new Uint8Array(t,e,n),r.__proto__=i.prototype,r}function p(t){if(i.isBuffer(t)){var e=0|h(t.length),n=r(e);return 0===n.length?n:(t.copy(n,0,0,e),n)}if(t){if(V(t)||\"length\"in t)return\"number\"!=typeof t.length||Q(t.length)?r(0):c(t);if(\"Buffer\"===t.type&&Array.isArray(t.data))return c(t.data)}throw new TypeError(\"First argument must be a string, Buffer, ArrayBuffer, Array, or array-like object.\")}function h(t){if(t>=H)throw new RangeError(\"Attempt to allocate Buffer larger than maximum size: 0x\"+H.toString(16)+\" bytes\");return 0|t}function y(t,e){if(i.isBuffer(t))return t.length;if(V(t)||q(t))return t.byteLength;\"string\"!=typeof t&&(t=\"\"+t);var n=t.length;if(0===n)return 0;for(var r=!1;;)switch(e){case\"ascii\":case\"latin1\":case\"binary\":return n;case\"utf8\":case\"utf-8\":case void 0:return M(t).length;case\"ucs2\":case\"ucs-2\":case\"utf16le\":case\"utf-16le\":return 2*n;case\"hex\":return n>>>1;case\"base64\":return F(t).length;default:if(r)return M(t).length;e=(\"\"+e).toLowerCase(),r=!0}}function d(t,e,n){var r=!1;if((void 0===e||e<0)&&(e=0),e>this.length)return\"\";if((void 0===n||n>this.length)&&(n=this.length),n<=0)return\"\";if(n>>>=0,e>>>=0,n<=e)return\"\";for(t||(t=\"utf8\");;)switch(t){case\"hex\":return T(this,e,n);case\"utf8\":case\"utf-8\":return E(this,e,n);case\"ascii\":return S(this,e,n);case\"latin1\":case\"binary\":return I(this,e,n);case\"base64\":return k(this,e,n);case\"ucs2\":case\"ucs-2\":case\"utf16le\":case\"utf-16le\":return P(this,e,n);default:if(r)throw new TypeError(\"Unknown encoding: \"+t);t=(t+\"\").toLowerCase(),r=!0}}function v(t,e,n){var r=t[e];t[e]=t[n],t[n]=r}function g(t,e,n,r,o){if(0===t.length)return-1;if(\"string\"==typeof n?(r=n,n=0):n>2147483647?n=2147483647:n<-2147483648&&(n=-2147483648),n=+n,Q(n)&&(n=o?0:t.length-1),n<0&&(n=t.length+n),n>=t.length){if(o)return-1;n=t.length-1}else if(n<0){if(!o)return-1;n=0}if(\"string\"==typeof e&&(e=i.from(e,r)),i.isBuffer(e))return 0===e.length?-1:b(t,e,n,r,o);if(\"number\"==typeof e)return e&=255,\"function\"==typeof Uint8Array.prototype.indexOf?o?Uint8Array.prototype.indexOf.call(t,e,n):Uint8Array.prototype.lastIndexOf.call(t,e,n):b(t,[e],n,r,o);throw new TypeError(\"val must be string, number or Buffer\")}function b(t,e,n,r,i){function o(t,e){return 1===u?t[e]:t.readUInt16BE(e*u)}var u=1,a=t.length,s=e.length;if(void 0!==r&&(\"ucs2\"===(r=String(r).toLowerCase())||\"ucs-2\"===r||\"utf16le\"===r||\"utf-16le\"===r)){if(t.length<2||e.length<2)return-1;u=2,a/=2,s/=2,n/=2}var f;if(i){var c=-1;for(f=n;f<a;f++)if(o(t,f)===o(e,-1===c?0:f-c)){if(-1===c&&(c=f),f-c+1===s)return c*u}else-1!==c&&(f-=f-c),c=-1}else for(n+s>a&&(n=a-s),f=n;f>=0;f--){for(var l=!0,p=0;p<s;p++)if(o(t,f+p)!==o(e,p)){l=!1;break}if(l)return f}return-1}function m(t,e,n,r){n=Number(n)||0;var i=t.length-n;r?(r=Number(r))>i&&(r=i):r=i;var o=e.length;if(o%2!=0)throw new TypeError(\"Invalid hex string\");r>o/2&&(r=o/2);for(var u=0;u<r;++u){var a=parseInt(e.substr(2*u,2),16);if(Q(a))return u;t[n+u]=a}return u}function w(t,e,n,r){return Y(M(e,t.length-n),t,n,r)}function _(t,e,n,r){return Y(D(e),t,n,r)}function j(t,e,n,r){return _(t,e,n,r)}function x(t,e,n,r){return Y(F(e),t,n,r)}function O(t,e,n,r){return Y(z(e,t.length-n),t,n,r)}function k(t,e,n){return 0===e&&n===t.length?K.fromByteArray(t):K.fromByteArray(t.slice(e,n))}function E(t,e,n){n=Math.min(t.length,n);for(var r=[],i=e;i<n;){var o=t[i],u=null,a=o>239?4:o>223?3:o>191?2:1;if(i+a<=n){var s,f,c,l;switch(a){case 1:o<128&&(u=o);break;case 2:128==(192&(s=t[i+1]))&&(l=(31&o)<<6|63&s)>127&&(u=l);break;case 3:s=t[i+1],f=t[i+2],128==(192&s)&&128==(192&f)&&(l=(15&o)<<12|(63&s)<<6|63&f)>2047&&(l<55296||l>57343)&&(u=l);break;case 4:s=t[i+1],f=t[i+2],c=t[i+3],128==(192&s)&&128==(192&f)&&128==(192&c)&&(l=(15&o)<<18|(63&s)<<12|(63&f)<<6|63&c)>65535&&l<1114112&&(u=l)}}null===u?(u=65533,a=1):u>65535&&(u-=65536,r.push(u>>>10&1023|55296),u=56320|1023&u),r.push(u),i+=a}return A(r)}function A(t){var e=t.length;if(e<=J)return String.fromCharCode.apply(String,t);for(var n=\"\",r=0;r<e;)n+=String.fromCharCode.apply(String,t.slice(r,r+=J));return n}function S(t,e,n){var r=\"\";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(127&t[i]);return r}function I(t,e,n){var r=\"\";n=Math.min(t.length,n);for(var i=e;i<n;++i)r+=String.fromCharCode(t[i]);return r}function T(t,e,n){var r=t.length;(!e||e<0)&&(e=0),(!n||n<0||n>r)&&(n=r);for(var i=\"\",o=e;o<n;++o)i+=N(t[o]);return i}function P(t,e,n){for(var r=t.slice(e,n),i=\"\",o=0;o<r.length;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function B(t,e,n){if(t%1!=0||t<0)throw new RangeError(\"offset is not uint\");if(t+e>n)throw new RangeError(\"Trying to access beyond buffer length\")}function C(t,e,n,r,o,u){if(!i.isBuffer(t))throw new TypeError('\"buffer\" argument must be a Buffer instance');if(e>o||e<u)throw new RangeError('\"value\" argument is out of bounds');if(n+r>t.length)throw new RangeError(\"Index out of range\")}function L(t,e,n,r,i,o){if(n+r>t.length)throw new RangeError(\"Index out of range\");if(n<0)throw new RangeError(\"Index out of range\")}function U(t,e,n,r,i){return e=+e,n>>>=0,i||L(t,e,n,4,3.4028234663852886e38,-3.4028234663852886e38),W.write(t,e,n,r,23,4),n+4}function R(t,e,n,r,i){return e=+e,n>>>=0,i||L(t,e,n,8,1.7976931348623157e308,-1.7976931348623157e308),W.write(t,e,n,r,52,8),n+8}function $(t){if((t=t.trim().replace(G,\"\")).length<2)return\"\";for(;t.length%4!=0;)t+=\"=\";return t}function N(t){return t<16?\"0\"+t.toString(16):t.toString(16)}function M(t,e){e=e||1/0;for(var n,r=t.length,i=null,o=[],u=0;u<r;++u){if((n=t.charCodeAt(u))>55295&&n<57344){if(!i){if(n>56319){(e-=3)>-1&&o.push(239,191,189);continue}if(u+1===r){(e-=3)>-1&&o.push(239,191,189);continue}i=n;continue}if(n<56320){(e-=3)>-1&&o.push(239,191,189),i=n;continue}n=65536+(i-55296<<10|n-56320)}else i&&(e-=3)>-1&&o.push(239,191,189);if(i=null,n<128){if((e-=1)<0)break;o.push(n)}else if(n<2048){if((e-=2)<0)break;o.push(n>>6|192,63&n|128)}else if(n<65536){if((e-=3)<0)break;o.push(n>>12|224,n>>6&63|128,63&n|128)}else{if(!(n<1114112))throw new Error(\"Invalid code point\");if((e-=4)<0)break;o.push(n>>18|240,n>>12&63|128,n>>6&63|128,63&n|128)}}return o}function D(t){for(var e=[],n=0;n<t.length;++n)e.push(255&t.charCodeAt(n));return e}function z(t,e){for(var n,r,i,o=[],u=0;u<t.length&&!((e-=2)<0);++u)r=(n=t.charCodeAt(u))>>8,i=n%256,o.push(i),o.push(r);return o}function F(t){return K.toByteArray($(t))}function Y(t,e,n,r){for(var i=0;i<r&&!(i+n>=e.length||i>=t.length);++i)e[i+n]=t[i];return i}function q(t){return t instanceof ArrayBuffer||null!=t&&null!=t.constructor&&\"ArrayBuffer\"===t.constructor.name&&\"number\"==typeof t.byteLength}function V(t){return\"function\"==typeof ArrayBuffer.isView&&ArrayBuffer.isView(t)}function Q(t){return t!==t}var K=t(\"base64-js\"),W=t(\"ieee754\");n.Buffer=i,n.SlowBuffer=function(t){return+t!=t&&(t=0),i.alloc(+t)},n.INSPECT_MAX_BYTES=50;var H=2147483647;n.kMaxLength=H,i.TYPED_ARRAY_SUPPORT=function(){try{var t=new Uint8Array(1);return t.__proto__={__proto__:Uint8Array.prototype,foo:function(){return 42}},42===t.foo()}catch(t){return!1}}(),i.TYPED_ARRAY_SUPPORT||\"undefined\"==typeof console||\"function\"!=typeof console.error||console.error(\"This browser lacks typed array (Uint8Array) support which is required by `buffer` v5.x. Use `buffer` v4.x if you require old browser support.\"),\"undefined\"!=typeof Symbol&&Symbol.species&&i[Symbol.species]===i&&Object.defineProperty(i,Symbol.species,{value:null,configurable:!0,enumerable:!1,writable:!1}),i.poolSize=8192,i.from=function(t,e,n){return o(t,e,n)},i.prototype.__proto__=Uint8Array.prototype,i.__proto__=Uint8Array,i.alloc=function(t,e,n){return a(t,e,n)},i.allocUnsafe=function(t){return s(t)},i.allocUnsafeSlow=function(t){return s(t)},i.isBuffer=function(t){return null!=t&&!0===t._isBuffer},i.compare=function(t,e){if(!i.isBuffer(t)||!i.isBuffer(e))throw new TypeError(\"Arguments must be Buffers\");if(t===e)return 0;for(var n=t.length,r=e.length,o=0,u=Math.min(n,r);o<u;++o)if(t[o]!==e[o]){n=t[o],r=e[o];break}return n<r?-1:r<n?1:0},i.isEncoding=function(t){switch(String(t).toLowerCase()){case\"hex\":case\"utf8\":case\"utf-8\":case\"ascii\":case\"latin1\":case\"binary\":case\"base64\":case\"ucs2\":case\"ucs-2\":case\"utf16le\":case\"utf-16le\":return!0;default:return!1}},i.concat=function(t,e){if(!Array.isArray(t))throw new TypeError('\"list\" argument must be an Array of Buffers');if(0===t.length)return i.alloc(0);var n;if(void 0===e)for(e=0,n=0;n<t.length;++n)e+=t[n].length;var r=i.allocUnsafe(e),o=0;for(n=0;n<t.length;++n){var u=t[n];if(!i.isBuffer(u))throw new TypeError('\"list\" argument must be an Array of Buffers');u.copy(r,o),o+=u.length}return r},i.byteLength=y,i.prototype._isBuffer=!0,i.prototype.swap16=function(){var t=this.length;if(t%2!=0)throw new RangeError(\"Buffer size must be a multiple of 16-bits\");for(var e=0;e<t;e+=2)v(this,e,e+1);return this},i.prototype.swap32=function(){var t=this.length;if(t%4!=0)throw new RangeError(\"Buffer size must be a multiple of 32-bits\");for(var e=0;e<t;e+=4)v(this,e,e+3),v(this,e+1,e+2);return this},i.prototype.swap64=function(){var t=this.length;if(t%8!=0)throw new RangeError(\"Buffer size must be a multiple of 64-bits\");for(var e=0;e<t;e+=8)v(this,e,e+7),v(this,e+1,e+6),v(this,e+2,e+5),v(this,e+3,e+4);return this},i.prototype.toString=function(){var t=this.length;return 0===t?\"\":0===arguments.length?E(this,0,t):d.apply(this,arguments)},i.prototype.equals=function(t){if(!i.isBuffer(t))throw new TypeError(\"Argument must be a Buffer\");return this===t||0===i.compare(this,t)},i.prototype.inspect=function(){var t=\"\",e=n.INSPECT_MAX_BYTES;return this.length>0&&(t=this.toString(\"hex\",0,e).match(/.{2}/g).join(\" \"),this.length>e&&(t+=\" ... \")),\"<Buffer \"+t+\">\"},i.prototype.compare=function(t,e,n,r,o){if(!i.isBuffer(t))throw new TypeError(\"Argument must be a Buffer\");if(void 0===e&&(e=0),void 0===n&&(n=t?t.length:0),void 0===r&&(r=0),void 0===o&&(o=this.length),e<0||n>t.length||r<0||o>this.length)throw new RangeError(\"out of range index\");if(r>=o&&e>=n)return 0;if(r>=o)return-1;if(e>=n)return 1;if(e>>>=0,n>>>=0,r>>>=0,o>>>=0,this===t)return 0;for(var u=o-r,a=n-e,s=Math.min(u,a),f=this.slice(r,o),c=t.slice(e,n),l=0;l<s;++l)if(f[l]!==c[l]){u=f[l],a=c[l];break}return u<a?-1:a<u?1:0},i.prototype.includes=function(t,e,n){return-1!==this.indexOf(t,e,n)},i.prototype.indexOf=function(t,e,n){return g(this,t,e,n,!0)},i.prototype.lastIndexOf=function(t,e,n){return g(this,t,e,n,!1)},i.prototype.write=function(t,e,n,r){if(void 0===e)r=\"utf8\",n=this.length,e=0;else if(void 0===n&&\"string\"==typeof e)r=e,n=this.length,e=0;else{if(!isFinite(e))throw new Error(\"Buffer.write(string, encoding, offset[, length]) is no longer supported\");e>>>=0,isFinite(n)?(n>>>=0,void 0===r&&(r=\"utf8\")):(r=n,n=void 0)}var i=this.length-e;if((void 0===n||n>i)&&(n=i),t.length>0&&(n<0||e<0)||e>this.length)throw new RangeError(\"Attempt to write outside buffer bounds\");r||(r=\"utf8\");for(var o=!1;;)switch(r){case\"hex\":return m(this,t,e,n);case\"utf8\":case\"utf-8\":return w(this,t,e,n);case\"ascii\":return _(this,t,e,n);case\"latin1\":case\"binary\":return j(this,t,e,n);case\"base64\":return x(this,t,e,n);case\"ucs2\":case\"ucs-2\":case\"utf16le\":case\"utf-16le\":return O(this,t,e,n);default:if(o)throw new TypeError(\"Unknown encoding: \"+r);r=(\"\"+r).toLowerCase(),o=!0}},i.prototype.toJSON=function(){return{type:\"Buffer\",data:Array.prototype.slice.call(this._arr||this,0)}};var J=4096;i.prototype.slice=function(t,e){var n=this.length;t=~~t,e=void 0===e?n:~~e,t<0?(t+=n)<0&&(t=0):t>n&&(t=n),e<0?(e+=n)<0&&(e=0):e>n&&(e=n),e<t&&(e=t);var r=this.subarray(t,e);return r.__proto__=i.prototype,r},i.prototype.readUIntLE=function(t,e,n){t>>>=0,e>>>=0,n||B(t,e,this.length);for(var r=this[t],i=1,o=0;++o<e&&(i*=256);)r+=this[t+o]*i;return r},i.prototype.readUIntBE=function(t,e,n){t>>>=0,e>>>=0,n||B(t,e,this.length);for(var r=this[t+--e],i=1;e>0&&(i*=256);)r+=this[t+--e]*i;return r},i.prototype.readUInt8=function(t,e){return t>>>=0,e||B(t,1,this.length),this[t]},i.prototype.readUInt16LE=function(t,e){return t>>>=0,e||B(t,2,this.length),this[t]|this[t+1]<<8},i.prototype.readUInt16BE=function(t,e){return t>>>=0,e||B(t,2,this.length),this[t]<<8|this[t+1]},i.prototype.readUInt32LE=function(t,e){return t>>>=0,e||B(t,4,this.length),(this[t]|this[t+1]<<8|this[t+2]<<16)+16777216*this[t+3]},i.prototype.readUInt32BE=function(t,e){return t>>>=0,e||B(t,4,this.length),16777216*this[t]+(this[t+1]<<16|this[t+2]<<8|this[t+3])},i.prototype.readIntLE=function(t,e,n){t>>>=0,e>>>=0,n||B(t,e,this.length);for(var r=this[t],i=1,o=0;++o<e&&(i*=256);)r+=this[t+o]*i;return i*=128,r>=i&&(r-=Math.pow(2,8*e)),r},i.prototype.readIntBE=function(t,e,n){t>>>=0,e>>>=0,n||B(t,e,this.length);for(var r=e,i=1,o=this[t+--r];r>0&&(i*=256);)o+=this[t+--r]*i;return i*=128,o>=i&&(o-=Math.pow(2,8*e)),o},i.prototype.readInt8=function(t,e){return t>>>=0,e||B(t,1,this.length),128&this[t]?-1*(255-this[t]+1):this[t]},i.prototype.readInt16LE=function(t,e){t>>>=0,e||B(t,2,this.length);var n=this[t]|this[t+1]<<8;return 32768&n?4294901760|n:n},i.prototype.readInt16BE=function(t,e){t>>>=0,e||B(t,2,this.length);var n=this[t+1]|this[t]<<8;return 32768&n?4294901760|n:n},i.prototype.readInt32LE=function(t,e){return t>>>=0,e||B(t,4,this.length),this[t]|this[t+1]<<8|this[t+2]<<16|this[t+3]<<24},i.prototype.readInt32BE=function(t,e){return t>>>=0,e||B(t,4,this.length),this[t]<<24|this[t+1]<<16|this[t+2]<<8|this[t+3]},i.prototype.readFloatLE=function(t,e){return t>>>=0,e||B(t,4,this.length),W.read(this,t,!0,23,4)},i.prototype.readFloatBE=function(t,e){return t>>>=0,e||B(t,4,this.length),W.read(this,t,!1,23,4)},i.prototype.readDoubleLE=function(t,e){return t>>>=0,e||B(t,8,this.length),W.read(this,t,!0,52,8)},i.prototype.readDoubleBE=function(t,e){return t>>>=0,e||B(t,8,this.length),W.read(this,t,!1,52,8)},i.prototype.writeUIntLE=function(t,e,n,r){t=+t,e>>>=0,n>>>=0,r||C(this,t,e,n,Math.pow(2,8*n)-1,0);var i=1,o=0;for(this[e]=255&t;++o<n&&(i*=256);)this[e+o]=t/i&255;return e+n},i.prototype.writeUIntBE=function(t,e,n,r){t=+t,e>>>=0,n>>>=0,r||C(this,t,e,n,Math.pow(2,8*n)-1,0);var i=n-1,o=1;for(this[e+i]=255&t;--i>=0&&(o*=256);)this[e+i]=t/o&255;return e+n},i.prototype.writeUInt8=function(t,e,n){return t=+t,e>>>=0,n||C(this,t,e,1,255,0),this[e]=255&t,e+1},i.prototype.writeUInt16LE=function(t,e,n){return t=+t,e>>>=0,n||C(this,t,e,2,65535,0),this[e]=255&t,this[e+1]=t>>>8,e+2},i.prototype.writeUInt16BE=function(t,e,n){return t=+t,e>>>=0,n||C(this,t,e,2,65535,0),this[e]=t>>>8,this[e+1]=255&t,e+2},i.prototype.writeUInt32LE=function(t,e,n){return t=+t,e>>>=0,n||C(this,t,e,4,4294967295,0),this[e+3]=t>>>24,this[e+2]=t>>>16,this[e+1]=t>>>8,this[e]=255&t,e+4},i.prototype.writeUInt32BE=function(t,e,n){return t=+t,e>>>=0,n||C(this,t,e,4,4294967295,0),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},i.prototype.writeIntLE=function(t,e,n,r){if(t=+t,e>>>=0,!r){var i=Math.pow(2,8*n-1);C(this,t,e,n,i-1,-i)}var o=0,u=1,a=0;for(this[e]=255&t;++o<n&&(u*=256);)t<0&&0===a&&0!==this[e+o-1]&&(a=1),this[e+o]=(t/u>>0)-a&255;return e+n},i.prototype.writeIntBE=function(t,e,n,r){if(t=+t,e>>>=0,!r){var i=Math.pow(2,8*n-1);C(this,t,e,n,i-1,-i)}var o=n-1,u=1,a=0;for(this[e+o]=255&t;--o>=0&&(u*=256);)t<0&&0===a&&0!==this[e+o+1]&&(a=1),this[e+o]=(t/u>>0)-a&255;return e+n},i.prototype.writeInt8=function(t,e,n){return t=+t,e>>>=0,n||C(this,t,e,1,127,-128),t<0&&(t=255+t+1),this[e]=255&t,e+1},i.prototype.writeInt16LE=function(t,e,n){return t=+t,e>>>=0,n||C(this,t,e,2,32767,-32768),this[e]=255&t,this[e+1]=t>>>8,e+2},i.prototype.writeInt16BE=function(t,e,n){return t=+t,e>>>=0,n||C(this,t,e,2,32767,-32768),this[e]=t>>>8,this[e+1]=255&t,e+2},i.prototype.writeInt32LE=function(t,e,n){return t=+t,e>>>=0,n||C(this,t,e,4,2147483647,-2147483648),this[e]=255&t,this[e+1]=t>>>8,this[e+2]=t>>>16,this[e+3]=t>>>24,e+4},i.prototype.writeInt32BE=function(t,e,n){return t=+t,e>>>=0,n||C(this,t,e,4,2147483647,-2147483648),t<0&&(t=4294967295+t+1),this[e]=t>>>24,this[e+1]=t>>>16,this[e+2]=t>>>8,this[e+3]=255&t,e+4},i.prototype.writeFloatLE=function(t,e,n){return U(this,t,e,!0,n)},i.prototype.writeFloatBE=function(t,e,n){return U(this,t,e,!1,n)},i.prototype.writeDoubleLE=function(t,e,n){return R(this,t,e,!0,n)},i.prototype.writeDoubleBE=function(t,e,n){return R(this,t,e,!1,n)},i.prototype.copy=function(t,e,n,r){if(n||(n=0),r||0===r||(r=this.length),e>=t.length&&(e=t.length),e||(e=0),r>0&&r<n&&(r=n),r===n)return 0;if(0===t.length||0===this.length)return 0;if(e<0)throw new RangeError(\"targetStart out of bounds\");if(n<0||n>=this.length)throw new RangeError(\"sourceStart out of bounds\");if(r<0)throw new RangeError(\"sourceEnd out of bounds\");r>this.length&&(r=this.length),t.length-e<r-n&&(r=t.length-e+n);var i,o=r-n;if(this===t&&n<e&&e<r)for(i=o-1;i>=0;--i)t[i+e]=this[i+n];else if(o<1e3)for(i=0;i<o;++i)t[i+e]=this[i+n];else Uint8Array.prototype.set.call(t,this.subarray(n,n+o),e);return o},i.prototype.fill=function(t,e,n,r){if(\"string\"==typeof t){if(\"string\"==typeof e?(r=e,e=0,n=this.length):\"string\"==typeof n&&(r=n,n=this.length),1===t.length){var o=t.charCodeAt(0);o<256&&(t=o)}if(void 0!==r&&\"string\"!=typeof r)throw new TypeError(\"encoding must be a string\");if(\"string\"==typeof r&&!i.isEncoding(r))throw new TypeError(\"Unknown encoding: \"+r)}else\"number\"==typeof t&&(t&=255);if(e<0||this.length<e||this.length<n)throw new RangeError(\"Out of range index\");if(n<=e)return this;e>>>=0,n=void 0===n?this.length:n>>>0,t||(t=0);var u;if(\"number\"==typeof t)for(u=e;u<n;++u)this[u]=t;else{var a=i.isBuffer(t)?t:new i(t,r),s=a.length;for(u=0;u<n-e;++u)this[u+e]=a[u%s]}return this};var G=/[^+/0-9A-Za-z-_]/g},{\"base64-js\":22,ieee754:72}],24:[function(t,e,n){(function(t){var n=function(){\"use strict\";function e(t,e){return null!=e&&t instanceof e}function n(r,s,f,c,l){function p(r,f){if(null===r)return null;if(0===f)return r;var v,g;if(\"object\"!=typeof r)return r;if(e(r,o))v=new o;else if(e(r,u))v=new u;else if(e(r,a))v=new a(function(t,e){r.then(function(e){t(p(e,f-1))},function(t){e(p(t,f-1))})});else if(n.__isArray(r))v=[];else if(n.__isRegExp(r))v=new RegExp(r.source,i(r)),r.lastIndex&&(v.lastIndex=r.lastIndex);else if(n.__isDate(r))v=new Date(r.getTime());else{if(d&&t.isBuffer(r))return v=new t(r.length),r.copy(v),v;e(r,Error)?v=Object.create(r):void 0===c?(g=Object.getPrototypeOf(r),v=Object.create(g)):(v=Object.create(c),g=c)}if(s){var b=h.indexOf(r);if(-1!=b)return y[b];h.push(r),y.push(v)}e(r,o)&&r.forEach(function(t,e){var n=p(e,f-1),r=p(t,f-1);v.set(n,r)}),e(r,u)&&r.forEach(function(t){var e=p(t,f-1);v.add(e)});for(var m in r){var w;g&&(w=Object.getOwnPropertyDescriptor(g,m)),w&&null==w.set||(v[m]=p(r[m],f-1))}if(Object.getOwnPropertySymbols)for(var _=Object.getOwnPropertySymbols(r),m=0;m<_.length;m++){var j=_[m];(!(k=Object.getOwnPropertyDescriptor(r,j))||k.enumerable||l)&&(v[j]=p(r[j],f-1),k.enumerable||Object.defineProperty(v,j,{enumerable:!1}))}if(l)for(var x=Object.getOwnPropertyNames(r),m=0;m<x.length;m++){var O=x[m],k=Object.getOwnPropertyDescriptor(r,O);k&&k.enumerable||(v[O]=p(r[O],f-1),Object.defineProperty(v,O,{enumerable:!1}))}return v}\"object\"==typeof s&&(f=s.depth,c=s.prototype,l=s.includeNonEnumerable,s=s.circular);var h=[],y=[],d=void 0!==t;return void 0===s&&(s=!0),void 0===f&&(f=1/0),p(r,f)}function r(t){return Object.prototype.toString.call(t)}function i(t){var e=\"\";return t.global&&(e+=\"g\"),t.ignoreCase&&(e+=\"i\"),t.multiline&&(e+=\"m\"),e}var o;try{o=Map}catch(t){o=function(){}}var u;try{u=Set}catch(t){u=function(){}}var a;try{a=Promise}catch(t){a=function(){}}return n.clonePrototype=function(t){if(null===t)return null;var e=function(){};return e.prototype=t,new e},n.__objToStr=r,n.__isDate=function(t){return\"object\"==typeof t&&\"[object Date]\"===r(t)},n.__isArray=function(t){return\"object\"==typeof t&&\"[object Array]\"===r(t)},n.__isRegExp=function(t){return\"object\"==typeof t&&\"[object RegExp]\"===r(t)},n.__getRegExpFlags=i,n}();\"object\"==typeof e&&e.exports&&(e.exports=n)}).call(this,t(\"buffer\").Buffer)},{buffer:23}],25:[function(t,e,n){\"use strict\";var r=t(\"es5-ext/object/assign\"),i=t(\"es5-ext/object/normalize-options\"),o=t(\"es5-ext/object/is-callable\"),u=t(\"es5-ext/string/#/contains\");(e.exports=function(t,e){var n,o,a,s,f;return arguments.length<2||\"string\"!=typeof t?(s=e,e=t,t=null):s=arguments[2],null==t?(n=a=!0,o=!1):(n=u.call(t,\"c\"),o=u.call(t,\"e\"),a=u.call(t,\"w\")),f={value:e,configurable:n,enumerable:o,writable:a},s?r(i(s),f):f}).gs=function(t,e,n){var a,s,f,c;return\"string\"!=typeof t?(f=n,n=e,e=t,t=null):f=arguments[3],null==e?e=void 0:o(e)?null==n?n=void 0:o(n)||(f=n,n=void 0):(f=e,e=n=void 0),null==t?(a=!0,s=!1):(a=u.call(t,\"c\"),s=u.call(t,\"e\")),c={get:e,set:n,configurable:a,enumerable:s},f?r(i(f),c):c}},{\"es5-ext/object/assign\":46,\"es5-ext/object/is-callable\":50,\"es5-ext/object/normalize-options\":58,\"es5-ext/string/#/contains\":61}],26:[function(t,e,n){\"use strict\";function r(t){return!!t&&\"object\"==typeof t}function i(t){var e=Object.prototype.toString.call(t);return\"[object RegExp]\"!==e&&\"[object Date]\"!==e}function o(t){return Array.isArray(t)?[]:{}}function u(t,e){return e&&!0===e.clone&&c(t)?f(o(t),t,e):t}function a(t,e,n){var r=t.slice();return e.forEach(function(e,i){void 0===r[i]?r[i]=u(e,n):c(e)?r[i]=f(t[i],e,n):-1===t.indexOf(e)&&r.push(u(e,n))}),r}function s(t,e,n){var r={};return c(t)&&Object.keys(t).forEach(function(e){r[e]=u(t[e],n)}),Object.keys(e).forEach(function(i){c(e[i])&&t[i]?r[i]=f(t[i],e[i],n):r[i]=u(e[i],n)}),r}function f(t,e,n){var r=Array.isArray(e),i=Array.isArray(t),o=n||{arrayMerge:a};return r===i?r?(o.arrayMerge||a)(t,e,n):s(t,e,n):u(e,n)}var c=function(t){return r(t)&&i(t)};f.all=function(t,e){if(!Array.isArray(t)||t.length<2)throw new Error(\"first argument should be an array with at least two elements\");return t.reduce(function(t,n){return f(t,n,e)})};var l=f;e.exports=l},{}],27:[function(t,e,n){\"use strict\";var r=t(\"../../number/is-nan\"),i=t(\"../../number/to-pos-integer\"),o=t(\"../../object/valid-value\"),u=Array.prototype.indexOf,a=Object.prototype.hasOwnProperty,s=Math.abs,f=Math.floor;e.exports=function(t){var e,n,c,l;if(!r(t))return u.apply(this,arguments);for(n=i(o(this).length),c=arguments[1],e=c=isNaN(c)?0:c>=0?f(c):i(this.length)-f(s(c));e<n;++e)if(a.call(this,e)&&(l=this[e],r(l)))return e;return-1}},{\"../../number/is-nan\":40,\"../../number/to-pos-integer\":44,\"../../object/valid-value\":60}],28:[function(t,e,n){\"use strict\";e.exports=t(\"./is-implemented\")()?Array.from:t(\"./shim\")},{\"./is-implemented\":29,\"./shim\":30}],29:[function(t,e,n){\"use strict\";e.exports=function(){var t,e,n=Array.from;return\"function\"==typeof n&&(t=[\"raz\",\"dwa\"],e=n(t),Boolean(e&&e!==t&&\"dwa\"===e[1]))}},{}],30:[function(t,e,n){\"use strict\";var r=t(\"es6-symbol\").iterator,i=t(\"../../function/is-arguments\"),o=t(\"../../function/is-function\"),u=t(\"../../number/to-pos-integer\"),a=t(\"../../object/valid-callable\"),s=t(\"../../object/valid-value\"),f=t(\"../../object/is-value\"),c=t(\"../../string/is-string\"),l=Array.isArray,p=Function.prototype.call,h={configurable:!0,enumerable:!0,writable:!0,value:null},y=Object.defineProperty;e.exports=function(t){var e,n,d,v,g,b,m,w,_,j,x=arguments[1],O=arguments[2];if(t=Object(s(t)),f(x)&&a(x),this&&this!==Array&&o(this))e=this;else{if(!x){if(i(t))return 1!==(g=t.length)?Array.apply(null,t):(v=new Array(1),v[0]=t[0],v);if(l(t)){for(v=new Array(g=t.length),n=0;n<g;++n)v[n]=t[n];return v}}v=[]}if(!l(t))if(void 0!==(_=t[r])){for(m=a(_).call(t),e&&(v=new e),w=m.next(),n=0;!w.done;)j=x?p.call(x,O,w.value,n):w.value,e?(h.value=j,y(v,n,h)):v[n]=j,w=m.next(),++n;g=n}else if(c(t)){for(g=t.length,e&&(v=new e),n=0,d=0;n<g;++n)j=t[n],n+1<g&&(b=j.charCodeAt(0))>=55296&&b<=56319&&(j+=t[++n]),j=x?p.call(x,O,j,d):j,e?(h.value=j,y(v,d,h)):v[d]=j,++d;g=d}if(void 0===g)for(g=u(t.length),e&&(v=new e(g)),n=0;n<g;++n)j=x?p.call(x,O,t[n],n):t[n],e?(h.value=j,y(v,n,h)):v[n]=j;return e&&(h.value=null,v.length=g),v}},{\"../../function/is-arguments\":34,\"../../function/is-function\":35,\"../../number/to-pos-integer\":44,\"../../object/is-value\":52,\"../../object/valid-callable\":59,\"../../object/valid-value\":60,\"../../string/is-string\":64,\"es6-symbol\":65}],31:[function(t,e,n){\"use strict\";var r=t(\"./from\"),i=Array.isArray;e.exports=function(t){return i(t)?t:r(t)}},{\"./from\":28}],32:[function(t,e,n){\"use strict\";var r=t(\"../object/assign\"),i=t(\"../object/is-object\"),o=t(\"../object/is-value\"),u=Error.captureStackTrace;n=e.exports=function(t){var e=new Error(t),a=arguments[1],s=arguments[2];return o(s)||i(a)&&(s=a,a=null),o(s)&&r(e,s),o(a)&&(e.code=a),u&&u(e,n),e}},{\"../object/assign\":46,\"../object/is-object\":51,\"../object/is-value\":52}],33:[function(t,e,n){\"use strict\";var r,i,o,u,a=t(\"../number/to-pos-integer\"),s=function(t,e){return e};try{Object.defineProperty(s,\"length\",{configurable:!0,writable:!1,enumerable:!1,value:1})}catch(t){}1===s.length?(r={configurable:!0,writable:!1,enumerable:!1},i=Object.defineProperty,e.exports=function(t,e){return e=a(e),t.length===e?t:(r.value=e,i(t,\"length\",r))}):(u=t(\"../object/mixin\"),o=function(){var t=[];return function(e){var n,r=0;if(t[e])return t[e];for(n=[];e--;)n.push(\"a\"+(++r).toString(36));return new Function(\"fn\",\"return function (\"+n.join(\", \")+\") { return fn.apply(this, arguments); };\")}}(),e.exports=function(t,e){var n;if(e=a(e),t.length===e)return t;n=o(e)(t);try{u(n,t)}catch(t){}return n})},{\"../number/to-pos-integer\":44,\"../object/mixin\":57}],34:[function(t,e,n){\"use strict\";var r=Object.prototype.toString,i=r.call(function(){return arguments}());e.exports=function(t){return r.call(t)===i}},{}],35:[function(t,e,n){\"use strict\";var r=Object.prototype.toString,i=r.call(t(\"./noop\"));e.exports=function(t){return\"function\"==typeof t&&r.call(t)===i}},{\"./noop\":36}],36:[function(t,e,n){\"use strict\";e.exports=function(){}},{}],37:[function(t,e,n){\"use strict\";e.exports=t(\"./is-implemented\")()?Math.sign:t(\"./shim\")},{\"./is-implemented\":38,\"./shim\":39}],38:[function(t,e,n){\"use strict\";e.exports=function(){var t=Math.sign;return\"function\"==typeof t&&(1===t(10)&&-1===t(-20))}},{}],39:[function(t,e,n){\"use strict\";e.exports=function(t){return t=Number(t),isNaN(t)||0===t?t:t>0?1:-1}},{}],40:[function(t,e,n){\"use strict\";e.exports=t(\"./is-implemented\")()?Number.isNaN:t(\"./shim\")},{\"./is-implemented\":41,\"./shim\":42}],41:[function(t,e,n){\"use strict\";e.exports=function(){var t=Number.isNaN;return\"function\"==typeof t&&(!t({})&&t(NaN)&&!t(34))}},{}],42:[function(t,e,n){\"use strict\";e.exports=function(t){return t!==t}},{}],43:[function(t,e,n){\"use strict\";var r=t(\"../math/sign\"),i=Math.abs,o=Math.floor;e.exports=function(t){return isNaN(t)?0:0!==(t=Number(t))&&isFinite(t)?r(t)*o(i(t)):t}},{\"../math/sign\":37}],44:[function(t,e,n){\"use strict\";var r=t(\"./to-integer\"),i=Math.max;e.exports=function(t){return i(0,r(t))}},{\"./to-integer\":43}],45:[function(t,e,n){\"use strict\";var r=t(\"./valid-callable\"),i=t(\"./valid-value\"),o=Function.prototype.bind,u=Function.prototype.call,a=Object.keys,s=Object.prototype.propertyIsEnumerable;e.exports=function(t,e){return function(n,f){var c,l=arguments[2],p=arguments[3];return n=Object(i(n)),r(f),c=a(n),p&&c.sort(\"function\"==typeof p?o.call(p,n):void 0),\"function\"!=typeof t&&(t=c[t]),u.call(t,c,function(t,r){return s.call(n,t)?u.call(f,l,n[t],t,n,r):e})}}},{\"./valid-callable\":59,\"./valid-value\":60}],46:[function(t,e,n){\"use strict\";e.exports=t(\"./is-implemented\")()?Object.assign:t(\"./shim\")},{\"./is-implemented\":47,\"./shim\":48}],47:[function(t,e,n){\"use strict\";e.exports=function(){var t,e=Object.assign;return\"function\"==typeof e&&(t={foo:\"raz\"},e(t,{bar:\"dwa\"},{trzy:\"trzy\"}),t.foo+t.bar+t.trzy===\"razdwatrzy\")}},{}],48:[function(t,e,n){\"use strict\";var r=t(\"../keys\"),i=t(\"../valid-value\"),o=Math.max;e.exports=function(t,e){var n,u,a,s=o(arguments.length,2);for(t=Object(i(t)),a=function(r){try{t[r]=e[r]}catch(t){n||(n=t)}},u=1;u<s;++u)e=arguments[u],r(e).forEach(a);if(void 0!==n)throw n;return t}},{\"../keys\":53,\"../valid-value\":60}],49:[function(t,e,n){\"use strict\";e.exports=t(\"./_iterate\")(\"forEach\")},{\"./_iterate\":45}],50:[function(t,e,n){\"use strict\";e.exports=function(t){return\"function\"==typeof t}},{}],51:[function(t,e,n){\"use strict\";var r=t(\"./is-value\"),i={function:!0,object:!0};e.exports=function(t){return r(t)&&i[typeof t]||!1}},{\"./is-value\":52}],52:[function(t,e,n){\"use strict\";var r=t(\"../function/noop\")();e.exports=function(t){return t!==r&&null!==t}},{\"../function/noop\":36}],53:[function(t,e,n){\"use strict\";e.exports=t(\"./is-implemented\")()?Object.keys:t(\"./shim\")},{\"./is-implemented\":54,\"./shim\":55}],54:[function(t,e,n){\"use strict\";e.exports=function(){try{return Object.keys(\"primitive\"),!0}catch(t){return!1}}},{}],55:[function(t,e,n){\"use strict\";var r=t(\"../is-value\"),i=Object.keys;e.exports=function(t){return i(r(t)?Object(t):t)}},{\"../is-value\":52}],56:[function(t,e,n){\"use strict\";var r=t(\"./valid-callable\"),i=t(\"./for-each\"),o=Function.prototype.call;e.exports=function(t,e){var n={},u=arguments[2];return r(e),i(t,function(t,r,i,a){n[r]=o.call(e,u,t,r,i,a)}),n}},{\"./for-each\":49,\"./valid-callable\":59}],57:[function(t,e,n){\"use strict\";var r=t(\"./valid-value\"),i=Object.defineProperty,o=Object.getOwnPropertyDescriptor,u=Object.getOwnPropertyNames,a=Object.getOwnPropertySymbols;e.exports=function(t,e){var n,s=Object(r(e));if(t=Object(r(t)),u(s).forEach(function(r){try{i(t,r,o(e,r))}catch(t){n=t}}),\"function\"==typeof a&&a(s).forEach(function(r){try{i(t,r,o(e,r))}catch(t){n=t}}),void 0!==n)throw n;return t}},{\"./valid-value\":60}],58:[function(t,e,n){\"use strict\";var r=t(\"./is-value\"),i=Array.prototype.forEach,o=Object.create,u=function(t,e){var n;for(n in t)e[n]=t[n]};e.exports=function(t){var e=o(null);return i.call(arguments,function(t){r(t)&&u(Object(t),e)}),e}},{\"./is-value\":52}],59:[function(t,e,n){\"use strict\";e.exports=function(t){if(\"function\"!=typeof t)throw new TypeError(t+\" is not a function\");return t}},{}],60:[function(t,e,n){\"use strict\";var r=t(\"./is-value\");e.exports=function(t){if(!r(t))throw new TypeError(\"Cannot use null or undefined\");return t}},{\"./is-value\":52}],61:[function(t,e,n){\"use strict\";e.exports=t(\"./is-implemented\")()?String.prototype.contains:t(\"./shim\")},{\"./is-implemented\":62,\"./shim\":63}],62:[function(t,e,n){\"use strict\";var r=\"razdwatrzy\";e.exports=function(){return\"function\"==typeof r.contains&&(!0===r.contains(\"dwa\")&&!1===r.contains(\"foo\"))}},{}],63:[function(t,e,n){\"use strict\";var r=String.prototype.indexOf;e.exports=function(t){return r.call(this,t,arguments[1])>-1}},{}],64:[function(t,e,n){\"use strict\";var r=Object.prototype.toString,i=r.call(\"\");e.exports=function(t){return\"string\"==typeof t||t&&\"object\"==typeof t&&(t instanceof String||r.call(t)===i)||!1}},{}],65:[function(t,e,n){\"use strict\";e.exports=t(\"./is-implemented\")()?Symbol:t(\"./polyfill\")},{\"./is-implemented\":66,\"./polyfill\":68}],66:[function(t,e,n){\"use strict\";var r={object:!0,symbol:!0};e.exports=function(){var t;if(\"function\"!=typeof Symbol)return!1;t=Symbol(\"test symbol\");try{String(t)}catch(t){return!1}return!!r[typeof Symbol.iterator]&&(!!r[typeof Symbol.toPrimitive]&&!!r[typeof Symbol.toStringTag])}},{}],67:[function(t,e,n){\"use strict\";e.exports=function(t){return!!t&&(\"symbol\"==typeof t||!!t.constructor&&(\"Symbol\"===t.constructor.name&&\"Symbol\"===t[t.constructor.toStringTag]))}},{}],68:[function(t,e,n){\"use strict\";var r,i,o,u,a=t(\"d\"),s=t(\"./validate-symbol\"),f=Object.create,c=Object.defineProperties,l=Object.defineProperty,p=Object.prototype,h=f(null);if(\"function\"==typeof Symbol){r=Symbol;try{String(r()),u=!0}catch(t){}}var y=function(){var t=f(null);return function(e){for(var n,r,i=0;t[e+(i||\"\")];)++i;return e+=i||\"\",t[e]=!0,n=\"@@\"+e,l(p,n,a.gs(null,function(t){r||(r=!0,l(this,n,a(t)),r=!1)})),n}}();o=function(t){if(this instanceof o)throw new TypeError(\"Symbol is not a constructor\");return i(t)},e.exports=i=function t(e){var n;if(this instanceof t)throw new TypeError(\"Symbol is not a constructor\");return u?r(e):(n=f(o.prototype),e=void 0===e?\"\":String(e),c(n,{__description__:a(\"\",e),__name__:a(\"\",y(e))}))},c(i,{for:a(function(t){return h[t]?h[t]:h[t]=i(String(t))}),keyFor:a(function(t){var e;s(t);for(e in h)if(h[e]===t)return e}),hasInstance:a(\"\",r&&r.hasInstance||i(\"hasInstance\")),isConcatSpreadable:a(\"\",r&&r.isConcatSpreadable||i(\"isConcatSpreadable\")),iterator:a(\"\",r&&r.iterator||i(\"iterator\")),match:a(\"\",r&&r.match||i(\"match\")),replace:a(\"\",r&&r.replace||i(\"replace\")),search:a(\"\",r&&r.search||i(\"search\")),species:a(\"\",r&&r.species||i(\"species\")),split:a(\"\",r&&r.split||i(\"split\")),toPrimitive:a(\"\",r&&r.toPrimitive||i(\"toPrimitive\")),toStringTag:a(\"\",r&&r.toStringTag||i(\"toStringTag\")),unscopables:a(\"\",r&&r.unscopables||i(\"unscopables\"))}),c(o.prototype,{constructor:a(i),toString:a(\"\",function(){return this.__name__})}),c(i.prototype,{toString:a(function(){return\"Symbol (\"+s(this).__description__+\")\"}),valueOf:a(function(){return s(this)})}),l(i.prototype,i.toPrimitive,a(\"\",function(){var t=s(this);return\"symbol\"==typeof t?t:t.toString()})),l(i.prototype,i.toStringTag,a(\"c\",\"Symbol\")),l(o.prototype,i.toStringTag,a(\"c\",i.prototype[i.toStringTag])),l(o.prototype,i.toPrimitive,a(\"c\",i.prototype[i.toPrimitive]))},{\"./validate-symbol\":69,d:25}],69:[function(t,e,n){\"use strict\";var r=t(\"./is-symbol\");e.exports=function(t){if(!r(t))throw new TypeError(t+\" is not a symbol\");return t}},{\"./is-symbol\":67}],70:[function(t,e,n){\"use strict\";var r,i,o,u,a,s,f,c=t(\"d\"),l=t(\"es5-ext/object/valid-callable\"),p=Function.prototype.apply,h=Function.prototype.call,y=Object.create,d=Object.defineProperty,v=Object.defineProperties,g=Object.prototype.hasOwnProperty,b={configurable:!0,enumerable:!1,writable:!0};a={on:r=function(t,e){var n;return l(e),g.call(this,\"__ee__\")?n=this.__ee__:(n=b.value=y(null),d(this,\"__ee__\",b),b.value=null),n[t]?\"object\"==typeof n[t]?n[t].push(e):n[t]=[n[t],e]:n[t]=e,this},once:i=function(t,e){var n,i;return l(e),i=this,r.call(this,t,n=function(){o.call(i,t,n),p.call(e,this,arguments)}),n.__eeOnceListener__=e,this},off:o=function(t,e){var n,r,i,o;if(l(e),!g.call(this,\"__ee__\"))return this;if(!(n=this.__ee__)[t])return this;if(\"object\"==typeof(r=n[t]))for(o=0;i=r[o];++o)i!==e&&i.__eeOnceListener__!==e||(2===r.length?n[t]=r[o?0:1]:r.splice(o,1));else r!==e&&r.__eeOnceListener__!==e||delete n[t];return this},emit:u=function(t){var e,n,r,i,o;if(g.call(this,\"__ee__\")&&(i=this.__ee__[t]))if(\"object\"==typeof i){for(n=arguments.length,o=new Array(n-1),e=1;e<n;++e)o[e-1]=arguments[e];for(i=i.slice(),e=0;r=i[e];++e)p.call(r,this,o)}else switch(arguments.length){case 1:h.call(i,this);break;case 2:h.call(i,this,arguments[1]);break;case 3:h.call(i,this,arguments[1],arguments[2]);break;default:for(n=arguments.length,o=new Array(n-1),e=1;e<n;++e)o[e-1]=arguments[e];p.call(i,this,o)}}},s={on:c(r),once:c(i),off:c(o),emit:c(u)},f=v({},s),e.exports=n=function(t){return null==t?y(f):v(Object(t),s)},n.methods=a},{d:25,\"es5-ext/object/valid-callable\":59}],71:[function(t,e,n){function r(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function i(t){return\"function\"==typeof t}function o(t){return\"number\"==typeof t}function u(t){return\"object\"==typeof t&&null!==t}function a(t){return void 0===t}e.exports=r,r.EventEmitter=r,r.prototype._events=void 0,r.prototype._maxListeners=void 0,r.defaultMaxListeners=10,r.prototype.setMaxListeners=function(t){if(!o(t)||t<0||isNaN(t))throw TypeError(\"n must be a positive number\");return this._maxListeners=t,this},r.prototype.emit=function(t){var e,n,r,o,s,f;if(this._events||(this._events={}),\"error\"===t&&(!this._events.error||u(this._events.error)&&!this._events.error.length)){if((e=arguments[1])instanceof Error)throw e;var c=new Error('Uncaught, unspecified \"error\" event. ('+e+\")\");throw c.context=e,c}if(n=this._events[t],a(n))return!1;if(i(n))switch(arguments.length){case 1:n.call(this);break;case 2:n.call(this,arguments[1]);break;case 3:n.call(this,arguments[1],arguments[2]);break;default:o=Array.prototype.slice.call(arguments,1),n.apply(this,o)}else if(u(n))for(o=Array.prototype.slice.call(arguments,1),r=(f=n.slice()).length,s=0;s<r;s++)f[s].apply(this,o);return!0},r.prototype.addListener=function(t,e){var n;if(!i(e))throw TypeError(\"listener must be a function\");return this._events||(this._events={}),this._events.newListener&&this.emit(\"newListener\",t,i(e.listener)?e.listener:e),this._events[t]?u(this._events[t])?this._events[t].push(e):this._events[t]=[this._events[t],e]:this._events[t]=e,u(this._events[t])&&!this._events[t].warned&&(n=a(this._maxListeners)?r.defaultMaxListeners:this._maxListeners)&&n>0&&this._events[t].length>n&&(this._events[t].warned=!0,console.error(\"(node) warning: possible EventEmitter memory leak detected. %d listeners added. Use emitter.setMaxListeners() to increase limit.\",this._events[t].length),\"function\"==typeof console.trace&&console.trace()),this},r.prototype.on=r.prototype.addListener,r.prototype.once=function(t,e){function n(){this.removeListener(t,n),r||(r=!0,e.apply(this,arguments))}if(!i(e))throw TypeError(\"listener must be a function\");var r=!1;return n.listener=e,this.on(t,n),this},r.prototype.removeListener=function(t,e){var n,r,o,a;if(!i(e))throw TypeError(\"listener must be a function\");if(!this._events||!this._events[t])return this;if(n=this._events[t],o=n.length,r=-1,n===e||i(n.listener)&&n.listener===e)delete this._events[t],this._events.removeListener&&this.emit(\"removeListener\",t,e);else if(u(n)){for(a=o;a-- >0;)if(n[a]===e||n[a].listener&&n[a].listener===e){r=a;break}if(r<0)return this;1===n.length?(n.length=0,delete this._events[t]):n.splice(r,1),this._events.removeListener&&this.emit(\"removeListener\",t,e)}return this},r.prototype.removeAllListeners=function(t){var e,n;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[t]&&delete this._events[t],this;if(0===arguments.length){for(e in this._events)\"removeListener\"!==e&&this.removeAllListeners(e);return this.removeAllListeners(\"removeListener\"),this._events={},this}if(n=this._events[t],i(n))this.removeListener(t,n);else if(n)for(;n.length;)this.removeListener(t,n[n.length-1]);return delete this._events[t],this},r.prototype.listeners=function(t){return this._events&&this._events[t]?i(this._events[t])?[this._events[t]]:this._events[t].slice():[]},r.prototype.listenerCount=function(t){if(this._events){var e=this._events[t];if(i(e))return 1;if(e)return e.length}return 0},r.listenerCount=function(t,e){return t.listenerCount(e)}},{}],72:[function(t,e,n){n.read=function(t,e,n,r,i){var o,u,a=8*i-r-1,s=(1<<a)-1,f=s>>1,c=-7,l=n?i-1:0,p=n?-1:1,h=t[e+l];for(l+=p,o=h&(1<<-c)-1,h>>=-c,c+=a;c>0;o=256*o+t[e+l],l+=p,c-=8);for(u=o&(1<<-c)-1,o>>=-c,c+=r;c>0;u=256*u+t[e+l],l+=p,c-=8);if(0===o)o=1-f;else{if(o===s)return u?NaN:1/0*(h?-1:1);u+=Math.pow(2,r),o-=f}return(h?-1:1)*u*Math.pow(2,o-r)},n.write=function(t,e,n,r,i,o){var u,a,s,f=8*o-i-1,c=(1<<f)-1,l=c>>1,p=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,h=r?0:o-1,y=r?1:-1,d=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,u=c):(u=Math.floor(Math.log(e)/Math.LN2),e*(s=Math.pow(2,-u))<1&&(u--,s*=2),(e+=u+l>=1?p/s:p*Math.pow(2,1-l))*s>=2&&(u++,s/=2),u+l>=c?(a=0,u=c):u+l>=1?(a=(e*s-1)*Math.pow(2,i),u+=l):(a=e*Math.pow(2,l-1)*Math.pow(2,i),u=0));i>=8;t[n+h]=255&a,h+=y,a/=256,i-=8);for(u=u<<i|a,f+=i;f>0;t[n+h]=255&u,h+=y,u/=256,f-=8);t[n+h-y]|=128*d}},{}],73:[function(t,e,n){e.exports=function(t){return!!t&&(\"object\"==typeof t||\"function\"==typeof t)&&\"function\"==typeof t.then}},{}],74:[function(t,e,n){\"use strict\";var r=t(\"es5-ext/number/to-pos-integer\"),i=Object.create,o=Object.prototype.hasOwnProperty;e.exports=function(t){var e,n=0,u=1,a=i(null),s=i(null),f=0;return t=r(t),{hit:function(r){var i=s[r],c=++f;if(a[c]=r,s[r]=c,!i){if(++n<=t)return;return r=a[u],e(r),r}if(delete a[i],u===i)for(;!o.call(a,++u);)continue},delete:e=function(t){var e=s[t];if(e&&(delete a[e],delete s[t],--n,u===e)){if(!n)return f=0,void(u=1);for(;!o.call(a,++u);)continue}},clear:function(){n=0,u=1,a=i(null),s=i(null),f=0}}}},{\"es5-ext/number/to-pos-integer\":44}],75:[function(t,e,n){\"use strict\";var r=t(\"es5-ext/array/from\"),i=t(\"es5-ext/object/map\"),o=t(\"es5-ext/object/mixin\"),u=t(\"es5-ext/function/_define-length\"),a=t(\"next-tick\"),s=Array.prototype.slice,f=Function.prototype.apply,c=Object.create,l=Object.prototype.hasOwnProperty;t(\"../lib/registered-extensions\").async=function(t,e){var n,p,h,y=c(null),d=c(null),v=e.memoized,g=e.original;e.memoized=u(function(t){var e=arguments,r=e[e.length-1];return\"function\"==typeof r&&(n=r,e=s.call(e,0,-1)),v.apply(p=this,h=e)},v);try{o(e.memoized,v)}catch(t){}e.on(\"get\",function(t){var r,i,o;if(n){if(y[t])return\"function\"==typeof y[t]?y[t]=[y[t],n]:y[t].push(n),void(n=null);r=n,i=p,o=h,n=p=h=null,a(function(){var u;l.call(d,t)?(u=d[t],e.emit(\"getasync\",t,o,i),f.call(r,u.context,u.args)):(n=r,p=i,h=o,v.apply(i,o))})}}),e.original=function(){var t,i,o,u;return n?(t=r(arguments),i=function t(n){var i,o,s=t.id;if(null!=s){if(delete t.id,i=y[s],delete y[s],i)return o=r(arguments),e.has(s)&&(n?e.delete(s):(d[s]={context:this,args:o},e.emit(\"setasync\",s,\"function\"==typeof i?1:i.length))),\"function\"==typeof i?u=f.call(i,this,o):i.forEach(function(t){u=f.call(t,this,o)},this),u}else a(f.bind(t,this,arguments))},o=n,n=p=h=null,t.push(i),u=f.call(g,this,t),i.cb=o,n=i,u):f.call(g,this,arguments)},e.on(\"set\",function(t){n?(y[t]?\"function\"==typeof y[t]?y[t]=[y[t],n.cb]:y[t].push(n.cb):y[t]=n.cb,delete n.cb,n.id=t,n=null):e.delete(t)}),e.on(\"delete\",function(t){var n;l.call(y,t)||d[t]&&(n=d[t],delete d[t],e.emit(\"deleteasync\",t,s.call(n.args,1)))}),e.on(\"clear\",function(){var t=d;d=c(null),e.emit(\"clearasync\",i(t,function(t){return s.call(t.args,1)}))})}},{\"../lib/registered-extensions\":83,\"es5-ext/array/from\":28,\"es5-ext/function/_define-length\":33,\"es5-ext/object/map\":56,\"es5-ext/object/mixin\":57,\"next-tick\":93}],76:[function(t,e,n){\"use strict\";var r=t(\"es5-ext/object/valid-callable\"),i=t(\"es5-ext/object/for-each\"),o=t(\"../lib/registered-extensions\"),u=Function.prototype.apply;o.dispose=function(t,e,n){var a;if(r(t),n.async&&o.async||n.promise&&o.promise)return e.on(\"deleteasync\",a=function(e,n){u.call(t,null,n)}),void e.on(\"clearasync\",function(t){i(t,function(t,e){a(e,t)})});e.on(\"delete\",a=function(e,n){t(n)}),e.on(\"clear\",function(t){i(t,function(t,e){a(e,t)})})}},{\"../lib/registered-extensions\":83,\"es5-ext/object/for-each\":49,\"es5-ext/object/valid-callable\":59}],77:[function(t,e,n){\"use strict\";var r=t(\"es5-ext/array/from\"),i=t(\"es5-ext/object/for-each\"),o=t(\"next-tick\"),u=t(\"is-promise\"),a=t(\"timers-ext/valid-timeout\"),s=t(\"../lib/registered-extensions\"),f=Function.prototype,c=Math.max,l=Math.min,p=Object.create;s.maxAge=function(t,e,n){var h,y,d,v;(t=a(t))&&(h=p(null),y=n.async&&s.async||n.promise&&s.promise?\"async\":\"\",e.on(\"set\"+y,function(n){h[n]=setTimeout(function(){e.delete(n)},t),v&&(v[n]&&\"nextTick\"!==v[n]&&clearTimeout(v[n]),v[n]=setTimeout(function(){delete v[n]},d))}),e.on(\"delete\"+y,function(t){clearTimeout(h[t]),delete h[t],v&&(\"nextTick\"!==v[t]&&clearTimeout(v[t]),delete v[t])}),n.preFetch&&(d=!0===n.preFetch||isNaN(n.preFetch)?.333:c(l(Number(n.preFetch),1),0))&&(v={},d=(1-d)*t,e.on(\"get\"+y,function(t,i,a){v[t]||(v[t]=\"nextTick\",o(function(){var o;\"nextTick\"===v[t]&&(delete v[t],e.delete(t),n.async&&(i=r(i)).push(f),o=e.memoized.apply(a,i),n.promise&&u(o)&&(\"function\"==typeof o.done?o.done(f,f):o.then(f,f)))}))})),e.on(\"clear\"+y,function(){i(h,function(t){clearTimeout(t)}),h={},v&&(i(v,function(t){\"nextTick\"!==t&&clearTimeout(t)}),v={})}))}},{\"../lib/registered-extensions\":83,\"es5-ext/array/from\":28,\"es5-ext/object/for-each\":49,\"is-promise\":73,\"next-tick\":93,\"timers-ext/valid-timeout\":98}],78:[function(t,e,n){\"use strict\";var r=t(\"es5-ext/number/to-pos-integer\"),i=t(\"lru-queue\"),o=t(\"../lib/registered-extensions\");o.max=function(t,e,n){var u,a,s;(t=r(t))&&(a=i(t),u=n.async&&o.async||n.promise&&o.promise?\"async\":\"\",e.on(\"set\"+u,s=function(t){void 0!==(t=a.hit(t))&&e.delete(t)}),e.on(\"get\"+u,s),e.on(\"delete\"+u,a.delete),e.on(\"clear\"+u,a.clear))}},{\"../lib/registered-extensions\":83,\"es5-ext/number/to-pos-integer\":44,\"lru-queue\":74}],79:[function(t,e,n){\"use strict\";var r=t(\"es5-ext/object/map\"),i=t(\"is-promise\"),o=t(\"next-tick\"),u=Object.create,a=Object.prototype.hasOwnProperty;t(\"../lib/registered-extensions\").promise=function(t,e){var n=u(null),s=u(null),f=u(null);e.on(\"set\",function(r,u,a){var c=!1;if(!i(a))return s[r]=a,void e.emit(\"setasync\",r,1);n[r]=1,f[r]=a;var l=function(t){var i=n[r];if(c)throw new Error(\"Memoizee error: Promise resolved with both failure and success, this can be result of unordered done & finally resolution.\\nInstead of `promise: true` consider configuring memoization via `promise: 'then'` or `promise: 'done'\");i&&(delete n[r],s[r]=t,e.emit(\"setasync\",r,i))},p=function(){c=!0,n[r]&&(delete n[r],delete f[r],e.delete(r))};\"then\"!==t&&\"function\"==typeof a.done?\"done\"!==t&&\"function\"==typeof a.finally?(a.done(l),a.finally(p)):a.done(l,p):a.then(function(t){o(l.bind(this,t))},function(){o(p)})}),e.on(\"get\",function(t,r,u){var a;if(n[t])++n[t];else{a=f[t];var s=function(){e.emit(\"getasync\",t,r,u)};i(a)?\"function\"==typeof a.done?a.done(s):a.then(function(){o(s)}):s()}}),e.on(\"delete\",function(t){if(delete f[t],n[t])delete n[t];else if(a.call(s,t)){var r=s[t];delete s[t],e.emit(\"deleteasync\",t,[r])}}),e.on(\"clear\",function(){var t=s;s=u(null),n=u(null),f=u(null),e.emit(\"clearasync\",r(t,function(t){return[t]}))})}},{\"../lib/registered-extensions\":83,\"es5-ext/object/map\":56,\"is-promise\":73,\"next-tick\":93}],80:[function(t,e,n){\"use strict\";var r=t(\"d\"),i=t(\"../lib/registered-extensions\"),o=Object.create,u=Object.defineProperties;i.refCounter=function(t,e,n){var a,s;a=o(null),s=n.async&&i.async||n.promise&&i.promise?\"async\":\"\",e.on(\"set\"+s,function(t,e){a[t]=e||1}),e.on(\"get\"+s,function(t){++a[t]}),e.on(\"delete\"+s,function(t){delete a[t]}),e.on(\"clear\"+s,function(){a={}}),u(e.memoized,{deleteRef:r(function(){var t=e.get(arguments);return null===t?null:a[t]?!--a[t]&&(e.delete(t),!0):null}),getRefCount:r(function(){var t=e.get(arguments);return null===t?0:a[t]?a[t]:0})})}},{\"../lib/registered-extensions\":83,d:25}],81:[function(t,e,n){\"use strict\";var r=t(\"es5-ext/object/normalize-options\"),i=t(\"./lib/resolve-length\"),o=t(\"./plain\");e.exports=function(e){var n,u=r(arguments[1]);return u.normalizer||0!==(n=u.length=i(u.length,e.length,u.async))&&(u.primitive?!1===n?u.normalizer=t(\"./normalizers/primitive\"):n>1&&(u.normalizer=t(\"./normalizers/get-primitive-fixed\")(n)):u.normalizer=!1===n?t(\"./normalizers/get\")():1===n?t(\"./normalizers/get-1\")():t(\"./normalizers/get-fixed\")(n)),u.async&&t(\"./ext/async\"),u.promise&&t(\"./ext/promise\"),u.dispose&&t(\"./ext/dispose\"),u.maxAge&&t(\"./ext/max-age\"),u.max&&t(\"./ext/max\"),u.refCounter&&t(\"./ext/ref-counter\"),o(e,u)}},{\"./ext/async\":75,\"./ext/dispose\":76,\"./ext/max\":78,\"./ext/max-age\":77,\"./ext/promise\":79,\"./ext/ref-counter\":80,\"./lib/resolve-length\":84,\"./normalizers/get\":90,\"./normalizers/get-1\":87,\"./normalizers/get-fixed\":88,\"./normalizers/get-primitive-fixed\":89,\"./normalizers/primitive\":91,\"./plain\":92,\"es5-ext/object/normalize-options\":58}],82:[function(t,e,n){\"use strict\";var r=t(\"es5-ext/error/custom\"),i=t(\"es5-ext/function/_define-length\"),o=t(\"d\"),u=t(\"event-emitter\").methods,a=t(\"./resolve-resolve\"),s=t(\"./resolve-normalize\"),f=Function.prototype.apply,c=Function.prototype.call,l=Object.create,p=Object.prototype.hasOwnProperty,h=Object.defineProperties,y=u.on,d=u.emit;e.exports=function(t,e,n){var u,v,g,b,m,w,_,j,x,O,k,E,A,S,I,T=l(null);return v=!1!==e?e:isNaN(t.length)?1:t.length,n.normalizer&&(O=s(n.normalizer),g=O.get,b=O.set,m=O.delete,w=O.clear),null!=n.resolvers&&(I=a(n.resolvers)),S=g?i(function(e){var n,i,o=arguments;if(I&&(o=I(o)),null!==(n=g(o))&&p.call(T,n))return k&&u.emit(\"get\",n,o,this),T[n];if(i=1===o.length?c.call(t,this,o[0]):f.call(t,this,o),null===n){if(null!==(n=g(o)))throw r(\"Circular invocation\",\"CIRCULAR_INVOCATION\");n=b(o)}else if(p.call(T,n))throw r(\"Circular invocation\",\"CIRCULAR_INVOCATION\");return T[n]=i,E&&u.emit(\"set\",n,null,i),i},v):0===e?function(){var e;if(p.call(T,\"data\"))return k&&u.emit(\"get\",\"data\",arguments,this),T.data;if(e=arguments.length?f.call(t,this,arguments):c.call(t,this),p.call(T,\"data\"))throw r(\"Circular invocation\",\"CIRCULAR_INVOCATION\");return T.data=e,E&&u.emit(\"set\",\"data\",null,e),e}:function(e){var n,i,o=arguments;if(I&&(o=I(arguments)),i=String(o[0]),p.call(T,i))return k&&u.emit(\"get\",i,o,this),T[i];if(n=1===o.length?c.call(t,this,o[0]):f.call(t,this,o),p.call(T,i))throw r(\"Circular invocation\",\"CIRCULAR_INVOCATION\");return T[i]=n,E&&u.emit(\"set\",i,null,n),n},u={original:t,memoized:S,get:function(t){return I&&(t=I(t)),g?g(t):String(t[0])},has:function(t){return p.call(T,t)},delete:function(t){var e;p.call(T,t)&&(m&&m(t),e=T[t],delete T[t],A&&u.emit(\"delete\",t,e))},clear:function(){var t=T;w&&w(),T=l(null),u.emit(\"clear\",t)},on:function(t,e){return\"get\"===t?k=!0:\"set\"===t?E=!0:\"delete\"===t&&(A=!0),y.call(this,t,e)},emit:d,updateEnv:function(){t=u.original}},_=g?i(function(t){var e,n=arguments;I&&(n=I(n)),null!==(e=g(n))&&u.delete(e)},v):0===e?function(){return u.delete(\"data\")}:function(t){return I&&(t=I(arguments)[0]),u.delete(t)},j=i(function(){var t,e=arguments;return I&&(e=I(e)),t=g(e),T[t]}),x=i(function(){var t,e=arguments;return I&&(e=I(e)),null!==(t=g(e))&&u.has(t)}),h(S,{__memoized__:o(!0),delete:o(_),clear:o(u.clear),_get:o(j),_has:o(x)}),u}},{\"./resolve-normalize\":85,\"./resolve-resolve\":86,d:25,\"es5-ext/error/custom\":32,\"es5-ext/function/_define-length\":33,\"event-emitter\":70}],83:[function(t,e,n){\"use strict\"},{}],84:[function(t,e,n){\"use strict\";var r=t(\"es5-ext/number/to-pos-integer\");e.exports=function(t,e,n){var i;return isNaN(t)?(i=e)>=0?n&&i?i-1:i:1:!1!==t&&r(t)}},{\"es5-ext/number/to-pos-integer\":44}],85:[function(t,e,n){\"use strict\";var r=t(\"es5-ext/object/valid-callable\");e.exports=function(t){var e;return\"function\"==typeof t?{set:t,get:t}:(e={get:r(t.get)},void 0!==t.set?(e.set=r(t.set),t.delete&&(e.delete=r(t.delete)),t.clear&&(e.clear=r(t.clear)),e):(e.set=e.get,e))}},{\"es5-ext/object/valid-callable\":59}],86:[function(t,e,n){\"use strict\";var r,i=t(\"es5-ext/array/to-array\"),o=t(\"es5-ext/object/valid-callable\"),u=Array.prototype.slice;r=function(t){return this.map(function(e,n){return e?e(t[n]):t[n]}).concat(u.call(t,this.length))},e.exports=function(t){return(t=i(t)).forEach(function(t){null!=t&&o(t)}),r.bind(t)}},{\"es5-ext/array/to-array\":31,\"es5-ext/object/valid-callable\":59}],87:[function(t,e,n){\"use strict\";var r=t(\"es5-ext/array/#/e-index-of\");e.exports=function(){var t=0,e=[],n=[];return{get:function(t){var i=r.call(e,t[0]);return-1===i?null:n[i]},set:function(r){return e.push(r[0]),n.push(++t),t},delete:function(t){var i=r.call(n,t);-1!==i&&(e.splice(i,1),n.splice(i,1))},clear:function(){e=[],n=[]}}}},{\"es5-ext/array/#/e-index-of\":27}],88:[function(t,e,n){\"use strict\";var r=t(\"es5-ext/array/#/e-index-of\"),i=Object.create;e.exports=function(t){var e=0,n=[[],[]],o=i(null);return{get:function(e){for(var i,o=0,u=n;o<t-1;){if(-1===(i=r.call(u[0],e[o])))return null;u=u[1][i],++o}return-1===(i=r.call(u[0],e[o]))?null:u[1][i]||null},set:function(i){for(var u,a=0,s=n;a<t-1;)-1===(u=r.call(s[0],i[a]))&&(u=s[0].push(i[a])-1,s[1].push([[],[]])),s=s[1][u],++a;return-1===(u=r.call(s[0],i[a]))&&(u=s[0].push(i[a])-1),s[1][u]=++e,o[e]=i,e},delete:function(e){for(var i,u=0,a=n,s=[],f=o[e];u<t-1;){if(-1===(i=r.call(a[0],f[u])))return;s.push(a,i),a=a[1][i],++u}if(-1!==(i=r.call(a[0],f[u]))){for(e=a[1][i],a[0].splice(i,1),a[1].splice(i,1);!a[0].length&&s.length;)i=s.pop(),(a=s.pop())[0].splice(i,1),a[1].splice(i,1);delete o[e]}},clear:function(){n=[[],[]],o=i(null)}}}},{\"es5-ext/array/#/e-index-of\":27}],89:[function(t,e,n){\"use strict\";e.exports=function(t){return t?function(e){for(var n=String(e[0]),r=0,i=t;--i;)n+=\"\u0001\"+e[++r];return n}:function(){return\"\"}}},{}],90:[function(t,e,n){\"use strict\";var r=t(\"es5-ext/array/#/e-index-of\"),i=Object.create;e.exports=function(){var t=0,e=[],n=i(null);return{get:function(t){var n,i=0,o=e,u=t.length;if(0===u)return o[u]||null;if(o=o[u]){for(;i<u-1;){if(-1===(n=r.call(o[0],t[i])))return null;o=o[1][n],++i}return-1===(n=r.call(o[0],t[i]))?null:o[1][n]||null}return null},set:function(i){var o,u=0,a=e,s=i.length;if(0===s)a[s]=++t;else{for(a[s]||(a[s]=[[],[]]),a=a[s];u<s-1;)-1===(o=r.call(a[0],i[u]))&&(o=a[0].push(i[u])-1,a[1].push([[],[]])),a=a[1][o],++u;-1===(o=r.call(a[0],i[u]))&&(o=a[0].push(i[u])-1),a[1][o]=++t}return n[t]=i,t},delete:function(t){var i,o=0,u=e,a=n[t],s=a.length,f=[];if(0===s)delete u[s];else if(u=u[s]){for(;o<s-1;){if(-1===(i=r.call(u[0],a[o])))return;f.push(u,i),u=u[1][i],++o}if(-1===(i=r.call(u[0],a[o])))return;for(t=u[1][i],u[0].splice(i,1),u[1].splice(i,1);!u[0].length&&f.length;)i=f.pop(),(u=f.pop())[0].splice(i,1),u[1].splice(i,1)}delete n[t]},clear:function(){e=[],n=i(null)}}}},{\"es5-ext/array/#/e-index-of\":27}],91:[function(t,e,n){\"use strict\";e.exports=function(t){var e,n,r=t.length;if(!r)return\"\u0002\";for(e=String(t[n=0]);--r;)e+=\"\u0001\"+t[++n];return e}},{}],92:[function(t,e,n){\"use strict\";var r=t(\"es5-ext/object/valid-callable\"),i=t(\"es5-ext/object/for-each\"),o=t(\"./lib/registered-extensions\"),u=t(\"./lib/configure-map\"),a=t(\"./lib/resolve-length\"),s=Object.prototype.hasOwnProperty;e.exports=function t(e){var n,f,c;if(r(e),(n=Object(arguments[1])).async&&n.promise)throw new Error(\"Options 'async' and 'promise' cannot be used together\");return s.call(e,\"__memoized__\")&&!n.force?e:(f=a(n.length,e.length,n.async&&o.async),c=u(e,f,n),i(o,function(t,e){n[e]&&t(n[e],c,n)}),t.__profiler__&&t.__profiler__(c),c.updateEnv(),c.memoized)}},{\"./lib/configure-map\":82,\"./lib/registered-extensions\":83,\"./lib/resolve-length\":84,\"es5-ext/object/for-each\":49,\"es5-ext/object/valid-callable\":59}],93:[function(t,e,n){(function(t){\"use strict\";var n,r;n=function(t){if(\"function\"!=typeof t)throw new TypeError(t+\" is not a function\");return t},r=function(t){var e,r,i=document.createTextNode(\"\"),o=0;return new t(function(){var t;if(e)r&&(e=r.concat(e));else{if(!r)return;e=r}if(r=e,e=null,\"function\"==typeof r)return t=r,r=null,void t();for(i.data=o=++o%2;r;)t=r.shift(),r.length||(r=null),t()}).observe(i,{characterData:!0}),function(t){n(t),e?\"function\"==typeof e?e=[e,t]:e.push(t):(e=t,i.data=o=++o%2)}},e.exports=function(){if(\"object\"==typeof t&&t&&\"function\"==typeof t.nextTick)return t.nextTick;if(\"object\"==typeof document&&document){if(\"function\"==typeof MutationObserver)return r(MutationObserver);if(\"function\"==typeof WebKitMutationObserver)return r(WebKitMutationObserver)}return\"function\"==typeof setImmediate?function(t){setImmediate(n(t))}:\"function\"==typeof setTimeout||\"object\"==typeof setTimeout?function(t){setTimeout(n(t),0)}:null}()}).call(this,t(\"_process\"))},{_process:95}],94:[function(t,e,n){(function(r){!function(t){if(\"object\"==typeof n)e.exports=t();else{var i;\"undefined\"!=typeof window?i=window:void 0!==r?i=r:\"undefined\"!=typeof self&&(i=self),i.objectHash=t()}}(function(){return function e(n,r,i){function o(a,s){if(!r[a]){if(!n[a]){var f=\"function\"==typeof t&&t;if(!s&&f)return f(a,!0);if(u)return u(a,!0);throw new Error(\"Cannot find module '\"+a+\"'\")}var c=r[a]={exports:{}};n[a][0].call(c.exports,function(t){var e=n[a][1][t];return o(e||t)},c,c.exports,e,n,r,i)}return r[a].exports}for(var u=\"function\"==typeof t&&t,a=0;a<i.length;a++)o(i[a]);return o}({1:[function(t,e,n){(function(r,i,o,u,a,s,f,c,l){\"use strict\";function p(t,e){return e=h(t,e),d(t,e)}function h(t,e){if(e=e||{},e.algorithm=e.algorithm||\"sha1\",e.encoding=e.encoding||\"hex\",e.excludeValues=!!e.excludeValues,e.algorithm=e.algorithm.toLowerCase(),e.encoding=e.encoding.toLowerCase(),e.ignoreUnknown=!0===e.ignoreUnknown,e.respectType=!1!==e.respectType,e.respectFunctionNames=!1!==e.respectFunctionNames,e.respectFunctionProperties=!1!==e.respectFunctionProperties,e.unorderedArrays=!0===e.unorderedArrays,e.unorderedSets=!1!==e.unorderedSets,e.replacer=e.replacer||void 0,void 0===t)throw new Error(\"Object argument required.\");for(var n=0;n<m.length;++n)m[n].toLowerCase()===e.algorithm.toLowerCase()&&(e.algorithm=m[n]);if(-1===m.indexOf(e.algorithm))throw new Error('Algorithm \"'+e.algorithm+'\"  not supported. supported values: '+m.join(\", \"));if(-1===w.indexOf(e.encoding)&&\"passthrough\"!==e.algorithm)throw new Error('Encoding \"'+e.encoding+'\"  not supported. supported values: '+w.join(\", \"));return e}function y(t){return\"function\"==typeof t&&null!=/^function\\s+\\w*\\s*\\(\\s*\\)\\s*{\\s+\\[native code\\]\\s+}$/i.exec(Function.prototype.toString.call(t))}function d(t,e){var n;if(void 0===(n=\"passthrough\"!==e.algorithm?b.createHash(e.algorithm):new g).write&&(n.write=n.update,n.end=n.update),v(e,n).dispatch(t),n.update||n.end(\"\"),n.digest)return n.digest(\"buffer\"===e.encoding?void 0:e.encoding);var r=n.read();return\"buffer\"===e.encoding?r:r.toString(e.encoding)}function v(t,e,n){n=n||[];var r=function(t){return e.update?e.update(t,\"utf8\"):e.write(t,\"utf8\")};return{dispatch:function(e){t.replacer&&(e=t.replacer(e));var n=typeof e;return null===e&&(n=\"null\"),this[\"_\"+n](e)},_object:function(e){var i=/\\[object (.*)\\]/i,u=Object.prototype.toString.call(e),a=i.exec(u);a=(a=a?a[1]:\"unknown:[\"+u+\"]\").toLowerCase();var s=null;if((s=n.indexOf(e))>=0)return this.dispatch(\"[CIRCULAR:\"+s+\"]\");if(n.push(e),void 0!==o&&o.isBuffer&&o.isBuffer(e))return r(\"buffer:\"),r(e);if(\"object\"===a||\"function\"===a){var f=Object.keys(e).sort();!1===t.respectType||y(e)||f.splice(0,0,\"prototype\",\"__proto__\",\"constructor\"),r(\"object:\"+f.length+\":\");var c=this;return f.forEach(function(n){c.dispatch(n),r(\":\"),t.excludeValues||c.dispatch(e[n]),r(\",\")})}if(!this[\"_\"+a]){if(t.ignoreUnknown)return r(\"[\"+a+\"]\");throw new Error('Unknown object type \"'+a+'\"')}this[\"_\"+a](e)},_array:function(e,i){i=void 0!==i?i:!1!==t.unorderedArrays;var o=this;if(r(\"array:\"+e.length+\":\"),!i||e.length<=1)return e.forEach(function(t){return o.dispatch(t)});var u=[],a=e.map(function(e){var r=new g,i=n.slice();return v(t,r,i).dispatch(e),u=u.concat(i.slice(n.length)),r.read().toString()});return n=n.concat(u),a.sort(),this._array(a,!1)},_date:function(t){return r(\"date:\"+t.toJSON())},_symbol:function(t){return r(\"symbol:\"+t.toString())},_error:function(t){return r(\"error:\"+t.toString())},_boolean:function(t){return r(\"bool:\"+t.toString())},_string:function(t){r(\"string:\"+t.length+\":\"),r(t)},_function:function(e){r(\"fn:\"),y(e)?this.dispatch(\"[native]\"):this.dispatch(e.toString()),!1!==t.respectFunctionNames&&this.dispatch(\"function-name:\"+String(e.name)),t.respectFunctionProperties&&this._object(e)},_number:function(t){return r(\"number:\"+t.toString())},_xml:function(t){return r(\"xml:\"+t.toString())},_null:function(){return r(\"Null\")},_undefined:function(){return r(\"Undefined\")},_regexp:function(t){return r(\"regex:\"+t.toString())},_uint8array:function(t){return r(\"uint8array:\"),this.dispatch(Array.prototype.slice.call(t))},_uint8clampedarray:function(t){return r(\"uint8clampedarray:\"),this.dispatch(Array.prototype.slice.call(t))},_int8array:function(t){return r(\"uint8array:\"),this.dispatch(Array.prototype.slice.call(t))},_uint16array:function(t){return r(\"uint16array:\"),this.dispatch(Array.prototype.slice.call(t))},_int16array:function(t){return r(\"uint16array:\"),this.dispatch(Array.prototype.slice.call(t))},_uint32array:function(t){return r(\"uint32array:\"),this.dispatch(Array.prototype.slice.call(t))},_int32array:function(t){return r(\"uint32array:\"),this.dispatch(Array.prototype.slice.call(t))},_float32array:function(t){return r(\"float32array:\"),this.dispatch(Array.prototype.slice.call(t))},_float64array:function(t){return r(\"float64array:\"),this.dispatch(Array.prototype.slice.call(t))},_arraybuffer:function(t){return r(\"arraybuffer:\"),this.dispatch(new Uint8Array(t))},_url:function(t){return r(\"url:\"+t.toString())},_map:function(e){r(\"map:\");var n=Array.from(e);return this._array(n,!1!==t.unorderedSets)},_set:function(e){r(\"set:\");var n=Array.from(e);return this._array(n,!1!==t.unorderedSets)},_blob:function(){if(t.ignoreUnknown)return r(\"[blob]\");throw Error('Hashing Blob objects is currently not supported\\n(see https://github.com/puleos/object-hash/issues/26)\\nUse \"options.replacer\" or \"options.ignoreUnknown\"\\n')},_domwindow:function(){return r(\"domwindow\")},_process:function(){return r(\"process\")},_timer:function(){return r(\"timer\")},_pipe:function(){return r(\"pipe\")},_tcp:function(){return r(\"tcp\")},_udp:function(){return r(\"udp\")},_tty:function(){return r(\"tty\")},_statwatcher:function(){return r(\"statwatcher\")},_securecontext:function(){return r(\"securecontext\")},_connection:function(){return r(\"connection\")},_zlib:function(){return r(\"zlib\")},_context:function(){return r(\"context\")},_nodescript:function(){return r(\"nodescript\")},_httpparser:function(){return r(\"httpparser\")},_dataview:function(){return r(\"dataview\")},_signal:function(){return r(\"signal\")},_fsevent:function(){return r(\"fsevent\")},_tlswrap:function(){return r(\"tlswrap\")}}}function g(){return{buf:\"\",write:function(t){this.buf+=t},end:function(t){this.buf+=t},read:function(){return this.buf}}}var b=t(\"crypto\");(n=e.exports=p).sha1=function(t){return p(t)},n.keys=function(t){return p(t,{excludeValues:!0,algorithm:\"sha1\",encoding:\"hex\"})},n.MD5=function(t){return p(t,{algorithm:\"md5\",encoding:\"hex\"})},n.keysMD5=function(t){return p(t,{algorithm:\"md5\",encoding:\"hex\",excludeValues:!0})};var m=b.getHashes?b.getHashes().slice():[\"sha1\",\"md5\"];m.push(\"passthrough\");var w=[\"buffer\",\"hex\",\"binary\",\"base64\"];n.writeToStream=function(t,e,n){return void 0===n&&(n=e,e={}),e=h(t,e),v(e,n).dispatch(t)}}).call(this,t(\"lYpoI2\"),\"undefined\"!=typeof self?self:\"undefined\"!=typeof window?window:{},t(\"buffer\").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],\"/fake_8c3adc78.js\",\"/\")},{buffer:3,crypto:5,lYpoI2:10}],2:[function(t,e,n){(function(t,e,r,i,o,u,a,s,f){var c=\"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/\";!function(t){\"use strict\";function e(t){var e=t.charCodeAt(0);return e===r||e===s?62:e===i||e===f?63:e<o?-1:e<o+10?e-o+26+26:e<a+26?e-a:e<u+26?e-u+26:void 0}var n=\"undefined\"!=typeof Uint8Array?Uint8Array:Array,r=\"+\".charCodeAt(0),i=\"/\".charCodeAt(0),o=\"0\".charCodeAt(0),u=\"a\".charCodeAt(0),a=\"A\".charCodeAt(0),s=\"-\".charCodeAt(0),f=\"_\".charCodeAt(0);t.toByteArray=function(t){function r(t){f[l++]=t}var i,o,u,a,s,f;if(t.length%4>0)throw new Error(\"Invalid string. Length must be a multiple of 4\");var c=t.length;s=\"=\"===t.charAt(c-2)?2:\"=\"===t.charAt(c-1)?1:0,f=new n(3*t.length/4-s),u=s>0?t.length-4:t.length;var l=0;for(i=0,o=0;i<u;i+=4,o+=3)a=e(t.charAt(i))<<18|e(t.charAt(i+1))<<12|e(t.charAt(i+2))<<6|e(t.charAt(i+3)),r((16711680&a)>>16),r((65280&a)>>8),r(255&a);return 2===s?(a=e(t.charAt(i))<<2|e(t.charAt(i+1))>>4,r(255&a)):1===s&&(a=e(t.charAt(i))<<10|e(t.charAt(i+1))<<4|e(t.charAt(i+2))>>2,r(a>>8&255),r(255&a)),f},t.fromByteArray=function(t){function e(t){return c.charAt(t)}var n,r,i,o=t.length%3,u=\"\";for(n=0,i=t.length-o;n<i;n+=3)r=(t[n]<<16)+(t[n+1]<<8)+t[n+2],u+=function(t){return e(t>>18&63)+e(t>>12&63)+e(t>>6&63)+e(63&t)}(r);switch(o){case 1:u+=e((r=t[t.length-1])>>2),u+=e(r<<4&63),u+=\"==\";break;case 2:u+=e((r=(t[t.length-2]<<8)+t[t.length-1])>>10),u+=e(r>>4&63),u+=e(r<<2&63),u+=\"=\"}return u}}(void 0===n?this.base64js={}:n)}).call(this,t(\"lYpoI2\"),\"undefined\"!=typeof self?self:\"undefined\"!=typeof window?window:{},t(\"buffer\").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],\"/node_modules/gulp-browserify/node_modules/base64-js/lib/b64.js\",\"/node_modules/gulp-browserify/node_modules/base64-js/lib\")},{buffer:3,lYpoI2:10}],3:[function(t,e,n){(function(e,r,i,o,u,a,s,f,c){function i(t,e,n){if(!(this instanceof i))return new i(t,e,n);var r=typeof t;if(\"base64\"===e&&\"string\"===r)for(t=U(t);t.length%4!=0;)t+=\"=\";var o;if(\"number\"===r)o=$(t);else if(\"string\"===r)o=i.byteLength(t,e);else{if(\"object\"!==r)throw new Error(\"First argument needs to be a number, array or string.\");o=$(t.length)}var u;i._useTypedArrays?u=i._augment(new Uint8Array(o)):(u=this,u.length=o,u._isBuffer=!0);var a;if(i._useTypedArrays&&\"number\"==typeof t.byteLength)u._set(t);else if(M(t))for(a=0;a<o;a++)i.isBuffer(t)?u[a]=t.readUInt8(a):u[a]=t[a];else if(\"string\"===r)u.write(t,0,e);else if(\"number\"===r&&!i._useTypedArrays&&!n)for(a=0;a<o;a++)u[a]=0;return u}function l(t,e,n,r){n=Number(n)||0;var o=t.length-n;r?(r=Number(r))>o&&(r=o):r=o;var u=e.length;J(u%2==0,\"Invalid hex string\"),r>u/2&&(r=u/2);for(var a=0;a<r;a++){var s=parseInt(e.substr(2*a,2),16);J(!isNaN(s),\"Invalid hex string\"),t[n+a]=s}return i._charsWritten=2*a,a}function p(t,e,n,r){return i._charsWritten=V(z(e),t,n,r)}function h(t,e,n,r){return i._charsWritten=V(F(e),t,n,r)}function y(t,e,n,r){return h(t,e,n,r)}function d(t,e,n,r){return i._charsWritten=V(q(e),t,n,r)}function v(t,e,n,r){return i._charsWritten=V(Y(e),t,n,r)}function g(t,e,n){return 0===e&&n===t.length?G.fromByteArray(t):G.fromByteArray(t.slice(e,n))}function b(t,e,n){var r=\"\",i=\"\";n=Math.min(t.length,n);for(var o=e;o<n;o++)t[o]<=127?(r+=Q(i)+String.fromCharCode(t[o]),i=\"\"):i+=\"%\"+t[o].toString(16);return r+Q(i)}function m(t,e,n){var r=\"\";n=Math.min(t.length,n);for(var i=e;i<n;i++)r+=String.fromCharCode(t[i]);return r}function w(t,e,n){return m(t,e,n)}function _(t,e,n){var r=t.length;(!e||e<0)&&(e=0),(!n||n<0||n>r)&&(n=r);for(var i=\"\",o=e;o<n;o++)i+=D(t[o]);return i}function j(t,e,n){for(var r=t.slice(e,n),i=\"\",o=0;o<r.length;o+=2)i+=String.fromCharCode(r[o]+256*r[o+1]);return i}function x(t,e,n,r){r||(J(\"boolean\"==typeof n,\"missing or invalid endian\"),J(void 0!==e&&null!==e,\"missing offset\"),J(e+1<t.length,\"Trying to read beyond buffer length\"));var i=t.length;if(!(e>=i)){var o;return n?(o=t[e],e+1<i&&(o|=t[e+1]<<8)):(o=t[e]<<8,e+1<i&&(o|=t[e+1])),o}}function O(t,e,n,r){r||(J(\"boolean\"==typeof n,\"missing or invalid endian\"),J(void 0!==e&&null!==e,\"missing offset\"),J(e+3<t.length,\"Trying to read beyond buffer length\"));var i=t.length;if(!(e>=i)){var o;return n?(e+2<i&&(o=t[e+2]<<16),e+1<i&&(o|=t[e+1]<<8),o|=t[e],e+3<i&&(o+=t[e+3]<<24>>>0)):(e+1<i&&(o=t[e+1]<<16),e+2<i&&(o|=t[e+2]<<8),e+3<i&&(o|=t[e+3]),o+=t[e]<<24>>>0),o}}function k(t,e,n,r){if(r||(J(\"boolean\"==typeof n,\"missing or invalid endian\"),J(void 0!==e&&null!==e,\"missing offset\"),J(e+1<t.length,\"Trying to read beyond buffer length\")),!(e>=t.length)){var i=x(t,e,n,!0);return 32768&i?-1*(65535-i+1):i}}function E(t,e,n,r){if(r||(J(\"boolean\"==typeof n,\"missing or invalid endian\"),J(void 0!==e&&null!==e,\"missing offset\"),J(e+3<t.length,\"Trying to read beyond buffer length\")),!(e>=t.length)){var i=O(t,e,n,!0);return 2147483648&i?-1*(4294967295-i+1):i}}function A(t,e,n,r){return r||(J(\"boolean\"==typeof n,\"missing or invalid endian\"),J(e+3<t.length,\"Trying to read beyond buffer length\")),X.read(t,e,n,23,4)}function S(t,e,n,r){return r||(J(\"boolean\"==typeof n,\"missing or invalid endian\"),J(e+7<t.length,\"Trying to read beyond buffer length\")),X.read(t,e,n,52,8)}function I(t,e,n,r,i){i||(J(void 0!==e&&null!==e,\"missing value\"),J(\"boolean\"==typeof r,\"missing or invalid endian\"),J(void 0!==n&&null!==n,\"missing offset\"),J(n+1<t.length,\"trying to write beyond buffer length\"),K(e,65535));var o=t.length;if(!(n>=o))for(var u=0,a=Math.min(o-n,2);u<a;u++)t[n+u]=(e&255<<8*(r?u:1-u))>>>8*(r?u:1-u)}function T(t,e,n,r,i){i||(J(void 0!==e&&null!==e,\"missing value\"),J(\"boolean\"==typeof r,\"missing or invalid endian\"),J(void 0!==n&&null!==n,\"missing offset\"),J(n+3<t.length,\"trying to write beyond buffer length\"),K(e,4294967295));var o=t.length;if(!(n>=o))for(var u=0,a=Math.min(o-n,4);u<a;u++)t[n+u]=e>>>8*(r?u:3-u)&255}function P(t,e,n,r,i){i||(J(void 0!==e&&null!==e,\"missing value\"),J(\"boolean\"==typeof r,\"missing or invalid endian\"),J(void 0!==n&&null!==n,\"missing offset\"),J(n+1<t.length,\"Trying to write beyond buffer length\"),W(e,32767,-32768)),n>=t.length||(e>=0?I(t,e,n,r,i):I(t,65535+e+1,n,r,i))}function B(t,e,n,r,i){i||(J(void 0!==e&&null!==e,\"missing value\"),J(\"boolean\"==typeof r,\"missing or invalid endian\"),J(void 0!==n&&null!==n,\"missing offset\"),J(n+3<t.length,\"Trying to write beyond buffer length\"),W(e,2147483647,-2147483648)),n>=t.length||(e>=0?T(t,e,n,r,i):T(t,4294967295+e+1,n,r,i))}function C(t,e,n,r,i){i||(J(void 0!==e&&null!==e,\"missing value\"),J(\"boolean\"==typeof r,\"missing or invalid endian\"),J(void 0!==n&&null!==n,\"missing offset\"),J(n+3<t.length,\"Trying to write beyond buffer length\"),H(e,3.4028234663852886e38,-3.4028234663852886e38)),n>=t.length||X.write(t,e,n,r,23,4)}function L(t,e,n,r,i){i||(J(void 0!==e&&null!==e,\"missing value\"),J(\"boolean\"==typeof r,\"missing or invalid endian\"),J(void 0!==n&&null!==n,\"missing offset\"),J(n+7<t.length,\"Trying to write beyond buffer length\"),H(e,1.7976931348623157e308,-1.7976931348623157e308)),n>=t.length||X.write(t,e,n,r,52,8)}function U(t){return t.trim?t.trim():t.replace(/^\\s+|\\s+$/g,\"\")}function R(t,e,n){return\"number\"!=typeof t?n:(t=~~t)>=e?e:t>=0?t:(t+=e)>=0?t:0}function $(t){return(t=~~Math.ceil(+t))<0?0:t}function N(t){return(Array.isArray||function(t){return\"[object Array]\"===Object.prototype.toString.call(t)})(t)}function M(t){return N(t)||i.isBuffer(t)||t&&\"object\"==typeof t&&\"number\"==typeof t.length}function D(t){return t<16?\"0\"+t.toString(16):t.toString(16)}function z(t){for(var e=[],n=0;n<t.length;n++){var r=t.charCodeAt(n);if(r<=127)e.push(t.charCodeAt(n));else{var i=n;r>=55296&&r<=57343&&n++;for(var o=encodeURIComponent(t.slice(i,n+1)).substr(1).split(\"%\"),u=0;u<o.length;u++)e.push(parseInt(o[u],16))}}return e}function F(t){for(var e=[],n=0;n<t.length;n++)e.push(255&t.charCodeAt(n));return e}function Y(t){for(var e,n,r,i=[],o=0;o<t.length;o++)e=t.charCodeAt(o),n=e>>8,r=e%256,i.push(r),i.push(n);return i}function q(t){return G.toByteArray(t)}function V(t,e,n,r){for(var i=0;i<r&&!(i+n>=e.length||i>=t.length);i++)e[i+n]=t[i];return i}function Q(t){try{return decodeURIComponent(t)}catch(t){return String.fromCharCode(65533)}}function K(t,e){J(\"number\"==typeof t,\"cannot write a non-number as a number\"),J(t>=0,\"specified a negative value for writing an unsigned value\"),J(t<=e,\"value is larger than maximum value for type\"),J(Math.floor(t)===t,\"value has a fractional component\")}function W(t,e,n){J(\"number\"==typeof t,\"cannot write a non-number as a number\"),J(t<=e,\"value larger than maximum allowed value\"),J(t>=n,\"value smaller than minimum allowed value\"),J(Math.floor(t)===t,\"value has a fractional component\")}function H(t,e,n){J(\"number\"==typeof t,\"cannot write a non-number as a number\"),J(t<=e,\"value larger than maximum allowed value\"),J(t>=n,\"value smaller than minimum allowed value\")}function J(t,e){if(!t)throw new Error(e||\"Failed assertion\")}var G=t(\"base64-js\"),X=t(\"ieee754\");n.Buffer=i,n.SlowBuffer=i,n.INSPECT_MAX_BYTES=50,i.poolSize=8192,i._useTypedArrays=function(){try{var t=new ArrayBuffer(0),e=new Uint8Array(t);return e.foo=function(){return 42},42===e.foo()&&\"function\"==typeof e.subarray}catch(t){return!1}}(),i.isEncoding=function(t){switch(String(t).toLowerCase()){case\"hex\":case\"utf8\":case\"utf-8\":case\"ascii\":case\"binary\":case\"base64\":case\"raw\":case\"ucs2\":case\"ucs-2\":case\"utf16le\":case\"utf-16le\":return!0;default:return!1}},i.isBuffer=function(t){return!(null===t||void 0===t||!t._isBuffer)},i.byteLength=function(t,e){var n;switch(t+=\"\",e||\"utf8\"){case\"hex\":n=t.length/2;break;case\"utf8\":case\"utf-8\":n=z(t).length;break;case\"ascii\":case\"binary\":case\"raw\":n=t.length;break;case\"base64\":n=q(t).length;break;case\"ucs2\":case\"ucs-2\":case\"utf16le\":case\"utf-16le\":n=2*t.length;break;default:throw new Error(\"Unknown encoding\")}return n},i.concat=function(t,e){if(J(N(t),\"Usage: Buffer.concat(list, [totalLength])\\nlist should be an Array.\"),0===t.length)return new i(0);if(1===t.length)return t[0];var n;if(\"number\"!=typeof e)for(e=0,n=0;n<t.length;n++)e+=t[n].length;var r=new i(e),o=0;for(n=0;n<t.length;n++){var u=t[n];u.copy(r,o),o+=u.length}return r},i.prototype.write=function(t,e,n,r){if(isFinite(e))isFinite(n)||(r=n,n=void 0);else{var i=r;r=e,e=n,n=i}e=Number(e)||0;var o=this.length-e;n?(n=Number(n))>o&&(n=o):n=o;var u;switch(r=String(r||\"utf8\").toLowerCase()){case\"hex\":u=l(this,t,e,n);break;case\"utf8\":case\"utf-8\":u=p(this,t,e,n);break;case\"ascii\":u=h(this,t,e,n);break;case\"binary\":u=y(this,t,e,n);break;case\"base64\":u=d(this,t,e,n);break;case\"ucs2\":case\"ucs-2\":case\"utf16le\":case\"utf-16le\":u=v(this,t,e,n);break;default:throw new Error(\"Unknown encoding\")}return u},i.prototype.toString=function(t,e,n){var r=this;if(t=String(t||\"utf8\").toLowerCase(),e=Number(e)||0,(n=void 0!==n?Number(n):n=r.length)===e)return\"\";var i;switch(t){case\"hex\":i=_(r,e,n);break;case\"utf8\":case\"utf-8\":i=b(r,e,n);break;case\"ascii\":i=m(r,e,n);break;case\"binary\":i=w(r,e,n);break;case\"base64\":i=g(r,e,n);break;case\"ucs2\":case\"ucs-2\":case\"utf16le\":case\"utf-16le\":i=j(r,e,n);break;default:throw new Error(\"Unknown encoding\")}return i},i.prototype.toJSON=function(){return{type:\"Buffer\",data:Array.prototype.slice.call(this._arr||this,0)}},i.prototype.copy=function(t,e,n,r){var o=this;if(n||(n=0),r||0===r||(r=this.length),e||(e=0),r!==n&&0!==t.length&&0!==o.length){J(r>=n,\"sourceEnd < sourceStart\"),J(e>=0&&e<t.length,\"targetStart out of bounds\"),J(n>=0&&n<o.length,\"sourceStart out of bounds\"),J(r>=0&&r<=o.length,\"sourceEnd out of bounds\"),r>this.length&&(r=this.length),t.length-e<r-n&&(r=t.length-e+n);var u=r-n;if(u<100||!i._useTypedArrays)for(var a=0;a<u;a++)t[a+e]=this[a+n];else t._set(this.subarray(n,n+u),e)}},i.prototype.slice=function(t,e){var n=this.length;if(t=R(t,n,0),e=R(e,n,n),i._useTypedArrays)return i._augment(this.subarray(t,e));for(var r=e-t,o=new i(r,void 0,!0),u=0;u<r;u++)o[u]=this[u+t];return o},i.prototype.get=function(t){return console.log(\".get() is deprecated. Access using array indexes instead.\"),this.readUInt8(t)},i.prototype.set=function(t,e){return console.log(\".set() is deprecated. Access using array indexes instead.\"),this.writeUInt8(t,e)},i.prototype.readUInt8=function(t,e){if(e||(J(void 0!==t&&null!==t,\"missing offset\"),J(t<this.length,\"Trying to read beyond buffer length\")),!(t>=this.length))return this[t]},i.prototype.readUInt16LE=function(t,e){return x(this,t,!0,e)},i.prototype.readUInt16BE=function(t,e){return x(this,t,!1,e)},i.prototype.readUInt32LE=function(t,e){return O(this,t,!0,e)},i.prototype.readUInt32BE=function(t,e){return O(this,t,!1,e)},i.prototype.readInt8=function(t,e){if(e||(J(void 0!==t&&null!==t,\"missing offset\"),J(t<this.length,\"Trying to read beyond buffer length\")),!(t>=this.length))return 128&this[t]?-1*(255-this[t]+1):this[t]},i.prototype.readInt16LE=function(t,e){return k(this,t,!0,e)},i.prototype.readInt16BE=function(t,e){return k(this,t,!1,e)},i.prototype.readInt32LE=function(t,e){return E(this,t,!0,e)},i.prototype.readInt32BE=function(t,e){return E(this,t,!1,e)},i.prototype.readFloatLE=function(t,e){return A(this,t,!0,e)},i.prototype.readFloatBE=function(t,e){return A(this,t,!1,e)},i.prototype.readDoubleLE=function(t,e){return S(this,t,!0,e)},i.prototype.readDoubleBE=function(t,e){return S(this,t,!1,e)},i.prototype.writeUInt8=function(t,e,n){n||(J(void 0!==t&&null!==t,\"missing value\"),J(void 0!==e&&null!==e,\"missing offset\"),J(e<this.length,\"trying to write beyond buffer length\"),K(t,255)),e>=this.length||(this[e]=t)},i.prototype.writeUInt16LE=function(t,e,n){I(this,t,e,!0,n)},i.prototype.writeUInt16BE=function(t,e,n){I(this,t,e,!1,n)},i.prototype.writeUInt32LE=function(t,e,n){T(this,t,e,!0,n)},i.prototype.writeUInt32BE=function(t,e,n){T(this,t,e,!1,n)},i.prototype.writeInt8=function(t,e,n){n||(J(void 0!==t&&null!==t,\"missing value\"),J(void 0!==e&&null!==e,\"missing offset\"),J(e<this.length,\"Trying to write beyond buffer length\"),W(t,127,-128)),e>=this.length||(t>=0?this.writeUInt8(t,e,n):this.writeUInt8(255+t+1,e,n))},i.prototype.writeInt16LE=function(t,e,n){P(this,t,e,!0,n)},i.prototype.writeInt16BE=function(t,e,n){P(this,t,e,!1,n)},i.prototype.writeInt32LE=function(t,e,n){B(this,t,e,!0,n)},i.prototype.writeInt32BE=function(t,e,n){B(this,t,e,!1,n)},i.prototype.writeFloatLE=function(t,e,n){C(this,t,e,!0,n)},i.prototype.writeFloatBE=function(t,e,n){C(this,t,e,!1,n)},i.prototype.writeDoubleLE=function(t,e,n){L(this,t,e,!0,n)},i.prototype.writeDoubleBE=function(t,e,n){L(this,t,e,!1,n)},i.prototype.fill=function(t,e,n){if(t||(t=0),e||(e=0),n||(n=this.length),\"string\"==typeof t&&(t=t.charCodeAt(0)),J(\"number\"==typeof t&&!isNaN(t),\"value is not a number\"),J(n>=e,\"end < start\"),n!==e&&0!==this.length){J(e>=0&&e<this.length,\"start out of bounds\"),J(n>=0&&n<=this.length,\"end out of bounds\");for(var r=e;r<n;r++)this[r]=t}},i.prototype.inspect=function(){for(var t=[],e=this.length,r=0;r<e;r++)if(t[r]=D(this[r]),r===n.INSPECT_MAX_BYTES){t[r+1]=\"...\";break}return\"<Buffer \"+t.join(\" \")+\">\"},i.prototype.toArrayBuffer=function(){if(\"undefined\"!=typeof Uint8Array){if(i._useTypedArrays)return new i(this).buffer;for(var t=new Uint8Array(this.length),e=0,n=t.length;e<n;e+=1)t[e]=this[e];return t.buffer}throw new Error(\"Buffer.toArrayBuffer not supported in this browser\")};var Z=i.prototype;i._augment=function(t){return t._isBuffer=!0,t._get=t.get,t._set=t.set,t.get=Z.get,t.set=Z.set,t.write=Z.write,t.toString=Z.toString,t.toLocaleString=Z.toString,t.toJSON=Z.toJSON,t.copy=Z.copy,t.slice=Z.slice,t.readUInt8=Z.readUInt8,t.readUInt16LE=Z.readUInt16LE,t.readUInt16BE=Z.readUInt16BE,t.readUInt32LE=Z.readUInt32LE,t.readUInt32BE=Z.readUInt32BE,t.readInt8=Z.readInt8,t.readInt16LE=Z.readInt16LE,t.readInt16BE=Z.readInt16BE,t.readInt32LE=Z.readInt32LE,t.readInt32BE=Z.readInt32BE,t.readFloatLE=Z.readFloatLE,t.readFloatBE=Z.readFloatBE,t.readDoubleLE=Z.readDoubleLE,t.readDoubleBE=Z.readDoubleBE,t.writeUInt8=Z.writeUInt8,t.writeUInt16LE=Z.writeUInt16LE,t.writeUInt16BE=Z.writeUInt16BE,t.writeUInt32LE=Z.writeUInt32LE,t.writeUInt32BE=Z.writeUInt32BE,t.writeInt8=Z.writeInt8,t.writeInt16LE=Z.writeInt16LE,t.writeInt16BE=Z.writeInt16BE,t.writeInt32LE=Z.writeInt32LE,t.writeInt32BE=Z.writeInt32BE,t.writeFloatLE=Z.writeFloatLE,t.writeFloatBE=Z.writeFloatBE,t.writeDoubleLE=Z.writeDoubleLE,t.writeDoubleBE=Z.writeDoubleBE,t.fill=Z.fill,t.inspect=Z.inspect,t.toArrayBuffer=Z.toArrayBuffer,t}}).call(this,t(\"lYpoI2\"),\"undefined\"!=typeof self?self:\"undefined\"!=typeof window?window:{},t(\"buffer\").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],\"/node_modules/gulp-browserify/node_modules/buffer/index.js\",\"/node_modules/gulp-browserify/node_modules/buffer\")},{\"base64-js\":2,buffer:3,ieee754:11,lYpoI2:10}],4:[function(t,e,n){(function(n,r,i,o,u,a,s,f,c){function l(t,e){if(t.length%h!=0){var n=t.length+(h-t.length%h);t=i.concat([t,y],n)}for(var r=[],o=e?t.readInt32BE:t.readInt32LE,u=0;u<t.length;u+=h)r.push(o.call(t,u));return r}function p(t,e,n){for(var r=new i(e),o=n?r.writeInt32BE:r.writeInt32LE,u=0;u<t.length;u++)o.call(r,t[u],4*u,!0);return r}var h=4,y=new(i=t(\"buffer\").Buffer)(h);y.fill(0);var d=8;e.exports={hash:function(t,e,n,r){return i.isBuffer(t)||(t=new i(t)),p(e(l(t,r),t.length*d),n,r)}}}).call(this,t(\"lYpoI2\"),\"undefined\"!=typeof self?self:\"undefined\"!=typeof window?window:{},t(\"buffer\").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],\"/node_modules/gulp-browserify/node_modules/crypto-browserify/helpers.js\",\"/node_modules/gulp-browserify/node_modules/crypto-browserify\")},{buffer:3,lYpoI2:10}],5:[function(t,e,n){(function(e,r,i,o,u,a,s,f,c){function l(t,e,n){i.isBuffer(e)||(e=new i(e)),i.isBuffer(n)||(n=new i(n)),e.length>b?e=t(e):e.length<b&&(e=i.concat([e,m],b));for(var r=new i(b),o=new i(b),u=0;u<b;u++)r[u]=54^e[u],o[u]=92^e[u];var a=t(i.concat([r,n]));return t(i.concat([o,a]))}function p(t,e){var n=g[t=t||\"sha1\"],r=[],o=0;return n||h(\"algorithm:\",t,\"is not yet supported\"),{update:function(t){return i.isBuffer(t)||(t=new i(t)),r.push(t),o+=t.length,this},digest:function(t){var o=i.concat(r),u=e?l(n,e,o):n(o);return r=null,t?u.toString(t):u}}}function h(){var t=[].slice.call(arguments).join(\" \");throw new Error([t,\"we accept pull requests\",\"http://github.com/dominictarr/crypto-browserify\"].join(\"\\n\"))}var i=t(\"buffer\").Buffer,y=t(\"./sha\"),d=t(\"./sha256\"),v=t(\"./rng\"),g={sha1:y,sha256:d,md5:t(\"./md5\")},b=64,m=new i(b);m.fill(0),n.createHash=function(t){return p(t)},n.createHmac=function(t,e){return p(t,e)},n.randomBytes=function(t,e){if(!e||!e.call)return new i(v(t));try{e.call(this,void 0,new i(v(t)))}catch(t){e(t)}},function(t,e){for(var n in t)e(t[n],n)}([\"createCredentials\",\"createCipher\",\"createCipheriv\",\"createDecipher\",\"createDecipheriv\",\"createSign\",\"createVerify\",\"createDiffieHellman\",\"pbkdf2\"],function(t){n[t]=function(){h(\"sorry,\",t,\"is not implemented yet\")}})}).call(this,t(\"lYpoI2\"),\"undefined\"!=typeof self?self:\"undefined\"!=typeof window?window:{},t(\"buffer\").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],\"/node_modules/gulp-browserify/node_modules/crypto-browserify/index.js\",\"/node_modules/gulp-browserify/node_modules/crypto-browserify\")},{\"./md5\":6,\"./rng\":7,\"./sha\":8,\"./sha256\":9,buffer:3,lYpoI2:10}],6:[function(t,e,n){(function(n,r,i,o,u,a,s,f,c){function l(t,e){t[e>>5]|=128<<e%32,t[14+(e+64>>>9<<4)]=e;for(var n=1732584193,r=-271733879,i=-1732584194,o=271733878,u=0;u<t.length;u+=16){var a=n,s=r,f=i,c=o;r=v(r=v(r=v(r=v(r=d(r=d(r=d(r=d(r=y(r=y(r=y(r=y(r=h(r=h(r=h(r=h(r,i=h(i,o=h(o,n=h(n,r,i,o,t[u+0],7,-680876936),r,i,t[u+1],12,-389564586),n,r,t[u+2],17,606105819),o,n,t[u+3],22,-1044525330),i=h(i,o=h(o,n=h(n,r,i,o,t[u+4],7,-176418897),r,i,t[u+5],12,1200080426),n,r,t[u+6],17,-1473231341),o,n,t[u+7],22,-45705983),i=h(i,o=h(o,n=h(n,r,i,o,t[u+8],7,1770035416),r,i,t[u+9],12,-1958414417),n,r,t[u+10],17,-42063),o,n,t[u+11],22,-1990404162),i=h(i,o=h(o,n=h(n,r,i,o,t[u+12],7,1804603682),r,i,t[u+13],12,-40341101),n,r,t[u+14],17,-1502002290),o,n,t[u+15],22,1236535329),i=y(i,o=y(o,n=y(n,r,i,o,t[u+1],5,-165796510),r,i,t[u+6],9,-1069501632),n,r,t[u+11],14,643717713),o,n,t[u+0],20,-373897302),i=y(i,o=y(o,n=y(n,r,i,o,t[u+5],5,-701558691),r,i,t[u+10],9,38016083),n,r,t[u+15],14,-660478335),o,n,t[u+4],20,-405537848),i=y(i,o=y(o,n=y(n,r,i,o,t[u+9],5,568446438),r,i,t[u+14],9,-1019803690),n,r,t[u+3],14,-187363961),o,n,t[u+8],20,1163531501),i=y(i,o=y(o,n=y(n,r,i,o,t[u+13],5,-1444681467),r,i,t[u+2],9,-51403784),n,r,t[u+7],14,1735328473),o,n,t[u+12],20,-1926607734),i=d(i,o=d(o,n=d(n,r,i,o,t[u+5],4,-378558),r,i,t[u+8],11,-2022574463),n,r,t[u+11],16,1839030562),o,n,t[u+14],23,-35309556),i=d(i,o=d(o,n=d(n,r,i,o,t[u+1],4,-1530992060),r,i,t[u+4],11,1272893353),n,r,t[u+7],16,-155497632),o,n,t[u+10],23,-1094730640),i=d(i,o=d(o,n=d(n,r,i,o,t[u+13],4,681279174),r,i,t[u+0],11,-358537222),n,r,t[u+3],16,-722521979),o,n,t[u+6],23,76029189),i=d(i,o=d(o,n=d(n,r,i,o,t[u+9],4,-640364487),r,i,t[u+12],11,-421815835),n,r,t[u+15],16,530742520),o,n,t[u+2],23,-995338651),i=v(i,o=v(o,n=v(n,r,i,o,t[u+0],6,-198630844),r,i,t[u+7],10,1126891415),n,r,t[u+14],15,-1416354905),o,n,t[u+5],21,-57434055),i=v(i,o=v(o,n=v(n,r,i,o,t[u+12],6,1700485571),r,i,t[u+3],10,-1894986606),n,r,t[u+10],15,-1051523),o,n,t[u+1],21,-2054922799),i=v(i,o=v(o,n=v(n,r,i,o,t[u+8],6,1873313359),r,i,t[u+15],10,-30611744),n,r,t[u+6],15,-1560198380),o,n,t[u+13],21,1309151649),i=v(i,o=v(o,n=v(n,r,i,o,t[u+4],6,-145523070),r,i,t[u+11],10,-1120210379),n,r,t[u+2],15,718787259),o,n,t[u+9],21,-343485551),n=g(n,a),r=g(r,s),i=g(i,f),o=g(o,c)}return Array(n,r,i,o)}function p(t,e,n,r,i,o){return g(b(g(g(e,t),g(r,o)),i),n)}function h(t,e,n,r,i,o,u){return p(e&n|~e&r,t,e,i,o,u)}function y(t,e,n,r,i,o,u){return p(e&r|n&~r,t,e,i,o,u)}function d(t,e,n,r,i,o,u){return p(e^n^r,t,e,i,o,u)}function v(t,e,n,r,i,o,u){return p(n^(e|~r),t,e,i,o,u)}function g(t,e){var n=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(n>>16)<<16|65535&n}function b(t,e){return t<<e|t>>>32-e}var m=t(\"./helpers\");e.exports=function(t){return m.hash(t,l,16)}}).call(this,t(\"lYpoI2\"),\"undefined\"!=typeof self?self:\"undefined\"!=typeof window?window:{},t(\"buffer\").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],\"/node_modules/gulp-browserify/node_modules/crypto-browserify/md5.js\",\"/node_modules/gulp-browserify/node_modules/crypto-browserify\")},{\"./helpers\":4,buffer:3,lYpoI2:10}],7:[function(t,e,n){(function(t,n,r,i,o,u,a,s,f){!function(){var t,n;t=function(t){for(var e,n=new Array(t),r=0;r<t;r++)0==(3&r)&&(e=4294967296*Math.random()),n[r]=e>>>((3&r)<<3)&255;return n},this.crypto&&crypto.getRandomValues&&(n=function(t){var e=new Uint8Array(t);return crypto.getRandomValues(e),e}),e.exports=n||t}()}).call(this,t(\"lYpoI2\"),\"undefined\"!=typeof self?self:\"undefined\"!=typeof window?window:{},t(\"buffer\").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],\"/node_modules/gulp-browserify/node_modules/crypto-browserify/rng.js\",\"/node_modules/gulp-browserify/node_modules/crypto-browserify\")},{buffer:3,lYpoI2:10}],8:[function(t,e,n){(function(n,r,i,o,u,a,s,f,c){function l(t,e){t[e>>5]|=128<<24-e%32,t[15+(e+64>>9<<4)]=e;for(var n=Array(80),r=1732584193,i=-271733879,o=-1732584194,u=271733878,a=-1009589776,s=0;s<t.length;s+=16){for(var f=r,c=i,l=o,v=u,g=a,b=0;b<80;b++){n[b]=b<16?t[s+b]:d(n[b-3]^n[b-8]^n[b-14]^n[b-16],1);var m=y(y(d(r,5),p(b,i,o,u)),y(y(a,n[b]),h(b)));a=u,u=o,o=d(i,30),i=r,r=m}r=y(r,f),i=y(i,c),o=y(o,l),u=y(u,v),a=y(a,g)}return Array(r,i,o,u,a)}function p(t,e,n,r){return t<20?e&n|~e&r:t<40?e^n^r:t<60?e&n|e&r|n&r:e^n^r}function h(t){return t<20?1518500249:t<40?1859775393:t<60?-1894007588:-899497514}function y(t,e){var n=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(n>>16)<<16|65535&n}function d(t,e){return t<<e|t>>>32-e}var v=t(\"./helpers\");e.exports=function(t){return v.hash(t,l,20,!0)}}).call(this,t(\"lYpoI2\"),\"undefined\"!=typeof self?self:\"undefined\"!=typeof window?window:{},t(\"buffer\").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],\"/node_modules/gulp-browserify/node_modules/crypto-browserify/sha.js\",\"/node_modules/gulp-browserify/node_modules/crypto-browserify\")},{\"./helpers\":4,buffer:3,lYpoI2:10}],9:[function(t,e,n){(function(n,r,i,o,u,a,s,f,c){var l=t(\"./helpers\"),p=function(t,e){var n=(65535&t)+(65535&e);return(t>>16)+(e>>16)+(n>>16)<<16|65535&n},h=function(t,e){return t>>>e|t<<32-e},y=function(t,e){return t>>>e},d=function(t,e,n){return t&e^~t&n},v=function(t,e,n){return t&e^t&n^e&n},g=function(t){return h(t,2)^h(t,13)^h(t,22)},b=function(t){return h(t,6)^h(t,11)^h(t,25)},m=function(t){return h(t,7)^h(t,18)^y(t,3)},w=function(t){return h(t,17)^h(t,19)^y(t,10)},_=function(t,e){var n,r,i,o,u,a,s,f,c,l,h=new Array(1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298),y=new Array(1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225),_=new Array(64);t[e>>5]|=128<<24-e%32,t[15+(e+64>>9<<4)]=e;for(var j=0;j<t.length;j+=16){n=y[0],r=y[1],i=y[2],o=y[3],u=y[4],a=y[5],s=y[6],f=y[7];for(var x=0;x<64;x++)_[x]=x<16?t[x+j]:p(p(p(w(_[x-2]),_[x-7]),m(_[x-15])),_[x-16]),c=p(p(p(p(f,b(u)),d(u,a,s)),h[x]),_[x]),l=p(g(n),v(n,r,i)),f=s,s=a,a=u,u=p(o,c),o=i,i=r,r=n,n=p(c,l);y[0]=p(n,y[0]),y[1]=p(r,y[1]),y[2]=p(i,y[2]),y[3]=p(o,y[3]),y[4]=p(u,y[4]),y[5]=p(a,y[5]),y[6]=p(s,y[6]),y[7]=p(f,y[7])}return y};e.exports=function(t){return l.hash(t,_,32,!0)}}).call(this,t(\"lYpoI2\"),\"undefined\"!=typeof self?self:\"undefined\"!=typeof window?window:{},t(\"buffer\").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],\"/node_modules/gulp-browserify/node_modules/crypto-browserify/sha256.js\",\"/node_modules/gulp-browserify/node_modules/crypto-browserify\")},{\"./helpers\":4,buffer:3,lYpoI2:10}],10:[function(t,e,n){(function(t,n,r,i,o,u,a,s,f){function c(){}(t=e.exports={}).nextTick=function(){var t=\"undefined\"!=typeof window&&window.setImmediate,e=\"undefined\"!=typeof window&&window.postMessage&&window.addEventListener;if(t)return function(t){return window.setImmediate(t)};if(e){var n=[];return window.addEventListener(\"message\",function(t){var e=t.source;(e===window||null===e)&&\"process-tick\"===t.data&&(t.stopPropagation(),n.length>0)&&n.shift()()},!0),function(t){n.push(t),window.postMessage(\"process-tick\",\"*\")}}return function(t){setTimeout(t,0)}}(),t.title=\"browser\",t.browser=!0,t.env={},t.argv=[],t.on=c,t.addListener=c,t.once=c,t.off=c,t.removeListener=c,t.removeAllListeners=c,t.emit=c,t.binding=function(t){throw new Error(\"process.binding is not supported\")},t.cwd=function(){return\"/\"},t.chdir=function(t){throw new Error(\"process.chdir is not supported\")}}).call(this,t(\"lYpoI2\"),\"undefined\"!=typeof self?self:\"undefined\"!=typeof window?window:{},t(\"buffer\").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],\"/node_modules/gulp-browserify/node_modules/process/browser.js\",\"/node_modules/gulp-browserify/node_modules/process\")},{buffer:3,lYpoI2:10}],11:[function(t,e,n){(function(t,e,r,i,o,u,a,s,f){n.read=function(t,e,n,r,i){var o,u,a=8*i-r-1,s=(1<<a)-1,f=s>>1,c=-7,l=n?i-1:0,p=n?-1:1,h=t[e+l];for(l+=p,o=h&(1<<-c)-1,h>>=-c,c+=a;c>0;o=256*o+t[e+l],l+=p,c-=8);for(u=o&(1<<-c)-1,o>>=-c,c+=r;c>0;u=256*u+t[e+l],l+=p,c-=8);if(0===o)o=1-f;else{if(o===s)return u?NaN:1/0*(h?-1:1);u+=Math.pow(2,r),o-=f}return(h?-1:1)*u*Math.pow(2,o-r)},n.write=function(t,e,n,r,i,o){var u,a,s,f=8*o-i-1,c=(1<<f)-1,l=c>>1,p=23===i?Math.pow(2,-24)-Math.pow(2,-77):0,h=r?0:o-1,y=r?1:-1,d=e<0||0===e&&1/e<0?1:0;for(e=Math.abs(e),isNaN(e)||e===1/0?(a=isNaN(e)?1:0,u=c):(u=Math.floor(Math.log(e)/Math.LN2),e*(s=Math.pow(2,-u))<1&&(u--,s*=2),(e+=u+l>=1?p/s:p*Math.pow(2,1-l))*s>=2&&(u++,s/=2),u+l>=c?(a=0,u=c):u+l>=1?(a=(e*s-1)*Math.pow(2,i),u+=l):(a=e*Math.pow(2,l-1)*Math.pow(2,i),u=0));i>=8;t[n+h]=255&a,h+=y,a/=256,i-=8);for(u=u<<i|a,f+=i;f>0;t[n+h]=255&u,h+=y,u/=256,f-=8);t[n+h-y]|=128*d}}).call(this,t(\"lYpoI2\"),\"undefined\"!=typeof self?self:\"undefined\"!=typeof window?window:{},t(\"buffer\").Buffer,arguments[3],arguments[4],arguments[5],arguments[6],\"/node_modules/ieee754/index.js\",\"/node_modules/ieee754\")},{buffer:3,lYpoI2:10}]},{},[1])(1)})}).call(this,\"undefined\"!=typeof global?global:\"undefined\"!=typeof self?self:\"undefined\"!=typeof window?window:{})},{}],95:[function(t,e,n){function r(){throw new Error(\"setTimeout has not been defined\")}function i(){throw new Error(\"clearTimeout has not been defined\")}function o(t){if(l===setTimeout)return setTimeout(t,0);if((l===r||!l)&&setTimeout)return l=setTimeout,setTimeout(t,0);try{return l(t,0)}catch(e){try{return l.call(null,t,0)}catch(e){return l.call(this,t,0)}}}function u(t){if(p===clearTimeout)return clearTimeout(t);if((p===i||!p)&&clearTimeout)return p=clearTimeout,clearTimeout(t);try{return p(t)}catch(e){try{return p.call(null,t)}catch(e){return p.call(this,t)}}}function a(){v&&y&&(v=!1,y.length?d=y.concat(d):g=-1,d.length&&s())}function s(){if(!v){var t=o(a);v=!0;for(var e=d.length;e;){for(y=d,d=[];++g<e;)y&&y[g].run();g=-1,e=d.length}y=null,v=!1,u(t)}}function f(t,e){this.fun=t,this.array=e}function c(){}var l,p,h=e.exports={};!function(){try{l=\"function\"==typeof setTimeout?setTimeout:r}catch(t){l=r}try{p=\"function\"==typeof clearTimeout?clearTimeout:i}catch(t){p=i}}();var y,d=[],v=!1,g=-1;h.nextTick=function(t){var e=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)e[n-1]=arguments[n];d.push(new f(t,e)),1!==d.length||v||o(s)},f.prototype.run=function(){this.fun.apply(null,this.array)},h.title=\"browser\",h.browser=!0,h.env={},h.argv=[],h.version=\"\",h.versions={},h.on=c,h.addListener=c,h.once=c,h.off=c,h.removeListener=c,h.removeAllListeners=c,h.emit=c,h.prependListener=c,h.prependOnceListener=c,h.listeners=function(t){return[]},h.binding=function(t){throw new Error(\"process.binding is not supported\")},h.cwd=function(){return\"/\"},h.chdir=function(t){throw new Error(\"process.chdir is not supported\")},h.umask=function(){return 0}},{}],96:[function(t,e,n){(function(t){!function(t){\"use strict\";if(\"function\"==typeof bootstrap)bootstrap(\"promise\",t);else if(\"object\"==typeof n&&\"object\"==typeof e)e.exports=t();else if(\"undefined\"!=typeof ses){if(!ses.ok())return;ses.makeQ=t}else{if(\"undefined\"==typeof window&&\"undefined\"==typeof self)throw new Error(\"This environment was not anticipated by Q. Please file a bug.\");var r=\"undefined\"!=typeof window?window:self,i=r.Q;r.Q=t(),r.Q.noConflict=function(){return r.Q=i,this}}}(function(){\"use strict\";function e(t){return function(){return R.apply(t,arguments)}}function n(t){return t===Object(t)}function r(t){return\"[object StopIteration]\"===V(t)||t instanceof B}function i(t,e){if(T&&e.stack&&\"object\"==typeof t&&null!==t&&t.stack){for(var n=[],r=e;r;r=r.source)r.stack&&(!t.__minimumStackCounter__||t.__minimumStackCounter__>r.stackCounter)&&(F(t,\"__minimumStackCounter__\",{value:r.stackCounter,configurable:!0}),n.unshift(r.stack));n.unshift(t.stack);var i=o(n.join(\"\\n\"+Q+\"\\n\"));F(t,\"stack\",{value:i,configurable:!0})}}function o(t){for(var e=t.split(\"\\n\"),n=[],r=0;r<e.length;++r){var i=e[r];s(i)||u(i)||!i||n.push(i)}return n.join(\"\\n\")}function u(t){return-1!==t.indexOf(\"(module.js:\")||-1!==t.indexOf(\"(node.js:\")}function a(t){var e=/at .+ \\((.+):(\\d+):(?:\\d+)\\)$/.exec(t);if(e)return[e[1],Number(e[2])];var n=/at ([^ ]+):(\\d+):(?:\\d+)$/.exec(t);if(n)return[n[1],Number(n[2])];var r=/.*@(.+):(\\d+)$/.exec(t);return r?[r[1],Number(r[2])]:void 0}function s(t){var e=a(t);if(!e)return!1;var n=e[0],r=e[1];return n===P&&r>=C&&r<=X}function f(){if(T)try{throw new Error}catch(n){var t=n.stack.split(\"\\n\"),e=a(t[0].indexOf(\"@\")>0?t[1]:t[2]);if(!e)return;return P=e[0],e[1]}}function c(t){return t instanceof y?t:b(t)?O(t):x(t)}function l(){function t(t){e=t,c.longStackSupport&&T&&(o.source=t),N(n,function(e,n){c.nextTick(function(){t.promiseDispatch.apply(t,n)})},void 0),n=void 0,r=void 0}var e,n=[],r=[],i=z(l.prototype),o=z(y.prototype);if(o.promiseDispatch=function(t,i,o){var u=$(arguments);n?(n.push(u),\"when\"===i&&o[1]&&r.push(o[1])):c.nextTick(function(){e.promiseDispatch.apply(e,u)})},o.valueOf=function(){if(n)return o;var t=v(e);return g(t)&&(e=t),t},o.inspect=function(){return e?e.inspect():{state:\"pending\"}},c.longStackSupport&&T)try{throw new Error}catch(t){o.stack=t.stack.substring(t.stack.indexOf(\"\\n\")+1),o.stackCounter=K++}return i.promise=o,i.resolve=function(n){e||t(c(n))},i.fulfill=function(n){e||t(x(n))},i.reject=function(n){e||t(j(n))},i.notify=function(t){e||N(r,function(e,n){c.nextTick(function(){n(t)})},void 0)},i}function p(t){if(\"function\"!=typeof t)throw new TypeError(\"resolver must be a function.\");var e=l();try{t(e.resolve,e.reject,e.notify)}catch(t){e.reject(t)}return e.promise}function h(t){return p(function(e,n){for(var r=0,i=t.length;r<i;r++)c(t[r]).then(e,n)})}function y(t,e,n){void 0===e&&(e=function(t){return j(new Error(\"Promise does not support operation: \"+t))}),void 0===n&&(n=function(){return{state:\"unknown\"}});var r=z(y.prototype);if(r.promiseDispatch=function(n,i,o){var u;try{u=t[i]?t[i].apply(r,o):e.call(r,i,o)}catch(t){u=j(t)}n&&n(u)},r.inspect=n,n){var i=n();\"rejected\"===i.state&&(r.exception=i.reason),r.valueOf=function(){var t=n();return\"pending\"===t.state||\"rejected\"===t.state?r:t.value}}return r}function d(t,e,n,r){return c(t).then(e,n,r)}function v(t){if(g(t)){var e=t.inspect();if(\"fulfilled\"===e.state)return e.value}return t}function g(t){return t instanceof y}function b(t){return n(t)&&\"function\"==typeof t.then}function m(){W.length=0,H.length=0,G||(G=!0)}function w(e,n){G&&(\"object\"==typeof t&&\"function\"==typeof t.emit&&c.nextTick.runAfter(function(){-1!==M(H,e)&&(t.emit(\"unhandledRejection\",n,e),J.push(e))}),H.push(e),n&&void 0!==n.stack?W.push(n.stack):W.push(\"(no stack) \"+n))}function _(e){if(G){var n=M(H,e);-1!==n&&(\"object\"==typeof t&&\"function\"==typeof t.emit&&c.nextTick.runAfter(function(){var r=M(J,e);-1!==r&&(t.emit(\"rejectionHandled\",W[n],e),J.splice(r,1))}),H.splice(n,1),W.splice(n,1))}}function j(t){var e=y({when:function(e){return e&&_(this),e?e(t):this}},function(){return this},function(){return{state:\"rejected\",reason:t}});return w(e,t),e}function x(t){return y({when:function(){return t},get:function(e){return t[e]},set:function(e,n){t[e]=n},delete:function(e){delete t[e]},post:function(e,n){return null===e||void 0===e?t.apply(void 0,n):t[e].apply(t,n)},apply:function(e,n){return t.apply(e,n)},keys:function(){return q(t)}},void 0,function(){return{state:\"fulfilled\",value:t}})}function O(t){var e=l();return c.nextTick(function(){try{t.then(e.resolve,e.reject,e.notify)}catch(t){e.reject(t)}}),e.promise}function k(t,e,n){return c(t).spread(e,n)}function E(t,e,n){return c(t).dispatch(e,n)}function A(t){return d(t,function(t){var e=0,n=l();return N(t,function(r,i,o){var u;g(i)&&\"fulfilled\"===(u=i.inspect()).state?t[o]=u.value:(++e,d(i,function(r){t[o]=r,0==--e&&n.resolve(t)},n.reject,function(t){n.notify({index:o,value:t})}))},void 0),0===e&&n.resolve(t),n.promise})}function S(t){if(0===t.length)return c.resolve();var e=c.defer(),n=0;return N(t,function(r,i,o){var u=t[o];n++,d(u,function(t){e.resolve(t)},function(t){0==--n&&(t.message=\"Q can't get fulfillment value from any promise, all promises were rejected. Last error message: \"+t.message,e.reject(t))},function(t){e.notify({index:o,value:t})})},void 0),e.promise}function I(t){return d(t,function(t){return t=D(t,c),d(A(D(t,function(t){return d(t,L,L)})),function(){return t})})}var T=!1;try{throw new Error}catch(t){T=!!t.stack}var P,B,C=f(),L=function(){},U=function(){function e(){for(var t,e;r.next;)t=(r=r.next).task,r.task=void 0,(e=r.domain)&&(r.domain=void 0,e.enter()),n(t,e);for(;s.length;)n(t=s.pop());o=!1}function n(t,n){try{t()}catch(t){if(a)throw n&&n.exit(),setTimeout(e,0),n&&n.enter(),t;setTimeout(function(){throw t},0)}n&&n.exit()}var r={task:void 0,next:null},i=r,o=!1,u=void 0,a=!1,s=[];if(U=function(e){i=i.next={task:e,domain:a&&t.domain,next:null},o||(o=!0,u())},\"object\"==typeof t&&\"[object process]\"===t.toString()&&t.nextTick)a=!0,u=function(){t.nextTick(e)};else if(\"function\"==typeof setImmediate)u=\"undefined\"!=typeof window?setImmediate.bind(window,e):function(){setImmediate(e)};else if(\"undefined\"!=typeof MessageChannel){var f=new MessageChannel;f.port1.onmessage=function(){u=c,f.port1.onmessage=e,e()};var c=function(){f.port2.postMessage(0)};u=function(){setTimeout(e,0),c()}}else u=function(){setTimeout(e,0)};return U.runAfter=function(t){s.push(t),o||(o=!0,u())},U}(),R=Function.call,$=e(Array.prototype.slice),N=e(Array.prototype.reduce||function(t,e){var n=0,r=this.length;if(1===arguments.length)for(;;){if(n in this){e=this[n++];break}if(++n>=r)throw new TypeError}for(;n<r;n++)n in this&&(e=t(e,this[n],n));return e}),M=e(Array.prototype.indexOf||function(t){for(var e=0;e<this.length;e++)if(this[e]===t)return e;return-1}),D=e(Array.prototype.map||function(t,e){var n=this,r=[];return N(n,function(i,o,u){r.push(t.call(e,o,u,n))},void 0),r}),z=Object.create||function(t){function e(){}return e.prototype=t,new e},F=Object.defineProperty||function(t,e,n){return t[e]=n.value,t},Y=e(Object.prototype.hasOwnProperty),q=Object.keys||function(t){var e=[];for(var n in t)Y(t,n)&&e.push(n);return e},V=e(Object.prototype.toString);B=\"undefined\"!=typeof ReturnValue?ReturnValue:function(t){this.value=t};var Q=\"From previous event:\";c.resolve=c,c.nextTick=U,c.longStackSupport=!1;var K=1;\"object\"==typeof t&&t&&t.env&&t.env.Q_DEBUG&&(c.longStackSupport=!0),c.defer=l,l.prototype.makeNodeResolver=function(){var t=this;return function(e,n){e?t.reject(e):arguments.length>2?t.resolve($(arguments,1)):t.resolve(n)}},c.Promise=p,c.promise=p,p.race=h,p.all=A,p.reject=j,p.resolve=c,c.passByCopy=function(t){return t},y.prototype.passByCopy=function(){return this},c.join=function(t,e){return c(t).join(e)},y.prototype.join=function(t){return c([this,t]).spread(function(t,e){if(t===e)return t;throw new Error(\"Q can't join: not the same: \"+t+\" \"+e)})},c.race=h,y.prototype.race=function(){return this.then(c.race)},c.makePromise=y,y.prototype.toString=function(){return\"[object Promise]\"},y.prototype.then=function(t,e,n){function r(e){try{return\"function\"==typeof t?t(e):e}catch(t){return j(t)}}function o(t){if(\"function\"==typeof e){i(t,a);try{return e(t)}catch(t){return j(t)}}return j(t)}function u(t){return\"function\"==typeof n?n(t):t}var a=this,s=l(),f=!1;return c.nextTick(function(){a.promiseDispatch(function(t){f||(f=!0,s.resolve(r(t)))},\"when\",[function(t){f||(f=!0,s.resolve(o(t)))}])}),a.promiseDispatch(void 0,\"when\",[void 0,function(t){var e,n=!1;try{e=u(t)}catch(t){if(n=!0,!c.onerror)throw t;c.onerror(t)}n||s.notify(e)}]),s.promise},c.tap=function(t,e){return c(t).tap(e)},y.prototype.tap=function(t){return t=c(t),this.then(function(e){return t.fcall(e).thenResolve(e)})},c.when=d,y.prototype.thenResolve=function(t){return this.then(function(){return t})},c.thenResolve=function(t,e){return c(t).thenResolve(e)},y.prototype.thenReject=function(t){return this.then(function(){throw t})},c.thenReject=function(t,e){return c(t).thenReject(e)},c.nearer=v,c.isPromise=g,c.isPromiseAlike=b,c.isPending=function(t){return g(t)&&\"pending\"===t.inspect().state},y.prototype.isPending=function(){return\"pending\"===this.inspect().state},c.isFulfilled=function(t){return!g(t)||\"fulfilled\"===t.inspect().state},y.prototype.isFulfilled=function(){return\"fulfilled\"===this.inspect().state},c.isRejected=function(t){return g(t)&&\"rejected\"===t.inspect().state},y.prototype.isRejected=function(){return\"rejected\"===this.inspect().state};var W=[],H=[],J=[],G=!0;c.resetUnhandledRejections=m,c.getUnhandledReasons=function(){return W.slice()},c.stopUnhandledRejectionTracking=function(){m(),G=!1},m(),c.reject=j,c.fulfill=x,c.master=function(t){return y({isDef:function(){}},function(e,n){return E(t,e,n)},function(){return c(t).inspect()})},c.spread=k,y.prototype.spread=function(t,e){return this.all().then(function(e){return t.apply(void 0,e)},e)},c.async=function(t){return function(){function e(t,e){var u;if(\"undefined\"==typeof StopIteration){try{u=n[t](e)}catch(t){return j(t)}return u.done?c(u.value):d(u.value,i,o)}try{u=n[t](e)}catch(t){return r(t)?c(t.value):j(t)}return d(u,i,o)}var n=t.apply(this,arguments),i=e.bind(e,\"next\"),o=e.bind(e,\"throw\");return i()}},c.spawn=function(t){c.done(c.async(t)())},c.return=function(t){throw new B(t)},c.promised=function(t){return function(){return k([this,A(arguments)],function(e,n){return t.apply(e,n)})}},c.dispatch=E,y.prototype.dispatch=function(t,e){var n=this,r=l();return c.nextTick(function(){n.promiseDispatch(r.resolve,t,e)}),r.promise},c.get=function(t,e){return c(t).dispatch(\"get\",[e])},y.prototype.get=function(t){return this.dispatch(\"get\",[t])},c.set=function(t,e,n){return c(t).dispatch(\"set\",[e,n])},y.prototype.set=function(t,e){return this.dispatch(\"set\",[t,e])},c.del=c.delete=function(t,e){return c(t).dispatch(\"delete\",[e])},y.prototype.del=y.prototype.delete=function(t){return this.dispatch(\"delete\",[t])},c.mapply=c.post=function(t,e,n){return c(t).dispatch(\"post\",[e,n])},y.prototype.mapply=y.prototype.post=function(t,e){return this.dispatch(\"post\",[t,e])},c.send=c.mcall=c.invoke=function(t,e){return c(t).dispatch(\"post\",[e,$(arguments,2)])},y.prototype.send=y.prototype.mcall=y.prototype.invoke=function(t){return this.dispatch(\"post\",[t,$(arguments,1)])},c.fapply=function(t,e){return c(t).dispatch(\"apply\",[void 0,e])},y.prototype.fapply=function(t){return this.dispatch(\"apply\",[void 0,t])},c.try=c.fcall=function(t){return c(t).dispatch(\"apply\",[void 0,$(arguments,1)])},y.prototype.fcall=function(){return this.dispatch(\"apply\",[void 0,$(arguments)])},c.fbind=function(t){var e=c(t),n=$(arguments,1);return function(){return e.dispatch(\"apply\",[this,n.concat($(arguments))])}},y.prototype.fbind=function(){var t=this,e=$(arguments);return function(){return t.dispatch(\"apply\",[this,e.concat($(arguments))])}},c.keys=function(t){return c(t).dispatch(\"keys\",[])},y.prototype.keys=function(){return this.dispatch(\"keys\",[])},c.all=A,y.prototype.all=function(){return A(this)},c.any=S,y.prototype.any=function(){return S(this)},c.allResolved=function(t,e,n){return function(){return\"undefined\"!=typeof console&&\"function\"==typeof console.warn&&console.warn(e+\" is deprecated, use \"+n+\" instead.\",new Error(\"\").stack),t.apply(t,arguments)}}(I,\"allResolved\",\"allSettled\"),y.prototype.allResolved=function(){return I(this)},c.allSettled=function(t){return c(t).allSettled()},y.prototype.allSettled=function(){return this.then(function(t){return A(D(t,function(t){function e(){return t.inspect()}return(t=c(t)).then(e,e)}))})},c.fail=c.catch=function(t,e){return c(t).then(void 0,e)},y.prototype.fail=y.prototype.catch=function(t){return this.then(void 0,t)},c.progress=function(t,e){return c(t).then(void 0,void 0,e)},y.prototype.progress=function(t){return this.then(void 0,void 0,t)},c.fin=c.finally=function(t,e){return c(t).finally(e)},y.prototype.fin=y.prototype.finally=function(t){if(!t||\"function\"!=typeof t.apply)throw new Error(\"Q can't apply finally callback\");return t=c(t),this.then(function(e){return t.fcall().then(function(){return e})},function(e){return t.fcall().then(function(){throw e})})},c.done=function(t,e,n,r){return c(t).done(e,n,r)},y.prototype.done=function(e,n,r){var o=function(t){c.nextTick(function(){if(i(t,u),!c.onerror)throw t;c.onerror(t)})},u=e||n||r?this.then(e,n,r):this;\"object\"==typeof t&&t&&t.domain&&(o=t.domain.bind(o)),u.then(void 0,o)},c.timeout=function(t,e,n){return c(t).timeout(e,n)},y.prototype.timeout=function(t,e){var n=l(),r=setTimeout(function(){e&&\"string\"!=typeof e||((e=new Error(e||\"Timed out after \"+t+\" ms\")).code=\"ETIMEDOUT\"),n.reject(e)},t);return this.then(function(t){clearTimeout(r),n.resolve(t)},function(t){clearTimeout(r),n.reject(t)},n.notify),n.promise},c.delay=function(t,e){return void 0===e&&(e=t,t=void 0),c(t).delay(e)},y.prototype.delay=function(t){return this.then(function(e){var n=l();return setTimeout(function(){n.resolve(e)},t),n.promise})},c.nfapply=function(t,e){return c(t).nfapply(e)},y.prototype.nfapply=function(t){var e=l(),n=$(t);return n.push(e.makeNodeResolver()),this.fapply(n).fail(e.reject),e.promise},c.nfcall=function(t){var e=$(arguments,1);return c(t).nfapply(e)},y.prototype.nfcall=function(){var t=$(arguments),e=l();return t.push(e.makeNodeResolver()),this.fapply(t).fail(e.reject),e.promise},c.nfbind=c.denodeify=function(t){if(void 0===t)throw new Error(\"Q can't wrap an undefined function\");var e=$(arguments,1);return function(){var n=e.concat($(arguments)),r=l();return n.push(r.makeNodeResolver()),c(t).fapply(n).fail(r.reject),r.promise}},y.prototype.nfbind=y.prototype.denodeify=function(){var t=$(arguments);return t.unshift(this),c.denodeify.apply(void 0,t)},c.nbind=function(t,e){var n=$(arguments,2);return function(){var r=n.concat($(arguments)),i=l();return r.push(i.makeNodeResolver()),c(function(){return t.apply(e,arguments)}).fapply(r).fail(i.reject),i.promise}},y.prototype.nbind=function(){var t=$(arguments,0);return t.unshift(this),c.nbind.apply(void 0,t)},c.nmapply=c.npost=function(t,e,n){return c(t).npost(e,n)},y.prototype.nmapply=y.prototype.npost=function(t,e){var n=$(e||[]),r=l();return n.push(r.makeNodeResolver()),this.dispatch(\"post\",[t,n]).fail(r.reject),r.promise},c.nsend=c.nmcall=c.ninvoke=function(t,e){var n=$(arguments,2),r=l();return n.push(r.makeNodeResolver()),c(t).dispatch(\"post\",[e,n]).fail(r.reject),r.promise},y.prototype.nsend=y.prototype.nmcall=y.prototype.ninvoke=function(t){var e=$(arguments,1),n=l();return e.push(n.makeNodeResolver()),this.dispatch(\"post\",[t,e]).fail(n.reject),n.promise},c.nodeify=function(t,e){return c(t).nodeify(e)},y.prototype.nodeify=function(t){if(!t)return this;this.then(function(e){c.nextTick(function(){t(null,e)})},function(e){c.nextTick(function(){t(e)})})},c.noConflict=function(){throw new Error(\"Q.noConflict only works when Q is used as a global\")};var X=f();return c})}).call(this,t(\"_process\"))},{_process:95}],97:[function(t,e,n){\"use strict\";e.exports=2147483647},{}],98:[function(t,e,n){\"use strict\";var r=t(\"es5-ext/number/to-pos-integer\"),i=t(\"./max-timeout\");e.exports=function(t){if((t=r(t))>i)throw new TypeError(t+\" exceeds maximum possible timeout\");return t}},{\"./max-timeout\":97,\"es5-ext/number/to-pos-integer\":44}]},{},[8])(8)});\n"
			},
			{
				"name": "MathDecimalAdjustment.js",
				"source": "// MathDecimalAdjustment.js\n// Closure\n(function() {\n  /**\n   * Decimal adjustment of a number.\n   *\n   * @param {String}  type  The type of adjustment.\n   * @param {Number}  value The number.\n   * @param {Integer} exp   The exponent (the 10 logarithm of the adjustment base).\n   * @returns {Number} The adjusted value.\n   */\n  function decimalAdjust(type, value, exp) {\n    // If the exp is undefined or zero...\n    if (typeof exp === 'undefined' || +exp === 0) {\n      return Math[type](value);\n    }\n    value = +value;\n    exp = +exp;\n    // If the value is not a number or the exp is not an integer...\n    if (value === null || isNaN(value) || !(typeof exp === 'number' && exp % 1 === 0)) {\n      return NaN;\n    }\n    // Shift\n    value = value.toString().split('e');\n    value = Math[type](+(value[0] + 'e' + (value[1] ? (+value[1] - exp) : -exp)));\n    // Shift back\n    value = value.toString().split('e');\n    return +(value[0] + 'e' + (value[1] ? (+value[1] + exp) : exp));\n  }\n\n  // Decimal round\n  if (!Math.round10) {\n    Math.round10 = function(value, exp) {\n      return decimalAdjust('round', value, exp);\n    };\n  }\n  // Decimal floor\n  if (!Math.floor10) {\n    Math.floor10 = function(value, exp) {\n      return decimalAdjust('floor', value, exp);\n    };\n  }\n  // Decimal ceil\n  if (!Math.ceil10) {\n    Math.ceil10 = function(value, exp) {\n      return decimalAdjust('ceil', value, exp);\n    };\n  }\n})();\n/*\n//  Round\n    Math.round10(55.55, -1);   // 55.6\n    Math.round10(55.549, -1);  // 55.5\n    Math.round10(55, 1);       // 60\n    Math.round10(54.9, 1);     // 50\n    Math.round10(-55.55, -1);  // -55.5 -- round works towards +8 when in-between two values\n    Math.round10(-55.551, -1); // -55.6\n    Math.round10(-55, 1);      // -50 -- round works towards +8 when in-between two values\n    Math.round10(-55.1, 1);    // -60\n    Math.round10(1.005, -2);   // 1.01 -- compare this with Math.round(1.005*100)/100 above\n    Math.round10(-1.005, -2);  // -1.0 -- round works towards +8 when exactly in-between two values\n    // Floor\n    Math.floor10(55.59, -1);   // 55.5\n    Math.floor10(59, 1);       // 50\n    Math.floor10(-55.51, -1);  // -55.6 -- floor is always lower than or equal to floored number: -55.6 < -55.51\n    Math.floor10(-51, 1);      // -60 -- ditto\n    // Ceil\n    Math.ceil10(55.51, -1);    // 55.6\n    Math.ceil10(51, 1);        // 60\n    Math.ceil10(-55.59, -1);   // -55.5 -- ceil is always equal or above ceiled number: -55.5 > -55.59\n    Math.ceil10(-59, 1);       // -59 -- ditto\n*/\n"
			},
			{
				"name": "shader.js",
				"source": "//  shader.js\n\nvertexShader = [\n\n\t\"attribute vec4 tangent;\",\n\n\t\"uniform float time;\",\n\t\"uniform vec2 repeat;\",\n\t\"uniform float useNormal;\",\n\t\"uniform float useRim;\",\n\n\t\"varying vec2 vUv;\",\n\t\"varying vec3 vTangent;\",\n\t\"varying vec3 vBinormal;\",\n\t\"varying vec3 vNormal;\",\n\t\"varying vec3 vEye;\",\n\t\"varying vec3 vU;\",\n\t\"varying vec2 vN;\",\n\n\t\"void main() {\",\n\n\t\"vU = normalize( vec3( modelViewMatrix * vec4( position, 1.0 ) ) );\",\n\n\t\"if( useNormal == 0. ) {\",\n\t\"vec3 n = normalize( normalMatrix * normal );\",\n\t\"vec3 r = reflect( vU, n );\",\n\t\"float m = 2.0 * sqrt( r.x * r.x + r.y * r.y + ( r.z + 1.0 ) * ( r.z+1.0 ) );\",\n\t\"vN = vec2( r.x / m + 0.5,  r.y / m + 0.5 );\",\n\t\"} else {\",\n\t\"vN = vec2( 0. );\",\n\t\"}\",\n\n\t\"vUv = repeat * uv;\",\n\t\"gl_Position = projectionMatrix * modelViewMatrix * vec4( position, 1.0 );\",\n\n\t\"vNormal = normalize( normalMatrix * normal );\",\n\t\"if( useNormal == 1. ) {\",\n\t\"vTangent = normalize( normalMatrix * tangent.xyz );\",\n\t\"vBinormal = normalize( cross( vNormal, vTangent ) * tangent.w );\",\n\t\"} else {\",\n\t\"vTangent = vec3( 0. );\",\n\t\"vBinormal = vec3( 0. );\",\n\t\"}\",\n\n\t\"if( useRim > 0. ) {\",\n\t\"vEye = ( modelViewMatrix * vec4( position, 1.0 ) ).xyz;\",\n\t\"} else {\",\n\t\"vEye = vec3( 0. );\",\n\t\"}\",\n\t\"}\"\n].join(\" \");\n\nfragmentShader = [\n\n\t\"uniform float time;\",\n\t\"uniform float bump;\",\n\t\"uniform sampler2D tNormal;\",\n\t\"uniform sampler2D tMatCap;\",\n\t\"uniform float noise;\",\n\t\"uniform float useNormal;\",\n\t\"uniform float useRim;\",\n\t\"uniform float rimPower;\",\n\t\"uniform float useScreen;\",\n\t\"uniform float normalScale;\",\n\t\"uniform float normalRepeat;\",\n\n\t\"varying vec2 vUv;\",\n\t\"varying vec3 vTangent;\",\n\t\"varying vec3 vBinormal;\",\n\t\"varying vec3 vNormal;\",\n\t\"varying vec3 vEye;\",\n\t\"varying vec3 vU;\",\n\t\"varying vec2 vN;\",\n\n\t\"float random(vec3 scale,float seed){return fract(sin(dot(gl_FragCoord.xyz+seed,scale))*43758.5453+seed);}\",\n\n\t\"void main() {\",\n\n\t\"vec3 finalNormal = vNormal;\",\n\t\"vec2 calculatedNormal = vN;\",\n\n\t\"if( useNormal == 1. ) {\",\n\t\"vec3 normalTex = texture2D( tNormal, vUv * normalRepeat ).xyz * 2.0 - 1.0;\",\n\t\"normalTex.xy *= normalScale;\",\n\t\"normalTex.y *= -1.;\",\n\t\"normalTex = normalize( normalTex );\",\n\t\"mat3 tsb = mat3( normalize( vTangent ), normalize( vBinormal ), normalize( vNormal ) );\",\n\t\"finalNormal = tsb * normalTex;\",\n\n\t\"vec3 r = reflect( vU, normalize( finalNormal ) );\",\n\t\"float m = 2.0 * sqrt( r.x * r.x + r.y * r.y + ( r.z + 1.0 ) * ( r.z+1.0 ) );\",\n\t\"calculatedNormal = vec2( r.x / m + 0.5,  r.y / m + 0.5 );\",\n\t\"}\",\n\n\t\"vec3 base = texture2D( tMatCap, calculatedNormal ).rgb;\",\n\n\t// rim lighting\n\n\t\"if( useRim > 0. ) {\",\n\t\"float f = rimPower * abs( dot( vNormal, normalize( vEye ) ) );\",\n\t\"f = useRim * ( 1. - smoothstep( 0.0, 1., f ) );\",\n\t\"base += vec3( f );\",\n\t\"}\",\n\n\t// screen blending\n\n\t\"if( useScreen == 1. ) {\",\n\t\"base = vec3( 1. ) - ( vec3( 1. ) - base ) * ( vec3( 1. ) - base );\",\n\t\"}\",\n\n\t// noise \n\n\t\"base += noise * ( .5 - random( vec3( 1. ), length( gl_FragCoord ) ) );\",\n\n\t\"gl_FragColor = vec4( base, 1. );\",\n\t\"}\",\n].join(\"\");\n\nfunction ShaderMaterial(normalMap, matcapMap, callback){\n\treturn new Promise( function(resolve, reject){\n\t\tvar material = new THREE.ShaderMaterial( {\n\t\t\tuniforms: { \n\t\t\t\ttNormal: { type: \"t\", value: normalMap },\n\t\t\t\ttMatCap: { type: \"t\", value: matcapMap },\n\t\t\t\ttime: { type: \"f\", value: 0 },\n\t\t\t\tbump: { type: \"f\", value: 0 },\n\t\t\t\tnoise: { type: \"f\", value: 0.04 },\n\t\t\t\trepeat: { type: \"v2\", value: new THREE.Vector2( 1, 1 ) },\n\t\t\t\tuseNormal: { type: \"f\", value: 0 },\n\t\t\t\tuseRim: { type: \"f\", value: 0 },\n\t\t\t\trimPower: { type: \"f\", value: 0 },\n\t\t\t\tuseScreen: { type: \"f\", value: 0 },\n\t\t\t\tnormalScale: { type: \"f\", value: 1 },\n\t\t\t\tnormalRepeat: { type: \"f\", value: 1 }\n\t\t\t},\n\t\t\tvertexShader: vertexShader,       //  document.getElementById( \"vertexShader\" ).textContent,\n\t\t\tfragmentShader: fragmentShader,   //  document.getElementById( \"fragmentShader\" ).textContent,\n\t\t\tshading: THREE.SmoothShading,\n\t\t\tside: THREE.DoubleSide\n\t\t});\n\n\t\tmaterial.uniforms.tMatCap.value.wrapS = material.uniforms.tMatCap.value.wrapT = THREE.ClampToEdgeWrapping;\n\t\tmaterial.uniforms.tNormal.value.wrapS = material.uniforms.tNormal.value.wrapT = THREE.RepeatWrapping;\n\n\t\tmaterial.uniforms.tMatCap.value.needsUpdate = true;\n\t\tmaterial.uniforms.tNormal.value.needsUpdate = true;\n\n\t\tif ( !!callback ) callback( material );\n\n\t\tresolve( material );\n\t});\n}\n\n"
			},
			{
				"name": "watch.js",
				"source": "/**\n * DEVELOPED BY\n * GIL LOPES BUENO\n * gilbueno.mail@gmail.com\n *\n * WORKS WITH:\n * IE8*, IE 9+, FF 4+, SF 5+, WebKit, CH 7+, OP 12+, BESEN, Rhino 1.7+\n * For IE8 (and other legacy browsers) WatchJS will use dirty checking  \n *\n * FORK:\n * https://github.com/melanke/Watch.JS\n *\n * LICENSE: MIT\n */\n\n\"use strict\";\n(function (factory) {\n    if (typeof exports === 'object') {\n        // Node. Does not work with strict CommonJS, but\n        // only CommonJS-like enviroments that support module.exports,\n        // like Node.\n        module.exports = factory();\n    } else if (typeof define === 'function' && define.amd) {\n        // AMD. Register as an anonymous module.\n        define(factory);\n    } else {\n        // Browser globals\n        window.WatchJS = factory();\n        window.watch = window.WatchJS.watch;\n        window.unwatch = window.WatchJS.unwatch;\n        window.callWatchers = window.WatchJS.callWatchers;\n    }\n}(function () {\n\n    var WatchJS = {\n        noMore: false,        // use WatchJS.suspend(obj) instead\n        useDirtyCheck: false, // use only dirty checking to track changes.\n        preserveExistingSetters: false\n    },\n    lengthsubjects = [];\n    \n    var dirtyChecklist = [];\n    var pendingChanges = []; // used coalesce changes from defineProperty and __defineSetter__\n    \n    var supportDefineProperty = false;\n    try {\n        supportDefineProperty = Object.defineProperty && Object.defineProperty({},'x', {});\n    } catch(ex) {  /* not supported */  }\n\n    var isFunction = function (functionToCheck) {\n        var getType = {};\n        return functionToCheck && getType.toString.call(functionToCheck) == '[object Function]';\n    };\n\n    var isInt = function (x) {\n        return x % 1 === 0;\n    };\n\n    var isArray = function(obj) {\n        return Object.prototype.toString.call(obj) === '[object Array]';\n    };\n\n    var isObject = function(obj) {\n        return {}.toString.apply(obj) === '[object Object]';\n    };\n    \n    var getObjDiff = function(a, b){\n        var aplus = [],\n        bplus = [];\n\n        if(!(typeof a == \"string\") && !(typeof b == \"string\")){\n\n            if (isArray(a) && b) {\n                for (var i=0; i<a.length; i++) {\n                    if (b[i] === undefined) aplus.push(i);\n                }\n            } else {\n                for(var i in a){\n                    if (a.hasOwnProperty(i)) {\n                        if(b && !b.hasOwnProperty(i)) {\n                            aplus.push(i);\n                        }\n                    }\n                }\n            }\n\n            if (isArray(b) && a) {\n                for (var j=0; j<b.length; j++) {\n                    if (a[j] === undefined) bplus.push(j);\n                }\n            } else {\n                for(var j in b){\n                    if (b.hasOwnProperty(j)) {\n                        if(a && !a.hasOwnProperty(j)) {\n                            bplus.push(j);\n                        }\n                    }\n                }\n            }\n        }\n\n        return {\n            added: aplus,\n            removed: bplus\n        }\n    };\n\n    var clone = function(obj){\n\n        if (null == obj || \"object\" != typeof obj) {\n            return obj;\n        }\n\n        var copy = obj.constructor();\n\n        for (var attr in obj) {\n            copy[attr] = obj[attr];\n        }\n\n        return copy;        \n\n    }\n\n    var getExistingSetter = function (obj, propName) {\n        if (WatchJS.preserveExistingSetters) {\n            var existing = Object.getOwnPropertyDescriptor(obj, propName);\n            return existing.set;\n        }\n\n        return undefined;\n    }\n\n    var defineGetAndSet = function (obj, propName, getter, setter) {\n        try {\n            var existingSetter = getExistingSetter(obj, propName);\n            Object.defineProperty(obj, propName, {\n                get: getter,\n                set: function(value) {\n                    setter.call(this, value, true); // coalesce changes\n                    if (existingSetter) {\n                        existingSetter(value);\n                    }\n                },\n                enumerable: true,\n                configurable: true\n            });\n        }\n        catch(e1) {\n            try{\n                Object.prototype.__defineGetter__.call(obj, propName, getter);\n                Object.prototype.__defineSetter__.call(obj, propName, function(value) {\n                    setter.call(this,value,true); // coalesce changes\n                });\n            }\n            catch(e2) {\n                observeDirtyChanges(obj,propName,setter);\n                //throw new Error(\"watchJS error: browser not supported :/\")\n            }\n        }\n\n    };\n\n    var defineProp = function (obj, propName, value) {\n        try {\n            Object.defineProperty(obj, propName, {\n                enumerable: false,\n                configurable: true,\n                writable: false,\n                value: value\n            });\n        } catch(error) {\n            obj[propName] = value;\n        }\n    };\n\n    var observeDirtyChanges = function(obj,propName,setter) {\n        dirtyChecklist[dirtyChecklist.length] = {\n            prop:       propName,\n            object:     obj,\n            orig:       clone(obj[propName]),\n            callback:   setter\n        }        \n    }\n    \n    var watch = function () {\n\n        if (isFunction(arguments[1])) {\n            watchAll.apply(this, arguments);\n        } else if (isArray(arguments[1])) {\n            watchMany.apply(this, arguments);\n        } else {\n            watchOne.apply(this, arguments);\n        }\n\n    };\n\n\n    var watchAll = function (obj, watcher, level, addNRemove) {\n\n        if ((typeof obj == \"string\") || (!(obj instanceof Object) && !isArray(obj))) { //accepts only objects and array (not string)\n            return;\n        }\n\n        if(isArray(obj)) {\n            defineWatcher(obj, \"__watchall__\", watcher, level); // watch all changes on the array\n            if (level===undefined||level > 0) {\n                for (var prop = 0; prop < obj.length; prop++) { // watch objects in array\n                   watchAll(obj[prop],watcher,level, addNRemove);\n                }\n            }\n        } \n        else {\n            var prop,props = [];\n            for (prop in obj) { //for each attribute if obj is an object\n                if (prop == \"$val\" || (!supportDefineProperty && prop === 'watchers')) {\n                    continue;\n                }\n\n                if (Object.prototype.hasOwnProperty.call(obj, prop)) {\n                    props.push(prop); //put in the props\n                }\n            }\n            watchMany(obj, props, watcher, level, addNRemove); //watch all items of the props\n        }\n\n\n        if (addNRemove) {\n            pushToLengthSubjects(obj, \"$$watchlengthsubjectroot\", watcher, level);\n        }\n    };\n\n\n    var watchMany = function (obj, props, watcher, level, addNRemove) {\n\n        if ((typeof obj == \"string\") || (!(obj instanceof Object) && !isArray(obj))) { //accepts only objects and array (not string)\n            return;\n        }\n\n        for (var i=0; i<props.length; i++) { //watch each property\n            var prop = props[i];\n            watchOne(obj, prop, watcher, level, addNRemove);\n        }\n\n    };\n\n    var watchOne = function (obj, prop, watcher, level, addNRemove) {\n        if ((typeof obj == \"string\") || (!(obj instanceof Object) && !isArray(obj))) { //accepts only objects and array (not string)\n            return;\n        }\n\n        if(isFunction(obj[prop])) { //dont watch if it is a function\n            return;\n        }\n        if(obj[prop] != null && (level === undefined || level > 0)){\n            watchAll(obj[prop], watcher, level!==undefined? level-1 : level); //recursively watch all attributes of this\n        }\n\n        defineWatcher(obj, prop, watcher, level);\n\n        if(addNRemove && (level === undefined || level > 0)){\n            pushToLengthSubjects(obj, prop, watcher, level);\n        }\n\n    };\n\n    var unwatch = function () {\n\n        if (isFunction(arguments[1])) {\n            unwatchAll.apply(this, arguments);\n        } else if (isArray(arguments[1])) {\n            unwatchMany.apply(this, arguments);\n        } else {\n            unwatchOne.apply(this, arguments);\n        }\n\n    };\n\n    var unwatchAll = function (obj, watcher) {\n\n        if (obj instanceof String || (!(obj instanceof Object) && !isArray(obj))) { //accepts only objects and array (not string)\n            return;\n        }\n\n        if (isArray(obj)) {\n            var props = ['__watchall__'];\n            for (var prop = 0; prop < obj.length; prop++) { //for each item if obj is an array\n                props.push(prop); //put in the props\n            }\n            unwatchMany(obj, props, watcher); //watch all itens of the props\n        } else {\n            var unwatchPropsInObject = function (obj2) {\n                var props = [];\n                for (var prop2 in obj2) { //for each attribute if obj is an object\n                    if (obj2.hasOwnProperty(prop2)) {\n                        if (obj2[prop2] instanceof Object) {\n                            unwatchPropsInObject(obj2[prop2]); //recurs into object props\n                        } else {\n                            props.push(prop2); //put in the props\n                        }\n                    }\n                }\n                unwatchMany(obj2, props, watcher); //unwatch all of the props\n            };\n            unwatchPropsInObject(obj);\n        }\n    };\n\n\n    var unwatchMany = function (obj, props, watcher) {\n\n        for (var prop2 in props) { //watch each attribute of \"props\" if is an object\n            if (props.hasOwnProperty(prop2)) {\n                unwatchOne(obj, props[prop2], watcher);\n            }\n        }\n    };\n\n    var timeouts = [],\n        timerID = null;\n    function clearTimerID() {\n        timerID = null;\n        for(var i=0; i< timeouts.length; i++) {\n            timeouts[i]();\n        }\n        timeouts.length = 0;\n    }\n    var getTimerID= function () {\n        if (!timerID)  {\n            timerID = setTimeout(clearTimerID);\n        }\n        return timerID;\n    }\n    var registerTimeout = function(fn) { // register function to be called on timeout\n        if (timerID==null) getTimerID();\n        timeouts[timeouts.length] = fn;\n    }\n    \n    // Track changes made to an array, object or an object's property \n    // and invoke callback with a single change object containing type, value, oldvalue and array splices\n    // Syntax: \n    //      trackChange(obj, callback, recursive, addNRemove)\n    //      trackChange(obj, prop, callback, recursive, addNRemove)\n    var trackChange = function() {\n        var fn = (isFunction(arguments[2])) ? trackProperty : trackObject ;\n        fn.apply(this,arguments);\n    }\n\n    // track changes made to an object and invoke callback with a single change object containing type, value and array splices\n    var trackObject= function(obj, callback, recursive, addNRemove) {\n        var change = null,lastTimerID = -1;\n        var isArr = isArray(obj);\n        var level,fn = function(prop, action, newValue, oldValue) {\n            var timerID = getTimerID();\n            if (lastTimerID!==timerID) { // check if timer has changed since last update\n                lastTimerID = timerID;\n                change = {\n                    type: 'update'\n                }\n                change['value'] = obj;\n                change['splices'] = null;\n                registerTimeout(function() {\n                    callback.call(this,change);\n                    change = null;\n                });\n            }\n            // create splices for array changes\n            if (isArr && obj === this && change !== null)  {                \n                if (action==='pop'||action==='shift') {\n                    newValue = [];\n                    oldValue = [oldValue];\n                }\n                else if (action==='push'||action==='unshift') {\n                    newValue = [newValue];\n                    oldValue = [];\n                }\n                else if (action!=='splice') { \n                    return; // return here - for reverse and sort operations we don't need to return splices. a simple update will do\n                }\n                if (!change.splices) change.splices = [];\n                change.splices[change.splices.length] = {\n                    index: prop,\n                    deleteCount: oldValue ? oldValue.length : 0,\n                    addedCount: newValue ? newValue.length : 0,\n                    added: newValue,\n                    deleted: oldValue\n                };\n            }\n\n        }  \n        level = (recursive==true) ? undefined : 0;        \n        watchAll(obj,fn, level, addNRemove);\n    }\n    \n    // track changes made to the property of an object and invoke callback with a single change object containing type, value, oldvalue and splices\n    var trackProperty = function(obj,prop,callback,recursive, addNRemove) { \n        if (obj && prop) {\n            watchOne(obj,prop,function(prop, action, newvalue, oldvalue) {\n                var change = {\n                    type: 'update'\n                }\n                change['value'] = newvalue;\n                change['oldvalue'] = oldvalue;\n                if (recursive && isObject(newvalue)||isArray(newvalue)) {\n                    trackObject(newvalue,callback,recursive, addNRemove);\n                }               \n                callback.call(this,change);\n            },0)\n            \n            if (recursive && isObject(obj[prop])||isArray(obj[prop])) {\n                trackObject(obj[prop],callback,recursive, addNRemove);\n            }                           \n        }\n    }\n    \n    \n    var defineWatcher = function (obj, prop, watcher, level) {\n        var newWatcher = false;\n        var isArr = isArray(obj);\n        \n        if (!obj.watchers) {\n            defineProp(obj, \"watchers\", {});\n            if (isArr) {\n                // watch array functions\n                watchFunctions(obj, function(index,action,newValue, oldValue) {\n                    addPendingChange(obj, index, action,newValue, oldValue);\n                    if (level !== 0 && newValue && (isObject(newValue) || isArray(newValue))) {\n                        var i,n, ln, wAll, watchList = obj.watchers[prop];\n                        if ((wAll = obj.watchers['__watchall__'])) {\n                            watchList = watchList ? watchList.concat(wAll) : wAll;\n                        }\n                        ln = watchList ?  watchList.length : 0;\n                        for (i = 0; i<ln; i++) {\n                            if (action!=='splice') {\n                                watchAll(newValue, watchList[i], (level===undefined)?level:level-1);\n                            }\n                            else {\n                                // watch spliced values\n                                for(n=0; n < newValue.length; n++) {\n                                    watchAll(newValue[n], watchList[i], (level===undefined)?level:level-1);\n                                }\n                            }\n                        }\n                    }\n                });\n            }\n        }\n\n        if (!obj.watchers[prop]) {\n            obj.watchers[prop] = [];\n            if (!isArr) newWatcher = true;\n        }\n\n        for (var i=0; i<obj.watchers[prop].length; i++) {\n            if(obj.watchers[prop][i] === watcher){\n                return;\n            }\n        }\n\n        obj.watchers[prop].push(watcher); //add the new watcher to the watchers array\n\n        if (newWatcher) {\n            var val = obj[prop];            \n            var getter = function () {\n                return val;                        \n            };\n\n            var setter = function (newval, delayWatcher) {\n                var oldval = val;\n                val = newval;                \n                if (level !== 0 \n                    && obj[prop] && (isObject(obj[prop]) || isArray(obj[prop]))\n                    && !obj[prop].watchers) {\n                    // watch sub properties\n                    var i,ln = obj.watchers[prop].length; \n                    for(i=0; i<ln; i++) {\n                        watchAll(obj[prop], obj.watchers[prop][i], (level===undefined)?level:level-1);\n                    }\n                }\n\n                //watchFunctions(obj, prop);\n                \n                if (isSuspended(obj, prop)) {\n                    resume(obj, prop);\n                    return;\n                }\n\n                if (!WatchJS.noMore){ // this does not work with Object.observe\n                    //if (JSON.stringify(oldval) !== JSON.stringify(newval)) {\n                    if (oldval !== newval) {\n                        if (!delayWatcher) {\n                            callWatchers(obj, prop, \"set\", newval, oldval);\n                        }\n                        else {\n                            addPendingChange(obj, prop, \"set\", newval, oldval);\n                        }\n                        WatchJS.noMore = false;\n                    }\n                }\n            };\n\n            if (WatchJS.useDirtyCheck) {\n                observeDirtyChanges(obj,prop,setter);\n            }\n            else {\n                defineGetAndSet(obj, prop, getter, setter);\n            }\n        }\n\n    };\n\n    var callWatchers = function (obj, prop, action, newval, oldval) {\n        if (prop !== undefined) {\n            var ln, wl, watchList = obj.watchers[prop];\n            if ((wl = obj.watchers['__watchall__'])) {\n                watchList = watchList ? watchList.concat(wl) : wl;\n            }\n            ln = watchList ? watchList.length : 0;\n            for (var wr=0; wr< ln; wr++) {\n                watchList[wr].call(obj, prop, action, newval, oldval);\n            }\n        } else {\n            for (var prop in obj) {//call all\n                if (obj.hasOwnProperty(prop)) {\n                    callWatchers(obj, prop, action, newval, oldval);\n                }\n            }\n        }\n    };\n\n    var methodNames = ['pop', 'push', 'reverse', 'shift', 'sort', 'slice', 'unshift', 'splice'];\n    var defineArrayMethodWatcher = function (obj, original, methodName, callback) {\n        defineProp(obj, methodName, function () {\n            var index = 0;\n            var i,newValue, oldValue, response;                        \n            // get values before splicing array \n            if (methodName === 'splice') {\n               var start = arguments[0];\n               var end = start + arguments[1];\n               oldValue = obj.slice(start,end);\n               newValue = [];\n               for(i=2;i<arguments.length;i++) {\n                   newValue[i-2] = arguments[i];\n               }\n               index = start;\n            } \n            else {\n                newValue = arguments.length > 0 ? arguments[0] : undefined;\n            } \n\n            response = original.apply(obj, arguments);\n            if (methodName !== 'slice') {\n                if (methodName === 'pop') {\n                    oldValue = response;\n                    index = obj.length;\n                }\n                else if (methodName === 'push') {\n                    index = obj.length-1;\n                }\n                else if (methodName === 'shift') {\n                    oldValue = response;\n                }\n                else if (methodName !== 'unshift' && newValue===undefined) {\n                    newValue = response;\n                }\n                callback.call(obj, index, methodName,newValue, oldValue)\n            }\n            return response;\n        });\n    };\n\n    var watchFunctions = function(obj, callback) {\n\n        if (!isFunction(callback) || !obj || (obj instanceof String) || (!isArray(obj))) {\n            return;\n        }\n\n        for (var i = methodNames.length, methodName; i--;) {\n            methodName = methodNames[i];\n            defineArrayMethodWatcher(obj, obj[methodName], methodName, callback);\n        }\n\n    };\n\n    var unwatchOne = function (obj, prop, watcher) {\n        if (prop) {\n            if (obj.watchers && obj.watchers[prop]) {\n                if (watcher === undefined) {\n                    delete obj.watchers[prop]; // remove all property watchers\n                }\n                else {\n                    for (var i = 0; i < obj.watchers[prop].length; i++) {\n                        var w = obj.watchers[prop][i];\n                        if (w == watcher) {\n                            obj.watchers[prop].splice(i, 1);\n                        }\n                    }\n                }\n            }\n        } else {\n            delete obj.watchers;\n        }\n\n        removeFromLengthSubjects(obj, prop, watcher);\n        removeFromDirtyChecklist(obj, prop);\n    };\n    \n    // suspend watchers until next update cycle\n    var suspend = function(obj, prop) {\n        if (obj.watchers) {\n            var name = '__wjs_suspend__'+(prop!==undefined ? prop : '');\n            obj.watchers[name] = true;\n        }\n    }\n    \n    var isSuspended = function(obj, prop) {\n        return obj.watchers \n               && (obj.watchers['__wjs_suspend__'] || \n                   obj.watchers['__wjs_suspend__'+prop]);\n    }\n    \n    // resumes preivously suspended watchers\n    var resume = function(obj, prop) {\n        registerTimeout(function() {\n            delete obj.watchers['__wjs_suspend__'];\n            delete obj.watchers['__wjs_suspend__'+prop];\n        })\n    }\n\n    var pendingTimerID = null;\n    var addPendingChange = function(obj,prop, mode, newval, oldval) {\n        pendingChanges[pendingChanges.length] = {\n            obj:obj,\n            prop: prop,\n            mode: mode,\n            newval: newval,\n            oldval: oldval\n        };\n        if (pendingTimerID===null) {\n            pendingTimerID = setTimeout(applyPendingChanges);\n        }\n    };\n    \n    \n    var applyPendingChanges = function()  {\n        // apply pending changes\n        var change = null;\n        pendingTimerID = null;\n        for(var i=0;i < pendingChanges.length;i++) {\n            change = pendingChanges[i];\n            callWatchers(change.obj, change.prop, change.mode, change.newval, change.oldval);\n        }\n        if (change) {\n            pendingChanges = [];\n            change = null;\n        }        \n    }\n\n    var loop = function(){\n\n        // check for new or deleted props\n        for(var i=0; i<lengthsubjects.length; i++) {\n\n            var subj = lengthsubjects[i];\n\n            if (subj.prop === \"$$watchlengthsubjectroot\") {\n\n                var difference = getObjDiff(subj.obj, subj.actual);\n\n                if(difference.added.length || difference.removed.length){\n                    if(difference.added.length){\n                        watchMany(subj.obj, difference.added, subj.watcher, subj.level - 1, true);\n                    }\n\n                    subj.watcher.call(subj.obj, \"root\", \"differentattr\", difference, subj.actual);\n                }\n                subj.actual = clone(subj.obj);\n\n\n            } else {\n\n                var difference = getObjDiff(subj.obj[subj.prop], subj.actual);\n\n                if(difference.added.length || difference.removed.length){\n                    if(difference.added.length){\n                        for (var j=0; j<subj.obj.watchers[subj.prop].length; j++) {\n                            watchMany(subj.obj[subj.prop], difference.added, subj.obj.watchers[subj.prop][j], subj.level - 1, true);\n                        }\n                    }\n\n                    callWatchers(subj.obj, subj.prop, \"differentattr\", difference, subj.actual);\n                }\n\n                subj.actual = clone(subj.obj[subj.prop]);\n\n            }\n\n        }\n        \n        // start dirty check\n        var n, value;\n        if (dirtyChecklist.length > 0) {\n            for (var i = 0; i < dirtyChecklist.length; i++) {\n                n = dirtyChecklist[i];\n                value = n.object[n.prop];\n                if (!compareValues(n.orig, value)) {\n                    n.orig = clone(value);\n                    n.callback(value);\n                }\n            }\n        }\n\n    };\n\n    var compareValues =  function(a,b) {\n        var i, state = true;\n        if (a!==b)  {\n            if (isObject(a)) {\n                for(i in a) {\n                    if (!supportDefineProperty && i==='watchers') continue;\n                    if (a[i]!==b[i]) {\n                        state = false;\n                        break;\n                    };\n                }\n            }\n            else {\n                state = false;\n            }\n        }\n        return state;\n    }\n    \n    var pushToLengthSubjects = function(obj, prop, watcher, level){\n\n        var actual;\n\n        if (prop === \"$$watchlengthsubjectroot\") {\n            actual =  clone(obj);\n        } else {\n            actual = clone(obj[prop]);\n        }\n\n        lengthsubjects.push({\n            obj: obj,\n            prop: prop,\n            actual: actual,\n            watcher: watcher,\n            level: level\n        });\n    };\n\n    var removeFromLengthSubjects = function(obj, prop, watcher){\n        for (var i=0; i<lengthsubjects.length; i++) {\n            var subj = lengthsubjects[i];\n\n            if (subj.obj == obj) {\n                if (!prop || subj.prop == prop) {\n                    if (!watcher || subj.watcher == watcher) {\n                        // if we splice off one item at position i\n                        // we need to decrement i as the array is one item shorter\n                        // so when we increment i in the loop statement we\n                        // will land at the correct index.\n                        // if it's not decremented, you won't delete all length subjects\n                        lengthsubjects.splice(i--, 1);\n                    }\n                }\n            }\n        }\n\n    };\n    \n    var removeFromDirtyChecklist = function(obj, prop){\n        var notInUse;\n        for (var i=0; i<dirtyChecklist.length; i++) {\n            var n = dirtyChecklist[i];\n            var watchers = n.object.watchers;\n            notInUse = (\n                n.object == obj \n                && (!prop || n.prop == prop)\n                && watchers\n                && (!prop || !watchers[prop] || watchers[prop].length == 0 )\n            );\n            if (notInUse)  {\n                // we use the same syntax as in removeFromLengthSubjects\n                dirtyChecklist.splice(i--, 1);\n            }\n        }\n\n    };    \n\n    setInterval(loop, 50);\n\n    WatchJS.watch = watch;\n    WatchJS.unwatch = unwatch;\n    WatchJS.callWatchers = callWatchers;\n    WatchJS.suspend = suspend; // suspend watchers    \n    WatchJS.onChange = trackChange;  // track changes made to object or  it's property and return a single change object\n\n    return WatchJS;\n\n}));\n"
			}],
		"BCC3A53B-07C6-4FC3-B308-8F4A3E94469D": [
			{
				"name": "index.js",
				"source": "//\tboilerplate (v1.1)\n\ndebugMode = true;\ndebugMode && console.log( this );\n\ncontainer = player.dom;\nclock = new THREE.Clock();\nmouse = new THREE.Vector2();\n\nvar fontPath = \"/three/fonts/helvetiker_regular.typeface.json\";\n\nvar rendererHalfWidth  = container.offsetWidth * 0.5;\nvar rendererHalfHeight = container.offsetHeight * 0.5;\n\nfunction init(){\n\n\twindow.addEventListener( \"resize\", updateHalfWidthHeight )\n\n}\n\nfunction updateHalfWidthHeight() {\n\trendererHalfWidth  = container.offsetWidth * 0.5;\n\trendererHalfHeight = container.offsetHeight * 0.5;\n}\n\n//\tonMouseMove.\n\nfunction mousemove( event ) {\n\tmouse.x = ( event.clientX - rendererHalfWidth );\n\tmouse.y = ( event.clientY - rendererHalfHeight );\n}\n\n//\tUpdate.\nfunction update( event ){\n\t//\tvar time = clock.getElapsedTime();\n}\n\n//\tDebug.\n\nfunction stop( event ){\n\twindow.removeEventListener( \"resize\", updateHalfWidthHeight )\n}\n\n//\tHelpers.\n"
			},
			{
				"name": "background.js",
				"source": "//  Background.\n\nsceneBackground([\n\t\"https://i.imgur.com/v6bjQLb.jpg\", // \"posx.jpg\",\n\t\"https://i.imgur.com/lwrlr6P.jpg\", // \"negx.jpg\", \n\t\"https://i.imgur.com/kKUKBJg.jpg\", // \"posy.jpg\", \n\t\"https://i.imgur.com/N0oZlJR.jpg\", // \"negy.jpg\", \n\t\"https://i.imgur.com/x9q8z0K.jpg\", // \"posz.jpg\", \n\t\"https://i.imgur.com/HYcK7Ii.jpg\", // \"negz.jpg\"\n]);\n\nfunction sceneBackground( urls ){\n\tif (!scene || Number(THREE.REVISION) < 78) return;\n\tvar loader = new THREE.CubeTextureLoader();\n\tloader.load( urls, function(texture){\n\t\tscene.background = texture;\n\t\tscene.background.needsUpdate = true;\n\t});\n}\n"
			},
			{
				"name": "groundHelper.js",
				"source": "groundHelper = newGroundHelper(1000, 10);  \n//\taxisCustomHelper = customAxisHelper(5200);\n//\taxisOriginHelper = originAxisHelper(1200);\n\nfunction newGroundHelper(xz, step){\n\tif (!xz) xz = 1000;\n\tif (!step) step = 10;\n\tvar grid = new THREE.GridHelper( xz, step, 0x444444, 0x444444 );\n\tgrid.name = \"GRID\"\n\tgrid.position.y = 0;\n\tscene.add( grid );\n\treturn grid;\n}\n"
			},
			{
				"name": "sunlight.js",
				"source": "//  Shadow Light.\n\nsunLight = new THREE.DirectionalLight( 0xdfebff, 0.75 );\nsunLight.position.set( 0, 500, 300 );\nsunLight.position.multiplyScalar( 1.5 );\nsunLight.castShadow = true;\nsunLight.shadow.mapSize.width  = Math.pow(2, 10); // 2048;\nsunLight.shadow.mapSize.height = Math.pow(2, 10); // 2048;\n\nvar d = 30;\nsunLight.shadow.camera.left = - d;\nsunLight.shadow.camera.right = d;\nsunLight.shadow.camera.top = d;\nsunLight.shadow.camera.bottom = - d;\nsunLight.shadow.camera.far = 10000;\n\nshadowHelper = new THREE.CameraHelper(sunLight.shadow.camera);\nshadowHelper.visible = false;\n\nscene.add( sunLight, shadowHelper  );\n"
			},
			{
				"name": "",
				"source": ""
			},
			{
				"name": "scene-helpers.js",
				"source": "// sceneHelpers.js\n\nfunction toggleHelperVisible(theHelper){\n\ttheHelper.visible = !theHelper.visible;\n}\n\nfunction directionalLight(hexcolor, x, y, z, intensity){\n\tvar light = new THREE.DirectionalLight( hexcolor );\n\tlight.position.set( x, y, z );\n\tlight.intensity = intensity;\n\treturn light;\n}\n\nfunction convertingFromBufferGeometry( object ){\n\tdebugMode && console.log(\"converting from buffer geometry:\", object);\n\tif( object.children ) {\n\t\tfor( child in object.children ) {\n\t\t\tvar t = Date.now();\n\t\t\tobject.children[child].geometry = new THREE.Geometry().fromBufferGeometry( object.children[child].geometry );\n\t\t\tdebugMode && console.log(child, object.children[child].name, \"time:\", Date.now() - t, \"msec.\");\n\t\t}\n\t}\n}\n\nfunction FpsCamera(fov, near, far){\n\tvar camera = new THREE.PerspectiveCamera( fov, window.innerWidth / window.innerHeight, near, far );\n\tcamera.position.set( 0, 11, -113 );\n\tcamera.rotation.set( 0, 0, 0 );\n\tcamera.name = \"FPS_CAMERA\" ;\n\treturn camera;\n}\n\nfunction FpsCameraControls( camera ){\n\tvar controls = new THREE.FirstPersonControls( camera );\n\tcontrols.movementSpeed = 30;\n\tcontrols.lookSpeed = 0.05;\n\tcontrols.noFly = true;\n\tcontrols.autoForward = false;\n\tcontrols.lookVertical = false;\n\tcontrols.enabled = true;\n\treturn controls;\n}\n\nfunction DirectionalLight(hexcolor, x, y, z, intensity){\n\tvar light = new THREE.DirectionalLight( hexcolor );\n\tlight.position.set( x, y, z );\n\tlight.intensity = intensity;\n\tscene.add( light );\n\treturn light;\n}\n\nfunction DirectionalLightsGroup(hexcolor, x, y, z, intensity){\n\tvar group = new THREE.Group();\n\tscene.add(group);\n\tlight0 = new directionalLight(hexcolor, x, y, z, intensity);\n\tlight1 = new directionalLight(hexcolor, x, y, -z, intensity);\n\tlight2 = new directionalLight(hexcolor, -x, y, -z, intensity);\n\tlight3 = new directionalLight(hexcolor, -x, y, z, intensity);\n\tlight4 = new directionalLight(hexcolor, 0, -y, 0, intensity);\n\tgroup.add( light0, light1, light2, light3, light4 );\n\treturn [light0, light1, light2, light3, light4];\n}\n\nfunction groundHelper(xz, step){\n\tif (!xz) xz = 1000;\n\tif (!step) step = 10;\n\tvar grid = new THREE.GridHelper( xz, step, 0x444444, 0x444444 );\n\tgrid.name = \"GRID\"\n\tgrid.position.y = 0;\n\tscene.add( grid );\n\treturn grid;\n}\n\nfunction SkeletonHelper(target){\n\tvar helper = new THREE.SkeletonHelper(target);\n\thelper.material.linewidth = 5;\n\thelper.name = \"ARMATURE_HELPER\";\n\thelper.visible = true;\n\treturn helper;\n}\n\nfunction Skybox( cubemap ) {\n\tscene.background = new THREE.CubeTexture( cubemap );\n\tscene.background.needsUpdate = true;\n}\n\nfunction Skydome( path ){\n\tvar loader = new THREE.TextureLoader();\n\tvar skydomeGmt = new THREE.SphereGeometry( 2000, 64, 32 );\n\tvar skydomeTxr = loader.load( path );\n\tvar skydomeMtl = new THREE.MeshBasicMaterial({\n\t\tmap: skydomeTxr,\n\t\tside: THREE.DoubleSide\n\t});\n\tvar skydome = new THREE.Mesh( skydomeGmt, skydomeMtl );\n\tskydome.scale.y = 0.5;\n\tskydome.name = \"SKYDOME\";\n\tscene.add(skydome);\n\treturn skydome;\n}\n\nfunction customAxisHelper( distance ){\n\tvar group = new THREE.Group();\n\tscene.add(group);\n\n\t//  Lines.\n\tvar geometryAxisXpos = new THREE.Geometry();\n\tvar geometryAxisXneg = new THREE.Geometry();\n\tvar geometryAxisYpos = new THREE.Geometry();\n\tvar geometryAxisYneg = new THREE.Geometry();\n\tvar geometryAxisZpos = new THREE.Geometry();\n\tvar geometryAxisZneg = new THREE.Geometry();\n\n\tvar materialAxisXpos = new THREE.LineBasicMaterial( {color: 0xff0000} );\n\tvar materialAxisXneg = new THREE.LineBasicMaterial( {color: 0xff0000} );\n\tvar materialAxisYpos = new THREE.LineBasicMaterial( {color: 0x00ff00} );\n\tvar materialAxisYneg = new THREE.LineBasicMaterial( {color: 0x00ff00} );\n\tvar materialAxisZpos = new THREE.LineBasicMaterial( {color: 0x0000ff} );\n\tvar materialAxisZneg = new THREE.LineBasicMaterial( {color: 0x0000ff} );\n\n\tgeometryAxisXpos.vertices.push( new THREE.Vector3( 0, 0, 0 ), new THREE.Vector3( distance, 0, 0 ) );\n\tgeometryAxisXneg.vertices.push( new THREE.Vector3( 0, 0, 0 ), new THREE.Vector3(-distance, 0, 0 ) );\n\tgeometryAxisYpos.vertices.push( new THREE.Vector3( 0, 0, 0 ), new THREE.Vector3( 0, distance, 0 ) );\n\tgeometryAxisYneg.vertices.push( new THREE.Vector3( 0, 0, 0 ), new THREE.Vector3( 0,-distance, 0 ) );\n\tgeometryAxisZpos.vertices.push( new THREE.Vector3( 0, 0, 0 ), new THREE.Vector3( 0, 0, distance ) );\n\tgeometryAxisZneg.vertices.push( new THREE.Vector3( 0, 0, 0 ), new THREE.Vector3( 0, 0,-distance ) );\n\n\tvar lineAxisXpos = new THREE.Line( geometryAxisXpos, materialAxisXpos );\n\tvar lineAxisXneg = new THREE.Line( geometryAxisXneg, materialAxisXneg );\n\tvar lineAxisYpos = new THREE.Line( geometryAxisYpos, materialAxisYpos );\n\tvar lineAxisYneg = new THREE.Line( geometryAxisYneg, materialAxisYneg );\n\tvar lineAxisZpos = new THREE.Line( geometryAxisZpos, materialAxisZpos );\n\tvar lineAxisZneg = new THREE.Line( geometryAxisZneg, materialAxisZneg );\n\n\tgroup.add( lineAxisXpos );\n\tgroup.add( lineAxisXneg );\n\t//  group.add( lineAxisYpos );\n\t//  group.add( lineAxisYneg );\n\tgroup.add( lineAxisZpos );\n\tgroup.add( lineAxisZneg );\n\tgroup.name = \"AXES\"\n\treturn group;\n}\n\n\nfunction originAxisHelper( distance ){\n\tvar group = new THREE.Group();\n\tvar promise = new Promise( function(resolve, reject){\n\t\tvar loader = new THREE.FontLoader();\n\t\tloader.load( fontPath, function ( response ) {\n\t\t\tvar font = response;\n\t\t\tscene.add(group);\n\n\t\t\t//  Font Material\n\t\t\tvar materialFace = new THREE.MeshBasicMaterial( { color: 0xffffff } );\n\t\t\tvar materialSide = new THREE.MeshBasicMaterial( { color: 0x888888 } );\n\t\t\tvar materialArray = [ materialFace, materialSide ];\n\t\t\tvar material = new THREE.MeshFaceMaterial(materialArray);\n\n\t\t\t//  Text Styles.\n\t\t\th0 = { size: 40, height: 2,   curveSegments: 10, font: font, weight: \"normal\", style: \"normal\", bevelThickness: 1, bevelSize: 2, bevelEnabled: false, material: 0, extrudeMaterial: 1 }\n\t\t\th1 = { size: 20, height: 1,   curveSegments: 10, font: font, weight: \"normal\", style: \"normal\", bevelThickness: 1, bevelSize: 2, bevelEnabled: false, material: 0, extrudeMaterial: 1 }\n\t\t\th2 = { size: 10, height: 1,   curveSegments: 10, font: font, weight: \"normal\", style: \"normal\", bevelThickness: 1, bevelSize: 2, bevelEnabled: false, material: 0, extrudeMaterial: 1 }\n\t\t\th3 = { size: 5,  height: 0.5, curveSegments: 10, font: font, weight: \"normal\", style: \"normal\", bevelThickness: 1, bevelSize: 2, bevelEnabled: false, material: 0, extrudeMaterial: 1 }\n\n\t\t\t//  Origins Group.\n\t\t\tgroup.add( new Text3D( \"+x\", h1, [2, 2, 5], [ distance, 20, 0], [0, -Math.PI * 0.5, 0]) );\n\t\t\tgroup.add( new Text3D( \"-x\", h1, [2, 2, 5], [-distance, 20, 0], [0,  Math.PI * 0.5, 0]) ); \n\t\t\tgroup.add( new Text3D( \"+z\", h1, [2, 2, 5], [0, 20,  distance], [0, -Math.PI,       0]) ); \n\t\t\tgroup.add( new Text3D( \"-z\", h1, [2, 2, 5], [0, 20, -distance], [0,              0, 0]) ); \n\t\t\tgroup.add( new Text3D( \"+y\", h1, [2, 2, 5], [0,   distance, 0], [ Math.PI * 0.5, 0, 0]) ); \n\t\t\tgroup.add( new Text3D( \"-y\", h1, [2, 2, 5], [0,  -distance, 0], [-Math.PI * 0.5, 0, 0]) ); \n\t\t\tgroup.name = \"ORIGINS\";\n\n\t\t\tresolve(group);  //  return group;\n\n\t\t\tfunction Text3D(text, style, scale, position, rotation){\n\t\t\t\tvar geometry = new THREE.TextGeometry( text, style );\n\t\t\t\tvar mesh = new THREE.Mesh(geometry, material );\n\t\t\t\tgeometry.computeBoundingBox();\n\t\t\t\tvar width = geometry.boundingBox.max.x - geometry.boundingBox.min.x;\n\t\t\t\tmesh.scale.fromArray( scale ); \n\t\t\t\tmesh.geometry.center();\n\t\t\t\tmesh.position.fromArray( position );\n\t\t\t\tmesh.rotation.fromArray( rotation );\n\t\t\t\treturn mesh;\n\t\t\t}\n\n\t\t});\n\n\t});\n\n\tpromise;\n\treturn group;\n}\n\n//  SELECTED EDGES HELPER.\n    \nfunction creatingSelectedEdgesHelpers( object ){\n    debugMode && console.log(\"creating selected edges helpers:\", object);\n    if ( object.children ) {\n        for( child in object.children ) {\n            object.children[child].add( new THREE.EdgesHelper( object.children[child], 0x00ff00, 1 ) );\n            debugMode && console.log(child, object.children[child].name);\n        }\n    }\n}\n\n//  CONVERT FROM BUFFER GEOMETRY.\n\nfunction convertingFromBufferGeometry( object ){\n    if ( object.geometry instanceof THREE.BufferGeometry ) {\n        debugMode && console.log(\"converting object from buffer geometry:\", object );\n        object.geometry = new THREE.Geometry().fromBufferGeometry( object.geometry );\n        debugMode && console.log(object, object.name);\n    } else {\n        debugMode && console.log(\"converting from object buffer geometry:\", \"aborted.\" );\n    }\n}\n\nfunction convertingChildrenFromBufferGeometry( object ){\n    if ( object.children && object.children.length > 0 ) {\n        for( child in object.children ) {\n        //  debugMode && console.log( \"object.children[child]:\", object.children[child] );\n            if ( object.children[child].geometry instanceof THREE.BufferGeometry ){\n                debugMode && console.log(\"converting child from buffer geometry:\", object.children[child] );\n                object.children[child].geometry = new THREE.Geometry().fromBufferGeometry( object.children[child].geometry );\n                debugMode && console.log(child, object.children[child].name);\n            }\n        }\n    } else {\n        debugMode && console.log(\"converting from children buffer geometry:\", \"aborted.\" );\n    }\n}\n\n//  WILDCARD ANY OBJECT AND CHILD OF ROOT OBJECT.\n\nfunction wildcardAnyObjectAndChild( object, callback ){\n// callback: function(item, index){};\n// Return any children of an object and object itself.\n    if ( !!object && !!callback ){\n    //  Object itself.\n        if ( !(object instanceof THREE.Scene) ) callback( object );\n    //  Object children.\n        if ( object.children ) object.children.forEach( function( item, index ){\n            wildcardAnyObjectAndChild( item, callback );\n        });\n    }\n}\n\n//  REMOVE OLD EDGESHELPERS.\n\nfunction removeEdgesHelpers(){\n    scene.children.filter( function(item){\n        return (item instanceof THREE.EdgesHelper);\n    }).forEach( function(item){\n        scene.remove(item);\n        item.geometry.dispose();\n        item.material.dispose();\n    });\n}\n\nfunction removeBoxHelpers(){\n    scene.children.filter( function(item){\n        return (item instanceof THREE.BoxHelper);\n    }).forEach( function(item){\n        scene.remove(item);\n        item.geometry.dispose();\n        item.material.dispose();\n    });\n}\n\nfunction removeBoundHelpers(){\n    scene.children.filter( function(item){\n        return (item instanceof THREE.BoundingBoxHelper);\n    }).forEach( function(item){\n        scene.remove(item);\n        item.geometry.dispose();\n        item.material.dispose();\n    });\n}\n\n"
			}],
		"AA807597-475F-44C0-9BCF-F909388F0C98": [
			{
				"name": "Animations.js",
				"source": "/**\n * @author mikael emtinger / http://gomo.se/\n * @author mrdoob / http://mrdoob.com/\n * @author alteredq / http://alteredqualia.com/\n */\n\nTHREE.Animation = function ( root, data ) {\n\n\tthis.root = root;\n\tthis.data = THREE.AnimationHandler.init( data );\n\tthis.hierarchy = THREE.AnimationHandler.parse( root );\n\n\tthis.currentTime = 0;\n\tthis.timeScale = 1;\n\n\tthis.isPlaying = false;\n\tthis.loop = true;\n\tthis.weight = 0;\n\n\tthis.interpolationType = THREE.AnimationHandler.LINEAR;\n\n};\n\nTHREE.Animation.prototype = {\n\n\tconstructor: THREE.Animation,\n\n\tkeyTypes:  [ \"pos\", \"rot\", \"scl\" ],\n\n\tplay: function ( startTime, weight ) {\n\n\t\tthis.currentTime = startTime !== undefined ? startTime : 0;\n\t\tthis.weight = weight !== undefined ? weight : 1;\n\n\t\tthis.isPlaying = true;\n\n\t\tthis.reset();\n\n\t\tTHREE.AnimationHandler.play( this );\n\n\t},\n\n\tstop: function() {\n\n\t\tthis.isPlaying = false;\n\n\t\tTHREE.AnimationHandler.stop( this );\n\n\t},\n\n\treset: function () {\n\n\t\tfor ( var h = 0, hl = this.hierarchy.length; h < hl; h ++ ) {\n\n\t\t\tvar object = this.hierarchy[ h ];\n\n\t\t\tif ( object.animationCache === undefined ) {\n\n\t\t\t\tobject.animationCache = {\n\t\t\t\t\tanimations: {},\n\t\t\t\t\tblending: {\n\t\t\t\t\t\tpositionWeight: 0.0,\n\t\t\t\t\t\tquaternionWeight: 0.0,\n\t\t\t\t\t\tscaleWeight: 0.0\n\t\t\t\t\t}\n\t\t\t\t};\n\n\t\t\t}\n\n\t\t\tvar name = this.data.name;\n\t\t\tvar animations = object.animationCache.animations;\n\t\t\tvar animationCache = animations[ name ];\n\n\t\t\tif ( animationCache === undefined ) {\n\n\t\t\t\tanimationCache = {\n\t\t\t\t\tprevKey: { pos: 0, rot: 0, scl: 0 },\n\t\t\t\t\tnextKey: { pos: 0, rot: 0, scl: 0 },\n\t\t\t\t\toriginalMatrix: object.matrix\n\t\t\t\t};\n\n\t\t\t\tanimations[ name ] = animationCache;\n\n\t\t\t}\n\n\t\t\t// Get keys to match our current time\n\n\t\t\tfor ( var t = 0; t < 3; t ++ ) {\n\n\t\t\t\tvar type = this.keyTypes[ t ];\n\n\t\t\t\tvar prevKey = this.data.hierarchy[ h ].keys[ 0 ];\n\t\t\t\tvar nextKey = this.getNextKeyWith( type, h, 1 );\n\n\t\t\t\twhile ( nextKey.time < this.currentTime && nextKey.index > prevKey.index ) {\n\n\t\t\t\t\tprevKey = nextKey;\n\t\t\t\t\tnextKey = this.getNextKeyWith( type, h, nextKey.index + 1 );\n\n\t\t\t\t}\n\n\t\t\t\tanimationCache.prevKey[ type ] = prevKey;\n\t\t\t\tanimationCache.nextKey[ type ] = nextKey;\n\n\t\t\t}\n\n\t\t}\n\n\t},\n\n\tresetBlendWeights: function () {\n\n\t\tfor ( var h = 0, hl = this.hierarchy.length; h < hl; h ++ ) {\n\n\t\t\tvar object = this.hierarchy[ h ];\n\t\t\tvar animationCache = object.animationCache;\n\n\t\t\tif ( animationCache !== undefined ) {\n\n\t\t\t\tvar blending = animationCache.blending;\n\n\t\t\t\tblending.positionWeight = 0.0;\n\t\t\t\tblending.quaternionWeight = 0.0;\n\t\t\t\tblending.scaleWeight = 0.0;\n\n\t\t\t}\n\n\t\t}\n\n\t},\n\n\tupdate: ( function() {\n\n\t\tvar points = [];\n\t\tvar target = new THREE.Vector3();\n\t\tvar newVector = new THREE.Vector3();\n\t\tvar newQuat = new THREE.Quaternion();\n\n\t\t// Catmull-Rom spline\n\n\t\tvar interpolateCatmullRom = function ( points, scale ) {\n\n\t\t\tvar c = [], v3 = [],\n\t\t\tpoint, intPoint, weight, w2, w3,\n\t\t\tpa, pb, pc, pd;\n\n\t\t\tpoint = ( points.length - 1 ) * scale;\n\t\t\tintPoint = Math.floor( point );\n\t\t\tweight = point - intPoint;\n\n\t\t\tc[ 0 ] = intPoint === 0 ? intPoint : intPoint - 1;\n\t\t\tc[ 1 ] = intPoint;\n\t\t\tc[ 2 ] = intPoint > points.length - 2 ? intPoint : intPoint + 1;\n\t\t\tc[ 3 ] = intPoint > points.length - 3 ? intPoint : intPoint + 2;\n\n\t\t\tpa = points[ c[ 0 ] ];\n\t\t\tpb = points[ c[ 1 ] ];\n\t\t\tpc = points[ c[ 2 ] ];\n\t\t\tpd = points[ c[ 3 ] ];\n\n\t\t\tw2 = weight * weight;\n\t\t\tw3 = weight * w2;\n\n\t\t\tv3[ 0 ] = interpolate( pa[ 0 ], pb[ 0 ], pc[ 0 ], pd[ 0 ], weight, w2, w3 );\n\t\t\tv3[ 1 ] = interpolate( pa[ 1 ], pb[ 1 ], pc[ 1 ], pd[ 1 ], weight, w2, w3 );\n\t\t\tv3[ 2 ] = interpolate( pa[ 2 ], pb[ 2 ], pc[ 2 ], pd[ 2 ], weight, w2, w3 );\n\n\t\t\treturn v3;\n\n\t\t};\n\n\t\tvar interpolate = function ( p0, p1, p2, p3, t, t2, t3 ) {\n\n\t\t\tvar v0 = ( p2 - p0 ) * 0.5,\n\t\t\t\tv1 = ( p3 - p1 ) * 0.5;\n\n\t\t\treturn ( 2 * ( p1 - p2 ) + v0 + v1 ) * t3 + ( - 3 * ( p1 - p2 ) - 2 * v0 - v1 ) * t2 + v0 * t + p1;\n\n\t\t};\n\n\t\treturn function ( delta ) {\n\n\t\t\tif ( this.isPlaying === false ) return;\n\n\t\t\tthis.currentTime += delta * this.timeScale;\n\n\t\t\tif ( this.weight === 0 )\n\t\t\t\treturn;\n\n\t\t\t//\n\n\t\t\tvar duration = this.data.length;\n\n\t\t\tif ( this.currentTime > duration || this.currentTime < 0 ) {\n\n\t\t\t\tif ( this.loop ) {\n\n\t\t\t\t\tthis.currentTime %= duration;\n\n\t\t\t\t\tif ( this.currentTime < 0 )\n\t\t\t\t\t\tthis.currentTime += duration;\n\n\t\t\t\t\tthis.reset();\n\n\t\t\t\t} else {\n\n\t\t\t\t\tthis.stop();\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tfor ( var h = 0, hl = this.hierarchy.length; h < hl; h ++ ) {\n\n\t\t\t\tvar object = this.hierarchy[ h ];\n\t\t\t\tvar animationCache = object.animationCache.animations[ this.data.name ];\n\t\t\t\tvar blending = object.animationCache.blending;\n\n\t\t\t\t// loop through pos/rot/scl\n\n\t\t\t\tfor ( var t = 0; t < 3; t ++ ) {\n\n\t\t\t\t\t// get keys\n\n\t\t\t\t\tvar type    = this.keyTypes[ t ];\n\t\t\t\t\tvar prevKey = animationCache.prevKey[ type ];\n\t\t\t\t\tvar nextKey = animationCache.nextKey[ type ];\n\n\t\t\t\t\tif ( ( this.timeScale > 0 && nextKey.time <= this.currentTime ) ||\n\t\t\t\t\t\t( this.timeScale < 0 && prevKey.time >= this.currentTime ) ) {\n\n\t\t\t\t\t\tprevKey = this.data.hierarchy[ h ].keys[ 0 ];\n\t\t\t\t\t\tnextKey = this.getNextKeyWith( type, h, 1 );\n\n\t\t\t\t\t\twhile ( nextKey.time < this.currentTime && nextKey.index > prevKey.index ) {\n\n\t\t\t\t\t\t\tprevKey = nextKey;\n\t\t\t\t\t\t\tnextKey = this.getNextKeyWith( type, h, nextKey.index + 1 );\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tanimationCache.prevKey[ type ] = prevKey;\n\t\t\t\t\t\tanimationCache.nextKey[ type ] = nextKey;\n\n\t\t\t\t\t}\n\n\t\t\t\t\tvar scale = ( this.currentTime - prevKey.time ) / ( nextKey.time - prevKey.time );\n\n\t\t\t\t\tvar prevXYZ = prevKey[ type ];\n\t\t\t\t\tvar nextXYZ = nextKey[ type ];\n\n\t\t\t\t\tif ( scale < 0 ) scale = 0;\n\t\t\t\t\tif ( scale > 1 ) scale = 1;\n\n\t\t\t\t\t// interpolate\n\n\t\t\t\t\tif ( type === \"pos\" ) {\n\n\t\t\t\t\t\tif ( this.interpolationType === THREE.AnimationHandler.LINEAR ) {\n\n\t\t\t\t\t\t\tnewVector.x = prevXYZ[ 0 ] + ( nextXYZ[ 0 ] - prevXYZ[ 0 ] ) * scale;\n\t\t\t\t\t\t\tnewVector.y = prevXYZ[ 1 ] + ( nextXYZ[ 1 ] - prevXYZ[ 1 ] ) * scale;\n\t\t\t\t\t\t\tnewVector.z = prevXYZ[ 2 ] + ( nextXYZ[ 2 ] - prevXYZ[ 2 ] ) * scale;\n\n\t\t\t\t\t\t\t// blend\n\t\t\t\t\t\t\tvar proportionalWeight = this.weight / ( this.weight + blending.positionWeight );\n\t\t\t\t\t\t\tobject.position.lerp( newVector, proportionalWeight );\n\t\t\t\t\t\t\tblending.positionWeight += this.weight;\n\n\t\t\t\t\t\t} else if ( this.interpolationType === THREE.AnimationHandler.CATMULLROM ||\n\t\t\t\t\t\t\t\t\tthis.interpolationType === THREE.AnimationHandler.CATMULLROM_FORWARD ) {\n\n\t\t\t\t\t\t\tpoints[ 0 ] = this.getPrevKeyWith( \"pos\", h, prevKey.index - 1 )[ \"pos\" ];\n\t\t\t\t\t\t\tpoints[ 1 ] = prevXYZ;\n\t\t\t\t\t\t\tpoints[ 2 ] = nextXYZ;\n\t\t\t\t\t\t\tpoints[ 3 ] = this.getNextKeyWith( \"pos\", h, nextKey.index + 1 )[ \"pos\" ];\n\n\t\t\t\t\t\t\tscale = scale * 0.33 + 0.33;\n\n\t\t\t\t\t\t\tvar currentPoint = interpolateCatmullRom( points, scale );\n\t\t\t\t\t\t\tvar proportionalWeight = this.weight / ( this.weight + blending.positionWeight );\n\t\t\t\t\t\t\tblending.positionWeight += this.weight;\n\n\t\t\t\t\t\t\t// blend\n\n\t\t\t\t\t\t\tvar vector = object.position;\n\n\t\t\t\t\t\t\tvector.x = vector.x + ( currentPoint[ 0 ] - vector.x ) * proportionalWeight;\n\t\t\t\t\t\t\tvector.y = vector.y + ( currentPoint[ 1 ] - vector.y ) * proportionalWeight;\n\t\t\t\t\t\t\tvector.z = vector.z + ( currentPoint[ 2 ] - vector.z ) * proportionalWeight;\n\n\t\t\t\t\t\t\tif ( this.interpolationType === THREE.AnimationHandler.CATMULLROM_FORWARD ) {\n\n\t\t\t\t\t\t\t\tvar forwardPoint = interpolateCatmullRom( points, scale * 1.01 );\n\n\t\t\t\t\t\t\t\ttarget.set( forwardPoint[ 0 ], forwardPoint[ 1 ], forwardPoint[ 2 ] );\n\t\t\t\t\t\t\t\ttarget.sub( vector );\n\t\t\t\t\t\t\t\ttarget.y = 0;\n\t\t\t\t\t\t\t\ttarget.normalize();\n\n\t\t\t\t\t\t\t\tvar angle = Math.atan2( target.x, target.z );\n\t\t\t\t\t\t\t\tobject.rotation.set( 0, angle, 0 );\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} else if ( type === \"rot\" ) {\n\n\t\t\t\t\t\tTHREE.Quaternion.slerp( prevXYZ, nextXYZ, newQuat, scale );\n\n\t\t\t\t\t\t// Avoid paying the cost of an additional slerp if we don't have to\n\t\t\t\t\t\tif ( blending.quaternionWeight === 0 ) {\n\n\t\t\t\t\t\t\tobject.quaternion.copy( newQuat );\n\t\t\t\t\t\t\tblending.quaternionWeight = this.weight;\n\n\t\t\t\t\t\t} else {\n\n\t\t\t\t\t\t\tvar proportionalWeight = this.weight / ( this.weight + blending.quaternionWeight );\n\t\t\t\t\t\t\tTHREE.Quaternion.slerp( object.quaternion, newQuat, object.quaternion, proportionalWeight );\n\t\t\t\t\t\t\tblending.quaternionWeight += this.weight;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t} else if ( type === \"scl\" ) {\n\n\t\t\t\t\t\tnewVector.x = prevXYZ[ 0 ] + ( nextXYZ[ 0 ] - prevXYZ[ 0 ] ) * scale;\n\t\t\t\t\t\tnewVector.y = prevXYZ[ 1 ] + ( nextXYZ[ 1 ] - prevXYZ[ 1 ] ) * scale;\n\t\t\t\t\t\tnewVector.z = prevXYZ[ 2 ] + ( nextXYZ[ 2 ] - prevXYZ[ 2 ] ) * scale;\n\n\t\t\t\t\t\tvar proportionalWeight = this.weight / ( this.weight + blending.scaleWeight );\n\t\t\t\t\t\tobject.scale.lerp( newVector, proportionalWeight );\n\t\t\t\t\t\tblending.scaleWeight += this.weight;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\treturn true;\n\n\t\t};\n\n\t} )(),\n\n\tgetNextKeyWith: function ( type, h, key ) {\n\n\t\tvar keys = this.data.hierarchy[ h ].keys;\n\n\t\tif ( this.interpolationType === THREE.AnimationHandler.CATMULLROM ||\n\t\t\t this.interpolationType === THREE.AnimationHandler.CATMULLROM_FORWARD ) {\n\n\t\t\tkey = key < keys.length - 1 ? key : keys.length - 1;\n\n\t\t} else {\n\n\t\t\tkey = key % keys.length;\n\n\t\t}\n\n\t\tfor ( ; key < keys.length; key ++ ) {\n\n\t\t\tif ( keys[ key ][ type ] !== undefined ) {\n\n\t\t\t\treturn keys[ key ];\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn this.data.hierarchy[ h ].keys[ 0 ];\n\n\t},\n\n\tgetPrevKeyWith: function ( type, h, key ) {\n\n\t\tvar keys = this.data.hierarchy[ h ].keys;\n\n\t\tif ( this.interpolationType === THREE.AnimationHandler.CATMULLROM ||\n\t\t\tthis.interpolationType === THREE.AnimationHandler.CATMULLROM_FORWARD ) {\n\n\t\t\tkey = key > 0 ? key : 0;\n\n\t\t} else {\n\n\t\t\tkey = key >= 0 ? key : key + keys.length;\n\n\t\t}\n\n\n\t\tfor ( ; key >= 0; key -- ) {\n\n\t\t\tif ( keys[ key ][ type ] !== undefined ) {\n\n\t\t\t\treturn keys[ key ];\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn this.data.hierarchy[ h ].keys[ keys.length - 1 ];\n\n\t}\n\n};\n"
			},
			{
				"name": "AnimationHandler.js",
				"source": "/**\n * @author mikael emtinger / http://gomo.se/\n */\n\nTHREE.AnimationHandler = {\n\n\tLINEAR: 0,\n\tCATMULLROM: 1,\n\tCATMULLROM_FORWARD: 2,\n\n\t//\n\n\tadd: function () {\n\n\t\tconsole.warn( 'THREE.AnimationHandler.add() has been deprecated.' );\n\n\t},\n\tget: function () {\n\n\t\tconsole.warn( 'THREE.AnimationHandler.get() has been deprecated.' );\n\n\t},\n\tremove: function () {\n\n\t\tconsole.warn( 'THREE.AnimationHandler.remove() has been deprecated.' );\n\n\t},\n\n\t//\n\n\tanimations: [],\n\n\tinit: function ( data ) {\n\n\t\tif ( data.initialized === true ) return data;\n\n\t\t// loop through all keys\n\n\t\tfor ( var h = 0; h < data.hierarchy.length; h ++ ) {\n\n\t\t\tfor ( var k = 0; k < data.hierarchy[ h ].keys.length; k ++ ) {\n\n\t\t\t\t// remove minus times\n\n\t\t\t\tif ( data.hierarchy[ h ].keys[ k ].time < 0 ) {\n\n\t\t\t\t\t data.hierarchy[ h ].keys[ k ].time = 0;\n\n\t\t\t\t}\n\n\t\t\t\t// create quaternions\n\n\t\t\t\tif ( data.hierarchy[ h ].keys[ k ].rot !== undefined &&\n\t\t\t\t  ! ( data.hierarchy[ h ].keys[ k ].rot instanceof THREE.Quaternion ) ) {\n\n\t\t\t\t\tvar quat = data.hierarchy[ h ].keys[ k ].rot;\n\t\t\t\t\tdata.hierarchy[ h ].keys[ k ].rot = new THREE.Quaternion().fromArray( quat );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t// prepare morph target keys\n\n\t\t\tif ( data.hierarchy[ h ].keys.length && data.hierarchy[ h ].keys[ 0 ].morphTargets !== undefined ) {\n\n\t\t\t\t// get all used\n\n\t\t\t\tvar usedMorphTargets = {};\n\n\t\t\t\tfor ( var k = 0; k < data.hierarchy[ h ].keys.length; k ++ ) {\n\n\t\t\t\t\tfor ( var m = 0; m < data.hierarchy[ h ].keys[ k ].morphTargets.length; m ++ ) {\n\n\t\t\t\t\t\tvar morphTargetName = data.hierarchy[ h ].keys[ k ].morphTargets[ m ];\n\t\t\t\t\t\tusedMorphTargets[ morphTargetName ] = - 1;\n\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\tdata.hierarchy[ h ].usedMorphTargets = usedMorphTargets;\n\n\n\t\t\t\t// set all used on all frames\n\n\t\t\t\tfor ( var k = 0; k < data.hierarchy[ h ].keys.length; k ++ ) {\n\n\t\t\t\t\tvar influences = {};\n\n\t\t\t\t\tfor ( var morphTargetName in usedMorphTargets ) {\n\n\t\t\t\t\t\tfor ( var m = 0; m < data.hierarchy[ h ].keys[ k ].morphTargets.length; m ++ ) {\n\n\t\t\t\t\t\t\tif ( data.hierarchy[ h ].keys[ k ].morphTargets[ m ] === morphTargetName ) {\n\n\t\t\t\t\t\t\t\tinfluences[ morphTargetName ] = data.hierarchy[ h ].keys[ k ].morphTargetsInfluences[ m ];\n\t\t\t\t\t\t\t\tbreak;\n\n\t\t\t\t\t\t\t}\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t\tif ( m === data.hierarchy[ h ].keys[ k ].morphTargets.length ) {\n\n\t\t\t\t\t\t\tinfluences[ morphTargetName ] = 0;\n\n\t\t\t\t\t\t}\n\n\t\t\t\t\t}\n\n\t\t\t\t\tdata.hierarchy[ h ].keys[ k ].morphTargetsInfluences = influences;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t\t// remove all keys that are on the same time\n\n\t\t\tfor ( var k = 1; k < data.hierarchy[ h ].keys.length; k ++ ) {\n\n\t\t\t\tif ( data.hierarchy[ h ].keys[ k ].time === data.hierarchy[ h ].keys[ k - 1 ].time ) {\n\n\t\t\t\t\tdata.hierarchy[ h ].keys.splice( k, 1 );\n\t\t\t\t\tk --;\n\n\t\t\t\t}\n\n\t\t\t}\n\n\n\t\t\t// set index\n\n\t\t\tfor ( var k = 0; k < data.hierarchy[ h ].keys.length; k ++ ) {\n\n\t\t\t\tdata.hierarchy[ h ].keys[ k ].index = k;\n\n\t\t\t}\n\n\t\t}\n\n\t\tdata.initialized = true;\n\n\t\treturn data;\n\n\t},\n\n\tparse: function ( root ) {\n\n\t\tvar parseRecurseHierarchy = function ( root, hierarchy ) {\n\n\t\t\thierarchy.push( root );\n\n\t\t\tfor ( var c = 0; c < root.children.length; c ++ )\n\t\t\t\tparseRecurseHierarchy( root.children[ c ], hierarchy );\n\n\t\t};\n\n\t\t// setup hierarchy\n\n\t\tvar hierarchy = [];\n\n\t\tif ( root instanceof THREE.SkinnedMesh ) {\n\n\t\t\tfor ( var b = 0; b < root.skeleton.bones.length; b ++ ) {\n\n\t\t\t\thierarchy.push( root.skeleton.bones[ b ] );\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tparseRecurseHierarchy( root, hierarchy );\n\n\t\t}\n\n\t\treturn hierarchy;\n\n\t},\n\n\tplay: function ( animation ) {\n\n\t\tif ( this.animations.indexOf( animation ) === - 1 ) {\n\n\t\t\tthis.animations.push( animation );\n\n\t\t}\n\n\t},\n\n\tstop: function ( animation ) {\n\n\t\tvar index = this.animations.indexOf( animation );\n\n\t\tif ( index !== - 1 ) {\n\n\t\t\tthis.animations.splice( index, 1 );\n\n\t\t}\n\n\t},\n\n\tupdate: function ( deltaTimeMS ) {\n\n\t\tfor ( var i = 0; i < this.animations.length; i ++ ) {\n\n\t\t\tthis.animations[ i ].resetBlendWeights();\n\n\t\t}\n\n\t\tfor ( var i = 0; i < this.animations.length; i ++ ) {\n\n\t\t\tthis.animations[ i ].update( deltaTimeMS );\n\n\t\t}\n\n\t}\n\n};\n"
			},
			{
				"name": "KeyFrameAnimation.js",
				"source": "/**\n * @author mikael emtinger / http://gomo.se/\n * @author mrdoob / http://mrdoob.com/\n * @author alteredq / http://alteredqualia.com/\n * @author khang duong\n * @author erik kitson\n */\n\nTHREE.KeyFrameAnimation = function ( data ) {\n\n\tthis.root = data.node;\n\tthis.data = THREE.AnimationHandler.init( data );\n\tthis.hierarchy = THREE.AnimationHandler.parse( this.root );\n\tthis.currentTime = 0;\n\tthis.timeScale = 0.001;\n\tthis.isPlaying = false;\n\tthis.isPaused = true;\n\tthis.loop = true;\n\n\t// initialize to first keyframes\n\n\tfor ( var h = 0, hl = this.hierarchy.length; h < hl; h ++ ) {\n\n\t\tvar keys = this.data.hierarchy[ h ].keys,\n\t\t\tsids = this.data.hierarchy[ h ].sids,\n\t\t\tobj = this.hierarchy[ h ];\n\n\t\tif ( keys.length && sids ) {\n\n\t\t\tfor ( var s = 0; s < sids.length; s ++ ) {\n\n\t\t\t\tvar sid = sids[ s ],\n\t\t\t\t\tnext = this.getNextKeyWith( sid, h, 0 );\n\n\t\t\t\tif ( next ) {\n\n\t\t\t\t\tnext.apply( sid );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tobj.matrixAutoUpdate = false;\n\t\t\tthis.data.hierarchy[ h ].node.updateMatrix();\n\t\t\tobj.matrixWorldNeedsUpdate = true;\n\n\t\t}\n\n\t}\n\n};\n\nTHREE.KeyFrameAnimation.prototype = {\n\n\tconstructor: THREE.KeyFrameAnimation,\n\n\tplay: function ( startTime ) {\n\n\t\tthis.currentTime = startTime !== undefined ? startTime : 0;\n\n\t\tif ( this.isPlaying === false ) {\n\n\t\t\tthis.isPlaying = true;\n\n\t\t\t// reset key cache\n\n\t\t\tvar h, hl = this.hierarchy.length,\n\t\t\t\tobject,\n\t\t\t\tnode;\n\n\t\t\tfor ( h = 0; h < hl; h ++ ) {\n\n\t\t\t\tobject = this.hierarchy[ h ];\n\t\t\t\tnode = this.data.hierarchy[ h ];\n\n\t\t\t\tif ( node.animationCache === undefined ) {\n\n\t\t\t\t\tnode.animationCache = {};\n\t\t\t\t\tnode.animationCache.prevKey = null;\n\t\t\t\t\tnode.animationCache.nextKey = null;\n\t\t\t\t\tnode.animationCache.originalMatrix = object.matrix;\n\n\t\t\t\t}\n\n\t\t\t\tvar keys = this.data.hierarchy[ h ].keys;\n\n\t\t\t\tif ( keys.length > 1 ) {\n\n\t\t\t\t\tnode.animationCache.prevKey = keys[ 0 ];\n\t\t\t\t\tnode.animationCache.nextKey = keys[ 1 ];\n\n\t\t\t\t\tthis.startTime = Math.min( keys[ 0 ].time, this.startTime );\n\t\t\t\t\tthis.endTime = Math.max( keys[ keys.length - 1 ].time, this.endTime );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tthis.update( 0 );\n\n\t\t}\n\n\t\tthis.isPaused = false;\n\t},\n\n\tstop: function () {\n\n\t\tthis.isPlaying = false;\n\t\tthis.isPaused  = false;\n\n\t\t// reset JIT matrix and remove cache\n\n\t\tfor ( var h = 0; h < this.data.hierarchy.length; h ++ ) {\n\n\t\t\tvar obj = this.hierarchy[ h ];\n\t\t\tvar node = this.data.hierarchy[ h ];\n\n\t\t\tif ( node.animationCache !== undefined ) {\n\n\t\t\t\tvar original = node.animationCache.originalMatrix;\n\n\t\t\t\toriginal.copy( obj.matrix );\n\t\t\t\tobj.matrix = original;\n\n\t\t\t\tdelete node.animationCache;\n\n\t\t\t}\n\n\t\t}\n\n\t},\n\n\tupdate: function ( delta ) {\n\n\t\tif ( this.isPlaying === false ) return;\n\n\t\tthis.currentTime += delta * this.timeScale;\n\n\t\t//\n\n\t\tvar duration = this.data.length;\n\n\t\tif ( this.loop === true && this.currentTime > duration ) {\n\n\t\t\tthis.currentTime %= duration;\n\n\t\t}\n\n\t\tthis.currentTime = Math.min( this.currentTime, duration );\n\n\t\tfor ( var h = 0, hl = this.hierarchy.length; h < hl; h ++ ) {\n\n\t\t\tvar object = this.hierarchy[ h ];\n\t\t\tvar node = this.data.hierarchy[ h ];\n\n\t\t\tvar keys = node.keys,\n\t\t\t\tanimationCache = node.animationCache;\n\n\n\t\t\tif ( keys.length ) {\n\n\t\t\t\tvar prevKey = animationCache.prevKey;\n\t\t\t\tvar nextKey = animationCache.nextKey;\n\n\t\t\t\tif ( nextKey.time <= this.currentTime ) {\n\n\t\t\t\t\twhile ( nextKey.time < this.currentTime && nextKey.index > prevKey.index ) {\n\n\t\t\t\t\t\tprevKey = nextKey;\n\t\t\t\t\t\tnextKey = keys[ prevKey.index + 1 ];\n\n\t\t\t\t\t}\n\n\t\t\t\t\tanimationCache.prevKey = prevKey;\n\t\t\t\t\tanimationCache.nextKey = nextKey;\n\n\t\t\t\t}\n\n\t\t\t\tif ( nextKey.time >= this.currentTime ) {\n\n\t\t\t\t\tprevKey.interpolate( nextKey, this.currentTime );\n\n\t\t\t\t} else {\n\n\t\t\t\t\tprevKey.interpolate( nextKey, nextKey.time );\n\n\t\t\t\t}\n\n\t\t\t\tthis.data.hierarchy[ h ].node.updateMatrix();\n\t\t\t\tobject.matrixWorldNeedsUpdate = true;\n\n\t\t\t}\n\n\t\t}\n\n\t},\n\n\tgetNextKeyWith: function ( sid, h, key ) {\n\n\t\tvar keys = this.data.hierarchy[ h ].keys;\n\t\tkey = key % keys.length;\n\n\t\tfor ( ; key < keys.length; key ++ ) {\n\n\t\t\tif ( keys[ key ].hasTarget( sid ) ) {\n\n\t\t\t\treturn keys[ key ];\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn keys[ 0 ];\n\n\t},\n\n\tgetPrevKeyWith: function ( sid, h, key ) {\n\n\t\tvar keys = this.data.hierarchy[ h ].keys;\n\t\tkey = key >= 0 ? key : key + keys.length;\n\n\t\tfor ( ; key >= 0; key -- ) {\n\n\t\t\tif ( keys[ key ].hasTarget( sid ) ) {\n\n\t\t\t\treturn keys[ key ];\n\n\t\t\t}\n\n\t\t}\n\n\t\treturn keys[ keys.length - 1 ];\n\n\t}\n\n};\n"
			}],
		"EAB32261-6842-401B-A01B-BDD9F02445C6": [
			{
				"name": "MW.js",
				"source": "// MW.js\n\n/*!\n* @author yomotsu http://yomotsu.net/\n* MIT License\n*/\n\nMW = {};\n\n\nMW.triangle = {};\n\n\nMW.triangle.makeBoundingBox = function ( triangle ) {\n\n  var bb = new THREE.Box3();\n\n  bb.min = bb.min.min( triangle.a );\n  bb.min = bb.min.min( triangle.b );\n  bb.min = bb.min.min( triangle.c );\n\n  bb.max = bb.max.max( triangle.a );\n  bb.max = bb.max.max( triangle.b );\n  bb.max = bb.max.max( triangle.c );\n\n  return bb;\n\n};\n\nMW.triangle.makeBoundingSphere = function ( triangle, normal ) {\n \n  var bs = new THREE.Sphere(),\n      v = new THREE.Vector3(),\n      v0 = new THREE.Vector3(),\n      v1 = new THREE.Vector3(),\n      e0 = new THREE.Vector3(),\n      e1 = new THREE.Vector3(),\n      a, b, c, d, e,\n      div, t, s;\n \n  // obtuse triangle\n \n  v0.subVectors( triangle.b, triangle.a );\n  v1.subVectors( triangle.c, triangle.a );\n \n  if ( v0.dot( v1 ) <= 0 ) {\n \n    bs.center.addVectors( triangle.b, triangle.c ).divideScalar( 2 );\n    bs.radius = v.subVectors( triangle.b, triangle.c ).length() / 2;\n    return bs;\n \n  }\n \n  v0.subVectors( triangle.a, triangle.b );\n  v1.subVectors( triangle.c, triangle.b );\n \n  if ( v0.dot( v1 ) <= 0 ) {\n \n    bs.center.addVectors( triangle.a, triangle.c ).divideScalar( 2 );\n    bs.radius = v.subVectors( triangle.a, triangle.c ).length() / 2;\n    return bs;\n \n  }\n \n  v0.subVectors( triangle.a, triangle.c );\n  v1.subVectors( triangle.b, triangle.c );\n \n  if ( v0.dot( v1 ) <= 0 ) {\n \n    bs.center.addVectors( triangle.a, triangle.b ).divideScalar( 2 );\n    bs.radius = v.subVectors( triangle.a, triangle.b ).length() / 2;\n    return bs;\n \n  }\n \n  // acuteangled triangle\n \n  if ( !normal ) {\n \n    normal = triangle.normal();\n \n  }\n \n  v0.crossVectors( v.subVectors( triangle.c, triangle.b ), normal );\n  v1.crossVectors( v.subVectors( triangle.c, triangle.a ), normal );\n \n  e0.addVectors( triangle.c, triangle.b ).multiplyScalar( .5 );\n  e1.addVectors( triangle.c, triangle.a ).multiplyScalar( .5 );\n \n  a = v0.dot( v1 );\n  b = v0.dot( v0 );\n  d = v1.dot( v1 );\n  c = -v.subVectors( e1, e0 ).dot( v0 );\n  e = -v.subVectors( e1, e0 ).dot( v1 );\n \n  div = - a * a + b * d;\n  // t = ( - a * c + b * e ) / div;\n  s = ( - c * d + a * e ) / div;\n \n  bs.center = e0.clone().add( v0.clone().multiplyScalar( s ) );\n  bs.radius = v.subVectors( bs.center, triangle.a ).length();\n  return bs;\n \n}\n\n// @author yomotsu\n// MIT License\n\n;( function ( THREE, ns ) {\n\n  'use strict';\n\n  ns.collision = {};\n\n  // aabb: <THREE.Box3>\n  // Plane: <THREE.Plane>\n  ns.collision.isIntersectionAABBPlane = function ( aabb, Plane ) {\n\n    var center = new THREE.Vector3().addVectors( aabb.max, aabb.min ).multiplyScalar( 0.5 ),\n        extents = new THREE.Vector3().subVectors( aabb.max, center );\n\n    var r = extents.x * Math.abs( Plane.normal.x ) + extents.y * Math.abs( Plane.normal.y ) + extents.z * Math.abs( Plane.normal.z );\n    var s = Plane.normal.dot( center ) - Plane.constant;\n\n    return Math.abs( s ) <= r;\n\n  };\n\n  // based on http://www.gamedev.net/topic/534655-aabb-triangleplane-intersection--distance-to-plane-is-incorrect-i-have-solved-it/\n  //\n  // a: <THREE.Vector3>, // vertex of a triangle\n  // b: <THREE.Vector3>, // vertex of a triangle\n  // c: <THREE.Vector3>, // vertex of a triangle\n  // aabb: <THREE.Box3>\n  ns.collision.isIntersectionTriangleAABB = function ( a, b, c, aabb ) {\n\n    var p0, p1, p2, r;\n    \n    // Compute box center and extents of AABoundingBox (if not already given in that format)\n    var center = new THREE.Vector3().addVectors( aabb.max, aabb.min ).multiplyScalar( 0.5 ),\n        extents = new THREE.Vector3().subVectors( aabb.max, center );\n\n    // Translate triangle as conceptually moving AABB to origin\n    var v0 = new THREE.Vector3().subVectors( a, center ),\n        v1 = new THREE.Vector3().subVectors( b, center ),\n        v2 = new THREE.Vector3().subVectors( c, center );\n\n    // Compute edge vectors for triangle\n    var f0 = new THREE.Vector3().subVectors( v1, v0 ),\n        f1 = new THREE.Vector3().subVectors( v2, v1 ),\n        f2 = new THREE.Vector3().subVectors( v0, v2 );\n\n    // Test axes a00..a22 (category 3)\n    var a00 = new THREE.Vector3( 0, -f0.z, f0.y ),\n        a01 = new THREE.Vector3( 0, -f1.z, f1.y ),\n        a02 = new THREE.Vector3( 0, -f2.z, f2.y ),\n        a10 = new THREE.Vector3( f0.z, 0, -f0.x ),\n        a11 = new THREE.Vector3( f1.z, 0, -f1.x ),\n        a12 = new THREE.Vector3( f2.z, 0, -f2.x ),\n        a20 = new THREE.Vector3( -f0.y, f0.x, 0 ),\n        a21 = new THREE.Vector3( -f1.y, f1.x, 0 ),\n        a22 = new THREE.Vector3( -f2.y, f2.x, 0 );\n\n    // Test axis a00\n    p0 = v0.dot( a00 );\n    p1 = v1.dot( a00 );\n    p2 = v2.dot( a00 );\n    r = extents.y * Math.abs( f0.z ) + extents.z * Math.abs( f0.y );\n\n    if ( Math.max( -Math.max( p0, p1, p2 ), Math.min( p0, p1, p2 ) ) > r ) {\n\n      return false; // Axis is a separating axis\n\n    }\n\n    // Test axis a01\n    p0 = v0.dot( a01 );\n    p1 = v1.dot( a01 );\n    p2 = v2.dot( a01 );\n    r = extents.y * Math.abs( f1.z ) + extents.z * Math.abs( f1.y );\n\n    if ( Math.max( -Math.max( p0, p1, p2 ), Math.min( p0, p1, p2 ) ) > r ) {\n\n      return false; // Axis is a separating axis\n\n    }\n\n    // Test axis a02\n    p0 = v0.dot( a02 );\n    p1 = v1.dot( a02 );\n    p2 = v2.dot( a02 );\n    r = extents.y * Math.abs( f2.z ) + extents.z * Math.abs( f2.y );\n\n    if ( Math.max( -Math.max( p0, p1, p2 ), Math.min( p0, p1, p2 ) ) > r ) {\n\n      return false; // Axis is a separating axis\n\n    }\n\n    // Test axis a10\n    p0 = v0.dot( a10 );\n    p1 = v1.dot( a10 );\n    p2 = v2.dot( a10 );\n    r = extents.x * Math.abs( f0.z ) + extents.z * Math.abs( f0.x );\n    if ( Math.max( -Math.max( p0, p1, p2 ), Math.min( p0, p1, p2 ) ) > r ) {\n\n      return false; // Axis is a separating axis\n\n    }\n\n    // Test axis a11\n    p0 = v0.dot( a11 );\n    p1 = v1.dot( a11 );\n    p2 = v2.dot( a11 );\n    r = extents.x * Math.abs( f1.z ) + extents.z * Math.abs( f1.x );\n\n    if ( Math.max( -Math.max( p0, p1, p2 ), Math.min( p0, p1, p2 ) ) > r ) {\n\n      return false; // Axis is a separating axis\n\n    }\n\n    // Test axis a12\n    p0 = v0.dot( a12 );\n    p1 = v1.dot( a12 );\n    p2 = v2.dot( a12 );\n    r = extents.x * Math.abs( f2.z ) + extents.z * Math.abs( f2.x );\n\n    if ( Math.max( -Math.max( p0, p1, p2 ), Math.min( p0, p1, p2 ) ) > r ) {\n\n      return false; // Axis is a separating axis\n\n    }\n\n    // Test axis a20\n    p0 = v0.dot( a20 );\n    p1 = v1.dot( a20 );\n    p2 = v2.dot( a20 );\n    r = extents.x * Math.abs( f0.y ) + extents.y * Math.abs( f0.x );\n\n    if ( Math.max( -Math.max( p0, p1, p2 ), Math.min( p0, p1, p2 ) ) > r ) {\n\n      return false; // Axis is a separating axis\n\n    }\n\n    // Test axis a21\n    p0 = v0.dot( a21 );\n    p1 = v1.dot( a21 );\n    p2 = v2.dot( a21 );\n    r = extents.x * Math.abs( f1.y ) + extents.y * Math.abs( f1.x );\n\n    if ( Math.max( -Math.max( p0, p1, p2 ), Math.min( p0, p1, p2 ) ) > r ) {\n\n      return false; // Axis is a separating axis\n\n    }\n\n    // Test axis a22\n    p0 = v0.dot( a22 );\n    p1 = v1.dot( a22 );\n    p2 = v2.dot( a22 );\n    r = extents.x * Math.abs( f2.y ) + extents.y * Math.abs( f2.x );\n\n    if ( Math.max( -Math.max( p0, p1, p2 ), Math.min( p0, p1, p2 ) ) > r ) {\n\n      return false; // Axis is a separating axis\n\n    }\n\n    // Test the three axes corresponding to the face normals of AABB b (category 1).\n    // Exit if...\n    // ... [-extents.x, extents.x] and [min(v0.x,v1.x,v2.x), max(v0.x,v1.x,v2.x)] do not overlap\n    if ( Math.max( v0.x, v1.x, v2.x ) < -extents.x || Math.min( v0.x, v1.x, v2.x ) > extents.x ) {\n\n      return false;\n\n    }\n    // ... [-extents.y, extents.y] and [min(v0.y,v1.y,v2.y), max(v0.y,v1.y,v2.y)] do not overlap\n    if ( Math.max( v0.y, v1.y, v2.y ) < -extents.y || Math.min( v0.y, v1.y, v2.y ) > extents.y ) {\n\n      return false;\n\n    }\n    // ... [-extents.z, extents.z] and [min(v0.z,v1.z,v2.z), max(v0.z,v1.z,v2.z)] do not overlap\n    if ( Math.max( v0.z, v1.z, v2.z ) < -extents.z || Math.min( v0.z, v1.z, v2.z ) > extents.z ) {\n\n      return false;\n\n    }\n\n    // Test separating axis corresponding to triangle face normal (category 2)\n    // Face Normal is -ve as Triangle is clockwise winding (and XNA uses -z for into screen)\n    var plane = new THREE.Plane();\n    plane.normal = new THREE.Vector3().copy( f1 ).cross( f0 ).normalize();\n    plane.constant = plane.normal.dot( a );\n    \n    return ns.collision.isIntersectionAABBPlane( aabb, plane );\n\n  };\n\n\n  // sphere1: <THREE.Sphere>\n  // sphere2: <THREE.Sphere>\n  ns.collision.isIntersectionSphereSphere = function ( sphere1, sphere2 ) {\n\n    var radiusSum = sphere1.radius + sphere2.radius;\n\n    return sphere1.center.distanceToSquared( sphere2.center ) <= ( radiusSum * radiusSum );\n\n  };\n\n  // Section 5.1.3\n  // sphere: <THREE.Sphere>\n  // aabb: <THREE.Box3>\n\n  ns.collision.isIntersectionSphereAABB = function ( sphere, aabb ) {\n\n    var sqDist = 0;\n\n    if ( sphere.center.x < aabb.min.x ) { sqDist += ( aabb.min.x - sphere.center.x ) * ( aabb.min.x - sphere.center.x ); }\n    if ( sphere.center.x > aabb.max.x ) { sqDist += ( sphere.center.x - aabb.max.x ) * ( sphere.center.x - aabb.max.x ); }\n\n    if ( sphere.center.y < aabb.min.y ) { sqDist += ( aabb.min.y - sphere.center.y ) * ( aabb.min.y - sphere.center.y ); }\n    if ( sphere.center.y > aabb.max.y ) { sqDist += ( sphere.center.y - aabb.max.y ) * ( sphere.center.y - aabb.max.y ); }\n\n    if ( sphere.center.z < aabb.min.z ) { sqDist += ( aabb.min.z - sphere.center.z ) * ( aabb.min.z - sphere.center.z ); }\n    if ( sphere.center.z > aabb.max.z ) { sqDist += ( sphere.center.z - aabb.max.z ) * ( sphere.center.z - aabb.max.z ); }\n\n    return sqDist <= sphere.radius * sphere.radius;\n\n  };\n\n\n  //http://clb.demon.fi/MathGeoLib/docs/Triangle.cpp_code.html#459\n\n  // sphere: <THREE.Sphere>\n  // a: <THREE.Vector3>, // vertex of a triangle\n  // b: <THREE.Vector3>, // vertex of a triangle\n  // c: <THREE.Vector3>, // vertex of a triangle\n  // normal: <THREE.Vector3>, // normal of a triangle\n  ns.collision.isIntersectionSphereTriangle = function ( sphere, a, b, c, normal ) {\n    // http://realtimecollisiondetection.net/blog/?p=103\n\n    // vs plain of traiangle face\n    var A = new THREE.Vector3(),\n        B = new THREE.Vector3(),\n        C = new THREE.Vector3(),\n        rr,\n        V = new THREE.Vector3(),\n        d,\n        e;\n\n    A.subVectors( a, sphere.center );\n    B.subVectors( b, sphere.center );\n    C.subVectors( c, sphere.center );\n    rr = sphere.radius * sphere.radius;\n    V.crossVectors( B.clone().sub( A ), C.clone().sub( A ) );\n    d = A.dot( V );\n    e = V.dot( V );\n\n    if ( d * d > rr * e ) {\n\n      return false;\n\n    }\n\n    // vs triangle vertex\n    var aa,\n        ab,\n        ac,\n        bb,\n        bc,\n        cc;\n\n    aa = A.dot( A );\n    ab = A.dot( B );\n    ac = A.dot( C );\n    bb = B.dot( B );\n    bc = B.dot( C );\n    cc = C.dot( C );\n\n    if (\n      ( aa > rr ) & ( ab > aa ) & ( ac > aa ) ||\n      ( bb > rr ) & ( ab > bb ) & ( bc > bb ) ||\n      ( cc > rr ) & ( ac > cc ) & ( bc > cc )\n    ) {\n\n      return false;\n\n    }\n\n    // vs edge\n    var AB = new THREE.Vector3(),\n        BC = new THREE.Vector3(),\n        CA = new THREE.Vector3(),\n        d1,\n        d2,\n        d3,\n        e1,\n        e2,\n        e3,\n        Q1 = new THREE.Vector3(),\n        Q2 = new THREE.Vector3(),\n        Q3 = new THREE.Vector3(),\n        QC = new THREE.Vector3(),\n        QA = new THREE.Vector3(),\n        QB = new THREE.Vector3();\n\n    AB.subVectors( B, A );\n    BC.subVectors( C, B );\n    CA.subVectors( A, C );\n    d1 = ab - aa;\n    d2 = bc - bb;\n    d3 = ac - cc;\n    e1 = AB.dot( AB );\n    e2 = BC.dot( BC );\n    e3 = CA.dot( CA );\n    Q1.subVectors( A.multiplyScalar( e1 ), AB.multiplyScalar( d1 ) );\n    Q2.subVectors( B.multiplyScalar( e2 ), BC.multiplyScalar( d2 ) );\n    Q3.subVectors( C.multiplyScalar( e3 ), CA.multiplyScalar( d3 ) );\n    QC.subVectors( C.multiplyScalar( e1 ), Q1 );\n    QA.subVectors( A.multiplyScalar( e2 ), Q2 );\n    QB.subVectors( B.multiplyScalar( e3 ), Q3 );\n\n    if (\n      ( Q1.dot( Q1 ) > rr * e1 * e1 ) && ( Q1.dot( QC ) >= 0 ) ||\n      ( Q2.dot( Q2 ) > rr * e2 * e2 ) && ( Q2.dot( QA ) >= 0 ) ||\n      ( Q3.dot( Q3 ) > rr * e3 * e3 ) && ( Q3.dot( QB ) >= 0 )\n    ) {\n\n      return false;\n\n    }\n\n    var distance = Math.sqrt( d * d / e ) - sphere.radius - 1,\n        contactPoint = new THREE.Vector3(),\n        negatedNormal = new THREE.Vector3( -normal.x, -normal.y, -normal.z );\n\n    contactPoint.copy( sphere.center ).add( negatedNormal.multiplyScalar( distance ) );\n\n    return {\n      distance    : distance,\n      contactPoint: contactPoint\n    };\n\n  };\n\n  // based on Real-Time Collision Detection Section 5.3.4\n  // p: <THREE.Vector3>, // line3.start\n  // q: <THREE.Vector3>, // line3.end\n  // a: <THREE.Vector3>, // triangle.a\n  // b: <THREE.Vector3>, // triangle.b\n  // c: <THREE.Vector3>, // triangle.c\n  // normal: <THREE.Vector3>, // triangle.normal, optional\n\n  // var scalarTriple = function ( a, b, c ) {\n\n  //   var m = b.clone().cross( c );\n  //   return a.dot( m );\n\n  // }\n\n  // var vectorTriple = function ( a, b, c ) {\n\n  //   var m = b.clone().cross( c );\n  //   return a.clone().cross( m );\n\n  // }\n\n  // ns.collision.isIntersectionLineTriangle = function ( p, q, a, b, c, precision ) {\n\n  //   var pq = q.clone().sub( p ),\n  //       pa = a.clone().sub( p ),\n  //       pb = b.clone().sub( p ),\n  //       pc = c.clone().sub( p ),\n  //       u, v, w;\n\n  //   u = scalarTriple( pq, pc, pb );\n\n  //   if ( u < 0 ) { return false; }\n\n  //   v = scalarTriple( pq, pa, pc );\n\n  //   if ( v < 0 ) { return false; }\n\n  //   w = scalarTriple( pq, pb, pa );\n\n  //   if ( w < 0 ) { return false; }\n\n  //   var denom = 1 / ( u + v + w );\n  //   u *= denom;\n  //   v *= denom;\n  //   w *= denom;\n\n  //   var au = a.clone().multiplyScalar( u ),\n  //       bv = b.clone().multiplyScalar( v ),\n  //       cw = c.clone().multiplyScalar( w ),\n  //       contactPoint = au.clone().add( bv ).add( cw );\n\n  //   return {\n  //     contactPoint: contactPoint\n  //   }\n\n  // }\n\n  ns.collision.testSegmentTriangle = function ( p, q, a, b, c ) {\n\n    var ab = b.clone().sub( a );\n    var ac = c.clone().sub( a );\n    var qp = p.clone().sub( q );\n\n    var n = ab.clone().cross( ac );\n\n    var d = qp.dot( n );\n    if ( d <= 0 ) { return false; }\n\n    var ap = p.clone().sub( a );\n    var t = ap.dot( n );\n\n    if ( t < 0 ) { return 0; }\n    if ( t > d ) { return 0; }\n\n    var e = qp.clone().cross( ap );\n    var v = ac.dot( e );\n\n    if ( v < 0 || v > d ) { return 0; }\n\n    var w = ab.clone().dot( e ) * -1;\n\n    if ( w < 0 || v + w > d ) { return 0; }\n\n    var ood = 1 / d;\n    t *= ood;\n    v *= ood;\n    w *= ood;\n    var u = 1 - v - w;\n\n    var au = a.clone().multiplyScalar( u ),\n        bv = b.clone().multiplyScalar( v ),\n        cw = c.clone().multiplyScalar( w ),\n        contactPoint = au.clone().add( bv ).add( cw );\n\n    return {\n      contactPoint: contactPoint\n    }\n\n}\n\n} )( THREE, MW );\n\n\n// @author yomotsu\n// MIT License\n\n;( function ( THREE, ns ) {\n\n  'use strict';\n\n  ns.World = function () {\n\n    // console.log( 'THREEFIELD.World' );\n\n    this.colliderPool  = [];\n    this.characterPool = [];\n\n  };\n\n  ns.World.prototype.add = function ( object ) {\n    \n    if ( object instanceof ns.Octree ) {\n\n      this.colliderPool.push( object );\n\n    } else if ( object instanceof ns.CharacterController ) {\n\n      this.characterPool.push( object );\n      object.world = this;\n\n    }\n\n  };\n\n  ns.World.prototype.step = function ( dt ) {\n\n    var character,\n        octree,\n        sphere,\n        intersectedNodes,\n        faces,\n        contactInfo,\n        i, ii, iii, l, ll, lll;\n\n    for ( i = 0, l = this.characterPool.length; i < l; i ++ ) {\n\n      character = this.characterPool[ i ];\n\n      // octree  node  face \n      // charactore \n      for ( ii = 0, ll = this.colliderPool.length; ii < ll; ii ++ ) {\n\n        octree = this.colliderPool[ ii ];\n        sphere = new THREE.Sphere( character.center, character.radius + character.groundPadding );\n        intersectedNodes = octree.getIntersectedNodes( sphere, octree.maxDepth );\n        faces = ns.Octree.uniqTriangkesfromNodes( intersectedNodes );\n\n      }\n      \n      character.collisionCandidate = faces;\n      character.update( dt );\n\n    }\n\n  };\n\n} )( THREE, MW );\n\n// @author yomotsu\n// MIT License\n\n// OcTree with Morton Order\n// based on http://marupeke296.com/COL_3D_No15_Octree.html\n//\n//       +------+------+\n//       |\\   2  \\   3  \\\n//       | +------+------+\n//       + |\\      \\      \\\n//       |\\| +------+------+\n//       | + |      |      |\n//       +0|\\|   6  |   7  |\n//        \\| +------+------+\n//         + |      |      |\n//    y     \\|   4  |   5  |\n//    |      +------+------+\n//    +--x\n//     \\\n//      z\n//\n//\n//       +------+------+\n//       |\\   6  \\   7  \\\n//       | +------+------+\n//       + |\\      \\      \\\n//       |\\| +------+------+\n//       | + |      |      |\n//       +4|\\|   2  |   3  |\n//        \\| +------+------+\n//         + |      |      |\n//  z y     \\|   0  |   1  |\n//   \\|      +------+------+\n//    +--x\n//\n\n;( function ( THREE, ns ) {\n\n  'use strict';\n\n  // min: <THREE.Vector3>\n  // max: <THREE.Vector3>\n  // maxDepth: <Number>\n  ns.Octree = function ( min, max, maxDepth ) {\n\n    this.min = min;\n    this.max = max;\n    this.maxDepth = maxDepth;\n    this.nodes = [];\n\n    var i, length, depth, mortonNumber,\n        pow2, pow4,\n        indexX, indexY, indexZ,\n        nodeBoxSize = new THREE.Vector3(),\n        nodeBoxMin = new THREE.Vector3(),\n        nodeBoxMax = new THREE.Vector3();\n\n    for ( depth = 0; depth < this.maxDepth; depth ++ ) {\n\n      this.nodes.push( [] );\n      pow2 = Math.pow( 2, depth );\n      pow4 = Math.pow( 4, depth );\n      nodeBoxSize.subVectors( this.max, this.min ).divideScalar( pow2 );\n\n      for ( i = 0, length = Math.pow( 8, depth ); i < length; i ++ ) {\n\n        indexX = i % pow2;\n        indexY = ( i / pow4 )|0;\n        indexZ = ( ( i / pow2 )|0 ) % pow2;\n\n        nodeBoxMin.set(\n          this.min.x + indexX * nodeBoxSize.x,\n          this.min.y + indexY * nodeBoxSize.y,\n          this.min.z + indexZ * nodeBoxSize.z\n        );\n        nodeBoxMax.copy( nodeBoxMin ).add( nodeBoxSize );\n\n        mortonNumber = ns.Octree.getMortonNumber( indexX, indexY, indexZ );\n        this.nodes[ depth ][ mortonNumber ] = new ns.OctreeNode( this, depth, mortonNumber, nodeBoxMin, nodeBoxMax );\n\n      }\n\n    }\n\n  };\n\n  ns.Octree.prototype = {\n\n    constructor: ns.Octree,\n\n    importThreeMesh: function ( threeMesh ) {\n\n\n      var i, ii, l, ll,\n          vec3 = new THREE.Vector3(),\n          geometry,\n          geometryId,\n          face,\n          normal,\n          index,\n          count,\n          start,\n          a, b, c,\n        \tvA  = new THREE.Vector3(),\n        \tvB  = new THREE.Vector3(),\n        \tvC  = new THREE.Vector3(),\n        \tvnA = new THREE.Vector3(),\n        \tvnB = new THREE.Vector3(),\n        \tvnC = new THREE.Vector3(),\n          ab  = new THREE.Vector3(),\n          cb  = new THREE.Vector3(),\n          faceNormal;\n\n      threeMesh.updateMatrix();\n\n      geometryId = threeMesh.geometry.uuid;\n      geometry   = threeMesh.geometry.clone();\n      geometry.applyMatrix( threeMesh.matrix );\n      geometry.computeVertexNormals();\n\n      if ( geometry instanceof THREE.BufferGeometry ) {\n\n        if ( geometry.index !== undefined ) {\n\n          var indices   = geometry.index.array;\n          var positions = geometry.attributes.position.array;\n          var normals   = geometry.attributes.normal.array;\n          var offsets   = geometry.groups;\n\n          if ( offsets.length === 0 ) {\n\n            offsets = [ { start: 0, count: indices.length, index: 0 } ];\n\n          }\n\n          for ( i = 0, l = offsets.length; i < l; ++ i ) {\n\n            start  = offsets[ i ].start;\n            count  = offsets[ i ].count;\n            index  = offsets[ i ].materialIndex;\n\n            for ( ii = start, ll = start + count; ii < ll; ii += 3 ) {\n\n              a = index + indices[ ii ];\n              b = index + indices[ ii + 1 ];\n              c = index + indices[ ii + 2 ];\n\n              vA = vec3.fromArray( positions, a * 3 ).clone();\n              vB = vec3.fromArray( positions, b * 3 ).clone();\n              vC = vec3.fromArray( positions, c * 3 ).clone();\n\n              // https://github.com/mrdoob/three.js/issues/4691\n              // make face normal\n              cb.subVectors( vC, vB );\n              ab.subVectors( vA, vB );\n              faceNormal = cb.cross( ab ).normalize().clone();\n\n              face = new ns.Face(\n                vA,\n                vB,\n                vC,\n                faceNormal,\n                geometryId\n              );\n\n              this.addFace( face );\n\n            }\n\n          }\n\n        }\n\n        return;\n\n      }\n\n      geometry.computeFaceNormals();\n\n      for ( i = 0, l = geometry.faces.length; i < l; i ++ ) {\n\n        face = new ns.Face(\n          geometry.vertices[ geometry.faces[ i ].a ],\n          geometry.vertices[ geometry.faces[ i ].b ],\n          geometry.vertices[ geometry.faces[ i ].c ],\n          geometry.faces[ i ].normal,\n          geometryId\n        );\n        this.addFace( face );\n\n      }\n\n    },\n\n    addFace: function ( face ) {\n\n      var i, ii, l, ll, node, targetNodes = [], tmp = [], isIntersected;\n\n      targetNodes = this.nodes[ 0 ].slice( 0 );\n\n      for ( i = 0, l = this.maxDepth; i < l; i ++ ) {\n\n        for ( ii = 0, ll = targetNodes.length; ii < ll; ii ++ ) {\n\n          node = targetNodes[ ii ];\n          isIntersected = ns.collision.isIntersectionTriangleAABB( face.a, face.b, face.c, node );\n\n          if ( isIntersected ) {\n\n            node.trianglePool.push( face );\n\n            if ( i + 1 !== this.maxDepth ) {\n\n              tmp = tmp.concat( node.getChildNodes() );\n\n            }\n\n          }\n\n        }\n\n        if ( tmp.length === 0 ) {\n\n          break;\n\n        }\n\n        targetNodes = tmp.slice( 0 );\n        tmp.length = 0;\n\n      }\n\n    },\n\n    removeThreeMesh: function ( meshID ) {\n\n      var that = this;\n\n      this.nodes.forEach( function ( nodeDepth ) {\n\n        nodeDepth.forEach( function ( node ) {\n\n          var newTrianglePool = [];\n\n          node.trianglePool.forEach( function ( face ) {\n\n            if ( face.meshID !== meshID ) {\n\n              newTrianglePool.push( face );\n\n            }\n\n          } );\n\n          node.trianglePool = newTrianglePool;\n\n        } );\n\n      } );\n\n    },\n\n    getIntersectedNodes: function ( sphere, depth ) {\n\n      var i, ii, l, ll, node, targetNodes = [], tmp = [],\n          isIntersected, intersectedNodes = [], isAtMaxDepth;\n\n      isIntersected = ns.collision.isIntersectionSphereAABB( sphere, this );\n\n      if ( !isIntersected ) {\n\n        return [];\n\n      }\n\n      targetNodes = this.nodes[ 0 ].slice( 0 );\n\n      for ( i = 0, l = depth; i < l; i ++ ) {\n\n        for ( ii = 0, ll = targetNodes.length; ii < ll; ii ++ ) {\n\n          node = targetNodes[ ii ];\n          isIntersected = ns.collision.isIntersectionSphereAABB( sphere, node );\n\n          if ( isIntersected ) {\n\n            isAtMaxDepth = ( i + 1 === depth );\n\n            if ( isAtMaxDepth ) {\n\n              if ( node.trianglePool.length !== 0 ) {\n\n                intersectedNodes.push( node );\n\n              }\n\n            } else {\n\n              tmp = tmp.concat( node.getChildNodes() );\n\n            }\n\n          }\n\n        }\n\n        targetNodes = tmp.slice( 0 );\n        tmp.length = 0;\n\n      }\n\n      return intersectedNodes;\n\n    }\n\n  };\n\n  ns.Octree.separate3Bit = function ( n ) {\n\n    n = ( n | n << 8 ) & 0x0000f00f;\n    n = ( n | n << 4 ) & 0x000c30c3;\n    n = ( n | n << 2 ) & 0x00249249;\n    return n;\n\n  };\n\n  ns.Octree.getMortonNumber = function ( x, y, z ) {\n\n    return ns.Octree.separate3Bit( x ) |\n           ns.Octree.separate3Bit( y ) << 1 |\n           ns.Octree.separate3Bit( z ) << 2;\n\n  };\n\n  ns.Octree.uniqTriangkesfromNodes = function ( nodes ) {\n\n    var i, ii, iii, l, ll, lll, uniq = [], isContained = false;\n\n    if ( nodes.length === 0 ) {\n\n      return [];\n\n    } else if ( nodes.length === 1 ) {\n\n      return nodes[ 0 ].trianglePool.slice( 0 );\n\n    }\n\n    for ( i = 0, l = nodes.length; i < l; i ++ ) {\n\n      for ( ii = 0, ll = nodes[ i ].trianglePool.length; ii < ll; ii ++ ) {\n\n        for ( iii = 0, lll = uniq.length; iii < lll; iii ++ ) {\n\n          if ( nodes[ i ].trianglePool[ ii ] === uniq[ iii ] ) {\n\n            isContained = true;\n\n          }\n\n        }\n\n        if ( !isContained ) {\n\n          uniq.push( nodes[ i ].trianglePool[ ii ] );\n\n        }\n\n        isContained = false;\n\n      }\n\n    }\n\n    return uniq;\n\n  };\n\n  //\n\n  ns.OctreeNode = function ( tree, depth, mortonNumber, min, max ) {\n\n    this.tree = tree;\n    this.depth = depth;\n    this.mortonNumber = mortonNumber;\n    this.min = new THREE.Vector3( min.x, min.y, min.z );\n    this.max = new THREE.Vector3( max.x, max.y, max.z );\n    this.trianglePool = [];\n\n  };\n\n  ns.OctreeNode.prototype = {\n\n    constructor: ns.OctreeNode,\n\n    getParentNode: function () {\n\n      if ( this.depth === 0 ) {\n\n        return null;\n\n      }\n\n      this.tree.nodes[ this.depth ][ this.mortonNumber >> 3 ];\n\n    },\n\n    getChildNodes: function () {\n\n      if ( this.tree.maxDepth === this.depth ) {\n\n        return null;\n\n      }\n\n      var firstChild = this.mortonNumber << 3;\n\n      return [\n        this.tree.nodes[ this.depth + 1 ][ firstChild ],\n        this.tree.nodes[ this.depth + 1 ][ firstChild + 1 ],\n        this.tree.nodes[ this.depth + 1 ][ firstChild + 2 ],\n        this.tree.nodes[ this.depth + 1 ][ firstChild + 3 ],\n        this.tree.nodes[ this.depth + 1 ][ firstChild + 4 ],\n        this.tree.nodes[ this.depth + 1 ][ firstChild + 5 ],\n        this.tree.nodes[ this.depth + 1 ][ firstChild + 6 ],\n        this.tree.nodes[ this.depth + 1 ][ firstChild + 7 ]\n      ];\n\n    }\n\n  };\n\n  //\n\n  // a: <THREE.Vector3>\n  // b: <THREE.Vector3>\n  // c: <THREE.Vector3>\n  // normal: <THREE.Vector3>\n  // meshID: <String>\n  ns.Face = function ( a, b, c, normal, meshID ) {\n\n    this.a = a.clone();\n    this.b = b.clone();\n    this.c = c.clone();\n    this.normal = normal.clone();\n    this.meshID = meshID;\n\n  };\n\n  ns.Face.prototype = {\n\n    constructor: ns.Face\n\n  };\n\n  // origin   : <THREE.Vector3>\n  // direction: <THREE.Vector3>\n  // distance : <Float>\n  ns.Ray = function ( origin, direction, distance ) {\n    this.origin = origin;\n    this.direction = direction;\n    this.distance = distance;\n  };\n\n} )( THREE, MW );\n\n\n"
			},
			{
				"name": "MWtps.js",
				"source": "// MWtps.js\n\n/*!\n* @author yomotsu http://yomotsu.net/\n* MIT License\n*/\n\n;( function ( THREE, ns ) {\n\n  'use strict';\n\n  ns.CharacterController = function ( object3d, radius ) {\n\n    Object.assign( this, THREE.EventDispatcher.prototype );  //  THREE.EventDispatcher.prototype.apply( this );\n    this.object = object3d;\n    this.center = this.object.position.clone();\n    this.radius = radius;\n    this.groundPadding = 0.5;\n    this.maxSlopeGradient = Math.cos( THREE.Math.degToRad( 50 ) );\n    this.isGrounded = false;\n    this.isOnSlope  = false;\n    this.isIdling   = false;\n    this.isRunning  = false;\n    this.isJumping  = false;\n    this.direction  = 0; // 0 to 2PI(=360deg) in rad\n    this.movementSpeed = 28; // default: 50; // Meters Per Second\n    this.velocity = new THREE.Vector3( 0, -10, 0 );\n    this.currentJumpPower = 0;\n    this.jumpStartTime = 0;\n    this.groundHeight = 0;\n    this.groundNormal = new THREE.Vector3();\n    this.collisionCandidate;\n    this.contactInfo = [];\n\n  };\n\n  ns.CharacterController.prototype = {\n\n    constructor: ns.CharacterController,\n\n    update: function ( dt ) {\n\n      this.isGrounded = false;\n      this.isOnSlope  = false;\n      this.groundHeight = -Infinity;\n      this.groundNormal.set( 0, 1, 0 );\n\n      this.updateGrounding();\n      this.updateJumping();\n      this.updatePosition( dt );\n      this.collisionDetection();\n      this.solvePosition();\n      this.updateVelocity();\n      this.events();\n\n    },\n\n    updateVelocity: function () {\n\n      var FALL_VELOCITY = -50,\n          frontDierction = -Math.cos( this.direction ),\n          rightDierction = -Math.sin( this.direction ),\n          normal,\n          isHittingCeiling = false,\n          wallNomal2D,\n          direction2D,\n          wallAngle,\n          frontAngle,\n          negativeFrontAngle,\n          i, l;\n      \n      this.velocity.set(\n        rightDierction * this.movementSpeed * this.isRunning, \n        FALL_VELOCITY,\n        frontDierction * this.movementSpeed * this.isRunning\n      );\n\n      if ( this.contactInfo.length === 0 && !this.isJumping ) {\n\n        return;\n\n      } else if ( this.isGrounded && !this.isOnSlope && !this.isJumping ) {\n\n        this.velocity.y = 0;\n\n      } else if ( this.isOnSlope ) {\n\n        var slidingDownVelocity = FALL_VELOCITY;\n        var holizontalSpead = - slidingDownVelocity / ( 1 - this.groundNormal.y ) * 0.2;\n\n        this.velocity.x = this.groundNormal.x * holizontalSpead;\n        this.velocity.y = FALL_VELOCITY;\n        this.velocity.z = this.groundNormal.z * holizontalSpead;\n\n      } else if ( !this.isGrounded && !this.isOnSlope && this.isJumping ) {\n\n        this.velocity.y = this.currentJumpPower * -FALL_VELOCITY;\n\n      }\n\n\n      // vs walls and sliding on the wall\n      direction2D = new THREE.Vector2( rightDierction, frontDierction );\n      frontAngle = Math.atan2( direction2D.y, direction2D.x );\n      negativeFrontAngle = Math.atan2( -direction2D.y, -direction2D.x );\n      \n      for ( i = 0, l = this.contactInfo.length; i < l; i ++ ) {\n\n        normal = this.contactInfo[ i ].face.normal;\n        // var distance = this.contactInfo[ i ].distance;\n\n        if ( this.maxSlopeGradient < normal.y || this.isOnSlope ) {\n\n          continue;\n\n        }\n\n        if ( !isHittingCeiling && normal.y < 0 ) {\n\n          isHittingCeiling = true;\n\n        }\n\n        wallNomal2D = new THREE.Vector2( normal.x, normal.z ).normalize();\n        wallAngle = Math.atan2( wallNomal2D.y, wallNomal2D.x );\n\n        if (\n          Math.abs( negativeFrontAngle - wallAngle ) >= Math.PI * 0.5 && //  90deg\n          Math.abs( negativeFrontAngle - wallAngle ) <= Math.PI * 1.5    // 270deg\n        ) {\n\n          continue;\n\n        }\n\n        wallNomal2D.set(\n          direction2D.dot( wallNomal2D ) * wallNomal2D.x,\n          direction2D.dot( wallNomal2D ) * wallNomal2D.y\n        );\n        direction2D.subVectors( direction2D, wallNomal2D );\n\n        this.velocity.x = direction2D.x * this.movementSpeed * this.isRunning;\n        this.velocity.z = direction2D.y * this.movementSpeed * this.isRunning;\n\n      }\n\n      if ( isHittingCeiling ) {\n\n        this.velocity.y = Math.min( 0, this.velocity.y );\n        this.isJumping = false;\n\n      }\n\n    },\n\n    updateGrounding: function () {\n\n      // \" (segment)\" vs \" (triangle)\" \n      // \n      // groundPadding\n      //  (isGrounded) \n      //\n      //   ___\n      //  / | \\\n      // |  |  | player sphere\n      //  \\_|_/\n      //    |\n      //---[+]---- ground\n      //    |\n      //    |\n      //    | segment (player's head to almost -infinity)\n\n\n      var i, l,\n          groundContactInfo,\n          groundContactInfoTmp,\n          faces = this.collisionCandidate,\n          distanceToGround;\n\n      var head = new THREE.Vector3(\n        this.center.x,\n        this.center.y + this.radius,\n        this.center.z\n      );\n\n      var to = new THREE.Vector3(\n        this.center.x,\n        this.center.y - 1e10,\n        this.center.z\n      );\n\n      for ( i = 0, l = faces.length; i < l; i ++ ) {\n\n        groundContactInfoTmp = ns.collision.testSegmentTriangle( head, to, faces[ i ].a, faces[ i ].b, faces[ i ].c );\n\n        if ( groundContactInfoTmp && !groundContactInfo ) {\n\n          groundContactInfo = groundContactInfoTmp;\n          groundContactInfo.face = faces[ i ];\n\n        } else if (\n          groundContactInfoTmp &&\n          groundContactInfoTmp.contactPoint.y > groundContactInfo.contactPoint.y\n        ) {\n          \n          groundContactInfo = groundContactInfoTmp;\n          groundContactInfo.face = faces[ i ];\n\n        }\n\n      }\n\n      if ( !groundContactInfo ) {\n\n        return;\n\n      }\n\n      this.groundHeight = groundContactInfo.contactPoint.y;\n      this.groundNormal.copy( groundContactInfo.face.normal );\n\n      var top    = head.y;\n      var bottom = this.center.y - this.radius - this.groundPadding;\n\n      if ( this.isJumping && 0 < this.currentJumpPower ) {\n\n        this.isOnSlope  = false;\n        this.isGrounded = false;\n        return;\n\n      }\n\n      this.isGrounded = ( bottom <= this.groundHeight && this.groundHeight <= top );\n      this.isOnSlope  = ( this.groundNormal.y <= this.maxSlopeGradient );\n\n      if ( this.isGrounded ) {\n\n        this.isJumping = false;\n\n      }\n\n    },\n\n    updatePosition: function ( dt ) {\n\n      var x = this.center.x + this.velocity.x * dt,\n          y = this.center.y + this.velocity.y * dt,\n          z = this.center.z + this.velocity.z * dt;\n\n      if ( this.isGrounded ) {\n\n        y = this.groundHeight + this.radius;\n\n      }\n\n      this.center.set( x, y, z );\n\n    },\n\n    collisionDetection: function () {\n\n      var i, l,\n          faces = this.collisionCandidate,\n          contactInfo;\n\n      this.contactInfo.length = 0;\n\n      for ( i = 0, l = faces.length; i < l; i ++ ) {\n\n        contactInfo = ns.collision.isIntersectionSphereTriangle( this, faces[ i ].a, faces[ i ].b, faces[ i ].c, faces[ i ].normal );\n\n        if ( !contactInfo ) {\n\n          continue;\n\n        }\n\n        contactInfo.face = faces[ i ];\n        this.contactInfo.push( contactInfo );\n\n      }\n\n    },\n\n    solvePosition: function () {\n\n      var face,\n          normal,\n          distance,\n          point1 = new THREE.Vector3(),\n          point2 = new THREE.Vector3(),\n          direction = new THREE.Vector3(),\n          plainD,\n          t,\n          translateScoped = new THREE.Vector3(),\n          translate = new THREE.Vector3(),\n          i, l;\n\n      if ( this.contactInfo.length === 0 ) {\n\n        this.object.position.copy( this.center );\n        return;\n\n      }\n\n      // \n      // vs walls and sliding on the wall\n\n      for ( i = 0, l = this.contactInfo.length; i < l; i ++ ) {\n\n        face = this.contactInfo[ i ].face;\n        normal = this.contactInfo[ i ].face.normal;\n        distance = this.contactInfo[ i ].distance;\n\n        // if ( 0 <= distance ) {\n\n        //   continue;\n\n        // }\n\n        if ( this.maxSlopeGradient < normal.y ) {\n\n          // this triangle is a ground or slope, not a wall or ceil.\n          continue;\n\n        }\n\n        var isSlopeFace = ( this.maxSlopeGradient <= face.normal.y && face.normal.y < 1 );\n\n        if ( this.isJumping && 0 >= this.currentJumpPower && isSlopeFace ) {\n\n          this.isJumping = false;\n          this.isGrounded = true;\n          // console.log( 'jump end' );\n\n        }\n\n        if ( this.isGrounded || this.isOnSlope ) {\n\n          // http://gamedev.stackexchange.com/questions/80293/how-do-i-resolve-a-sphere-triangle-collision-in-a-given-direction\n          point1.copy( normal ).multiplyScalar( -this.radius ).add( this.center );\n          direction.set( normal.x, 0, normal.z ).normalize();\n          plainD = face.a.dot( normal );\n          t = ( plainD - ( normal.x * point1.x + normal.y * point1.y + normal.z * point1.z ) ) / ( normal.x * direction.x + normal.y * direction.y + normal.z * direction.z );\n          point2.copy( direction ).multiplyScalar( t ).add( point1 );\n          translateScoped.subVectors( point2, point1 );\n\n          if ( Math.abs( translate.x ) > Math.abs( translateScoped.x ) ) {\n\n            translate.x += translateScoped.x;\n\n          }\n\n          if ( Math.abs( translate.z ) > Math.abs( translateScoped.z ) ) {\n\n            translate.z += translateScoped.z;\n\n          }\n\n          // break;\n          continue;\n\n        }\n\n      }\n\n      this.center.add( translate );\n      this.object.position.copy( this.center );\n\n    },\n\n    events: function () {\n\n      var isFirstUpdate = true,\n          wasGrounded,\n          wasOnSlope,\n          wasIdling,\n          wasRunning,\n          wasJumping;\n\n      return function () {\n\n        if ( isFirstUpdate ) {\n\n            isFirstUpdate = false;\n            wasGrounded = this.isGrounded;\n            wasOnSlope  = this.isOnSlope;\n            wasIdling   = this.isIdling;\n            wasRunning  = this.isRunning;\n            wasJumping  = this.isJumping;\n            return;\n\n        }\n\n        if ( !wasRunning && !this.isRunning && this.isGrounded && !this.isIdling ) {\n\n            this.isIdling = true;\n            this.dispatchEvent( { type: 'startIdling' } );\n\n        } else if (\n          ( !wasRunning && this.isRunning && !this.isJumping && this.isGrounded ) ||\n          ( !wasGrounded && this.isGrounded && this.isRunning ) ||\n          ( wasOnSlope && !this.isOnSlope && this.isRunning && this.isGrounded )\n        ) {\n\n            this.isIdling = false;\n            this.dispatchEvent( { type: 'startRunning' } );\n          \n        } else if ( !wasJumping && this.isJumping ) {\n\n            this.isIdling = false;\n            this.dispatchEvent( { type: 'startJumping' } );\n          \n        } else if ( !wasOnSlope && this.isOnSlope ) {\n\n            this.dispatchEvent( { type: 'startSliding' } );\n          \n        } else if ( wasGrounded && !this.isGrounded && !this.isJumping ) {\n\n            this.dispatchEvent( { type: 'startFalling' } );\n          \n        }\n\n        if ( !wasGrounded && this.isGrounded ) {\n\n            this.dispatchEvent( { type: 'endJumping' } );\n          \n        }\n\n        wasGrounded = this.isGrounded;\n        wasOnSlope  = this.isOnSlope;\n        wasIdling   = this.isIdling;\n        wasRunning  = this.isRunning;\n        wasJumping  = this.isJumping;\n\n      };\n\n    }(),\n\n    setDirection : function () {\n\n\n\n    },\n\n    jump: function () {\n      \n      if ( this.isJumping || !this.isGrounded || this.isOnSlope ) {\n\n        return;\n\n      }\n\n      // since ios dose not support porformance.now()\n      // this.jumpStartTime = performance.now();\n      this.jumpStartTime = Date.now();\n      this.currentJumpPower = 0.01;\n      this.isJumping = true;\n\n    },\n\n    updateJumping: function () {\n\n      var JUMP_DURATION = 1500;\n\n      if ( !this.isJumping ) {\n\n        return;\n\n      }\n\n      // since ios dose not support porformance.now()\n      // var elapsed = performance.now() - this.jumpStartTime;\n      var elapsed = Date.now() - this.jumpStartTime;\n      var progress = elapsed / JUMP_DURATION;\n      this.currentJumpPower = Math.cos( Math.min( progress, 1 ) * Math.PI );\n\n    }\n\n  }\n\n} )( THREE, MW );\n\n// @author yomotsu\n// MIT License\n\nMW.AnimationController = function ( mesh ) {\n\n  this.mesh   = mesh;\n  this.motion = {};\n  this.mixer  = new THREE.AnimationMixer( mesh );\n  this.currentMotionName = \"\";\n\n  var i, l, anim;\n\n  for ( i = 0, l = this.mesh.geometry.animations.length; i < l; i ++ ) {\n\n    anim = this.mesh.geometry.animations[ i ];\n    this.motion[ anim.name ] = this.mixer.clipAction( anim );\n    this.motion[ anim.name ].setEffectiveWeight( 1 );\n\n  }\n  \n};\n\nMW.AnimationController.prototype = {\n\n  play: function ( name ) {\n\n    if ( this.currentMotionName === name ) { return; }\n\n    if ( this.motion[ this.currentMotionName ] ) {\n\n      var from = this.motion[ this.currentMotionName ].play();\n      var to   = this.motion[ name ].play();\n\n      from.enabled = true;\n      to.enabled = true;\n\n      from.crossFadeTo( to, .3 );\n\n    } else {\n\n      this.motion[ name ].enabled = true;\n      this.motion[ name ].play();\n\n    }\n\n    this.currentMotionName = name;\n\n  },\n\n  turn: function () {\n\n    var DURATION  = 200;\n    var TAU = 2 * Math.PI;\n\n    var mod = function ( a, n ) { return ( a % n + n ) % n; };\n\n    var getDeltaAngle = function ( current, target ) {\n\n      var a = mod( ( current - target ), TAU );\n      var b = mod( ( target - current ), TAU );\n\n      return a < b ? -a : b;\n\n    };\n\n    return function ( rad, immediate ) {\n\n\n      var that       = this;\n      var progress   = 0;\n      var prevRotY   = this.mesh.rotation.y;\n      var targetRotY = rad;\n      var deltaY     = getDeltaAngle( prevRotY, targetRotY );\n      // var duration   = Math.abs( deltaY ) * 100;\n      var start      = Date.now();\n      var end        = start + DURATION;\n\n      if ( immediate ) {\n\n        this.mesh.rotation.y = targetRotY;\n        return;\n\n      }\n\n      if ( this._targetRotY === targetRotY ) { return; }\n\n      this._targetRotY = targetRotY;\n\n      ( function () {\n\n        var _targetRotY = targetRotY;\n\n        ( function interval () {\n\n          var now = Date.now();\n          var isAborted = _targetRotY !== that._targetRotY;\n\n          if ( isAborted ) { return; }\n\n          if ( now >= end ) {\n\n            that.mesh.rotation.y = _targetRotY;\n            delete that._targetRotY;\n            return;\n\n          }\n\n          requestAnimationFrame( interval );\n          progress = ( now - start ) / DURATION;\n          that.mesh.rotation.y = prevRotY + deltaY * progress;\n\n        } )();\n\n      } )();\n\n    }\n\n  }(),\n\n  update: function ( delta ) {\n\n    this.mixer.update( delta );\n\n  }\n\n};\n\n// @author yomotsu\n// MIT License\n\n;( function ( THREE, ns ) {\n\n  'use strict';\n\n  var KEY_W     = 87,\n      KEY_UP    = 38,\n      KEY_S     = 83,\n      KEY_DOWN  = 40,\n      KEY_A     = 65,\n      KEY_LEFT  = 37,\n      KEY_D     = 68,\n      KEY_RIGHT = 39,\n      KEY_SPACE = 32,\n      KEY_R     = 82; // hack //\n\n  var DEG_0   = THREE.Math.degToRad(   0 ),\n      DEG_45  = THREE.Math.degToRad(  45 ),\n      DEG_90  = THREE.Math.degToRad(  90 ),\n      DEG_135 = THREE.Math.degToRad( 135 ),\n      DEG_180 = THREE.Math.degToRad( 180 ),\n      DEG_225 = THREE.Math.degToRad( 225 ),\n      DEG_270 = THREE.Math.degToRad( 270 ),\n      DEG_315 = THREE.Math.degToRad( 315 ),\n      DEG_360 = THREE.Math.degToRad( 360 );\n\n  ns.KeyInputControl = function () {\n    \n    Object.assign( this, THREE.EventDispatcher.prototype );  //  THREE.EventDispatcher.prototype.apply( this );\n\n    this.isDisabled = false;\n\n    this.isUp    = false;\n    this.isDown  = false;\n    this.isLeft  = false;\n    this.isRight = false;\n    this.inRun   = false; // hack.\n    this.isMoveKeyHolded = false;\n    this.frontAngle = 0;\n\n    this._keydownListener = onkeydown.bind( this );\n    this._keyupListener   = onkeyup.bind( this );\n    this._blurListener    = onblur.bind( this );\n\n    window.addEventListener( 'keydown', this._keydownListener, false );\n    window.addEventListener( 'keyup',   this._keyupListener,   false );\n    window.addEventListener( 'blur',    this._blurListener,    false );\n\n  };\n\n  ns.KeyInputControl.prototype.jump = function () {\n\n    this.dispatchEvent( { type: 'jumpkeypress' } );\n\n  };\n\n  ns.KeyInputControl.prototype.updateAngle = function () {\n\n    var up    = this.isUp;\n    var down  = this.isDown;\n    var left  = this.isLeft;\n    var right = this.isRight;\n\n    if (  up && !left && !down && !right )      { this.frontAngle = DEG_0  ; }\n    else if (  up &&  left && !down && !right ) { this.frontAngle = DEG_45 ; }\n    else if ( !up &&  left && !down && !right ) { this.frontAngle = DEG_90 ; }\n    else if ( !up &&  left &&  down && !right ) { this.frontAngle = DEG_135; }\n    else if ( !up && !left &&  down && !right ) { this.frontAngle = DEG_180; }\n    else if ( !up && !left &&  down &&  right ) { this.frontAngle = DEG_225; }\n    else if ( !up && !left && !down &&  right ) { this.frontAngle = DEG_270; }\n    else if (  up && !left && !down &&  right ) { this.frontAngle = DEG_315; }\n\n  };\n\n\n  function onkeydown ( e ) {\n\n    if ( this.isDisabled ) { return; }\n\n    switch ( e.keyCode ) {\n\n      case KEY_W :\n      case KEY_UP :\n        this.isUp = true;\n        break;\n\n      case KEY_S :\n      case KEY_DOWN :\n        this.isDown = true;\n        break;\n\n      case KEY_A :\n      case KEY_LEFT :\n        this.isLeft = true;\n        break;\n\n      case KEY_D :\n      case KEY_RIGHT :\n        this.isRight = true;\n        break;\n\n      case KEY_SPACE :\n        this.jump();\n        break;\n\n      default:\n        return;\n\n    }\n    \n    var prevAngle = this.frontAngle;\n\n    this.updateAngle();\n\n    if ( prevAngle !== this.frontAngle ) {\n\n      this.dispatchEvent( { type: 'movekeychange' } );\n\n    }\n\n    if (\n      ( this.isUp || this.isDown || this.isLeft || this.isRight ) &&\n      !this.isMoveKeyHolded\n    ) {\n\n      this.isMoveKeyHolded = true;\n      this.dispatchEvent( { type: 'movekeyon' } );\n\n    }\n\n  }\n\n  function onkeyup ( e ) {\n\n    if ( this.isDisabled ) { return; }\n\n    switch ( e.keyCode ) {\n\n      case KEY_W :\n      case KEY_UP :\n        this.isUp = false;\n        break;\n\n      case KEY_S :\n      case KEY_DOWN :\n        this.isDown = false;\n        break;\n        \n      case KEY_A :\n      case KEY_LEFT :\n        this.isLeft = false;\n        break;\n\n      case KEY_D :\n      case KEY_RIGHT :\n        this.isRight = false;\n        break;\n\n      case KEY_SPACE :\n        break;\n\n      case KEY_R:\n        this.inRun = !this.inRun; // hack //  console.log(\"case KEY_R:\", e.keyCode, this.inRun);\n        break;\n\n      default:\n        return;\n\n    }\n    \n    var prevAngle = this.frontAngle;\n\n    this.updateAngle();\n\n    if ( prevAngle !== this.frontAngle ) {\n\n      this.dispatchEvent( { type: 'movekeychange' } );\n\n    }\n\n    if ( !this.isUp && !this.isDown && !this.isLeft && !this.isRight &&\n      (\n           e.keyCode === KEY_W\n        || e.keyCode === KEY_UP\n        || e.keyCode === KEY_S\n        || e.keyCode === KEY_DOWN\n        || e.keyCode === KEY_A\n        || e.keyCode === KEY_LEFT\n        || e.keyCode === KEY_D\n        || e.keyCode === KEY_RIGHT\n      )\n    ) {\n\n      this.isMoveKeyHolded = false;\n      this.dispatchEvent( { type: 'movekeyoff' } );\n\n    }\n\n  }\n\n  function onblur ( e ) {\n\n    this.isUp    = false;\n    this.isDown  = false;\n    this.isLeft  = false;\n    this.isRight = false;\n//  this.inRun   = false; // hack // DO NOT SET TO FALSE ON BLUR. //\n    \n    if ( this.isMoveKeyHolded ) {\n\n      this.isMoveKeyHolded = false;\n      this.dispatchEvent( { type: 'movekeyoff' } );\n\n    }\n\n  }\n\n} )( THREE, MW );\n\n// @author yomotsu\n// MIT License\n\n;( function ( THREE, ns ) {\n\n  'use strict';\n\n  var PI2     = Math.PI * 2,\n      PI_HALF = Math.PI / 2;\n\n  var modulo = function ( n, d ) {\n\n    return ( ( n % d ) + d ) % d;\n\n  };\n\n  // camera              isntance of THREE.Camera\n  // trackObject         isntance of THREE.Object3D\n  // params.el           DOM element\n  // params.radius       number\n  // params.minRadius    number\n  // params.maxRadius    number\n  // params.rigidObjects array of inctances of THREE.Mesh\n  ns.TPSCameraControl = function ( camera, trackObject, params ) {\n\n    Object.assign( this, THREE.EventDispatcher.prototype );  //  THREE.EventDispatcher.prototype.apply( this );\n    this.camera = camera;\n    this.trackObject  = trackObject;\n    this.el           = params && params.el || document.body;\n    this.offset       = params && params.offset || new THREE.Vector3( 0, 0, 0 ),\n    this.radius       = params && params.radius    || 10;\n    this.minRadius    = params && params.minRadius || 1;\n    this.maxRadius    = params && params.maxRadius || 30;\n    this.rigidObjects = params && params.rigidObjects || [];\n    this.lat   = 0;\n    this.lon   = 0;\n    this.phi   = 0; // angle of zenith\n    this.theta = 0; // angle of azimuth\n    this.mouseAccelerationX = params && params.mouseAccelerationX !== undefined ? params.mouseAccelerationX : 100;\n    this.mouseAccelerationY = params && params.mouseAccelerationY !== undefined ? params.mouseAccelerationY : 30;\n    this._pointerStart = { x: 0, y: 0 };\n    this._pointerLast  = { x: 0, y: 0 };\n\n    this.setNearPlainCornersWithPadding();\n    this.update();\n\n    this._mousedownListener = onmousedown.bind( this );\n    this._mouseupListener   = onmouseup.bind( this );\n    this._mousedragListener = onmousedrag.bind( this );\n    this._scrollListener    = onscroll.bind( this );\n\n    this.el.addEventListener( 'mousedown', this._mousedownListener, false );\n    this.el.addEventListener( 'mouseup',   this._mouseupListener,   false );\n    this.el.addEventListener( 'mousewheel',     this._scrollListener, false );\n    this.el.addEventListener( 'DOMMouseScroll', this._scrollListener, false );\n\n  };\n\n  ns.TPSCameraControl.prototype = {\n\n    constructor: ns.TPSCameraControl,\n\n    update: function () {\n\n      var position,\n          distance;\n\n      this._center = new THREE.Vector3(\n        this.trackObject.matrixWorld.elements[ 12 ] + this.offset.x,\n        this.trackObject.matrixWorld.elements[ 13 ] + this.offset.y,\n        this.trackObject.matrixWorld.elements[ 14 ] + this.offset.z\n      );\n      position = new THREE.Vector3(\n        Math.cos( this.phi ) * Math.cos( this.theta + PI_HALF ),\n        Math.sin( this.phi ),\n        Math.cos( this.phi ) * Math.sin( this.theta + PI_HALF )\n      );\n      distance = this.collisionTest( position.clone().normalize() );\n      position.multiplyScalar( distance );\n      position.add( this._center );\n      this.camera.position.copy( position );\n\n      if ( this.lat === 90 ) {\n\n        this.camera.up.set(\n          Math.cos( this.theta + Math.PI ),\n          0,\n          Math.sin( this.theta + Math.PI )\n        );\n\n      } else if ( this.lat === -90 ) {\n\n        this.camera.up.set(\n          Math.cos( this.theta ),\n          0,\n          Math.sin( this.theta )\n        );\n\n      } else {\n\n        this.camera.up.set( 0, 1, 0 );\n\n      }\n\n      this.camera.lookAt( this._center );\n      this.dispatchEvent( { type: 'updated' } );\n\n    },\n\n    getFrontAngle: function () {\n\n      return PI2 + this.theta;\n\n    },\n\n    setNearPlainCornersWithPadding: function () {\n\n      var near = this.camera.near,\n          halfFov = this.camera.fov * 0.5,\n          h = ( Math.tan( THREE.Math.degToRad( halfFov ) ) * near ),\n          w = h * this.camera.aspect;\n\n      this.nearPlainCornersWithPadding = [\n        new THREE.Vector3( -w - near, -h - near, 0 ),\n        new THREE.Vector3(  w + near, -h - near, 0 ),\n        new THREE.Vector3(  w + near,  h + near, 0 ),\n        new THREE.Vector3( -w - near,  h + near, 0 )\n      ];\n\n    },\n\n    setLatLon: function ( lat, lon ) {\n\n      this.lat = lat >  90 ?  90 :\n                 lat < -90 ? -90 :\n                 lat;\n      this.lon = lon < 0 ? 360 + lon % 360 : lon % 360;\n\n      this.phi   =  THREE.Math.degToRad( this.lat );\n      this.theta = -THREE.Math.degToRad( this.lon );\n\n    },\n\n    collisionTest: function ( direction ) {\n\n      var i,\n          distance = this.radius,\n          nearPlainCorner,\n          rotationMatrix = new THREE.Matrix4(),\n          rotationX = new THREE.Matrix4().makeRotationX( this.phi ),\n          rotationY = new THREE.Matrix4().makeRotationY( this.theta ),\n          origin,\n          raycaster,\n          intersects;\n\n      rotationMatrix.multiplyMatrices( rotationX, rotationY );\n\n      for ( i = 0; i < 4; i ++ ) {\n\n        nearPlainCorner = this.nearPlainCornersWithPadding[ i ].clone();\n        nearPlainCorner.applyMatrix4( rotationMatrix );\n\n        origin = new THREE.Vector3(\n          this._center.x + nearPlainCorner.x,\n          this._center.y + nearPlainCorner.y,\n          this._center.z + nearPlainCorner.z\n        );\n        raycaster = new THREE.Raycaster(\n          origin,           // origin\n          direction,        // direction\n          this.camera.near, // near\n          this.radius       // far\n        );\n        intersects = raycaster.intersectObjects( this.rigidObjects );\n\n        if ( intersects.length !== 0 && intersects[ 0 ].distance < distance ) {\n\n          distance = intersects[ 0 ].distance;\n\n        }\n\n      }\n\n      return distance;\n\n    }\n\n  };\n\n  function onmousedown ( event ) {\n\n    this.dispatchEvent( { type: 'mousedown' } );\n    this._pointerStart.x = event.clientX;\n    this._pointerStart.y = event.clientY;\n    this._pointerLast.x = this.lon;\n    this._pointerLast.y = this.lat;\n    this.el.removeEventListener( 'mousemove', this._mousedragListener, false );\n    this.el.addEventListener( 'mousemove', this._mousedragListener, false );\n//  document.body.className += ' js-TPSCameraDragging';\n    document.body.classList.add(\"js-TPSCameraDragging\");\n\n  }\n\n  function onmouseup () {\n\n    this.dispatchEvent( { type: 'mouseup' } );\n    this.el.removeEventListener( 'mousemove', this._mousedragListener, false );\n//  document.body.className = document.body.className.replace( / js-TPSCameraDragging/g, '' );\n    document.body.classList.remove(\"js-TPSCameraDragging\");\n\n  }\n\n  function onmousedrag ( event ) {\n\n    var w = this.el.offsetWidth,\n        h = this.el.offsetHeight,\n        x = ( this._pointerStart.x - event.clientX ) / w * 2,\n        y = ( this._pointerStart.y - event.clientY ) / h * 2;\n\n    this.setLatLon(\n      this._pointerLast.y + y * this.mouseAccelerationY,\n      this._pointerLast.x + x * this.mouseAccelerationX\n    );\n\n  }\n\n  function onscroll ( event ) {\n\n    event.preventDefault();\n\n    if ( event.wheelDeltaY ) {\n\n      // WebKit\n      this.radius -= event.wheelDeltaY * 0.05;\n\n    } else if ( event.wheelDelta ) {\n\n      // IE\n      this.radius -= event.wheelDelta * 0.05 ;\n\n    } else if ( event.detail ) {\n\n      // Firefox\n      this.radius += event.detail;\n\n    }\n\n    this.radius = Math.max( this.radius, this.minRadius );\n    this.radius = Math.min( this.radius, this.maxRadius );\n\n  }\n\n} )( THREE, MW );\n"
			},
			{
				"name": "VirtualInput.js",
				"source": "/*!\n * @author yomotsu http://yomotsu.net/\n * MIT License\n */\n\nvirtualInput = {};\n\n( function ( ns ) {\n\n    var _ua = function () {\n        return {\n            Touch: typeof document.ontouchstart != \"undefined\",\n            Pointer: window.navigator.pointerEnabled,\n            MSPoniter: window.navigator.msPointerEnabled\n        }\n    };\n\n    ns._start = \"pointerdown MSPointerDown touchstart mousedown\";\n    ns._move  = \"pointermove MSPointerMove touchmove  mousemove\";\n    ns._end   = \"pointerup   MSPointerUp   touchend   mouseup\";\n\n    ns.Joystick = function ( $container, size, params ) {\n\n        Object.assign( this, THREE.EventDispatcher.prototype );  //  THREE.EventDispatcher.prototype.apply( this );\n\n        this.angle = 0;\n        this.position = { x: 0, y: 0 };\n        this.pointerId = null;\n        this.isActive = false;\n\n        this.width = size * 2;\n        this.halfWidth = size;\n\n        var that = this;\n        var id = params && params.id ? params.id  : '';\n        var template = [\n          '<div class=\"gameinput-joystick\" id=\"' + id + '\">',\n            '<div class=\"gameinput-joystick__button\"></div>',\n            '<svg class=\"gameinput-frame\" width=\"' + this.width + '\" height=\"' + this.width + '\" viewbox=\"0 0 64 64\">',\n              '<polygon points=\"32 19 34 21 30 21\" fill=\"#fff\"></polygon>',\n              '<polygon points=\"45 32 43 34 43 30\" fill=\"#fff\"></polygon>',\n              '<polygon points=\"32 45 34 43 30 43\" fill=\"#fff\"></polygon>',\n              '<polygon points=\"19 32 21 34 21 30\" fill=\"#fff\"></polygon>',\n              '<circle cx=\"32\" cy=\"32\" r=\"16\" fill=\"none\" stroke=\"#fff\" stroke-width=\"' + ( this.halfWidth / 64 ) + '\"></circle>',\n            '</svg>',\n          '</div>'\n        ].join( '' );\n\n        var $win = $( window );\n        this.$all = $( template );\n        this.$button = this.$all.find( \".gameinput-joystick__button\" );\n        $container.append( this.$all );\n\n        this.$all.css({\n            width:  this.width,\n            height: this.width\n        });\n\n        this.$button.css({\n            width:  size * .6,\n            height: size * .6\n        });\n\n        this.offset = this.$all.offset();\n        this.buttonRadius = this.$button.width() / 2;\n        this.frameRadius = size / 2;\n    //  this.position = { x: 0, y: 0 };\n\n        var onbuttondown = function ( event ) {\n\n            event.preventDefault();\n            event.stopPropagation();\n            \n            that.dispatchEvent( { type: 'active' } );\n            that.isActive = true;\n            \n            if ( event.originalEvent.pointerId ) {\n            \n                that.pointerId = event.originalEvent.pointerId;\n            \n            } else if ( event.originalEvent.changedTouches ) {\n            \n                that.pointerId = event.originalEvent.changedTouches[ event.originalEvent.changedTouches.length - 1 ].identifier;\n            \n            }\n            \n            var coordinate = that.getEventCoordinate( event );\n            \n            if ( !coordinate ) { return; }\n            \n            that.setPosition( coordinate.x, coordinate.y );\n            \n            $win.on( ns._move, onbuttonmove );\n            $win.on( ns._end,  onbuttonup );\n\n        };\n\n        var onbuttonmove = function ( event ) {\n\n            event.preventDefault();\n            event.stopPropagation();\n            \n            var coordinate = that.getEventCoordinate( event );\n            \n            if ( !coordinate ) {\n                return;\n            }\n            \n            that.setPosition( coordinate.x, coordinate.y );\n\n        };\n\n        var onbuttonup = function ( event ) {\n\n            event.stopPropagation();\n\n            var wasEventHappend;\n\n            if ( event.originalEvent.pointerId ) {\n\n                if ( that.pointerId !== event.originalEvent.pointerId ) {\n                    return;\n                }\n\n            } else if ( event.originalEvent.changedTouches ) {\n            \n                for ( i = 0, l = event.originalEvent.changedTouches.length; i < l; i ++ ) {\n                \n                    if ( that.pointerId === event.originalEvent.changedTouches[ i ].identifier ) {\n                        wasEventHappend = true;\n                        break;\n                    }\n                \n                    if ( !wasEventHappend ) {\n                        return;\n                    }\n                \n                }\n            \n            }\n\n            that.dispatchEvent( { type: \"disactive\" } );\n            that.isActive = false;\n            that.setPosition( 0, 0 );\n            $win.off( ns._move, onbuttonmove );\n            $win.off( ns._end,  onbuttonup );\n\n        };\n\n        this.setCSSPosition( 0, 0 );\n        this.$all.on( ns._start, onbuttondown );\n\n        $win.on( \"resize\", function () {\n\n            that.offset = that.$all.offset();\n\n        });\n\n    };\n\n    ns.Joystick.prototype.getLength = function ( x, y ) {\n        return Math.sqrt( Math.pow( x, 2 ) + Math.pow( y, 2 ) );\n    };\n\n    ns.Joystick.prototype.getAngle = function ( lengthX, lengthY ) {\n\n        if ( lengthX === 0 && lengthY === 0 ) {\n          return this.angle;\n        }\n\n        var angle = Math.atan( lengthY / lengthX );\n\n        if ( 0 > lengthX && 0 <= lengthY ) {\n          //the second quadrant\n          angle += Math.PI;\n\n        } else if ( 0 > lengthX && 0 > lengthY ) {\n          //the third quadrant\n          angle += Math.PI;\n\n        } else if ( 0 <= lengthX && 0 > lengthY ) {\n          //the fourth quadrant\n          angle += Math.PI * 2;\n\n        }\n\n        this.angle = angle;\n        return angle;\n\n    };\n\n    ns.Joystick.prototype.getPointOnRadius = function ( angle ) {\n\n        return {\n          x: Math.cos( angle ),\n          y: Math.sin( angle )\n        };\n\n    };\n\n    ns.Joystick.prototype.getEventCoordinate = function ( event ) {\n\n        var x, y, _event = null, i, l;\n\n        if ( event.originalEvent.pointerId ) {\n\n            if ( this.pointerId === event.originalEvent.pointerId ) {\n                _event = event.originalEvent;\n            }\n\n        } else if ( event.originalEvent.changedTouches ) {\n\n            for ( i = 0, l = event.originalEvent.changedTouches.length; i < l; i ++ ) {\n                if ( this.pointerId === event.originalEvent.changedTouches[ i ].identifier ) {\n                  _event = event.originalEvent.changedTouches[ i ];\n                }\n            }\n\n        } else {\n\n            _event = event;\n\n        }\n\n        if ( _event === null ) {\n            return false;\n        }\n\n        x = (   ( _event.clientX - this.offset.left ) - this.halfWidth ) / this.halfWidth * 2;\n        y = ( - ( _event.clientY - this.offset.top  ) + this.halfWidth ) / this.halfWidth * 2;\n\n        return { x: x, y: y };\n\n    };\n\n    ns.Joystick.prototype.setPosition = function ( x, y ) {\n\n        this.position.x = x;\n        this.position.y = y;\n        var length = this.getLength( x, y );\n        var angle = this.getAngle( x, y );\n\n        if ( 1 >= length ) {\n            this.setCSSPosition( x, y );\n            return;\n        }\n\n        var pointOnRadius = this.getPointOnRadius( angle );\n        this.setCSSPosition( pointOnRadius.x, pointOnRadius.y );\n\n    };\n\n    ns.Joystick.prototype.setCSSPosition = function ( x, y ) {\n\n        this.$button.css( {\n            left: ( this.halfWidth + x * this.frameRadius - this.buttonRadius ),\n            top:  ( this.halfWidth - y * this.frameRadius - this.buttonRadius )\n        });\n\n    };\n\n    ns.Button = function ( $container, size, params ) {\n\n        Object.assign( this, THREE.EventDispatcher.prototype );  // THREE.EventDispatcher.prototype.apply( this );\n\n        var that = this;\n        var id = params && params.id ? params.id  : \"\";\n        var label = params.label;\n        var template = [\n          '<div class=\"gameinput-button\" id=\"' + id + '\">',\n            '<div class=\"gameinput-button__inner\">',\n              label,\n            '</div>',\n          '</div>'\n        ].join( \"\" );\n        var $button = $( template );\n        $container.append( $button );\n        $button.css( {\n            width: size,\n            height: size\n        });\n\n        $button.on( ns._start, function () {\n            that.dispatchEvent( { type: \"press\" } );\n        });\n\n    };\n\n})( virtualInput );\n"
			},
			{
				"name": "world.js",
				"source": "//  MW WORLD.\n\nworld = new MW.World();\n\nfunction update( event ){\n\tvar delta = clock.getDelta();\n\tworld.step( delta );\n}\n"
			},
			{
				"name": "octree.js",
				"source": "//  OCTREE.\n\n//  Make a octree object, which will be the \n//  container of rigid objects such as terrain ect.\n\nconst partition = 2;\n\nconst min = new THREE.Vector3( -1000, -1000, -1000 );\nconst max = new THREE.Vector3(  1000,  1000,  1000 );\n\noctree = new MW.Octree( min, max, partition );\n\n//  WORLD.\n\nworld.add( octree );\n\n//  GROUND.\n\nground = new THREE.Mesh(\n\tnew THREE.PlaneGeometry( 2500, 2500, 1, 1 ),\n\tnew THREE.MeshPhongMaterial({ \n\t\tcolor:0x829ec4,\n\t\ttransparent:false,\n\t\topacity:1, \n\t\tshininess: 80,\n\t\twireframe:false,\n\t})\n);\n\nground.rotation.x = THREE.Math.degToRad( -90 );\n\n//  We want the ground as collision surface only,\n//  so we do not add the ground in the scene.\n\n//\tscene.add( ground );\n//\tground.visible = false;\n//  ground.receiveShadow = true;\n\n//  Add the ground to WALKMESH world octree object.\n//  MESHWALK use octree system to detect collision objects.\n\noctree.importThreeMesh( ground ); // important!\n\n//  Octree helpers.\n\nvar octMeshHelpers = [];\nvar octEdgesHelpers = [];\n\n//  Add octree edges helpers.\n//  octreeHelpers( octree );\n\nfunction octreeHelpers( octree ){\n\tvar nodeIndex = octree.nodes.length - 1;\n\tvar node = octree.nodes[ nodeIndex ][0];\n\tvar x = node.max.x - node.min.x;\n\tvar y = node.max.y - node.min.y;\n\tvar z = node.max.z - node.min.z;\n\tvar geometry = new THREE.BoxGeometry(x, y, z);\n\tvar material = new THREE.MeshBasicMaterial({visible:false});\n\n\toctree.nodes[ nodeIndex ].forEach(function(node){\n\n\t\tvar x = node.max.x - node.min.x;\n\t\tvar y = node.max.y - node.min.y;\n\t\tvar z = node.max.z - node.min.z;\n\n\t\tvar mesh = new THREE.Mesh(geometry, material);\n\t\tvar helper = new THREE.EdgesHelper( mesh, 0xffff00 );\n\n\t\tmesh.position.set(\n\t\t\tnode.min.x + (x/2),\n\t\t\tnode.min.y + (y/2),\n\t\t\tnode.min.z + (z/2)\n\t\t);\n\n\t\t//  scene.add( mesh );\n\t\tscene.add( mesh, helper );\n\n\t\toctMeshHelpers.push(mesh);\n\t\toctEdgesHelpers.push(helper);\n\t});\n}\n\nfunction octreeNodeHelper( node ){\n\tvar x = node.max.x - node.min.x;\n\tvar y = node.max.y - node.min.y;\n\tvar z = node.max.z - node.min.z;\n\tvar geometry = new THREE.BoxGeometry(x, y, z);\n\tvar material = new THREE.MeshBasicMaterial({visible:false});\n\tvar mesh = new THREE.Mesh(geometry, material);\n\tmesh.position.set(\n\t\tnode.min.x + (x/2),\n\t\tnode.min.y + (y/2),\n\t\tnode.min.z + (z/2)\n\t);\n\tscene.add( mesh );\n\toctMeshHelpers.push(mesh);\n\tvar helper = new THREE.EdgesHelper( mesh, 0xffff00 );\n\thelper.name = \"octree helper\";\n\tscene.add( helper );\n\toctEdgesHelpers.push(helper);\n}\n\n/*\n//  Remove octree mesh helpers.\n    setTimeout(function(){\n        octMeshHelpers.forEach( function( item, i ){\n            scene.remove( octMeshHelpers[i] );\n            var geometry = octMeshHelpers[i].geometry;\n            var material = octMeshHelpers[i].material;\n            geometry.dispose();\n            material.dispose();\n        });\n        console.log( \"octree mesh helpers has been removed.\" );\n    }, 5000);\n*/\n\n"
			},
			{
				"name": "AW3D.js (v0.4)",
				"source": "//  AW3D.js (v0.4.0)\n\nAW3D = { VERSION: \"0.4.0\" };\n\n//  Player Holder.\nAW3D.PlayerHolder = function ( name ){\n\tvar holder = new THREE.Object3D();\n\tholder.position.set( 0, 1, 0 );\n\tholder.name = name || \"PLAYER HOLDER\";\n\treturn holder;\n};\n\n//  Player Holder Helper.\nAW3D.PlayerHolderHelper = function ( name ){\n\tvar helper = new THREE.BoxHelper();\n\thelper.name = name || \"HOLDER HELPER\";\n\thelper.visible = true;\n\treturn helper;\n};\n\n//  Player Controller Direction pointer.\nAW3D.DirectionPointer = function ( name ){\n\tvar geometry = new THREE.CylinderGeometry( 0, 1, 20, 12 );\n\t//  BE CAREFULL: is not \"mesh.rotation.y = -Math.PI\".\n\tgeometry.rotateX( Math.PI / 2 );  //  important!\n\tvar material = new THREE.MeshStandardMaterial({color:0x00ff00});\n\tvar pointer = new THREE.Mesh(geometry, material);\n\tpointer.position.set(0, 15, 0);\n\tpointer.name = name || \"PLAYER DIRECTION\";\n\tpointer.visible = true;\n\treturn pointer;\n};\n\n//  Player Sphere.\nAW3D.PlayerSphere = function ( name ){\n\tvar sphere = new THREE.Mesh(\n\t\tnew THREE.SphereGeometry( 15, 8, 4 ),\n\t\tnew THREE.MeshBasicMaterial({ \n\t\t\tcolor: 0xff0000,  \n\t\t\twireframe: true,\n\t\t})\n\t); \n\tsphere.position.y = 12;\n\tsphere.name = name || \"PLAYER SPHERE\";\n\tsphere.visible = true;\n\treturn sphere;\n};\n\n//  Player pointer.\nAW3D.PlayerPointer = function ( name ){\n\tvar geometry = new THREE.CylinderGeometry( 0, 1, 20, 12 );\n\t//  BE CAREFULL: is not \"mesh.rotation.y = -Math.PI\".\n\tgeometry.rotateX( Math.PI / 2 );  //  important!\n\tvar material = new THREE.MeshNormalMaterial();\n\tvar pointer = new THREE.Mesh(geometry, material);\n\tpointer.position.set(0, 40, 0);\n\tpointer.name = name || \"PLAYER POINTER\";\n\tpointer.visible = true; // debugMode || false;\n\treturn pointer;\n};\n\n\n//  OutfitManager.js\n\nAW3D.OutfitManager = function(){\n\n\tvar self = this;\n\n\t//  requires \"signals.min.js\"\n\tvar Signal = signals.Signal;\n\tthis.added = new Signal();\n\tthis.removed = new Signal();\n\tthis.changed = new Signal();\n\n\tthis.eventTimeout = undefined;\n\tthis.direction = new THREE.Object3D();\n\n\tthis.gender = {\n\t\tmale    : false,\n\t\tfemale  : false,\n\t\tshemale : false,\n\t\ttrans   : false,\n\t};\n\n\tthis.genitals = { \n\t\tvagina   : false,\n\t\tpenis    : false,\n\t\tattached : false,\n\t};\n\n\tthis.layers = [\n\t\t\"body\",\n\t\t\"head\",\n\t\t\"face\",\n\t\t\"hairs\",\n\t\t\"upper\", // chest.\n\t\t\"lower\", // hips.\n\t\t\"torso\", // (chest & hips).\n\t\t\"arms\",\n\t\t\"legs\",\n\t\t\"hands\",\n\t\t\"feet\",\n\t\t\"genitals\", \n\t\t\"skeleton\",\n\t];\n\n\tthis.slots = [\n\t\t\"skeleton\",\n\t\t\"body\",\n\t\t\"hairs\",\n\t\t\"eyes\",\n\t\t\"glasses\",\n\t\t\"hat\",\n\t\t\"stockings\",\n\t\t\"underwears\",\n\t\t\"costume\",\n\t\t\"tshirt\",\n\t\t\"skirt\",\n\t\t\"trousers\",\n\t\t\"skirt\",\n\t\t\"dress\",\n\t\t\"shoes\",\n\t\t\"coat\",\n\t\t\"penis\", \n\t\t\"vagina\",\n\t];\n\n\tthis.stickers = [\n\t\t\"skin\",\n\t\t\"makeup\",\n\t\t\"tattoo\",\n\t\t\"bodypaint\",\n\t\t\"neck\",\n\t\t\"chest\",\n\t\t\"belly\",\n\t\t\"upperlimb\",\n\t\t\"arm\",\n\t\t\"forearm\",\n\t\t\"wrist\",\n\t\t\"hand\",\n\t\t\"lowerlimb\",\n\t\t\"thigh\",\n\t\t\"leg\",\n\t\t\"foot\",\n\t\t\"butt\",\n\t\t\"back\",\n\t\t\"scapula\",\n\t\t\"lumbar\",\n\t];\n\n\tthis.attachments = [\n\t\t\"helmet\",\n\t\t\"face\",\n\t\t\"mask\",\n\t\t\"teeth\",\n\t\t\"beard\",\n\t\t\"eyelash\",\n\t\t\"glasses\",\n\t\t\"ears\",\n\t\t\"belly\",\n\t\t\"gun\",\n\t\t\"wepon\",\n\t\t\"knife\",\n\t\t\"sword\",\n\t\t\"bistol\",\n\t\t\"watch\",\n\t\t\"jewelry\",\n\t\t\"earings\",\n\t\t\"necklace\",\n\t\t\"bracelet\",\n\t\t\"bag\",\n\t\t\"handbag\",\n\t\t\"cape\",\n\t\t\"coat\",\n\t\t\"horn\",\n\t\t\"tail\",\n\t\t\"penis\", \n\t];\n\n\tthis.AnimationsHandler = [];\n\n\t//  Outfit.AnimationsHandler is an simple array where local\n\t//  player.outfit keeps the AW3D.AnimationHandler instances.\n\n\tthis.AnimationsHandler.reset = function(){\n\t\tthis.length = 0; // reset array.\n\t};\n\n\tthis.AnimationsHandler.stop = function(){\n\t\tthis.forEach( function( anim ){\n\t\t\tif (!!anim ) anim.stop();\n\t\t});\n\t};\n\n\tthis.AnimationsHandler.jump = function(){\n\t\tthis.forEach( function( anim ){\n\t\t\tif (!!anim ) anim.jump();\n\t\t});\n\t};\n\n\tthis.AnimationsHandler.play = function(){\n\t\tfor (var i in arguments){\n\t\t\tvar name = arguments[i];\n\t\t\tthis.forEach( function( anim ){\n\t\t\t\tif (!!anim ) anim.play(name);\n\t\t\t});\n\t\t}\n\t};\n\n\tthis.AnimationsHandler.weightOff = function(){\n\t\tfor (var i in arguments){\n\t\t\tvar name = arguments[i];\n\t\t\tthis.forEach( function( anim ){\n\t\t\t\tif (!!anim ) anim.weightOff(name);\n\t\t\t});\n\t\t}\n\t};\n\n\tthis.AnimationsHandler.weightOn = function(){\n\t\tfor (var i in arguments){\n\t\t\tvar name = arguments[i];\n\t\t\tthis.forEach( function( anim ){\n\t\t\t\tif (!!anim ) anim.weightOn(name);\n\t\t\t});\n\t\t}\n\t};\n\n\tthis.AnimationsHandler.fadeIn = function(){\n\t\tfor (var i in arguments){\n\t\t\tvar name = arguments[i];\n\t\t\tthis.forEach( function( anim ){\n\t\t\t\tif (!!anim ) anim.fadeIn(name);\n\t\t\t});\n\t\t}\n\t};\n\n\tthis.AnimationsHandler.fadeOut = function(){\n\t\tfor (var i in arguments){\n\t\t\tvar name = arguments[i];\n\t\t\tthis.forEach( function( anim ){\n\t\t\t\tif (!!anim ) anim.fadeOut(name);\n\t\t\t});\n\t\t}\n\t};\n\n\tthis.AnimationsHandler.refresh = function(){\n\n\t\tthis.stop();\n\t\tthis.fill(null);\n\t\tthis.reset();\n\n\t\tvar gender = self.getGender();\n\n\t\tself.slots.forEach( function(name, i){\n\n\t\t\tif ( !!self[ name ] ){\n\n\t\t\t\tvar handler = new AW3D.AnimationHandler( self[ name ], gender );\n\n\t\t\t\tself.AnimationsHandler.push( handler );\n\t\t\t}\n\t\t});\n\n\t\tthis.play(\"idle\");\n\t};\n\n\t//  Outfit EventDispatcher.\n\tObject.assign( this, THREE.EventDispatcher.prototype );  // important!\n\n};\n\n\nAW3D.OutfitManager.prototype = {\n\n\tconstructor: AW3D.OutfitManager,\n\n\trefresh: function(){\n\t\tthis.AnimationsHandler.refresh();\n\t},\n\n\n\tget: function(){\n\n\t\tvar results = {};\n\n\t\tvar _get = ( arg ) => {\n\n\t\t\tif ( typeof( arg ) == \"string\" ) {\n\t\t\t\tif ( !!this[arg] ) results[arg] =  this[arg];\n\t\t\t}\n\n\t\t\tif ( arg instanceof Array ) {\n\t\t\t\targ.forEach( ( key ) => {\n\t\t\t\t\t_get( key );\n\t\t\t\t});\n\t\t\t}\n\t\t};\n\n\t\tif ( arguments.length > 0 ){\n\n\t\t\tfor (var i in arguments){\n\n\t\t\t\tif ( !arguments[i] ) continue;\n\n\t\t\t\t_get( arguments[i] );\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tthis.slots.forEach( (name) => { _get( name ); });\n\n\t\t}\n\n\t\treturn results;\n\n\t},\n\n\tset: function(){\n\t\t//  Set \"this.slot\" but not add to \"this.direction\".\n\n\t\tfor (var arg in arguments){\n\n\t\t\tif (!arguments[arg]) continue;\n\n\t\t\tvar name = Object.keys(arguments[arg])[0];\n\t\t\tvar asset = Object.values(arguments[arg])[0];\n\n\t\t\tif ( !name || name == null || !asset ) continue;\n\t\t\tif ( !!this[ name ] ) this.remove( name );\n\n\t\t\tthis[ name ] = asset;\n\n\t\t\t//  Create an animation handler for this outfit slot.\n\t\t\tvar handler = new AW3D.AnimationHandler( this[ name ], this.getGender() );\n\n\t\t\t//  Add animation handler.\n\t\t\tthis.AnimationsHandler.push( handler );\n\n\t\t}\n\n\t\t//  Send \"change\" event only when last \n\t\t//  add has been completed (delay:100ms).\n\n\t\tvar msec = 100;\n\t\tclearTimeout( this.eventTimeout );\n\t\tthis.eventTimeout = setTimeout( () => {\n\t\t\tthis.dispatchEvent( {type:\"change\"} );\n\t\t\tthis.changed && this.changed.dispatch();\n\t\t}, msec);\n\n\t\treturn this;\n\t},\n\n\tadd: function(){\n\n\t\tfor (var arg in arguments) {\n\n\t\t\tif (!arguments[arg]) continue;\n\n\t\t\tvar name = Object.keys(arguments[arg])[0];\n\t\t\tvar asset = Object.values(arguments[arg])[0];\n\n\t\t\tif ( !name || name == null || !asset ) continue;\n\t\t\tif ( this[ name ] ) this.remove( name );  // important!\n\n\t\t\tthis[ name ] = asset;\n\n\t\t\t//  Create an animation handler for this outfit slot.\n\t\t\tvar handler = new AW3D.AnimationHandler( this[name], this.getGender() );\n\n\t\t\tif ( this.AnimationsHandler.length ) {\n\n\t\t\t\t//  Copy each action properties of first animation handler.\n\t\t\t\tvar masterHandler = this.AnimationsHandler[0];\n\n\t\t\t\tfor ( var action in handler.actions ) {\n\n\t\t\t\t\tif ( !action ) break;\n\n\t\t\t\t\thandler.actions[action].loop = masterHandler.actions[action].loop;\n\t\t\t\t\thandler.actions[action].weight = masterHandler.actions[action].weight;\n\t\t\t\t\thandler.actions[action].timeScale = masterHandler.actions[action].timeScale;\n\t\t\t\t\thandler.actions[action].currentTime = masterHandler.actions[action].currentTime;\n\t\t\t\t\thandler.actions[action].interpolationType = masterHandler.actions[action].interpolationType;\n\n\t\t\t\t\tif ( masterHandler.actions[action].isPlaying ) {\n\t\t\t\t\t\thandler.actions[action].play( masterHandler.actions[action].currentTime );\n\t\t\t\t\t}\n\n\t\t\t\t}\n\n\t\t\t\t//  Add animation handler.\n\t\t\t\tthis.AnimationsHandler.push( handler );\n\n\t\t\t} else {\n\n\t\t\t\t//  Add animation handler.\n\t\t\t\tthis.AnimationsHandler.push( handler );\n\t\t\t\t//  Play idle.\n\t\t\t\tthis.AnimationsHandler.play(\"idle\");\n\n\t\t\t}\n\n\t\t\t//  Add outfit item to scene.\n\t\t\tthis.direction.add( this[ name ] );\n\n\t\t}\n\n\t\t//  this.AnimationsHandler.refresh(); \n\n\t\tthis.dispatchEvent( {type:\"add\"} );\n\t\tthis.added && this.added.dispatch();\n\n\t\t//  Send \"change\" event only when last \n\t\t//  add has been completed (delay:100ms).\n\n\t\tvar msec = 100;\n\t\tclearTimeout( this.eventTimeout );\n\t\tthis.eventTimeout = setTimeout( () => {\n\t\t\tthis.dispatchEvent( {type:\"change\"} );\n\t\t\tthis.changed && this.changed.dispatch();\n\t\t}, msec);\n\n\t\treturn this;\n\t},\n\n\tremove: function(){\n\n\t\tif ( arguments.length == 0 ) return;\n\n\t\tfor (var arg in arguments){\n\n\t\t\tif ( !arguments[arg] ) continue;\n\t\t\tif ( !this.slots.includes( arguments[arg] ) ) continue;\n\n\t\t\tvar name = arguments[arg];\n\n\t\t\t//  Remove from scene (does not throw error).\n\t\t\tthis.direction.remove( this[ name ] );\n\n\t\t\t//  Dispose textures.\n\n\t\t\tif ( this[ name ] ) {\n\n\t\t\t\tif (this[ name ].material && !this[ name ].material.materials) {\n\n\t\t\t\t\t//  Single material.\n\n\t\t\t\t\tObject.keys(this[ name ].material).filter( (key) => {\n\t\t\t\t\t\treturn this[ name ].material[ key ] instanceof THREE.Texture;\n\t\t\t\t\t}).forEach( (key) => {\n\t\t\t\t\t\tthis[ name ].material[ key ].dispose();\n\t\t\t\t\t\t//  DO NOT NULL/DELETE TEXTURE.  important!\n\t\t\t\t\t});\n\n\t\t\t\t\tthis[ name ].material.dispose();\n\n\t\t\t\t} else if (this[ name ].material.materials && this[ name ].material.materials.length) {\n\n\t\t\t\t\t//  Multimaterial.\n\n\t\t\t\t\tthis[ name ].material.materials.forEach(function(material){\n\n\t\t\t\t\t\tObject.keys(material).filter(function(key){\n\t\t\t\t\t\t\treturn material[ key ] instanceof THREE.Texture;\n\t\t\t\t\t\t}).forEach(function(key){\n\t\t\t\t\t\t\tmaterial[ key ].dispose();\n\t\t\t\t\t\t\t//  DO NOT NULL/DELETE TEXTURE. important!\n\t\t\t\t\t\t});\n\n\t\t\t\t\t\tmaterial.dispose();\n\n\t\t\t\t\t});\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t//  Dispose geometry.\n\t\t\tif ( this[ name ] ) this[ name ].geometry.dispose();\n\n\t\t\t//  Dispose bones texture. !important\n\t\t\tif ( this[ name ] && this[ name ].skeleton  )\n\t\t\t\tthis[ name ].skeleton.boneTexture.dispose();\n\n\t\t\t//  Remove the animation handler.\n\n\t\t\tif ( this.AnimationsHandler.length ) {\n\n\t\t\t\t//  Find handler index.\n\t\t\t\tvar index = this.AnimationsHandler.findIndex((handler) => {\n\t\t\t\t\treturn handler.mesh == this[ name ];\n\t\t\t\t});\n\n\t\t\t\t//  Keep in mind \"splice()\" uses \"zero\" \n\t\t\t\t//  and \"negative\" indexes also. // danger!\n\t\t\t\t//  debugMode && console.log({\"index\": index});\n\n\t\t\t\tif ( index != undefined && index > -1 ) {\n\n\t\t\t\t\t//  Get and remove handler from AnimationsHandler.\n\t\t\t\t\tvar handler = this.AnimationsHandler.splice(index, 1)[0];\n\n\t\t\t\t\t//  Stop handler animations.\n\t\t\t\t\thandler.stop();\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\t//  Delete slot.\n\t\t\tdelete this[ name ];\n\n\t\t}\n\n\t\t//  this.AnimationsHandler.refresh(); \n\n\t\tthis.dispatchEvent( {type:\"remove\"} );\n\t\tthis.removed && this.removed.dispatch();\n\n\t\t//  Send \"change\" event only when last \n\t\t//  remove has been completed (delay:100ms).\n\n\t\tvar msec = 100;\n\t\tclearTimeout( this.eventTimeout );\n\t\tthis.eventTimeout = setTimeout( () => {\n\t\t\tthis.dispatchEvent( {type:\"change\"} );\n\t\t\tthis.changed && this.changed.dispatch();\n\t\t}, msec);\n\n\t\treturn this;\n\t},\n\n\tremoveAll: function() { \n\n\t\tthis.slots.forEach( ( name ) => {\n\t\t\tif ( this[ name ] ) this.remove( name );\n\t\t});\n\n\t\treturn this;\n\n\t},\n\n\tremoveFromScene: function(){\n\n\t\tif ( arguments.length == 0 ) {\n\n\t\t\tthis.slots.forEach( ( name ) => {\n\t\t\t\tthis.remove( name );\n\t\t\t});\n\n\t\t} else {\n\n\t\t\tfor (var arg in arguments){\n\t\t\t\tthis.remove( arguments[arg] );\n\t\t\t}\n\t\t}\n\n\t\treturn this;\n\t},\n\n\tremoveTexture: function( outfit, map, index ){\n\n\t\t//  outfit: outfit slot name (e.g \"body\", \"hair\", \"dress\", etc.)\n\t\t//  map   : material map name (e.g. \"map\", \"bumpMap\", \"normalMap\", etc.)\n\t\t//  index : material index of multimaterial (\"null\" for simple material).\n\n\t\tif ( !this[ outfit ] ) return;\n\t\tif ( !this[ outfit ].material ) return;\n\n\t\t//  Material.\n\n\t\tif ( index == null || isNaN(index) || typeof(index) != \"number\" ) {\n\n\t\t\tif ( !this[ outfit ].material[ map ] ) return;\n\n\t\t\tthis[ outfit ].material[ map ].dispose();\n\t\t\tthis[ outfit ].material[ map ] = null;\n\t\t\tthis[ outfit ].material.needsUpdate = true;\n\n\t\t\treturn;\n\t\t}\n\n\t\t//  MultiMaterial.\n\n\t\tif ( typeof(index) == \"number\" && index > -1 ) {\n\n\t\t\tif ( !this[ outfit ].material.materials ) return;\n\t\t\tif ( !this[ outfit ].material.materials[ index ] ) return;\n\t\t\tif ( !this.body.material.materials[ index ][ map ] ) return;\n\n\t\t\tthis[ outfit ].material.materials[ index ][ map ].dispose();\n\t\t\tthis[ outfit ].material.materials[ index ][ map ] = null;\n\t\t\tthis[ outfit ].material.materials[ index ].needsUpdate = true;\n\n\t\t\treturn;\n\t\t}\n\t},\n\n\tsetGender: function( gender ){\n\n\t\tvar self = this;\n\n\t\tObject.keys(this.gender).forEach( function( name ){\n\t\t\tself.gender[ name ] = ( name == gender );\n\t\t});\n\n\t\t//  Outfit direction scale. (object3D)\n\n\t\tswitch ( this.getGender() ){\n\n\t\t\tcase \"male\":\n\t\t\t\tthis.direction.scale.set(1, 1, 1);\n\t\t\t\tbreak;\n\n\t\t\tcase \"female\":\n\t\t\t\tthis.direction.scale.set(0.95, 0.95, 0.95);\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\t\t\t\tthis.direction.scale.set(1, 1, 1);\n\t\t}\n\n\t\tthis.AnimationsHandler.refresh();\n\n\t\treturn this;\n\t},\n\n\tgetGender: function(){\n\n\t\tvar self = this;\n\n\t\tif (arguments.length > 0){\n\n\t\t\treturn self.gender[ arguments[0] ];\n\n\t\t} else {\n\n\t\t\treturn Object.keys(this.gender).find( function( name ){\n\t\t\t\treturn self.gender[ name ];\n\t\t\t});\n\n\t\t}\n\t},\n\n\tresetGender: function(){\n\n\t\tvar self = this;\n\n\t\tObject.keys(this.gender).forEach( function( name ){\n\t\t\tself.gender[ name ] = false;\n\t\t});\n\n\t\tthis.direction.scale.set(1, 1, 1);\n\t\tthis.AnimationsHandler.refresh();\n\n\t\treturn this;\n\t},\n\n\tgetPose: function( name ){\n\n\t\tvar name = name || \"body\";\n\t\tif ( !this[ name ] ) return;\n\t\tif ( !this.slots.includes( name ) ) return;\n\n\t\tvar pose = [];\n\n\t\tfor (var i in this[ name ].skeleton.bones) {\n\t\t\tvar key = {}; // {\"pos\":[], \"rot\":[], \"scl\":[]};\n\t\t\tkey.pos = this[ name ].skeleton.bones[i].position.toArray();\n\t\t\tkey.rot = this[ name ].skeleton.bones[i].quaternion.toArray();\n\t\t\tkey.scl = this[ name ].skeleton.bones[i].scale.toArray();\n\t\t\tpose.push(key);\n\t\t}\n\n\t\treturn pose;\n\t},\n\n\n\ttoJSON: function(){\n\n\t\tvar data = {};\n\n\t\tif ( arguments.length == 0 ) {\n\n\t\t\tfor (var i = 0; i < this.slots.length; i++) {\n\n\t\t\t\tvar name = this.slots[i];\n\n\t\t\t\tif ( !name ) continue;\n\t\t\t\tif ( !this[ name ] ) continue;\n\t\t\t\tif ( !this.slots.includes( name ) ) continue;\n\n\t\t\t\tdata[ name ] = {};\n\t\t\t\tdata[ name ].name      = name;\n\t\t\t\tdata[ name ].visible   = this[ name ].visible;\n\t\t\t\tdata[ name ].scale     = this[ name ].scale.toArray();\n\t\t\t\tdata[ name ].geometry  = this[ name ].geometry.sourceFile;\n\t\t\t\tdata[ name ].material  = materialtoJSON( this[ name ].material );\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tfor (var i = 0; i < arguments.length; i++){\n\n\t\t\t\tvar name = arguments[i];\n\n\t\t\t\tif ( !name ) continue;\n\t\t\t\tif ( !this[ name ] ) continue;\n\t\t\t\tif ( !this.slots.includes( name ) ) continue;\n\n\t\t\t\tdata[ name ] = {};\n\t\t\t\tdata[ name ].name      = name;\n\t\t\t\tdata[ name ].visible   = this[ name ].visible;\n\t\t\t\tdata[ name ].scale     = this[ name ].scale.toArray();\n\t\t\t\tdata[ name ].geometry  = this[ name ].geometry.sourceFile;\n\t\t\t\tdata[ name ].material = materialtoJSON( this[ name ].material );\n\n\t\t\t}\n\n\t\t}\n\n\t\tif ( this.getGender() ) \n\t\t\tdata.gender = this.getGender();\n\n\t\tvar data = JSON.stringify( data );\n\n\t\tif ( data === \"{}\" ) \n\t\t\treturn null;\n\t\telse \n\t\t\treturn JSON.parse( data );\n\n\t},\n\n\t//  fromJSON (v2.1).\n\n\tfromJSON: function( json ){\n\n\t\t//  Make a copy of json. important!\n\n\t\tif ( typeof(json) == \"object\" ) {\n\n\t\t\ttry {\n\n\t\t\t\tvar json = JSON.stringify( json ); // string copy of json.\n\n\t\t\t} catch(err) { throw err; }\n\n\t\t}\n\n\t\t//  requires \"validation.js\".\n\n\t\tif ( typeof(json) == \"string\" ) {\n\n\t\t\tif ( !validator.isJSON( json ) ) {\n\t\t\t\tthrow \"Validation Error: json not valid\";\n\t\t\t}\n\n\t\t} else {\n\n\t\t\tthrow \"Type Error: json is not string type.\";\n\n\t\t}\n\n\n\t\tvar json = JSON.parse( json ); // (now is a json copy).\n\n\n\t\tvar self = this;\n\n\t\t//  Set gender first.\n\n\t\tthis.removeAll();          // important!\n\t\tvar gender = json.gender;  // important!\n\t\tthis.setGender( gender );  // important!\n\n\t\t//  Clear gender of json.\n\t\tdelete json.gender; // (is a copy of json).\n\n\t\t//  ORDER DOES MATTER for transparency:\n\t\t//   Order in localPlayer.outfit.direction.children array DOES MATTER.\n\t\t//  So we must deliver the outfit.direction.children array with the following order:\n\t\t//  [skeleton, body, eyes, hairs, stockings, underwears, tshirt, trousers, costume, dress, shoes, coat]\n\n\t\tvar orderMap = [];\n\n\t\t(function(){\n\t\t\tif (json.skeleton) orderMap.push(\"skeleton\");\n\t\t\tif (json.body) orderMap.push(\"body\");\n\t\t\tif (json.eyes) orderMap.push(\"eyes\");\n\t\t\tif (json.glasses) orderMap.push(\"glasses\");\n\t\t\tif (json.hairs) orderMap.push(\"hairs\");\n\t\t\tif (json.hat) orderMap.push(\"hat\");\n\t\t\tif (json.stockings) orderMap.push(\"stockings\");\n\t\t\tif (json.underwears) orderMap.push(\"underwears\");\n\t\t\tif (json.costume) orderMap.push(\"costume\");\n\t\t\tif (json.tshirt) orderMap.push(\"tshirt\");\n\t\t\tif (json.trousers) orderMap.push(\"trousers\");\n\t\t\tif (json.skirt) orderMap.push(\"skirt\");\n\t\t\tif (json.dress) orderMap.push(\"dress\");\n\t\t\tif (json.shoes) orderMap.push(\"shoes\");\n\t\t\tif (json.coat) orderMap.push(\"coat\");\n\t\t})();\n\n\t\tdebugMode && console.log({\"orderMap\": orderMap});\n\n\t\tvar outfit = {};\n\t\tvar promises = [];\n\n\t\tfor (var i = 0; i < orderMap.length; i++){\n\n\t\t\tpromises.push(\n\t\t\t\tnew Promise(function(resolve, reject){\n\n\t\t\t\t\tvar object = {};\n\t\t\t\t\tvar sortIndex = i;\n\t\t\t\t\tvar key = orderMap[i];\n\n\t\t\t\t\tobject.name      = json[ key ].name;\n\t\t\t\t\tobject.visible   = json[ key ].visible;\n\t\t\t\t\tobject.material  = json[ key ].material;\n\t\t\t\t\tobject.geometry  = json[ key ].geometry;  // (url).\n\n\t\t\t\t\t//  Scale.\n\t\t\t\t\tvar vector = new THREE.Vector3();\n\t\t\t\t\tobject.scale = vector.fromArray( json[ key ].scale );\n\n\t\t\t\t\t//  Material.\n\t\t\t\t\tvar material = materialfromJSON( object.material );\n\n\t\t\t\t\t//  Geometry: cache first.\n\t\t\t\t\tcaches.match( object.geometry ).then(function(response){\n\n\t\t\t\t\t\tif ( !response ) \n\t\t\t\t\t\t\tthrow \"geometry not found! Trying to fetch geometry...\";\n\t\t\t\t\t\telse\n\t\t\t\t\t\t\treturn response;\n\n\t\t\t\t\t}).catch(function(err){\n\t\t\t\t\t\tconsole.error(err);\n\n\t\t\t\t\t\treturn caches.open(\"geometries\").then(function(cache){\n\t\t\t\t\t\t\treturn cache.add( object.geometry ).then(function(){\n\t\t\t\t\t\t\t\treturn cache.match( object.geometry ).then(function(response){\n\t\t\t\t\t\t\t\t\treturn response;\n\t\t\t\t\t\t\t\t});\n\t\t\t\t\t\t\t});\n\t\t\t\t\t\t});\n\n\t\t\t\t\t}).then(function(response){\n\n\t\t\t\t\t\tif (!response) throw \"None response returned!\";\n\n\t\t\t\t\t\treturn response.json();\n\n\t\t\t\t\t}).then(function( gmtjson ){\n\n\t\t\t\t\t\tif ( !gmtjson ) throw \"None json returned fromJSON!\";\n\n\t\t\t\t\t\tvar loader = new THREE.JSONLoader();\n\t\t\t\t\t\tvar geometry = loader.parse( gmtjson ).geometry;\n\n\t\t\t\t\t\tgeometry.name = gmtjson.name;\n\t\t\t\t\t\tgeometry.computeFaceNormals();\n\t\t\t\t\t\tgeometry.computeVertexNormals();\n\t\t\t\t\t\tgeometry.computeBoundingBox();\n\t\t\t\t\t\tgeometry.computeBoundingSphere();\n\t\t\t\t\t\tgeometry.sourceFile = object.geometry;  // important!\n\n\t\t\t\t\t\tvar skinned = new THREE.SkinnedMesh( geometry, material );\n\n\t\t\t\t\t\tskinned.renderDepth = 1;\n\t\t\t\t\t\tskinned.frustumCulled = false;\n\t\t\t\t\t\tskinned.position.set( 0, 0, 0 );\n\t\t\t\t\t\tskinned.rotation.set( 0, 0, 0 );\n\t\t\t\t\t\tskinned.scale.copy( object.scale );\n\t\t\t\t\t\tskinned.castShadow = true;\n\t\t\t\t\t\tskinned.name = object.name;\n\t\t\t\t\t\tskinned.sortIndex = sortIndex;\n\n\t\t\t\t\t\tvar obj = {};\n\t\t\t\t\t\tobj[ key ] = skinned;\n\t\t\t\t\t\tresolve( obj );\n\n\t\t\t\t\t\toutfit[ key ] = skinned;\n\n\t\t\t\t\t}).catch(function(err){\n\t\t\t\t\t\tresolve( null );\n\t\t\t\t\t\tconsole.error(err);\n\t\t\t\t\t});\n\n\t\t\t\t}) // end of promise,\n\t\t\t); // end push.\n\t\t}// end for.\n\n\t\tdebugMode && console.log(\"promises:\", promises);\n\n\t\treturn Promise.all(promises).then(function(results){\n\t\t\tdebugMode && console.log(\"results:\", results);\n\n\t\t\t//  cleanup.\n\t\t\tvar results = results.filter(Boolean); // important!\n\t\t\tdebugMode && console.log(\"cleaned results:\", results);\n\n\t\t\t//  add outfit.\n\t\t\twhile (results.length) {\n\t\t\t\tself.add( results.shift() );\n\t\t\t}\n\n\t\t}).then(function(){\n\t\t\tdebugMode && console.log(\"outfit:\", outfit);\n\t\t\treturn outfit;\n\t\t});\n\n\t},\n\n\n\t//  Outfit DNA is an object that contains the outfit data that needed to\n\t//  create the player oufit anywhere remotly. It is player outfit assets\n\t//  in transfered structure ( aka like .toJSON() ).\n\t//\n\t//  .toDNA(); .fromDNA(dna); Usage:\n\t//      dna = localPlayer.outfit.toDNA();\n\t//      player = new Player();\n\t//      player.outfit = new AW3D.Outfit(player);\n\t//      player.outfit.fromDNA( dna );\n\n\t//\t.toDNA, .fromDNA (v2).\n\t//\trequires \"rawinflate.js, rawdeflate.js, and validator.js\"\n\n\ttoDNA: function(){\n\n\t\treturn encode( JSON.stringify( this.toJSON() ) );\n\n\t\tfunction encode( string ) {\n\t\t\tif ( !!window.RawDeflate ) {\n\t\t\t\treturn window.btoa( RawDeflate.deflate( string ) );\n\t\t\t} else {\n\t\t\t\treturn string;\n\t\t\t}\n\t\t}\n\n\t},\n\n\tfromDNA: function( dna ){\n\n\t\t//  Validation.\n\n\t\tif ( typeof(dna) == \"string\" ) {\n\n\t\t\tif ( validator.isBase64( dna ) ) {\n\n\t\t\t\treturn new Promise( (resolve, reject) => {\n\t\t\t\t\tvar json = JSON.parse( decode( dna ) );\n\t\t\t\t\tresolve( this.fromJSON(json) );\n\t\t\t\t}).catch( function(err){ \n\t\t\t\t\tconsole.error(err);\n\t\t\t\t\tthrow err; \n\t\t\t\t});\n\n\t\t\t} else if ( validator.isJSON( dna ) ) {\n\n\t\t\t\treturn new Promise( (resolve, reject) => {\n\t\t\t\t\tvar json = JSON.parse( dna );\n\t\t\t\t\tresolve( this.fromJSON(json) );\n\t\t\t\t}).catch( function(err){ \n\t\t\t\t\tconsole.error(err);\n\t\t\t\t\tthrow err; \n\t\t\t\t});\n\n\t\t\t} else {\n\n\t\t\t\treturn new Promise( (resolve, reject) => {\n\t\t\t\t\tvar err = \"DNA is not valid.\";\n\t\t\t\t\tconsole.error( \"Error: \" + err );\n\t\t\t\t\treject( \"Validation Error: \" + err );\n\t\t\t\t\t//  throw Error( err );\n\t\t\t\t});\n\n\t\t\t}\n\n\t\t} else {\n\n\t\t\treturn new Promise( (resolve, reject) => {\n\t\t\t\tvar err = \"Unsupported DNA type: \" + typeof(dna);\n\t\t\t\tconsole.error( \"Error: \" + err );\n\t\t\t\treject( \"Validation Error: \" + err );\n\t\t\t\t//  throw Error( err );\n\t\t\t});\n\n\t\t}\n\n\t\tfunction decode( string ) {\n\t\t\tif ( !!window.RawDeflate ) {\n\t\t\t\treturn RawDeflate.inflate( window.atob( string ) );\n\t\t\t} else {\n\t\t\t\treturn string;\n\t\t\t}\n\t\t}\n\n\t},\n\n\n};\n\n\n//  AW3D AnimationHandler.js\n\n//  Reset THREE.AnimationHandler.animations array.\nTHREE.AnimationHandler.animations.length = 0;\nAnimationManager = THREE.AnimationHandler;\n\nAW3D.AnimationHandler = function ( mesh, gender ) {\n\n\tthis.mesh = mesh;\n\tthis.gender = gender; // important!\n\tthis.actions = {};\n\n\t//  This create the animations of skinned mesh. \n\tthis.reloadActions(); // important!\n\n};\n\n\nAW3D.AnimationHandler.prototype = {\n\n\tconstructor: AW3D.AnimationHandler,\n\n\tfindAction: function(action){\n\t\t//  returns new array with resutls.\n\t\treturn THREE.AnimationHandler.animations.filter( function(animation){\n\t\t\treturn (animation == action); // boolean.\n\t\t}); \n\t},\n\n\tfindByUuid: function( name ){\n\t\t//  returns new array with resutls.\n\t\treturn THREE.AnimationHandler.animations.filter( function(animation){\n\t\t\treturn (animation.uuid == this.actions[ name ].uuid); // boolean.\n\t\t});\n\t},\n\n\tfindByName: function( name ){\n\t\t//  returns new array with resutls.\n\t\treturn THREE.AnimationHandler.animations.filter( function(animation){\n\t\t\treturn (animation.data.name == name); // boolean.\n\t\t});\n\t},\n\n\tgetCurrentAction: function(){\n\t\t//  returns current playing action name.\n\t\tfor (var name in this.actions) {\n\t\t\tif ( !name ) return;\n\t\t\tvar action = this.actions[ name ];\n\t\t\tif ( action.isPlaying ) {\n\t\t\t\treturn name;\n\t\t\t}\n\t\t}\n\t},\n\n\t//  To stop an animation, find the animation in\n\t//  THREE.AnimationHandler.animations and stop it from there.\n\n\tstop: function stop(){\n\t\tvar self = this;\n\t\tObject.keys( self.actions ).forEach(function(name, i){\n\t\t\tvar action = self.actions[name];\n\t\t\tself.findAction(action).forEach(function(animation){\n\t\t\t\tanimation.stop();\n\t\t\t});\n\t\t});\n\t},\n\n\t//  To delete an action, stop the animation in \n\t//  THREE.AnimationHandler.animations and then delete it from this.actions.\n\n\tdelete: function( name ){\n\t\tvar action = this.actions[ name ];\n\t\tthis.findAction( action ).forEach(function(animation){\n\t\t\tanimation.stop();\n\t\t});\n\t\tdelete this.actions[ name ];\n\t},\n\n\treset: function reset(){\n\t\tfor (var i in arguments){\n\t\t\tvar name = arguments[i];\n\t\t\tthis.actions[ name ].weight = 1;\n\t\t\tthis.actions[ name ].timeScale = 1;\n\t\t\tthis.actions[ name ].currentTime = 0;\n\t\t}\n\t},\n\n\tresetAll: function(){\n\t\tvar self = this;\n\t\tObject.keys( self.actions ).forEach(function(name, i){\n\t\t\tself.reset( name );\n\t\t});\n\t},\n\n\tdeleteAll: function(){\n\t\tvar self = this;\n\t\tObject.keys( self.actions ).forEach(function(name, i){\n\t\t\tself.delete[ name ]\n\t\t});\n\t},\n\n\tplay: function play(){\n\t\tfor (var i in arguments){\n\t\t\tvar name = arguments[i];\n\t\t\tif ( !this.actions[ name ] ) return;\n\t\t\tthis.actions[ name ].play(0);\n\t\t}\n\t},\n\n\t//  To pause an animation, find the animation \n\t//  in THREE.AnimationHandler.animations and set timeScale to 0.\n\n\tpause: function pause(){\n\t\tfor (var i in arguments){\n\t\t\tvar name = arguments[i];\n\t\t\tvar action = this.actions[ name ];\n\t\t\tthis.findAction( action ).forEach(function(animation){\n\t\t\t\tanimation.timeScale = 0;\n\t\t\t});\n\t\t}\n\t},\n\n\t//  To unpause an animation, find the animation \n\t//  in THREE.AnimationHandler.animations and set timeScale to 1.\n\n\tcontinue: function(){\n\t\tfor (var i in arguments){\n\t\t\tvar name = arguments[i];\n\t\t\tvar action = this.actions[ name ];\n\t\t\tthis.findAction( action ).forEach(function(animation){\n\t\t\t\tanimation.timeScale = 1;\n\t\t\t});\n\t\t}\n\t},\n\n\tweightOff: function(){\n\t\tfor (var i in arguments){\n\t\t\tvar name = arguments[i];\n\t\t\tvar action = this.actions[ name ];\n\t\t\tthis.findAction( action ).forEach(function(animation){\n\t\t\t\tanimation.weight = 0;\n\t\t\t});\n\t\t}\n\t},\n\n\tweightOn: function(){\n\t\tfor (var i in arguments){\n\t\t\tvar name = arguments[i];\n\t\t\tvar action = this.actions[ name ];\n\t\t\tthis.findAction( action ).forEach(function(animation){\n\t\t\t\tanimation.weight = 1;\n\t\t\t});\n\t\t}\n\t},\n\n\tfadeIn: function(){\n\t\tvar fades = [];\n\t\tfor (var i in arguments){\n\t\t\tvar name = arguments[i];\n\t\t\tvar animation = this.actions[ name ];\n\t\t\tfades.push(function fade(){\n\t\t\t\tvar requestId = requestAnimationFrame( fade );\n\t\t\t\tanimation.timeScale = 1; // !important\n\t\t\t\tanimation.weight += ( 0.05 * (1 - animation.weight) );\n\t\t\t\tanimation.play(animation.currentTime, animation.weight);\n\t\t\t\tdebugMode && console.log( \"fadeIn: \", round(animation.weight, 3) );\n\t\t\t\tif ( round(animation.weight, 3) > 0.9 ){\n\t\t\t\t\tcancelAnimationFrame( requestId );\n\t\t\t\t\tanimation.weight = 1;\n\t\t\t\t\tanimation.timeScale = 1;\n\t\t\t\t\tanimation.play(animation.currentTime, 1);\n\t\t\t\t}\n\t\t\t});\n\t\t}\n\n\t\t//  Call all functions in fades.\n\t\twhile (fades.length){ \n\t\t\tfades.shift().call(); \n\t\t}\n\t},\n\n\tfadeOut: function(){\n\t\tvar fades = [];\n\t\tfor (var i in arguments){\n\t\t\tvar name = arguments[i];\n\t\t\tvar action = this.actions[ name ];\n\t\t\tthis.findAction( action ).forEach(function(animation){\n\t\t\t\tfades.push(function fade(){\n\t\t\t\t\tvar requestId = requestAnimationFrame( fade );\n\t\t\t\t\tanimation.timeScale = 1; // !important\n\t\t\t\t\tanimation.weight -= ( 0.05 * animation.weight );\n\t\t\t\t\tanimation.play(animation.currentTime, animation.weight);\n\t\t\t\t\tdebugMode && console.log( \"fadeOut:\", round(animation.weight, 3) );\n\t\t\t\t\tif ( round(animation.weight, 3) < 0.1 ){\n\t\t\t\t\t\tcancelAnimationFrame( requestId );\n\t\t\t\t\t\tanimation.stop();\n\t\t\t\t\t\tanimation.weight = 1;\n\t\t\t\t\t\tanimation.timeScale = 1;\n\t\t\t\t\t}\n\t\t\t\t});\n\t\t\t});\n\t\t}\n\n\t\t//  Call all functions in fades.\n\t\twhile (fades.length){ \n\t\t\tfades.shift().call(); \n\t\t}\n\t},\n\n\tidle: function idle(){\n\t\tthis.actions.idle.play(0);\n\t},\n\n\tjump: function jump(){\n\t\tthis.actions.jump.play(0);\n\t},\n\n\trun: function run(){\n\t\tthis.actions.run.play(0);\n\t},\n\n\twalk: function walk(){\n\t\tthis.actions.walk.play(0);\n\t},\n\n\t//  ------------------------------------------------------  //\n\t//  This create the animations of skinned mesh. important!  //\n\t//  ------------------------------------------------------  //\n\n\tloadAction: function(){\n\n\t\tfor ( var i in arguments ) {\n\n\t\t\tvar name = arguments[i];\n\n\t\t\tvar data;\n\n\t\t\tswitch (this.gender) {\n\n\t\t\t\tcase \"male\":\n\t\t\t\t\tdata = MaleAnimations[ name ];\n\t\t\t\t\tbreak;\n\n\t\t\t\tcase \"female\":\n\t\t\t\t\tdata = FemaleAnimations[ name ];\n\t\t\t\t\tbreak;\n\n\t\t\t\tdefault:\n\t\t\t\t\tdata = Animations[ name ];\n\t\t\t\t\tbreak;\n\t\t\t}\n\n\t\t\tvar action = new THREE.Animation( this.mesh, data );\n\t\t\taction.uuid = THREE.Math.generateUUID();\n\t\t\taction.weight = 1;\n\t\t\taction.timeScale = 1;\n\t\t\taction.currentTime = 0;\n\t\t\tthis.actions[ name ] = action;\n\t\t}\n\n\t},\n\n\treloadActions: function(){\n\n\t\tvar self = this;\n\n\t\tthis.stop();\n\t\tthis.deleteAll();\n\t\tthis.actions = {};\n\n\t\tif (this.actions.jump) this.actions.jump.loop = false;\n\n\t\tif (MaleAnimations && this.gender && this.gender == \"male\") {\n\t\t\tObject.keys( MaleAnimations ).forEach(function(name, i){\n\t\t\t\tself.loadAction( name );\n\t\t\t});\n\n\t\t\treturn;\n\t\t}\n\n\t\tif (FemaleAnimations && this.gender && this.gender == \"female\") {\n\t\t\tObject.keys( FemaleAnimations ).forEach(function(name, i){\n\t\t\t\tself.loadAction( name );\n\t\t\t});\n\n\t\t\treturn;\n\t\t}\n\n\t\tif ( Animations && !this.gender ) {\n\t\t\tObject.keys( Animations ).forEach(function(name, i){\n\t\t\t\tself.loadAction( name );\n\t\t\t});\n\n\t\t\treturn;\n\t\t}\n\n\t\tif ( this.gender && this.gender != \"male\" && this.gender != \"female\" ){\n\t\t\tconsole.warn( \"AW3D.AnimationHandler: reloadActions(\" \n\t\t\t\t\t\t + this.gender + \"): Gender exists but is not male or female.\"\n\t\t\t\t\t\t);\n\n\t\t\treturn;\n\t\t}\n\n\t},\n\n};\n\n\n//  MATERIAL TO JSON.\n\n//  materialtoJson.js (v1.6)\n//  Return a promise with the \n//  material json object resolved.\n\nfunction materialtoJSON( material ){\n\n\t//  MULTIMATERIAL.\n\n\tif ( material.type == \"MultiMaterial\" || material.materials ) {\n\n\t\t//  multimaterial to json.\n\n\t\tvar multjson = {\n\n\t\t\t_id: \"\",\n\t\t\ttype: material.type,\n\t\t\tuuid: material.uuid || THREE.Math.generateUUID(),\n\n\t\t};\n\n\n\t\t//  materials to json.\n\n\t\tmultjson.materials = [];\n\n\t\tfor ( var i = 0; i < material.materials.length; i++ ){\n\n\t\t\tmultjson.materials.push( materialtoJSON( material.materials[i] ) );\n\n\t\t}\n\n\n\t\tdebugMode && console.log( \"multimaterial to json:\", multjson );\n\n\t\treturn multjson;\n\n\t}\n\n\n\t//  MATERIAL.\n\n\tvar json = {};\n\n\tfor ( var name in material ){\n\n\t\tif ( material[ name ] == undefined ) continue;         // important!\n\t\tif ( material[ name ] instanceof Function ) continue;  // important!\n\t\tif ( typeof(material[name]) === \"function\" ) continue; // important!\n\n\t\tswitch( name ){\n\n\t\t\tcase \"defines\":\n\t\t\tcase \"program\":\n\t\t\tcase \"_listeners\":\n\t\t\tcase \"needsUpdate\":\n\t\t\tcase \"_needsUpdate\":\n\t\t\tcase \"__webglShader\":\n\t\t\t\tbreak;\n\n\n\t\t\t\t//  name, _id, uuid.\n\n\t\t\tcase \"name\":\n\t\t\t\tjson.name = material.name;\n\t\t\t\tbreak;\n\n\t\t\tcase \"_id\":\n\t\t\t\tjson._id = material._id || ObjectId();\n\t\t\t\tbreak;\n\n\t\t\tcase \"uuid\":\n\t\t\t\tjson.uuid = material.uuid || THREE.Math.generateUUID();\n\t\t\t\tbreak;\n\n\n\t\t\t\t//  texture to json.\n\n\t\t\tcase \"map\":\n\t\t\tcase \"bumpMap\":\n\t\t\tcase \"alphaMap\":\n\t\t\tcase \"normalMap\":\n\t\t\tcase \"emissiveMap\":\n\t\t\tcase \"displacementMap\":\n\t\t\tcase \"metalnessMap\":\n\t\t\tcase \"roughnessMap\":\n\t\t\tcase \"specularMap\":\n\t\t\tcase \"lightMap\":\n\t\t\tcase \"aoMap\":\n\n\t\t\t\tif ( !(material[ name ] instanceof THREE.Texture) ) {\n\t\t\t\t\tthrow name + \" is not instance of THREE.Texture\";\n\t\t\t\t}\n\n\t\t\t\tjson[ name ] = texturetoJSON( material[ name ] );\n\n\t\t\t\tbreak;\n\n\n\t\t\t\t//  three color to hex.\n\n\t\t\tcase \"color\":\n\t\t\tcase \"emissive\":\n\t\t\tcase \"specular\":\n\n\t\t\t\tif ( !(material[ name ] instanceof THREE.Color) ) {\n\t\t\t\t\tthrow name + \" is not instance of THREE.Color\";\n\t\t\t\t}\n\n\t\t\t\tjson[ name ] = material[ name ].getHex();\n\n\t\t\t\tbreak;\n\n\n\t\t\t\t//  vector2 to array.\n\n\t\t\tcase \"normalScale\":\n\n\t\t\t\tif ( !(material[ name ] instanceof THREE.Vector2) ) {\n\t\t\t\t\tthrow name + \" is not instance of THREE.Vector2\";\n\t\t\t\t}\n\n\t\t\t\tjson[ name ] = material[ name ].toArray();\n\n\t\t\t\tbreak;\n\n\n\n\t\t\tcase \"envMap\":\n\t\t\t\t//  TODO: cube texture.\n\t\t\t\tbreak;\n\n\n\t\t\tdefault:\n\t\t\t\tjson[ name ] = material[ name ];\n\t\t\t\tbreak;\n\n\t\t}\n\n\t}\n\n\treturn json;\n}\n\n\n//  TEXTURE TO JSON.\n//  Return a promise resolved \n//  with the texture json object.\n\nfunction texturetoJSON( texture ){\n\n\tvar json = {};\n\n\tfor (var name in texture ){\n\n\t\tif ( texture[ name ] == undefined ) continue;\n\t\tif ( texture[ name ] instanceof Function ) continue;\n\t\tif ( typeof(texture[name]) === \"function\" ) continue;\n\n\t\tswitch (name){\n\n\t\t\tcase \"_listeners\":\n\t\t\t\tbreak;\n\n\n\t\t\t\t//  uuid.\n\n\t\t\tcase \"uuid\":\n\t\t\t\tjson[ name ] = texture[ name ] || THREE.Math.generateUUID();\n\t\t\t\tbreak;\n\n\n\t\t\t\t//  vector2 to array.\n\n\t\t\tcase \"offset\":\n\t\t\tcase \"repeat\":\n\t\t\t\tjson[ name ] = texture[ name ].toArray();\n\t\t\t\tbreak;\n\n\n\t\t\t\t//  image to json.\n\n\t\t\tcase \"image\":\n\t\t\t\tjson[ name ] = texture.sourceFile || getDataURL( texture[ name ] ); // important!\n\t\t\t\tbreak;\n\n\n\t\t\tdefault:\n\t\t\t\tjson[ name ] = texture[ name ];\n\t\t\t\tbreak;\n\n\t\t}\n\n\t}\n\n\treturn json;\n}\n\n\n//  IMAGE TO JSON.\n//  Return an image object.\n\nfunction imagetoJSON( image ){\n\n\treturn {\n\t\tuuid: THREE.Math.generateUUID(),\n\t\tsrc: image.src || getDataURL( image ),\n\t};\n\n}\n\n\n//  TEXTURE IMAGE TO JSON.\n//  Return an image object.\n\nfunction textureImagetoJSON( texture ){\n\n\treturn {\n\t\tuuid: THREE.Math.generateUUID(),\n\t\tsrc: texture.sourceFile || texture.image.src || getDataURL( texture.image )\n\t};\n\n}\n\n\n//  MATERIAL FROM JSON.\n//  materialfromJson.js (v1.6)\n//  Return a promise with the material resolved.\n\nfunction materialfromJSON( json ){\n\n\t//  MULTIMATERIAL.\n\n\tif ( json.type == \"MultiMaterial\" ) {\n\n\n\t\tvar materials = [];\n\n\t\tfor ( var i = 0; i < json.materials.length; i++ ){\n\n\t\t\tmaterials.push( materialfromJSON( json.materials[i] ) );\n\n\t\t}\n\n\n\t\t//  Create multimaterial.\n\n\t\tvar multimaterial = new THREE.MeshFaceMaterial(materials);\n\n\t\tmultimaterial.uuid = json.uuid || THREE.Math.generateUUID();\n\n\t\treturn multimaterial;\n\n\t}\n\n\n\t//  MATERIAL.\n\n\tvar options = {};\n\n\tfor (var name in json){\n\n\t\tif ( json[ name ] == undefined ) continue; // important!\n\n\n\t\tswitch (name){\n\n\t\t\tcase \"_id\":\n\t\t\tcase \"meta\":\n\t\t\t\tbreak;\n\n\n\t\t\t\t//  uuid.\n\n\t\t\tcase \"uuid\":\n\t\t\t\toptions.uuid = json.uuid || THREE.Math.generateUUID();\n\t\t\t\tbreak;\n\n\n\t\t\t\t//  texture from json.\n\n\t\t\tcase \"alphaMap\":\n\t\t\tcase \"aoMap\":\n\t\t\tcase \"bumpMap\":\n\t\t\tcase \"displacementMap\":\n\t\t\tcase \"emissiveMap\":\n\t\t\tcase \"lightMap\":\n\t\t\tcase \"map\":\n\t\t\tcase \"metalnessMap\":\n\t\t\tcase \"normalMap\":\n\t\t\tcase \"roughnessMap\":\n\t\t\tcase \"specularMap\":\n\n\t\t\t\toptions[ name ] = texturefromJSON( json[ name ] );\n\n\t\t\t\tbreak;\n\n\n\t\t\t\t//  three color to hex.\n\n\t\t\tcase \"color\":\n\t\t\tcase \"emissive\":\n\t\t\tcase \"specular\":\n\n\t\t\t\toptions[ name ] = new THREE.Color();\n\t\t\t\toptions[ name ].setHex( json[ name ] );\n\n\t\t\t\tbreak;\n\n\n\t\t\t\t//  vector2 from array.\n\n\t\t\tcase \"normalScale\":\n\n\t\t\t\toptions[ name ] = new THREE.Vector2();\n\t\t\t\toptions[ name ].fromArray( json[ name ] );\n\n\t\t\t\tbreak;\n\n\n\t\t\tcase \"envMap\":\n\t\t\t\t//  TODO: cube texture.\n\t\t\t\tbreak;\n\n\n\t\t\tdefault:\n\t\t\t\toptions[ name ] = json[ name ];\n\t\t\t\tbreak;\n\n\t\t}\n\n\t}\n\n\treturn new THREE[ options.type ](options);\n}\n\n\n//  TEXTURE FROM JSON (v1.6)\n//  Return a promise with the texture resolved.\n\nfunction texturefromJSON( json ){\n\n\tvar texture = new THREE.Texture();\n\n\tfor ( var name in json ){\n\n\t\tswitch (name){\n\n\t\t\tcase \"meta\":\n\t\t\tcase \"image\":\n\t\t\t\tbreak;\n\n\t\t\t\t//  array to vector2.\n\n\t\t\tcase \"offset\":\n\t\t\tcase \"repeat\":\n\n\t\t\t\tif ( json[ name ].length != 2) break;\n\n\t\t\t\ttexture[ name ] = new THREE.Vector2();\n\t\t\t\ttexture[ name ].fromArray( json[ name ] );\n\n\t\t\t\tbreak;\n\n\n\t\t\t\t//  wrapS & wrapT.\n\n\t\t\tcase \"wrap\":\n\n\t\t\t\tif ( json[ name ].length != 2) break;\n\t\t\t\tif ( !( json[ name ] instanceof Array ) ) break;\n\n\t\t\t\ttexture.wrapS = json[ name ][0];\n\t\t\t\ttexture.wrapT = json[ name ][1];\n\n\t\t\t\tbreak;\n\n\t\t\t\t//  image from texture json with\"FileReader.readAsDataURL(blob)\".\n\n\t\t\t\t//  Check whether a match for the request is found in   \n\t\t\t\t//  the CacheStorage using CacheStorage.match(). If so, serve that.\n\n\t\t\t\t//  If not, open the \"textures\" cache using open(), \n\t\t\t\t//  put the default network request in the cache using Cache.put() \n\t\t\t\t//  and return a clone of the default network request using return response.clone().\n\n\t\t\t\t//  Clone is needed because put() consumes the response body.\n\t\t\t\t//  If this fails (e.g., because the network is down), return a fallback response.\n\n\t\t\t\t//  Pros:\n\n\t\t\t\t//  Easy to use.\n\t\t\t\t//  Small, compact, safe code.\n\t\t\t\t//  Texture.image.src is string.\n\t\t\t\t//  Texture.image.src is dataURL.\n\t\t\t\t//  Texture.image.src can reused.\n\t\t\t\t//  Texture.image.src is always valid.\n\t\t\t\t//  Texture.image.src can be send everywhere.\n\t\t\t\t//  Texture.image.src can converted to canvas.\n\t\t\t\t//  Texture.image (canvas) size always power of 2.\n\t\t\t\t//  Texture.image.src can saved in storage objects.\n\t\t\t\t//  Texture.image.src can converted vice versa to blob.\n\n\t\t\t\t//  Cons:\n\n\t\t\t\t//  Larger size (~33%)\n\t\t\t\t//  Take more time than URL.createObjectURL(blob);\n\n\t\t\t\t//  sourceFile.\n\t\t\t\t//  case \"sourceFile\":\n\t\t\t\t//      texture.sourceFile = json[ name ]; // important!\n\t\t\t\t//  break;\n\n\t\t\t\t//  case \"image\": (N/A).\n\t\t\tcase \"sourceFile\":\n\n\t\t\t\ttexture.sourceFile = json.sourceFile;\n\n\t\t\t\t//  SourceFile first.\n\t\t\t\tvar url = json.sourceFile || json.image.src || json.image || \"//i.imgur.com/ODeftia.jpg\";\n\n\t\t\t\t//  URL.\n\n\t\t\t\tif ( validator && validator.isURL( url ) ) {\n\n\t\t\t\t\t//  Cache first.\n\t\t\t\t\tcaches.match( url ).then(function(response){\n\n\t\t\t\t\t\tif ( !response ) \n\t\t\t\t\t\t\tthrow \"Texture not found!\";\n\t\t\t\t\t\telse\n\t\t\t\t\t\t\treturn response;\n\n\t\t\t\t\t}).catch(function(err){\n\n\t\t\t\t\t\t//  We use cors origin mode to avoid\n\t\t\t\t\t\t//  texture tainted canvases, images.\n\n\t\t\t\t\t\treturn fetch( url, {\n\t\t\t\t\t\t\tmode: \"cors\",  // important!\n\t\t\t\t\t\t\tmethod: \"GET\",\n\t\t\t\t\t\t});\n\n\t\t\t\t\t}).then(function(response){\n\n\t\t\t\t\t\treturn caches.open(\"textures\").then(function(cache){\n\n\t\t\t\t\t\t\t//  Clone is needed because put() consumes the response body.\n\t\t\t\t\t\t\t//  See: \"https://developer.mozilla.org/en-US/docs/Web/API/Cache/put\"\n\n\t\t\t\t\t\t\tvar clone = response.clone();\n\t\t\t\t\t\t\treturn cache.put( url, clone ).then(function(){\n\t\t\t\t\t\t\t\treturn response.blob();  //  important!\n\t\t\t\t\t\t\t});\n\n\t\t\t\t\t\t});\n\n\t\t\t\t\t}).then(function(blob){\n\n\t\t\t\t\t\tvar img = new Image();\n\t\t\t\t\t\timg.crossOrigin = \"anonymous\";  //  important!\n\n\t\t\t\t\t\timg.onload = function(){\n\t\t\t\t\t\t\tvar canvas = makePowerOfTwo( img, true );\n\t\t\t\t\t\t\ttexture.image = canvas;\n\t\t\t\t\t\t\ttexture.needsUpdate = true;\n\t\t\t\t\t\t\timg.onload = null; // optional!\n\t\t\t\t\t\t};\n\n\t\t\t\t\t\t//  Get dataURL from blob.\n\n\t\t\t\t\t\tvar reader = new FileReader();\n\t\t\t\t\t\treader.onload = function() {\n\t\t\t\t\t\t\timg.src = reader.result;\n\t\t\t\t\t\t};\n\n\t\t\t\t\t\treader.readAsDataURL(blob);\n\n\t\t\t\t\t});\n\n\t\t\t\t\tbreak;\n\t\t\t\t} \n\n\t\t\t\t//  DataURL.\n\n\t\t\t\tif ( validator && validator.isDataURI( url ) ) {\n\t\t\t\t\tvar img = new Image();\n\t\t\t\t\timg.crossOrigin = \"anonymous\";\n\t\t\t\t\timg.onload = function(){\n\t\t\t\t\t\tvar canvas = makePowerOfTwo( img, true );\n\t\t\t\t\t\ttexture.image = canvas;\n\t\t\t\t\t\ttexture.needsUpdate = true;\n\t\t\t\t\t\timg.onload = null; // optional!\n\t\t\t\t\t}; \n\t\t\t\t\timg.src = url;  break;\n\t\t\t\t} \n\n\t\t\t\tbreak;\n\n\t\t\tdefault:\n\t\t\t\ttexture[ name ] = json[ name ];\n\t\t\t\tbreak;\n\n\t\t}\n\n\t}\n\n\treturn texture;\n}\n\n\n//  IMAGE FROM JSON (v1.6)\n//  Return a promise with the image resolved.\n\nfunction imagefromJSON( json, onLoadEnd ){\n\n\tvar url = json.src;\n\n\t//  Cache first.\n\tcaches.match( url ).then(function(response){\n\n\t\tif ( !response ) \n\t\t\tthrow response;\n\t\telse\n\t\t\treturn response;\n\n\t}).catch(function(err){\n\n\t\t//  We use cors origin mode to avoid\n\t\t//  texture tainted canvases, images.\n\n\t\treturn fetch( url, {\n\t\t\tmode: \"cors\",  // important!\n\t\t\tmethod: \"GET\",\n\t\t});\n\n\t\t//  TODO: REPLACE async/await FOR BACKWARD COMPETALITY.\n\t}).then(function(response){\n\n\t\treturn caches.open(\"textures\").then(function(cache){\n\n\t\t\t//  Clone is needed because put() consumes the response body.\n\t\t\t//  See: \"https://developer.mozilla.org/en-US/docs/Web/API/Cache/put\"\n\n\t\t\tvar clone = response.clone();\n\t\t\treturn cache.put( url, clone ).then(function(){\n\t\t\t\treturn response.blob(); //  important!\n\t\t\t});\n\n\t\t});\n\n\t}).then(function(blob){\n\n\t\tvar img = new Image();\n\t\timg.crossOrigin = \"anonymous\";  //  important!\n\t\timg.onload = onLoadEnd;\n\n\t\t//  Get dataURL from blob.\n\n\t\treturn new Promise(function(resolve, reject){\n\n\t\t\tvar reader = new FileReader();\n\t\t\treader.onload = function() {\n\t\t\t\timg.src = reader.result;\n\t\t\t\tresolve( img );\n\t\t\t};\n\n\t\t\treader.readAsDataURL(blob);\n\n\t\t});\n\n\t});\n\n}\n\n\n//  blobToDataUrl.js\n//  https://gist.github.com/tantaman/6921973\n\nfunction convertToBase64(blob, callback) {\n\n\tvar reader = new FileReader();\n\n\treader.onload = function(e) {\n\t\tcallback(reader.result);\n\t};\n\n\treader.readAsDataURL(blob);\n}\n\n\n//  dataUrlToBlob.js\n//  https://gist.github.com/tantaman/6921973\n\nfunction dataURLToBlob(dataURL) {\n\n\tvar BASE64_MARKER = \";base64,\";\n\n\tif (dataURL.indexOf(BASE64_MARKER) == -1) {\n\t\tvar parts = dataURL.split(\",\");\n\t\tvar contentType = parts[0].split(\":\")[1];\n\t\tvar raw = parts[1];\n\n\t\treturn new Blob([raw], {type: contentType});\n\t}\n\n\tvar parts = dataURL.split(BASE64_MARKER);\n\tvar contentType = parts[0].split(\":\")[1];\n\tvar raw = window.atob(parts[1]);\n\tvar rawLength = raw.length;\n\n\tvar uInt8Array = new Uint8Array(rawLength);\n\n\tfor (var i = 0; i < rawLength; ++i) {\n\t\tuInt8Array[i] = raw.charCodeAt(i);\n\t}\n\n\treturn new Blob([uInt8Array], {type: contentType});\n}\n\n\n//  makePowerOfTwo.js\n\nfunction makePowerOfTwo( image, natural ) {\n\n\tvar canvas = document.createElement( \"canvas\" );\n\n\tif ( natural ){\n\t\tcanvas.width = THREE.Math.nearestPowerOfTwo( image.naturalWidth );\n\t\tcanvas.height = THREE.Math.nearestPowerOfTwo( image.naturalHeight );\n\t} else {\n\t\tcanvas.width = THREE.Math.nearestPowerOfTwo( image.width );\n\t\tcanvas.height = THREE.Math.nearestPowerOfTwo( image.height );\n\t}\n\n\tvar context = canvas.getContext( \"2d\" );\n\tcontext.drawImage( image, 0, 0, canvas.width, canvas.height );\n\n\t//  debugMode && console.warn( \"outfitLoader:makePowerOfTwo(img):\", \n\t//  \"Image resized to:\", canvas.width, \"x\", canvas.height );\n\n\treturn canvas;\n}\n\n\n//  getDataURL.js\n\nfunction getDataURL( image ) {\n\n\tvar canvas;\n\n\tif ( image.toDataURL !== undefined ) {\n\n\t\tcanvas = image;\n\n\t} else {\n\n\t\tcanvas = document.createElementNS( \"http://www.w3.org/1999/xhtml\", \"canvas\" );\n\t\tcanvas.width = image.width;\n\t\tcanvas.height = image.height;\n\n\t\tcanvas.getContext( \"2d\" ).drawImage( image, 0, 0, image.width, image.height );\n\n\t}\n\n\tif ( canvas.width > 2048 || canvas.height > 2048 ) {\n\n\t\treturn canvas.toDataURL( \"image/jpeg\", 0.6 );\n\n\t} else {\n\n\t\treturn canvas.toDataURL( \"image/png\" );\n\n\t}\n\n}\n\n\n//  deepCopy.js\n\nfunction deepCopy(obj) {\n\tif (Object.prototype.toString.call(obj) === \"[object Array]\") {\n\t\tvar out = [], i = 0, len = obj.length;\n\t\tfor ( ; i < len; i++ ) {\n\t\t\tout[i] = arguments.callee(obj[i]);\n\t\t}\n\t\treturn out;\n\t}\n\tif (typeof obj === \"object\") {\n\t\tvar out = {}, i;\n\t\tfor ( i in obj ) {\n\t\t\tout[i] = arguments.callee(obj[i]);\n\t\t}\n\t\treturn out;\n\t}\n\treturn obj;\n}\n\n\n//  round.js  source: \"https://developer.mozilla.org/en-US/docs/Web/JavaScript/Reference/Global_Objects/Math/round\"\n\nfunction round(number, precision) {\n\tvar shift = function (number, precision, reverseShift) {\n\t\tif (reverseShift) {\n\t\t\tprecision = -precision;\n\t\t}  \n\t\tnumArray = (\"\" + number).split(\"e\");\n\t\treturn +(numArray[0] + \"e\" + (numArray[1] ? (+numArray[1] + precision) : precision));\n\t};\n\treturn shift(Math.round(shift(number, precision, false)), precision, true);\n}\n\n"
			},
			{
				"name": "PlayerControlller.js",
				"source": "//  PlayerController.js\n\nvar Player = function(radius){\n\n\tthis.holder = AW3D.PlayerHolder(); // important!\n\tscene.add( this.holder );\n\tthis.holder.visible = true;\n\n\tthis.holderHelper = AW3D.PlayerHolderHelper();\n\t//  scene.add( this.holderHelper );\n\n\tthis.sphere = AW3D.PlayerSphere();\n\tthis.sphere.position.y = 12;\n\tthis.holder.add( this.sphere ); \n\n\tvar player = this; // important!\n\n\tthis.outfit = new AW3D.OutfitManager(); // important!\n\n\tthis.outfit.update = function() {\n\n\t\t//  Update avatar rotation y.\n\t\tvar direction = player.controller.direction - Math.PI;\n\n\t\t//  \"this\" is the \"localPlayer.outfit\".\n\t\tthis.direction.rotation.y = direction;\n\n\t\t//  Update avatar position.\n\t\tvar x = player.controller.center.x;\n\t\tvar y = player.controller.center.y - player.controller.radius;\n\t\tvar z = player.controller.center.z;\n\n\t\t//  \"this\" is the \"localPlayer.outfit\".\n\t\tthis.direction.position.set( x, y, z );\n\t};\n\n\tvar radius = radius || 3;\n\tthis.controller = new MW.CharacterController( this.holder, radius );\n\tthis.controller.isWalking = false;\n\n\tthis.controller.getdata = function( action ){\n\n\t\tvar data = {};\n\t\tdata.playerid = socket.id;\n\t\tdata.radius = this.radius;\n\t\tdata.isGrounded = this.isGrounded;\n\t\tdata.isOnSlope = this.isOnSlope;\n\t\tdata.isIdling  = this.isIdling;\n\t\tdata.isJumping = this.isJumping;\n\t\tdata.isRunning = this.isRunning;\n\t\tdata.isWalking = this.isWalking;\n\t\tdata.direction = this.direction;\n\t\tdata.movementSpeed = this.movementSpeed;\n\t\tdata.jumpStartTime = this.jumpStartTime;\n\t\tdata.position = this.center.toArray();\n\t\tif (!!action) data.action = action;\n\n\t\treturn data;\n\t};\n\n\tfunction onStartJumping(){\n\t\tplayer.outfit.AnimationsHandler.weightOff(\"idle\", \"walk\", \"run\");\n\t};\n\n\tfunction onEndJumping(){\n\t\tplayer.outfit.AnimationsHandler.weightOn(\"idle\", \"walk\", \"run\");\n\n\t\tif ( player.controller.isRunning && player.controller.isWalking ) {\n\n\t\t\tplayer.outfit.AnimationsHandler.stop();\n\t\t\tplayer.controller.movementSpeed = 28;\n\t\t\tplayer.outfit.AnimationsHandler.play(\"walk\");\n\t\t\tplayer.controller.dispatchEvent({type:\"startRunning\"});\n\n\t\t} else if ( player.controller.isRunning && !player.controller.isWalking ) {\n\n\t\t\tplayer.outfit.AnimationsHandler.stop();\n\t\t\tplayer.controller.movementSpeed = 45;\n\t\t\tplayer.outfit.AnimationsHandler.play(\"run\");\n\t\t\tplayer.controller.dispatchEvent({type:\"startRunning\"});\n\n\t\t} else {\n\n\t\t\tplayer.outfit.AnimationsHandler.stop();\n\t\t\tplayer.controller.movementSpeed = 0;\n\t\t\tplayer.outfit.AnimationsHandler.play(\"idle\");\n\t\t\tplayer.controller.dispatchEvent({type:\"startIdling\"});\n\n\t\t}\n\t}\n\n\tthis.controller.addEventListener(\"endJumping\",   onEndJumping);\n\tthis.controller.addEventListener(\"startJumping\", onStartJumping);\n\n\t//  Add controller to world.\n\tworld.add( this.controller ); // important!\n\n\tdebugMode && console.log( \n\t\t\"world.characterPool length:\", world.characterPool.length, \n\t\t\"index:\", world.characterPool.indexOf( this.controller )\n\t);\n\n\t//  Add outfit to scene.\n\tscene.add(this.outfit.direction); // important!\n\n};\n\nPlayer.prototype = {\n\n\t//  Collect position, direction, nickname, and gender.\n\n\tgetdata: function( socket ){\n\t\tif ( !socket ) return;\n\t\tvar data = {};\n\t\tdata.playerid  = socket.id;\n\t\tdata.nickname  = this.nickname;\n\t\tdata.gender    = this.outfit.getGender();\n\t\tdata.direction = this.outfit.direction.rotation.y;\n\t\tdata.position  = this.outfit.direction.position.toArray();\n\t\tdata.dna       = this.outfit.toDNA();\n\t\tdebugMode && console.log(\"player data:\", data);\n\t\treturn data;\n\t},\n\n\t//  Remote player set data.\n\n\tsetdata: function( data ){\n\t\tif ( !data.playerid || data.playerid != this.playerid ) return;\n\n\t\tthis.playerid = data.playerid;\n\t\tthis.nickname = data.nickname;\n\t\tthis.outfit.setGender( data.gender );\n\t\tthis.outfit.direction.rotation.y = data.direction;\n\t\tthis.outfit.direction.position.fromArray(data.position);\n\n\t\tif (data.action != undefined) {\n\t\t\tthis.outfit.AnimationsHandler.stop();\n\t\t\tthis.outfit.AnimationsHandler.play( data.action );\n\t\t}\n\t},\n\n\t//  Create player outfit from dna data.\n\n\tfromDNA: function( dna ){\n\t\tvar frontAngle = Math.PI - cameraControls.getFrontAngle(); // face front.\n\t\tthis.controller.direction = frontAngle;\n\t\tthis.outfit.fromDNA( dna );\n\t\tscene.add(this.outfit.direction);\n\t\tthis.outfit.update();\n\t},\n\n\t//  Start remote player action.\n\tstartAction: function( running, walking, idling, speed, name, eventType ){\n\n\t\tthis.outfit.AnimationsHandler.stop();        \n\t\tthis.controller.isRunning = running;\n\t\tthis.controller.isWalking = walking;\n\t\tthis.controller.isIdling  = idling;\n\t\tthis.controller.movementSpeed = speed;\n\t\tthis.outfit.AnimationsHandler.play( name );\n\t\tthis.controller.dispatchEvent({type: eventType});\n\n\t},\n\n\t//  Get local player action data.\n\tgetActionData: function ( name ){\n\t\treturn {\n\t\t\tplayerid : socket.id,\n\t\t\tdirection: this.outfit.direction.rotation.y,\n\t\t\tposition : this.outfit.direction.position.toArray(),\n\t\t\taction   : name,\n\t\t};\n\t},\n\n};\n\nlocalPlayer = new Player();\ndebugMode && console.log({\"localPlayer\": localPlayer});\n\nfunction update( event ) {\n\tlocalPlayer.outfit.update();\n}\n"
			},
			{
				"name": "cameraControl.js",
				"source": "//  MW cameraControl.js\n\ncameraControls = new MW.TPSCameraControl(camera, localPlayer.holder, {\n\tel: renderer.domElement,               // html renderer element.\n\toffset: new THREE.Vector3( 0, 15, 0 ), // camera eye height.\n\tradius: 40,                            // default: 37 // (distance of the character to the camera).\n\tminRadius: 6,                          // default: 10 // (can take and negative values, yes!!!).\n\tmaxRadius: 1500,                       // default: 64, runtime: 40.\n\trigidObjects: [],                      // collition objects for the camera.\n});\n\ncameraControls.getforward = function(){ \n\treturn -this.theta \n};\n\ncameraControls.setVerticalOffset = function(offset){ \n\tthis.offset.y = offset; \n};\n\n(cameraControls.frontAngleUpdate = function(){\n\twindowAnimationFrameRequestID = requestAnimationFrame( cameraControls.frontAngleUpdate );\n\tcameraControls.forward = -cameraControls.theta;\n})();\n\nfunction update( event ) {\n\tcameraControls.update();\n}\n"
			},
			{
				"name": "KeyInputControls.js",
				"source": "//  KeyInputControls.js\n\nkeyInputControls = new MW.KeyInputControl();\n\nkeyInputControls.On = function(){\n\n\tif ( !keyInputControls.isOff ) return;\n\n\t$(keyInputControls).on( \"movekeyon\", onMoveKeyOn );\n\t$(keyInputControls).on( \"movekeyoff\", onMoveKeyOff );\n\t$(keyInputControls).on( \"jumpkeypress\", onJumpInput );\n\t$(keyInputControls).on( \"movekeychange\", onMoveKeyChange );\n\tkeyInputControls.isOff = false;\n\tdebugMode && console.log( \"keyInputControls are ON.\" );\n};\n\nkeyInputControls.Off = function(){\n\n\tif ( keyInputControls.isOff ) return;\n\n\t$(keyInputControls).off( \"movekeyon\", onMoveKeyOn );\n\t$(keyInputControls).off( \"movekeyoff\", onMoveKeyOff );\n\t$(keyInputControls).off( \"jumpkeypress\", onJumpInput );\n\t$(keyInputControls).off( \"movekeychange\", onMoveKeyChange );\n\tkeyInputControls.isOff = true;\n\tdebugMode && console.log( \"keyInputControls are OFF.\" );\n};\n\nkeyInputControls.update = function(){\n\n\tif ( keyInputControls.isOff ) return;\n\n\tif ( keyInputControls.isMoveKeyHolded \n\t\t|| localPlayer.controller.isJumping \n\t\t|| !localPlayer.controller.isGrounded \n\t\t|| localPlayer.controller.isOnSlope ){\n\n\t\tthis.dispatchEvent({type:\"update\"});\n\t}\n};\n\n//\tSet to off to activate key input controls.\n\nkeyInputControls.Off();  // important!\n\n//\tEnable key input controls.\n\nkeyInputControls.On(); // important!\n\n\nfunction onMoveKeyOn() { \n\tdebugMode && console.log(\"move key on\");\n\n\tif (  localPlayer.controller.isJumping \n\t\t|| !localPlayer.controller.isGrounded \n\t\t||  localPlayer.controller.isOnSlope ) {\n\t\treturn;\n\t}\n\n\tlocalPlayer.controller.direction = (2 * Math.PI) - cameraControls.getFrontAngle() + this.frontAngle;\n\n\tlocalPlayer.outfit.AnimationsHandler.stop();\n\tlocalPlayer.controller.isRunning = true; \n\tlocalPlayer.controller.isWalking = true;\n\tlocalPlayer.controller.movementSpeed = 28;\n\tlocalPlayer.outfit.AnimationsHandler.play(\"walk\");\n\n}\n\nfunction onMoveKeyChange() {\n\tdebugMode && console.log(\"move key changed\");\n\tlocalPlayer.controller.direction = (2 * Math.PI) - cameraControls.getFrontAngle() + this.frontAngle;\n}\n\nfunction onMoveKeyOff() {\n\tdebugMode && console.log(\"move key off\");\n\n\tif (  localPlayer.controller.isJumping \n\t\t|| !localPlayer.controller.isGrounded \n\t\t||  localPlayer.controller.isOnSlope ) {\n\t\treturn;\n\t}\n\n\tvar finalDirection = (2 * Math.PI) - cameraControls.getFrontAngle() + this.frontAngle;\n\n\tlocalPlayer.controller.direction = finalDirection;\n\tlocalPlayer.outfit.AnimationsHandler.stop();\n\tlocalPlayer.controller.isRunning = false;\n\tlocalPlayer.controller.isWalking = false;\n\tlocalPlayer.controller.isIdling  = true;\n\tlocalPlayer.controller.movementSpeed = 0;\n\tlocalPlayer.outfit.AnimationsHandler.play(\"idle\");\n\tlocalPlayer.controller.dispatchEvent({type:\"startIdling\"});\n\n}\n\nfunction onJumpInput() {\n\tdebugMode && console.log(\"jump key on\");\n\n\tif (  localPlayer.controller.isJumping \n\t\t|| !localPlayer.controller.isGrounded \n\t\t||  localPlayer.controller.isOnSlope ) {\n\t\treturn;\n\t}\n\n\tlocalPlayer.controller.jump();\n\tlocalPlayer.outfit.AnimationsHandler.jump();\n\n}\n\n\n//\tUpdate.\n\nfunction update( event ) {\n\tkeyInputControls.update();\n}\n\n//\tDebug.\n\nfunction stop(){\n\tkeyInputControls.Off();  // important!\n}"
			},
			{
				"name": "JoystickControls.js",
				"source": "//  JoystickControls.js\n\n/*\n$(document.head).append(\n\t\"<style class='joystick-controls'> \"\n\t+ \".gameinput-button__inner { display:table-cell; vertical-align: middle; } \"\n\t+ \".gameinput-joystick { border:solid 0px white; border-radius:50%; position:absolute; bottom:30px; user-select:none; \"\n\t+ \"touch-action:none; -ms-touch-action:none; -webkit-user-select:none; -moz-user-select:none; -ms-user-select:none; } \"\n\t+ \".gameinput-frame { position:absolute; top:0; left:0; pointer-events:none; opacity:0.5; } \"\n\t+ \".gameinput-button { cursor:pointer; text-align:center; position:absolute; display:table; \"\n\t+ \"box-sizing:border-box; border:1px solid #333; border-radius:50%; background:rgba( 255, 255, 255, .5 ); user-select:none; \"\n\t+ \"touch-action:none; -ms-touch-action:none; -webkit-user-select:none; -moz-user-select:none; -ms-user-select:none; } \"\n\t+ \"#joystick1 { bottom:50px; right:40px; width:120px; height:120px;z-index:1; } \"\n\t+ \"#joystick2 { bottom:50px; left:40px; width:120px; height:120px; z-index:1;} \"\n\t+ \"#jumpButton { right:105px; bottom:240px; z-index:1; } \"\n\t+ \"@media ( max-width: 768px ) { #joystick1 { bottom:0px; right:0px; } #joystick2 { bottom:0px; left:0px; } \"\n\t+ \"#jumpButton { bottom:190px; right:65px; } \"\n\t+ \".gameinput-joystick { bottom:0px;} } \"\n\t+ \".gameinput-joystick__button { position:absolute; width:72px; height:72px; left:85px; top:85px; cursor:pointer; \"\n\t+ \"box-sizing:border-box; border-radius:50%; border:1px solid #333; background:rgba( 255, 255, 255, .5 ); } \"\n\t+ \"</style>\"\n);\n\n$(document.body).append('<div class=\"joystick-controls\" id=\"joystick-controls-1\"></div><div class=\"joystick-controls\" id=\"joystick-controls-2\"></div>');\n*/\n\n//  MW Joystick Controls.\n\nvar joystick1Selector  = \"#joystick1\";\nvar joystick2Selector  = \"#joystick2\";\nvar jumpButtonSelector = \"#jumpButton\";\n\nvar joystickControlsSelector  = \".joystick-controls\";\nvar joystickControls1Selector = \"#joystick-controls-1\";\nvar joystickControls2Selector = \"#joystick-controls-2\";\n\nvar buttonSvgSrc = '<svg width=\"48\" height=\"48\" viewBox=\"0 0 64 64\"><path fill=\"#fff\" d=\"M44.5,54.5c-0.3-5.1-2.4-9.4-5.7-13.2C41,36,40.9,30,38.5,24.7c-1.2-2.7-3.9-4.4-6.9-3.3c-0.2,0.1-0.4,0.1-0.5,0.2c-3-4.3-6.6-8.3-10.1-11.8c-2.6-2.6-6.4,1.7-3.8,4.3c3.9,3.9,8.1,8.5,11,13.7c0,0.1,0.1,0.3,0.2,0.4c1.5,3.2,1.9,6.4,0.2,9.6c-0.3,0.5-0.4,1-0.5,1.5c-1.1,1.5-2.3,3-3.6,4.4c-0.8-2.3-1.4-4.7-1.6-7.1c-0.5-4.6-7.7-4.1-7.2,0.5c0.5,4.9,2.1,9.6,3.9,14.2c0.8,1.9,3.6,3.4,5.4,1.8c2.8-2.4,5.3-4.9,7.5-7.8c0.2,0.1,0.5,0.1,0.7,0.1c0.1,0.3,0.3,0.5,0.5,0.7c1.7,1.8,2.8,3.9,3.3,6.3c-2.2,0.8-4.6,1.4-7,1.4c-4.6,0.1-4.1,7.2,0.5,7.2c4-0.1,7.9-1.3,11.6-3C43.6,57.5,44.6,56.2,44.5,54.5z M34.2,8.9c0.7,0.1,1.6-0.1,2.3,0.3c1.5,0.8,2.6,2.1,3.2,3.6c0.2-2.2,0.5-4.3,0.8-6.5c0.5-3.7-5.1-4.7-5.7-1.1C34.6,6.3,34.3,7.8,34.2,8.9z\"/><circle fill=\"#fff\" cx=\"33.8\" cy=\"15.2\" r=\"4.9\"/></svg>';\n\njoystick1  = new virtualInput.Joystick( $( joystickControls1Selector ), 94, { id: \"joystick1\" } );\njoystick2  = new virtualInput.Joystick( $( joystickControls2Selector ), 94, { id: \"joystick2\" } );\njumpButton = new virtualInput.Button( $( joystickControls1Selector ),   58, { id: \"jumpButton\", label: \"<b>JUMP</b>\" } ); // buttonSvgSrc\n\njoystick1.addEventListener( \"active\", function () { \n\n\tif (  localPlayer.controller.isJumping || !localPlayer.controller.isGrounded ||  localPlayer.controller.isOnSlope ) return;\n\n\tlocalPlayer.controller.direction = (3 * Math.PI/2) - cameraControls.getFrontAngle() + joystick1.angle; // important!\n\n\tif ( localPlayer.controller.isRunning && !localPlayer.controller.isWalking ) {\n\n\t\tlocalPlayer.outfit.AnimationsHandler.stop();\n\t\tlocalPlayer.controller.movementSpeed = 45;\n\t\tlocalPlayer.outfit.AnimationsHandler.play(\"run\");\n\n\t} else {\n\n\t\tlocalPlayer.outfit.AnimationsHandler.stop();\n\t\tlocalPlayer.controller.isRunning = true; \n\t\tlocalPlayer.controller.isWalking = false;  // !!!danger: \"false\" cause bug in production server ??? //\n\t\tlocalPlayer.controller.movementSpeed = 28;\n\t\tlocalPlayer.outfit.AnimationsHandler.play(\"walk\");\n\n\t}\n});\n\njoystick1.addEventListener( \"disactive\", function () { \n\n\tif (  localPlayer.controller.isJumping || !localPlayer.controller.isGrounded ||  localPlayer.controller.isOnSlope ) return;\n\n\tlocalPlayer.outfit.AnimationsHandler.stop();\n\tlocalPlayer.controller.isRunning = false;\n\tlocalPlayer.controller.isWalking = false;\n\tlocalPlayer.controller.movementSpeed = 0;\n\tlocalPlayer.outfit.AnimationsHandler.play(\"idle\");\n\tlocalPlayer.controller.dispatchEvent({type:\"startIdling\"});\n\n});\n\njoystick1.update = function(){\n\n\tif ( joystick1.isActive ) {\n\n\t\tlocalPlayer.controller.direction = (3 * Math.PI/2) - cameraControls.getFrontAngle() + joystick1.angle;\n\n\t\tjoystick1.dispatchEvent({type:\"update\"}); // important!\n\n\t}\n};\n\njoystick2.update = function(){\n\n\tif ( joystick2.isActive ) {\n\n\t\tcameraControls.setLatLon(\n\t\t\tcameraControls.lat + joystick2.position.y * 0.5, // deg.\n\t\t\tcameraControls.lon - joystick2.position.x        // deg.\n\t\t);\n\n\t\tjoystick2.dispatchEvent({type:\"update\"}); // important!\n\t}\n}\n\njumpButton.addEventListener( \"press\", function () { \n\n\tif (  localPlayer.controller.isJumping || !localPlayer.controller.isGrounded || localPlayer.controller.isOnSlope ) return;\n\n\tlocalPlayer.controller.jump();\n\tlocalPlayer.outfit.AnimationsHandler.jump();\n\n});\n\nfunction update( event ) {\n\tjoystick1.update();\n\tjoystick2.update();\n}\n\n//\tDebug.\n\nfunction stop(){\n//\t$(joystickControlsSelector).remove();\n}"
			},
			{
				"name": "AnimationsUpdate.js",
				"source": "function update( event ) {\n\tvar delta = clock.getDelta();\n\tTHREE.AnimationHandler.update( delta );\n}\n"
			}],
		"B22F5FEF-F45E-4C2E-B36B-AEF0F249EFC7": [
			{
				"name": "UVsDebug.js",
				"source": "/* \n * @author zz85 / http://github.com/zz85\n * @author WestLangley / http://github.com/WestLangley\n *\n * tool for \"unwrapping\" and debugging three.js \n * geometries UV mapping\n *\n * Sample usage:\n *\tdocument.body.appendChild( THREE.UVsDebug( new THREE.SphereGeometry( 10, 10, 10, 10 ) );\n *\n */\n \nTHREE.UVsDebug = function( geometry, size ) {\n\n\t// handles wrapping of uv.x > 1 only\n    \n\tvar abc = 'abc';\n\n\tvar uv, u, ax, ay;\n\tvar i, il, j, jl;\n\tvar vnum;\n\n\tvar a = new THREE.Vector2();\n\tvar b = new THREE.Vector2();\n\n\tvar geo = ( geometry instanceof THREE.BufferGeometry ) ? new THREE.Geometry().fromBufferGeometry( geometry ) : geometry;\n\n\tvar faces = geo.faces;\n\tvar uvs = geo.faceVertexUvs[ 0 ];\n\n\tvar canvas = document.createElement( 'canvas' );\n\tvar width = size || 1024;   // power of 2 required for wrapping\n\tvar height = size || 1024;\n\tcanvas.width = width;\n\tcanvas.height = height;\n\n\tvar ctx = canvas.getContext( '2d' );\n\tctx.lineWidth = 1;\n\tctx.strokeStyle = 'rgba( 0, 0, 0, 1.0 )';\n\tctx.textAlign = 'center';\n\n\t// paint background white\n\n\tctx.fillStyle = 'rgba( 255, 255, 255, 1.0 )';\n\tctx.fillRect( 0, 0, width, height );\n\n\tfor ( i = 0, il = uvs.length; i < il; i ++ ) {\n\n\t\tuv = uvs[ i ];\n\n\t\t// draw lines\n\n\t\tctx.beginPath();\n\n\t\ta.set( 0, 0 );\n\n\t\tfor ( j = 0, jl = uv.length; j < jl; j ++ ) {\n\n\t\t\tu = uv[ j ];\n\n\t\t\ta.x += u.x;\n\t\t\ta.y += u.y;\n\n\t\t\tif ( j == 0 ) {\n\n\t\t\t\tctx.moveTo( u.x * width, ( 1 - u.y ) * height );\n\n\t\t\t} else {\n\n\t\t\t\tctx.lineTo( u.x * width, ( 1 - u.y ) * height );\n\n\t\t\t}\n\n\t\t}\n\n\t\tctx.closePath();\n\t\tctx.stroke();\n\n\t\ta.divideScalar( jl );\n\n\t}\n\n\treturn canvas;\n\n};\n\n//  disable labels.\n\n/*\n\t\t// label the face number\n\n\t\tctx.font = \"12pt Arial bold\";\n\t\tctx.fillStyle = 'rgba( 0, 0, 0, 1.0 )';\n\t\tctx.fillText( i, a.x * width, ( 1 - a.y ) * height );\n\n\t\tif ( a.x > 0.95 ) {\n\n\t\t\t// wrap x // 0.95 is arbitrary\n\n\t\t\tctx.fillText( i, ( a.x % 1 ) * width, ( 1 - a.y ) * height );\n\n\t\t}\n\n\t\tctx.font = \"8pt Arial bold\";\n\t\tctx.fillStyle = 'rgba( 0, 0, 0, 1.0 )';\n\n\t\t// label uv edge orders\n\n\t\tfor ( j = 0, jl = uv.length; j < jl; j ++ ) {\n\n\t\t\tu = uv[ j ];\n\t\t\tb.addVectors( a, u ).divideScalar( 2 );\n\n\t\t\tvnum = faces[ i ][ abc[ j ] ];\n\t\t\tctx.fillText( abc[ j ] + vnum, b.x * width, ( 1 - b.y ) * height );\n\n\t\t\tif ( b.x > 0.95 ) {\n\n\t\t\t\t// wrap x\n\n\t\t\t\tctx.fillText( abc[ j ] + vnum, ( b.x % 1 ) * width, ( 1 - b.y ) * height );\n\n\t\t\t}\n\n\t\t}\n\n\t}\n\n\treturn canvas;\n\n};\n*/\n\n"
			},
			{
				"name": "SubdivisionModifier.js",
				"source": "/*\n *\t@author zz85 / http://twitter.com/blurspline / http://www.lab4games.net/zz85/blog\n *\t@author centerionware / http://www.centerionware.com\n *\n *\tSubdivision Geometry Modifier\n *\t\tusing Loop Subdivision Scheme\n *\n *\tReferences:\n *\t\thttp://graphics.stanford.edu/~mdfisher/subdivision.html\n *\t\thttp://www.holmes3d.net/graphics/subdivision/\n *\t\thttp://www.cs.rutgers.edu/~decarlo/readings/subdiv-sg00c.pdf\n *\n *\tKnown Issues:\n *\t\t- currently doesn't handle \"Sharp Edges\"\n */\n\nTHREE.SubdivisionModifier = function ( subdivisions ) {\n\n\tthis.subdivisions = ( subdivisions === undefined ) ? 1 : subdivisions;\n\n};\n\n// Applies the \"modify\" pattern\nTHREE.SubdivisionModifier.prototype.modify = function ( geometry ) {\n\n\tvar repeats = this.subdivisions;\n\n\twhile ( repeats -- > 0 ) {\n\n\t\tthis.smooth( geometry );\n\n\t}\n\n\tgeometry.computeFaceNormals();\n\tgeometry.computeVertexNormals();\n\n};\n\n( function() {\n\n\t// Some constants\n\tvar WARNINGS = ! true; // Set to true for development\n\tvar ABC = [ 'a', 'b', 'c' ];\n\n\n\tfunction getEdge( a, b, map ) {\n\n\t\tvar vertexIndexA = Math.min( a, b );\n\t\tvar vertexIndexB = Math.max( a, b );\n\n\t\tvar key = vertexIndexA + \"_\" + vertexIndexB;\n\n\t\treturn map[ key ];\n\n\t}\n\n\n\tfunction processEdge( a, b, vertices, map, face, metaVertices ) {\n\n\t\tvar vertexIndexA = Math.min( a, b );\n\t\tvar vertexIndexB = Math.max( a, b );\n\n\t\tvar key = vertexIndexA + \"_\" + vertexIndexB;\n\n\t\tvar edge;\n\n\t\tif ( key in map ) {\n\n\t\t\tedge = map[ key ];\n\n\t\t} else {\n\n\t\t\tvar vertexA = vertices[ vertexIndexA ];\n\t\t\tvar vertexB = vertices[ vertexIndexB ];\n\n\t\t\tedge = {\n\n\t\t\t\ta: vertexA, // pointer reference\n\t\t\t\tb: vertexB,\n\t\t\t\tnewEdge: null,\n\t\t\t\t// aIndex: a, // numbered reference\n\t\t\t\t// bIndex: b,\n\t\t\t\tfaces: [] // pointers to face\n\n\t\t\t};\n\n\t\t\tmap[ key ] = edge;\n\n\t\t}\n\n\t\tedge.faces.push( face );\n\n\t\tmetaVertices[ a ].edges.push( edge );\n\t\tmetaVertices[ b ].edges.push( edge );\n\n\n\t}\n\n\tfunction generateLookups( vertices, faces, metaVertices, edges ) {\n\n\t\tvar i, il, face, edge;\n\n\t\tfor ( i = 0, il = vertices.length; i < il; i ++ ) {\n\n\t\t\tmetaVertices[ i ] = { edges: [] };\n\n\t\t}\n\n\t\tfor ( i = 0, il = faces.length; i < il; i ++ ) {\n\n\t\t\tface = faces[ i ];\n\n\t\t\tprocessEdge( face.a, face.b, vertices, edges, face, metaVertices );\n\t\t\tprocessEdge( face.b, face.c, vertices, edges, face, metaVertices );\n\t\t\tprocessEdge( face.c, face.a, vertices, edges, face, metaVertices );\n\n\t\t}\n\n\t}\n\n\tfunction newFace( newFaces, a, b, c ) {\n\n\t\tnewFaces.push( new THREE.Face3( a, b, c ) );\n\n\t}\n\n\tfunction midpoint( a, b ) {\n\n\t\treturn ( Math.abs( b - a ) / 2 ) + Math.min( a, b );\n\n\t}\n\n\tfunction newUv( newUvs, a, b, c ) {\n\n\t\tnewUvs.push( [ a.clone(), b.clone(), c.clone() ] );\n\n\t}\n\n\t/////////////////////////////\n\n\t// Performs one iteration of Subdivision\n\tTHREE.SubdivisionModifier.prototype.smooth = function ( geometry ) {\n\n\t\tvar tmp = new THREE.Vector3();\n\n\t\tvar oldVertices, oldFaces, oldUvs;\n\t\tvar newVertices, newFaces, newUVs = [];\n\n\t\tvar n, l, i, il, j, k;\n\t\tvar metaVertices, sourceEdges;\n\n\t\t// new stuff.\n\t\tvar sourceEdges, newEdgeVertices, newSourceVertices;\n\n\t\toldVertices = geometry.vertices; // { x, y, z}\n\t\toldFaces = geometry.faces; // { a: oldVertex1, b: oldVertex2, c: oldVertex3 }\n\t\toldUvs = geometry.faceVertexUvs[ 0 ];\n\n\t\tvar hasUvs = oldUvs !== undefined && oldUvs.length > 0;\n\n\t\t/******************************************************\n\t\t *\n\t\t * Step 0: Preprocess Geometry to Generate edges Lookup\n\t\t *\n\t\t *******************************************************/\n\n\t\tmetaVertices = new Array( oldVertices.length );\n\t\tsourceEdges = {}; // Edge => { oldVertex1, oldVertex2, faces[]  }\n\n\t\tgenerateLookups( oldVertices, oldFaces, metaVertices, sourceEdges );\n\n\n\t\t/******************************************************\n\t\t *\n\t\t *\tStep 1.\n\t\t *\tFor each edge, create a new Edge Vertex,\n\t\t *\tthen position it.\n\t\t *\n\t\t *******************************************************/\n\n\t\tnewEdgeVertices = [];\n\t\tvar other, currentEdge, newEdge, face;\n\t\tvar edgeVertexWeight, adjacentVertexWeight, connectedFaces;\n\n\t\tfor ( i in sourceEdges ) {\n\n\t\t\tcurrentEdge = sourceEdges[ i ];\n\t\t\tnewEdge = new THREE.Vector3();\n\n\t\t\tedgeVertexWeight = 3 / 8;\n\t\t\tadjacentVertexWeight = 1 / 8;\n\n\t\t\tconnectedFaces = currentEdge.faces.length;\n\n\t\t\t// check how many linked faces. 2 should be correct.\n\t\t\tif ( connectedFaces != 2 ) {\n\n\t\t\t\t// if length is not 2, handle condition\n\t\t\t\tedgeVertexWeight = 0.5;\n\t\t\t\tadjacentVertexWeight = 0;\n\n\t\t\t\tif ( connectedFaces != 1 ) {\n\n\t\t\t\t\tif ( WARNINGS ) console.warn( 'Subdivision Modifier: Number of connected faces != 2, is: ', connectedFaces, currentEdge );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tnewEdge.addVectors( currentEdge.a, currentEdge.b ).multiplyScalar( edgeVertexWeight );\n\n\t\t\ttmp.set( 0, 0, 0 );\n\n\t\t\tfor ( j = 0; j < connectedFaces; j ++ ) {\n\n\t\t\t\tface = currentEdge.faces[ j ];\n\n\t\t\t\tfor ( k = 0; k < 3; k ++ ) {\n\n\t\t\t\t\tother = oldVertices[ face[ ABC[ k ] ] ];\n\t\t\t\t\tif ( other !== currentEdge.a && other !== currentEdge.b ) break;\n\n\t\t\t\t}\n\n\t\t\t\ttmp.add( other );\n\n\t\t\t}\n\n\t\t\ttmp.multiplyScalar( adjacentVertexWeight );\n\t\t\tnewEdge.add( tmp );\n\n\t\t\tcurrentEdge.newEdge = newEdgeVertices.length;\n\t\t\tnewEdgeVertices.push( newEdge );\n\n\t\t\t// console.log(currentEdge, newEdge);\n\n\t\t}\n\n\t\t/******************************************************\n\t\t *\n\t\t *\tStep 2.\n\t\t *\tReposition each source vertices.\n\t\t *\n\t\t *******************************************************/\n\n\t\tvar beta, sourceVertexWeight, connectingVertexWeight;\n\t\tvar connectingEdge, connectingEdges, oldVertex, newSourceVertex;\n\t\tnewSourceVertices = [];\n\n\t\tfor ( i = 0, il = oldVertices.length; i < il; i ++ ) {\n\n\t\t\toldVertex = oldVertices[ i ];\n\n\t\t\t// find all connecting edges (using lookupTable)\n\t\t\tconnectingEdges = metaVertices[ i ].edges;\n\t\t\tn = connectingEdges.length;\n\n\t\t\tif ( n == 3 ) {\n\n\t\t\t\tbeta = 3 / 16;\n\n\t\t\t} else if ( n > 3 ) {\n\n\t\t\t\tbeta = 3 / ( 8 * n ); // Warren's modified formula\n\n\t\t\t}\n\n\t\t\t// Loop's original beta formula\n\t\t\t// beta = 1 / n * ( 5/8 - Math.pow( 3/8 + 1/4 * Math.cos( 2 * Math. PI / n ), 2) );\n\n\t\t\tsourceVertexWeight = 1 - n * beta;\n\t\t\tconnectingVertexWeight = beta;\n\n\t\t\tif ( n <= 2 ) {\n\n\t\t\t\t// crease and boundary rules\n\t\t\t\t// console.warn('crease and boundary rules');\n\n\t\t\t\tif ( n == 2 ) {\n\n\t\t\t\t\tif ( WARNINGS ) console.warn( '2 connecting edges', connectingEdges );\n\t\t\t\t\tsourceVertexWeight = 3 / 4;\n\t\t\t\t\tconnectingVertexWeight = 1 / 8;\n\n\t\t\t\t\t// sourceVertexWeight = 1;\n\t\t\t\t\t// connectingVertexWeight = 0;\n\n\t\t\t\t} else if ( n == 1 ) {\n\n\t\t\t\t\tif ( WARNINGS ) console.warn( 'only 1 connecting edge' );\n\n\t\t\t\t} else if ( n == 0 ) {\n\n\t\t\t\t\tif ( WARNINGS ) console.warn( '0 connecting edges' );\n\n\t\t\t\t}\n\n\t\t\t}\n\n\t\t\tnewSourceVertex = oldVertex.clone().multiplyScalar( sourceVertexWeight );\n\n\t\t\ttmp.set( 0, 0, 0 );\n\n\t\t\tfor ( j = 0; j < n; j ++ ) {\n\n\t\t\t\tconnectingEdge = connectingEdges[ j ];\n\t\t\t\tother = connectingEdge.a !== oldVertex ? connectingEdge.a : connectingEdge.b;\n\t\t\t\ttmp.add( other );\n\n\t\t\t}\n\n\t\t\ttmp.multiplyScalar( connectingVertexWeight );\n\t\t\tnewSourceVertex.add( tmp );\n\n\t\t\tnewSourceVertices.push( newSourceVertex );\n\n\t\t}\n\n\n\t\t/******************************************************\n\t\t *\n\t\t *\tStep 3.\n\t\t *\tGenerate Faces between source vertices\n\t\t *\tand edge vertices.\n\t\t *\n\t\t *******************************************************/\n\n\t\tnewVertices = newSourceVertices.concat( newEdgeVertices );\n\t\tvar sl = newSourceVertices.length, edge1, edge2, edge3;\n\t\tnewFaces = [];\n\n\t\tvar uv, x0, x1, x2;\n\t\tvar x3 = new THREE.Vector2();\n\t\tvar x4 = new THREE.Vector2();\n\t\tvar x5 = new THREE.Vector2();\n\n\t\tfor ( i = 0, il = oldFaces.length; i < il; i ++ ) {\n\n\t\t\tface = oldFaces[ i ];\n\n\t\t\t// find the 3 new edges vertex of each old face\n\n\t\t\tedge1 = getEdge( face.a, face.b, sourceEdges ).newEdge + sl;\n\t\t\tedge2 = getEdge( face.b, face.c, sourceEdges ).newEdge + sl;\n\t\t\tedge3 = getEdge( face.c, face.a, sourceEdges ).newEdge + sl;\n\n\t\t\t// create 4 faces.\n\n\t\t\tnewFace( newFaces, edge1, edge2, edge3 );\n\t\t\tnewFace( newFaces, face.a, edge1, edge3 );\n\t\t\tnewFace( newFaces, face.b, edge2, edge1 );\n\t\t\tnewFace( newFaces, face.c, edge3, edge2 );\n\n\t\t\t// create 4 new uv's\n\n\t\t\tif ( hasUvs ) {\n\n\t\t\t\tuv = oldUvs[ i ];\n\n\t\t\t\tx0 = uv[ 0 ];\n\t\t\t\tx1 = uv[ 1 ];\n\t\t\t\tx2 = uv[ 2 ];\n\n\t\t\t\tx3.set( midpoint( x0.x, x1.x ), midpoint( x0.y, x1.y ) );\n\t\t\t\tx4.set( midpoint( x1.x, x2.x ), midpoint( x1.y, x2.y ) );\n\t\t\t\tx5.set( midpoint( x0.x, x2.x ), midpoint( x0.y, x2.y ) );\n\n\t\t\t\tnewUv( newUVs, x3, x4, x5 );\n\t\t\t\tnewUv( newUVs, x0, x3, x5 );\n\n\t\t\t\tnewUv( newUVs, x1, x4, x3 );\n\t\t\t\tnewUv( newUVs, x2, x5, x4 );\n\n\t\t\t}\n\n\t\t}\n\n\t\t// Overwrite old arrays\n\t\tgeometry.vertices = newVertices;\n\t\tgeometry.faces = newFaces;\n\t\tif ( hasUvs ) geometry.faceVertexUvs[ 0 ] = newUVs;\n\n\t\t// console.log('done');\n\n\t};\n\n} )();\n"
			}],
		"817A9E70-F25D-467D-A1B9-F6960AE9B2CF": [
			{
				"name": "cannon.min.js",
				"source": "/*\n * Copyright (c) 2015 cannon.js Authors\n *\n * Permission is hereby granted, free of charge, to any person\n * obtaining a copy of this software and associated documentation\n * files (the \"Software\"), to deal in the Software without\n * restriction, including without limitation the rights to use, copy,\n * modify, merge, publish, distribute, sublicense, and/or sell copies\n * of the Software, and to permit persons to whom the Software is\n * furnished to do so, subject to the following conditions:\n *\n * The above copyright notice and this permission notice shall be\n * included in all copies or substantial portions of the Software.\n *\n * THE SOFTWARE IS PROVIDED \"AS IS\", WITHOUT WARRANTY OF ANY KIND,\n * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF\n * MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND\n * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT HOLDERS BE\n * LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY, WHETHER IN AN ACTION\n * OF CONTRACT, TORT OR OTHERWISE, ARISING FROM, OUT OF OR IN CONNECTION\n * WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE SOFTWARE.\n */\n\n!function(e){if(\"object\"==typeof exports&&\"undefined\"!=typeof module)module.exports=e();else if(\"function\"==typeof define&&false)define([],e);else{var f;\"undefined\"!=typeof window?f=window:\"undefined\"!=typeof global?f=global:\"undefined\"!=typeof self&&(f=self),f.CANNON=e()}}(function(){return function e(f,n,o){function d(t,l){if(!n[t]){if(!f[t]){var u=\"function\"==typeof require&&require;if(!l&&u)return u(t,!0);if(i)return i(t,!0);throw new Error(\"Cannot find module '\"+t+\"'\")}var p=n[t]={exports:{}};f[t][0].call(p.exports,function(e){var n=f[t][1][e];return d(n?n:e)},p,p.exports,e,f,n,o)}return n[t].exports}for(var i=\"function\"==typeof require&&require,t=0;t<o.length;t++)d(o[t]);return d}({1:[function(e,f){f.exports={name:\"cannon\",version:\"0.6.2\",description:\"A lightweight 3D physics engine written in JavaScript.\",homepage:\"https://github.com/schteppe/cannon.js\",author:\"Stefan Hedman <schteppe@gmail.com> (http://steffe.se)\",keywords:[\"cannon.js\",\"cannon\",\"physics\",\"engine\",\"3d\"],main:\"./build/cannon.js\",engines:{node:\"*\"},repository:{type:\"git\",url:\"https://github.com/schteppe/cannon.js.git\"},bugs:{url:\"https://github.com/schteppe/cannon.js/issues\"},licenses:[{type:\"MIT\"}],devDependencies:{jshint:\"latest\",\"uglify-js\":\"latest\",nodeunit:\"^0.9.0\",grunt:\"~0.4.0\",\"grunt-contrib-jshint\":\"~0.1.1\",\"grunt-contrib-nodeunit\":\"^0.4.1\",\"grunt-contrib-concat\":\"~0.1.3\",\"grunt-contrib-uglify\":\"^0.5.1\",\"grunt-browserify\":\"^2.1.4\",\"grunt-contrib-yuidoc\":\"^0.5.2\",browserify:\"*\"},dependencies:{}}},{}],2:[function(e,f){f.exports={version:e(\"../package.json\").version,AABB:e(\"./collision/AABB\"),ArrayCollisionMatrix:e(\"./collision/ArrayCollisionMatrix\"),Body:e(\"./objects/Body\"),Box:e(\"./shapes/Box\"),Broadphase:e(\"./collision/Broadphase\"),Constraint:e(\"./constraints/Constraint\"),ContactEquation:e(\"./equations/ContactEquation\"),Narrowphase:e(\"./world/Narrowphase\"),ConeTwistConstraint:e(\"./constraints/ConeTwistConstraint\"),ContactMaterial:e(\"./material/ContactMaterial\"),ConvexPolyhedron:e(\"./shapes/ConvexPolyhedron\"),Cylinder:e(\"./shapes/Cylinder\"),DistanceConstraint:e(\"./constraints/DistanceConstraint\"),Equation:e(\"./equations/Equation\"),EventTarget:e(\"./utils/EventTarget\"),FrictionEquation:e(\"./equations/FrictionEquation\"),GSSolver:e(\"./solver/GSSolver\"),GridBroadphase:e(\"./collision/GridBroadphase\"),Heightfield:e(\"./shapes/Heightfield\"),HingeConstraint:e(\"./constraints/HingeConstraint\"),LockConstraint:e(\"./constraints/LockConstraint\"),Mat3:e(\"./math/Mat3\"),Material:e(\"./material/Material\"),NaiveBroadphase:e(\"./collision/NaiveBroadphase\"),ObjectCollisionMatrix:e(\"./collision/ObjectCollisionMatrix\"),Pool:e(\"./utils/Pool\"),Particle:e(\"./shapes/Particle\"),Plane:e(\"./shapes/Plane\"),PointToPointConstraint:e(\"./constraints/PointToPointConstraint\"),Quaternion:e(\"./math/Quaternion\"),Ray:e(\"./collision/Ray\"),RaycastVehicle:e(\"./objects/RaycastVehicle\"),RaycastResult:e(\"./collision/RaycastResult\"),RigidVehicle:e(\"./objects/RigidVehicle\"),RotationalEquation:e(\"./equations/RotationalEquation\"),RotationalMotorEquation:e(\"./equations/RotationalMotorEquation\"),SAPBroadphase:e(\"./collision/SAPBroadphase\"),SPHSystem:e(\"./objects/SPHSystem\"),Shape:e(\"./shapes/Shape\"),Solver:e(\"./solver/Solver\"),Sphere:e(\"./shapes/Sphere\"),SplitSolver:e(\"./solver/SplitSolver\"),Spring:e(\"./objects/Spring\"),Trimesh:e(\"./shapes/Trimesh\"),Vec3:e(\"./math/Vec3\"),Vec3Pool:e(\"./utils/Vec3Pool\"),World:e(\"./world/World\")}},{\"../package.json\":1,\"./collision/AABB\":3,\"./collision/ArrayCollisionMatrix\":4,\"./collision/Broadphase\":5,\"./collision/GridBroadphase\":6,\"./collision/NaiveBroadphase\":7,\"./collision/ObjectCollisionMatrix\":8,\"./collision/Ray\":9,\"./collision/RaycastResult\":10,\"./collision/SAPBroadphase\":11,\"./constraints/ConeTwistConstraint\":12,\"./constraints/Constraint\":13,\"./constraints/DistanceConstraint\":14,\"./constraints/HingeConstraint\":15,\"./constraints/LockConstraint\":16,\"./constraints/PointToPointConstraint\":17,\"./equations/ContactEquation\":19,\"./equations/Equation\":20,\"./equations/FrictionEquation\":21,\"./equations/RotationalEquation\":22,\"./equations/RotationalMotorEquation\":23,\"./material/ContactMaterial\":24,\"./material/Material\":25,\"./math/Mat3\":27,\"./math/Quaternion\":28,\"./math/Vec3\":30,\"./objects/Body\":31,\"./objects/RaycastVehicle\":32,\"./objects/RigidVehicle\":33,\"./objects/SPHSystem\":34,\"./objects/Spring\":35,\"./shapes/Box\":37,\"./shapes/ConvexPolyhedron\":38,\"./shapes/Cylinder\":39,\"./shapes/Heightfield\":40,\"./shapes/Particle\":41,\"./shapes/Plane\":42,\"./shapes/Shape\":43,\"./shapes/Sphere\":44,\"./shapes/Trimesh\":45,\"./solver/GSSolver\":46,\"./solver/Solver\":47,\"./solver/SplitSolver\":48,\"./utils/EventTarget\":49,\"./utils/Pool\":51,\"./utils/Vec3Pool\":54,\"./world/Narrowphase\":55,\"./world/World\":56}],3:[function(e,f){function n(e){e=e||{},this.lowerBound=new o,e.lowerBound&&this.lowerBound.copy(e.lowerBound),this.upperBound=new o,e.upperBound&&this.upperBound.copy(e.upperBound)}{var o=e(\"../math/Vec3\");e(\"../utils/Utils\")}f.exports=n;var d=new o;n.prototype.setFromPoints=function(e,f,n,o){var i=this.lowerBound,t=this.upperBound,l=n;i.copy(e[0]),l&&l.vmult(i,i),t.copy(i);for(var u=1;u<e.length;u++){var p=e[u];l&&(l.vmult(p,d),p=d),p.x>t.x&&(t.x=p.x),p.x<i.x&&(i.x=p.x),p.y>t.y&&(t.y=p.y),p.y<i.y&&(i.y=p.y),p.z>t.z&&(t.z=p.z),p.z<i.z&&(i.z=p.z)}return f&&(f.vadd(i,i),f.vadd(t,t)),o&&(i.x-=o,i.y-=o,i.z-=o,t.x+=o,t.y+=o,t.z+=o),this},n.prototype.copy=function(e){return this.lowerBound.copy(e.lowerBound),this.upperBound.copy(e.upperBound),this},n.prototype.clone=function(){return(new n).copy(this)},n.prototype.extend=function(e){var f=e.lowerBound.x;this.lowerBound.x>f&&(this.lowerBound.x=f);var n=e.upperBound.x;this.upperBound.x<n&&(this.upperBound.x=n);var f=e.lowerBound.y;this.lowerBound.y>f&&(this.lowerBound.y=f);var n=e.upperBound.y;this.upperBound.y<n&&(this.upperBound.y=n);var f=e.lowerBound.z;this.lowerBound.z>f&&(this.lowerBound.z=f);var n=e.upperBound.z;this.upperBound.z<n&&(this.upperBound.z=n)},n.prototype.overlaps=function(e){var f=this.lowerBound,n=this.upperBound,o=e.lowerBound,d=e.upperBound;return(o.x<=n.x&&n.x<=d.x||f.x<=d.x&&d.x<=n.x)&&(o.y<=n.y&&n.y<=d.y||f.y<=d.y&&d.y<=n.y)&&(o.z<=n.z&&n.z<=d.z||f.z<=d.z&&d.z<=n.z)},n.prototype.contains=function(e){var f=this.lowerBound,n=this.upperBound,o=e.lowerBound,d=e.upperBound;return f.x<=o.x&&n.x>=d.x&&f.y<=o.y&&n.y>=d.y&&f.z<=o.z&&n.z>=d.z},n.prototype.getCorners=function(e,f,n,o,d,i,t,l){var u=this.lowerBound,p=this.upperBound;e.copy(u),f.set(p.x,u.y,u.z),n.set(p.x,p.y,u.z),o.set(u.x,p.y,p.z),d.set(p.x,u.y,u.z),i.set(u.x,p.y,u.z),t.set(u.x,u.y,p.z),l.copy(p)};var i=[new o,new o,new o,new o,new o,new o,new o,new o];n.prototype.toLocalFrame=function(e,f){var n=i,o=n[0],d=n[1],t=n[2],l=n[3],u=n[4],p=n[5],s=n[6],y=n[7];this.getCorners(o,d,t,l,u,p,s,y);for(var c=0;8!==c;c++){var a=n[c];e.pointToLocal(a,a)}return f.setFromPoints(n)},n.prototype.toWorldFrame=function(e,f){var n=i,o=n[0],d=n[1],t=n[2],l=n[3],u=n[4],p=n[5],s=n[6],y=n[7];this.getCorners(o,d,t,l,u,p,s,y);for(var c=0;8!==c;c++){var a=n[c];e.pointToWorld(a,a)}return f.setFromPoints(n)}},{\"../math/Vec3\":30,\"../utils/Utils\":53}],4:[function(e,f){function n(){this.matrix=[]}f.exports=n,n.prototype.get=function(e,f){if(e=e.index,f=f.index,f>e){var n=f;f=e,e=n}return this.matrix[(e*(e+1)>>1)+f-1]},n.prototype.set=function(e,f,n){if(e=e.index,f=f.index,f>e){var o=f;f=e,e=o}this.matrix[(e*(e+1)>>1)+f-1]=n?1:0},n.prototype.reset=function(){for(var e=0,f=this.matrix.length;e!==f;e++)this.matrix[e]=0},n.prototype.setNumObjects=function(e){this.matrix.length=e*(e-1)>>1}},{}],5:[function(e,f){function n(){this.world=null,this.useBoundingBoxes=!1,this.dirty=!0}{var o=e(\"../objects/Body\"),d=e(\"../math/Vec3\"),i=e(\"../math/Quaternion\");e(\"../shapes/Shape\"),e(\"../shapes/Plane\")}f.exports=n,n.prototype.collisionPairs=function(){throw new Error(\"collisionPairs not implemented for this BroadPhase class!\")};var t=o.STATIC|o.KINEMATIC;n.prototype.needBroadphaseCollision=function(e,f){return 0===(e.collisionFilterGroup&f.collisionFilterMask)||0===(f.collisionFilterGroup&e.collisionFilterMask)?!1:0===(e.type&t)&&e.sleepState!==o.SLEEPING||0===(f.type&t)&&f.sleepState!==o.SLEEPING?!0:!1},n.prototype.intersectionTest=function(e,f,n,o){this.useBoundingBoxes?this.doBoundingBoxBroadphase(e,f,n,o):this.doBoundingSphereBroadphase(e,f,n,o)};{var l=new d;new d,new i,new d}n.prototype.doBoundingSphereBroadphase=function(e,f,n,o){var d=l;f.position.vsub(e.position,d);var i=Math.pow(e.boundingRadius+f.boundingRadius,2),t=d.norm2();i>t&&(n.push(e),o.push(f))},n.prototype.doBoundingBoxBroadphase=function(e,f,n,o){e.aabbNeedsUpdate&&e.computeAABB(),f.aabbNeedsUpdate&&f.computeAABB(),e.aabb.overlaps(f.aabb)&&(n.push(e),o.push(f))};var u={keys:[]},p=[],s=[];n.prototype.makePairsUnique=function(e,f){for(var n=u,o=p,d=s,i=e.length,t=0;t!==i;t++)o[t]=e[t],d[t]=f[t];e.length=0,f.length=0;for(var t=0;t!==i;t++){var l=o[t].id,y=d[t].id,c=y>l?l+\",\"+y:y+\",\"+l;n[c]=t,n.keys.push(c)}for(var t=0;t!==n.keys.length;t++){var c=n.keys.pop(),a=n[c];e.push(o[a]),f.push(d[a]),delete n[c]}},n.prototype.setWorld=function(){};var y=new d;n.boundingSphereCheck=function(e,f){var n=y;return e.position.vsub(f.position,n),Math.pow(e.shape.boundingSphereRadius+f.shape.boundingSphereRadius,2)>n.norm2()},n.prototype.aabbQuery=function(){return console.warn(\".aabbQuery is not implemented in this Broadphase subclass.\"),[]}},{\"../math/Quaternion\":28,\"../math/Vec3\":30,\"../objects/Body\":31,\"../shapes/Plane\":42,\"../shapes/Shape\":43}],6:[function(e,f){function n(e,f,n,i,t){o.apply(this),this.nx=n||10,this.ny=i||10,this.nz=t||10,this.aabbMin=e||new d(100,100,100),this.aabbMax=f||new d(-100,-100,-100);var l=this.nx*this.ny*this.nz;if(0>=l)throw\"GridBroadphase: Each dimension's n must be >0\";this.bins=[],this.binLengths=[],this.bins.length=l,this.binLengths.length=l;for(var u=0;l>u;u++)this.bins[u]=[],this.binLengths[u]=0}f.exports=n;var o=e(\"./Broadphase\"),d=e(\"../math/Vec3\"),i=e(\"../shapes/Shape\");n.prototype=new o,n.prototype.constructor=n;{var t=new d;new d}n.prototype.collisionPairs=function(e,f,n){function o(e,f,n,o,d,i,t){var l=(e-g)*v|0,u=(f-x)*A|0,p=(n-j)*C|0,b=I((o-g)*v),m=I((d-x)*A),N=I((i-j)*C);0>l?l=0:l>=s&&(l=s-1),0>u?u=0:u>=y&&(u=y-1),0>p?p=0:p>=c&&(p=c-1),0>b?b=0:b>=s&&(b=s-1),0>m?m=0:m>=y&&(m=y-1),0>N?N=0:N>=c&&(N=c-1),l*=a,u*=r,p*=w,b*=a,m*=r,N*=w;for(var O=l;b>=O;O+=a)for(var h=u;m>=h;h+=r)for(var k=p;N>=k;k+=w){var q=O+h+k;E[q][F[q]++]=t}}for(var d=e.numObjects(),l=e.bodies,u=this.aabbMax,p=this.aabbMin,s=this.nx,y=this.ny,c=this.nz,a=y*c,r=c,w=1,b=u.x,m=u.y,N=u.z,g=p.x,x=p.y,j=p.z,v=s/(b-g),A=y/(m-x),C=c/(N-j),O=(b-g)/s,h=(m-x)/y,k=(N-j)/c,q=.5*Math.sqrt(O*O+h*h+k*k),z=i.types,B=z.SPHERE,D=z.PLANE,E=(z.BOX,z.COMPOUND,z.CONVEXPOLYHEDRON,this.bins),F=this.binLengths,G=this.bins.length,H=0;H!==G;H++)F[H]=0;for(var I=Math.ceil,p=Math.min,u=Math.max,H=0;H!==d;H++){var J=l[H],K=J.shape;switch(K.type){case B:var L=J.position.x,M=J.position.y,P=J.position.z,Q=K.radius;o(L-Q,M-Q,P-Q,L+Q,M+Q,P+Q,J);break;case D:K.worldNormalNeedsUpdate&&K.computeWorldNormal(J.quaternion);var R=K.worldNormal,S=g+.5*O-J.position.x,T=x+.5*h-J.position.y,U=j+.5*k-J.position.z,V=t;V.set(S,T,U);for(var W=0,X=0;W!==s;W++,X+=a,V.y=T,V.x+=O)for(var Y=0,Z=0;Y!==y;Y++,Z+=r,V.z=U,V.y+=h)for(var $=0,_=0;$!==c;$++,_+=w,V.z+=k)if(V.dot(R)<q){var ef=X+Z+_;E[ef][F[ef]++]=J}break;default:J.aabbNeedsUpdate&&J.computeAABB(),o(J.aabb.lowerBound.x,J.aabb.lowerBound.y,J.aabb.lowerBound.z,J.aabb.upperBound.x,J.aabb.upperBound.y,J.aabb.upperBound.z,J)}}for(var H=0;H!==G;H++){var ff=F[H];if(ff>1)for(var nf=E[H],W=0;W!==ff;W++)for(var J=nf[W],Y=0;Y!==W;Y++){var of=nf[Y];this.needBroadphaseCollision(J,of)&&this.intersectionTest(J,of,f,n)}}this.makePairsUnique(f,n)}},{\"../math/Vec3\":30,\"../shapes/Shape\":43,\"./Broadphase\":5}],7:[function(e,f){function n(){o.apply(this)}f.exports=n;var o=e(\"./Broadphase\"),d=e(\"./AABB\");n.prototype=new o,n.prototype.constructor=n,n.prototype.collisionPairs=function(e,f,n){var o,d,i,t,l=e.bodies,u=l.length;for(o=0;o!==u;o++)for(d=0;d!==o;d++)i=l[o],t=l[d],this.needBroadphaseCollision(i,t)&&this.intersectionTest(i,t,f,n)};new d;n.prototype.aabbQuery=function(e,f,n){n=n||[];for(var o=0;o<e.bodies.length;o++){var d=e.bodies[o];d.aabbNeedsUpdate&&d.computeAABB(),d.aabb.overlaps(f)&&n.push(d)}return n}},{\"./AABB\":3,\"./Broadphase\":5}],8:[function(e,f){function n(){this.matrix={}}f.exports=n,n.prototype.get=function(e,f){if(e=e.id,f=f.id,f>e){var n=f;f=e,e=n}return e+\"-\"+f in this.matrix},n.prototype.set=function(e,f,n){if(e=e.id,f=f.id,f>e){var o=f;f=e,e=o}n?this.matrix[e+\"-\"+f]=!0:delete this.matrix[e+\"-\"+f]},n.prototype.reset=function(){this.matrix={}},n.prototype.setNumObjects=function(){}},{}],9:[function(e,f){function n(e,f){this.from=e?e.clone():new i,this.to=f?f.clone():new i,this._direction=new i,this.precision=1e-4,this.checkCollisionResponse=!0,this.skipBackfaces=!1,this.collisionFilterMask=-1,this.collisionFilterGroup=-1,this.mode=n.ANY,this.result=new u,this.hasHit=!1,this.callback=function(){}}function o(e,f,n,o){o.vsub(f,G),n.vsub(f,a),e.vsub(f,r);var d,i,t=G.dot(G),l=G.dot(a),u=G.dot(r),p=a.dot(a),s=a.dot(r);return(d=p*u-l*s)>=0&&(i=t*s-l*u)>=0&&t*p-l*l>d+i}function d(e,f,n){n.vsub(e,G);var o=G.dot(f);f.mult(o,H),H.vadd(e,H);var d=n.distanceTo(H);return d}f.exports=n;var i=e(\"../math/Vec3\"),t=e(\"../math/Quaternion\"),l=e(\"../math/Transform\"),u=(e(\"../shapes/ConvexPolyhedron\"),e(\"../shapes/Box\"),e(\"../collision/RaycastResult\")),p=e(\"../shapes/Shape\"),s=e(\"../collision/AABB\");n.prototype.constructor=n,n.CLOSEST=1,n.ANY=2,n.ALL=4;var y=new s,c=[];n.prototype.intersectWorld=function(e,f){return this.mode=f.mode||n.ANY,this.result=f.result||new u,this.skipBackfaces=!!f.skipBackfaces,this.collisionFilterMask=\"undefined\"!=typeof f.collisionFilterMask?f.collisionFilterMask:-1,this.collisionFilterGroup=\"undefined\"!=typeof f.collisionFilterGroup?f.collisionFilterGroup:-1,f.from&&this.from.copy(f.from),f.to&&this.to.copy(f.to),this.callback=f.callback||function(){},this.hasHit=!1,this.result.reset(),this._updateDirection(),this.getAABB(y),c.length=0,e.broadphase.aabbQuery(e,y,c),this.intersectBodies(c),this.hasHit};var a=new i,r=new i;n.pointInTriangle=o;var w=new i,b=new t;n.prototype.intersectBody=function(e,f){f&&(this.result=f,this._updateDirection());var n=this.checkCollisionResponse;if((!n||e.collisionResponse)&&0!==(this.collisionFilterGroup&e.collisionFilterMask)&&0!==(e.collisionFilterGroup&this.collisionFilterMask))for(var o=w,d=b,i=0,t=e.shapes.length;t>i;i++){var l=e.shapes[i];if((!n||l.collisionResponse)&&(e.quaternion.mult(e.shapeOrientations[i],d),e.quaternion.vmult(e.shapeOffsets[i],o),o.vadd(e.position,o),this.intersectShape(l,d,o,e),this.result._shouldStop))break}},n.prototype.intersectBodies=function(e,f){f&&(this.result=f,this._updateDirection());for(var n=0,o=e.length;!this.result._shouldStop&&o>n;n++)this.intersectBody(e[n])},n.prototype._updateDirection=function(){this.to.vsub(this.from,this._direction),this._direction.normalize()},n.prototype.intersectShape=function(e,f,n,o){var i=this.from,t=d(i,this._direction,n);if(!(t>e.boundingSphereRadius)){var l=this[e.type];l&&l.call(this,e,f,n,o)}};{var m=(new i,new i,new i),N=new i,g=new i,x=new i;new i,new u}n.prototype.intersectBox=function(e,f,n,o){return this.intersectConvex(e.convexPolyhedronRepresentation,f,n,o)},n.prototype[p.types.BOX]=n.prototype.intersectBox,n.prototype.intersectPlane=function(e,f,n,o){var d=this.from,t=this.to,l=this._direction,u=new i(0,0,1);f.vmult(u,u);var p=new i;d.vsub(n,p);var s=p.dot(u);t.vsub(n,p);var y=p.dot(u);if(!(s*y>0||d.distanceTo(t)<s)){var c=u.dot(l);if(!(Math.abs(c)<this.precision)){var a=new i,r=new i,w=new i;d.vsub(n,a);var b=-u.dot(a)/c;l.scale(b,r),d.vadd(r,w),this.reportIntersection(u,w,e,o,-1)}}},n.prototype[p.types.PLANE]=n.prototype.intersectPlane,n.prototype.getAABB=function(e){var f=this.to,n=this.from;e.lowerBound.x=Math.min(f.x,n.x),e.lowerBound.y=Math.min(f.y,n.y),e.lowerBound.z=Math.min(f.z,n.z),e.upperBound.x=Math.max(f.x,n.x),e.upperBound.y=Math.max(f.y,n.y),e.upperBound.z=Math.max(f.z,n.z)};var j={faceList:[0]};n.prototype.intersectHeightfield=function(e,f,o,d){var t=(e.data,e.elementSize,new i),u=new n(this.from,this.to);l.pointToLocalFrame(o,f,u.from,u.from),l.pointToLocalFrame(o,f,u.to,u.to);var p=[],s=null,y=null,c=null,a=null,r=e.getIndexOfPosition(u.from.x,u.from.y,p,!1);if(r&&(s=p[0],y=p[1],c=p[0],a=p[1]),r=e.getIndexOfPosition(u.to.x,u.to.y,p,!1),r&&((null===s||p[0]<s)&&(s=p[0]),(null===c||p[0]>c)&&(c=p[0]),(null===y||p[1]<y)&&(y=p[1]),(null===a||p[1]>a)&&(a=p[1])),null!==s){var w=[];e.getRectMinMax(s,y,c,a,w);for(var b=(w[0],w[1],s);c>=b;b++)for(var m=y;a>=m;m++){if(this.result._shouldStop)return;if(e.getConvexTrianglePillar(b,m,!1),l.pointToWorldFrame(o,f,e.pillarOffset,t),this.intersectConvex(e.pillarConvex,f,t,d,j),this.result._shouldStop)return;e.getConvexTrianglePillar(b,m,!0),l.pointToWorldFrame(o,f,e.pillarOffset,t),this.intersectConvex(e.pillarConvex,f,t,d,j)}}},n.prototype[p.types.HEIGHTFIELD]=n.prototype.intersectHeightfield;var v=new i,A=new i;n.prototype.intersectSphere=function(e,f,n,o){var d=this.from,i=this.to,t=e.radius,l=Math.pow(i.x-d.x,2)+Math.pow(i.y-d.y,2)+Math.pow(i.z-d.z,2),u=2*((i.x-d.x)*(d.x-n.x)+(i.y-d.y)*(d.y-n.y)+(i.z-d.z)*(d.z-n.z)),p=Math.pow(d.x-n.x,2)+Math.pow(d.y-n.y,2)+Math.pow(d.z-n.z,2)-Math.pow(t,2),s=Math.pow(u,2)-4*l*p,y=v,c=A;if(!(0>s))if(0===s)d.lerp(i,s,y),y.vsub(n,c),c.normalize(),this.reportIntersection(c,y,e,o,-1);else{var a=(-u-Math.sqrt(s))/(2*l),r=(-u+Math.sqrt(s))/(2*l);if(a>=0&&1>=a&&(d.lerp(i,a,y),y.vsub(n,c),c.normalize(),this.reportIntersection(c,y,e,o,-1)),this.result._shouldStop)return;r>=0&&1>=r&&(d.lerp(i,r,y),y.vsub(n,c),c.normalize(),this.reportIntersection(c,y,e,o,-1))}},n.prototype[p.types.SPHERE]=n.prototype.intersectSphere;var C=new i,O=(new i,new i,new i);n.prototype.intersectConvex=function(e,f,n,d,i){for(var t=C,l=O,u=i&&i.faceList||null,p=e.faces,s=e.vertices,y=e.faceNormals,c=this._direction,a=this.from,r=this.to,w=a.distanceTo(r),b=u?u.length:p.length,j=this.result,v=0;!j._shouldStop&&b>v;v++){var A=u?u[v]:v,h=p[A],k=y[A],q=f,z=n;l.copy(s[h[0]]),q.vmult(l,l),l.vadd(z,l),l.vsub(a,l),q.vmult(k,t);var B=c.dot(t);if(!(Math.abs(B)<this.precision)){var D=t.dot(l)/B;if(!(0>D)){c.mult(D,m),m.vadd(a,m),N.copy(s[h[0]]),q.vmult(N,N),z.vadd(N,N);for(var E=1;!j._shouldStop&&E<h.length-1;E++){g.copy(s[h[E]]),x.copy(s[h[E+1]]),q.vmult(g,g),q.vmult(x,x),z.vadd(g,g),z.vadd(x,x);var F=m.distanceTo(a);!o(m,N,g,x)&&!o(m,g,N,x)||F>w||this.reportIntersection(t,m,e,d,A)}}}}},n.prototype[p.types.CONVEXPOLYHEDRON]=n.prototype.intersectConvex;var h=new i,k=new i,q=new i,z=new i,B=new i,D=new i,E=(new s,[]),F=new l;n.prototype.intersectTrimesh=function(e,f,n,d,i){var t=h,u=E,p=F,s=O,y=k,c=q,a=z,r=D,w=B,b=(i&&i.faceList||null,e.indices),j=(e.vertices,e.faceNormals,this.from),v=this.to,A=this._direction;p.position.copy(n),p.quaternion.copy(f),l.vectorToLocalFrame(n,f,A,y),l.pointToLocalFrame(n,f,j,c),l.pointToLocalFrame(n,f,v,a);var C=c.distanceSquared(a);e.tree.rayQuery(this,p,u);for(var G=0,H=u.length;!this.result._shouldStop&&G!==H;G++){var I=u[G];e.getNormal(I,t),e.getVertex(b[3*I],N),N.vsub(c,s);var J=y.dot(t),K=t.dot(s)/J;if(!(0>K)){y.scale(K,m),m.vadd(c,m),e.getVertex(b[3*I+1],g),e.getVertex(b[3*I+2],x);var L=m.distanceSquared(c);!o(m,g,N,x)&&!o(m,N,g,x)||L>C||(l.vectorToWorldFrame(f,t,w),l.pointToWorldFrame(n,f,m,r),this.reportIntersection(w,r,e,d,I))}}u.length=0},n.prototype[p.types.TRIMESH]=n.prototype.intersectTrimesh,n.prototype.reportIntersection=function(e,f,o,d,i){var t=this.from,l=this.to,u=t.distanceTo(f),p=this.result;if(!(this.skipBackfaces&&e.dot(this._direction)>0))switch(p.hitFaceIndex=\"undefined\"!=typeof i?i:-1,this.mode){case n.ALL:this.hasHit=!0,p.set(t,l,e,f,o,d,u),p.hasHit=!0,this.callback(p);break;case n.CLOSEST:(u<p.distance||!p.hasHit)&&(this.hasHit=!0,p.hasHit=!0,p.set(t,l,e,f,o,d,u));break;case n.ANY:this.hasHit=!0,p.hasHit=!0,p.set(t,l,e,f,o,d,u),p._shouldStop=!0}};var G=new i,H=new i},{\"../collision/AABB\":3,\"../collision/RaycastResult\":10,\"../math/Quaternion\":28,\"../math/Transform\":29,\"../math/Vec3\":30,\"../shapes/Box\":37,\"../shapes/ConvexPolyhedron\":38,\"../shapes/Shape\":43}],10:[function(e,f){function n(){this.rayFromWorld=new o,this.rayToWorld=new o,this.hitNormalWorld=new o,this.hitPointWorld=new o,this.hasHit=!1,this.shape=null,this.body=null,this.hitFaceIndex=-1,this.distance=-1,this._shouldStop=!1}var o=e(\"../math/Vec3\");f.exports=n,n.prototype.reset=function(){this.rayFromWorld.setZero(),this.rayToWorld.setZero(),this.hitNormalWorld.setZero(),this.hitPointWorld.setZero(),this.hasHit=!1,this.shape=null,this.body=null,this.hitFaceIndex=-1,this.distance=-1,this._shouldStop=!1},n.prototype.abort=function(){this._shouldStop=!0},n.prototype.set=function(e,f,n,o,d,i,t){this.rayFromWorld.copy(e),this.rayToWorld.copy(f),this.hitNormalWorld.copy(n),this.hitPointWorld.copy(o),this.shape=d,this.body=i,this.distance=t}},{\"../math/Vec3\":30}],11:[function(e,f){function n(e){o.apply(this),this.axisList=[],this.world=null,this.axisIndex=0;var f=this.axisList;this._addBodyHandler=function(e){f.push(e.body)},this._removeBodyHandler=function(e){var n=f.indexOf(e.body);-1!==n&&f.splice(n,1)},e&&this.setWorld(e)}var o=(e(\"../shapes/Shape\"),e(\"../collision/Broadphase\"));f.exports=n,n.prototype=new o,n.prototype.setWorld=function(e){this.axisList.length=0;for(var f=0;f<e.bodies.length;f++)this.axisList.push(e.bodies[f]);e.removeEventListener(\"addBody\",this._addBodyHandler),e.removeEventListener(\"removeBody\",this._removeBodyHandler),e.addEventListener(\"addBody\",this._addBodyHandler),e.addEventListener(\"removeBody\",this._removeBodyHandler),this.world=e,this.dirty=!0},n.insertionSortX=function(e){for(var f=1,n=e.length;n>f;f++){for(var o=e[f],d=f-1;d>=0&&!(e[d].aabb.lowerBound.x<=o.aabb.lowerBound.x);d--)e[d+1]=e[d];e[d+1]=o}return e},n.insertionSortY=function(e){for(var f=1,n=e.length;n>f;f++){for(var o=e[f],d=f-1;d>=0&&!(e[d].aabb.lowerBound.y<=o.aabb.lowerBound.y);d--)e[d+1]=e[d];e[d+1]=o}return e},n.insertionSortZ=function(e){for(var f=1,n=e.length;n>f;f++){for(var o=e[f],d=f-1;d>=0&&!(e[d].aabb.lowerBound.z<=o.aabb.lowerBound.z);d--)e[d+1]=e[d];e[d+1]=o}return e},n.prototype.collisionPairs=function(e,f,o){var d,i,t=this.axisList,l=t.length,u=this.axisIndex;for(this.dirty&&(this.sortList(),this.dirty=!1),d=0;d!==l;d++){var p=t[d];for(i=d+1;l>i;i++){var s=t[i];if(this.needBroadphaseCollision(p,s)){if(!n.checkBounds(p,s,u))break;this.intersectionTest(p,s,f,o)}}}},n.prototype.sortList=function(){for(var e=this.axisList,f=this.axisIndex,o=e.length,d=0;d!==o;d++){var i=e[d];i.aabbNeedsUpdate&&i.computeAABB()}0===f?n.insertionSortX(e):1===f?n.insertionSortY(e):2===f&&n.insertionSortZ(e)},n.checkBounds=function(e,f,n){var o,d;0===n?(o=e.position.x,d=f.position.x):1===n?(o=e.position.y,d=f.position.y):2===n&&(o=e.position.z,d=f.position.z);var i=e.boundingRadius,t=f.boundingRadius,l=o+i,u=d-t;return l>u},n.prototype.autoDetectAxis=function(){for(var e=0,f=0,n=0,o=0,d=0,i=0,t=this.axisList,l=t.length,u=1/l,p=0;p!==l;p++){var s=t[p],y=s.position.x;e+=y,f+=y*y;var c=s.position.y;n+=c,o+=c*c;var a=s.position.z;d+=a,i+=a*a}var r=f-e*e*u,w=o-n*n*u,b=i-d*d*u;this.axisIndex=r>w?r>b?0:2:w>b?1:2},n.prototype.aabbQuery=function(e,f,n){n=n||[],this.dirty&&(this.sortList(),this.dirty=!1);var o=this.axisIndex,d=\"x\";1===o&&(d=\"y\"),2===o&&(d=\"z\");for(var i=this.axisList,t=(f.lowerBound[d],f.upperBound[d],0);t<i.length;t++){var l=i[t];l.aabbNeedsUpdate&&l.computeAABB(),l.aabb.overlaps(f)&&n.push(l)}return n}},{\"../collision/Broadphase\":5,\"../shapes/Shape\":43}],12:[function(e,f){function n(e,f,n){n=n||{};var l=\"undefined\"!=typeof n.maxForce?n.maxForce:1e6,u=n.pivotA?n.pivotA.clone():new t,p=n.pivotB?n.pivotB.clone():new t;this.axisA=n.axisA?n.axisA.clone():new t,this.axisB=n.axisB?n.axisB.clone():new t,o.call(this,e,u,f,p,l),this.collideConnected=!!n.collideConnected,this.angle=\"undefined\"!=typeof n.angle?n.angle:0;var s=this.coneEquation=new d(e,f,n),y=this.twistEquation=new i(e,f,n);this.twistAngle=\"undefined\"!=typeof n.twistAngle?n.twistAngle:0,s.maxForce=0,s.minForce=-l,y.maxForce=0,y.minForce=-l,this.equations.push(s,y)}f.exports=n;var o=(e(\"./Constraint\"),e(\"./PointToPointConstraint\")),d=e(\"../equations/ConeEquation\"),i=e(\"../equations/RotationalEquation\"),t=(e(\"../equations/ContactEquation\"),e(\"../math/Vec3\"));n.prototype=new o,n.constructor=n;new t,new t;n.prototype.update=function(){var e=this.bodyA,f=this.bodyB,n=this.coneEquation,d=this.twistEquation;o.prototype.update.call(this),e.vectorToWorldFrame(this.axisA,n.axisA),f.vectorToWorldFrame(this.axisB,n.axisB),this.axisA.tangents(d.axisA,d.axisA),e.vectorToWorldFrame(d.axisA,d.axisA),this.axisB.tangents(d.axisB,d.axisB),f.vectorToWorldFrame(d.axisB,d.axisB),n.angle=this.angle,d.maxAngle=this.twistAngle}},{\"../equations/ConeEquation\":18,\"../equations/ContactEquation\":19,\"../equations/RotationalEquation\":22,\"../math/Vec3\":30,\"./Constraint\":13,\"./PointToPointConstraint\":17}],13:[function(e,f){function n(e,f,d){d=o.defaults(d,{collideConnected:!0,wakeUpBodies:!0}),this.equations=[],this.bodyA=e,this.bodyB=f,this.id=n.idCounter++,this.collideConnected=d.collideConnected,d.wakeUpBodies&&(e&&e.wakeUp(),f&&f.wakeUp())}f.exports=n;var o=e(\"../utils/Utils\");n.prototype.update=function(){throw new Error(\"method update() not implmemented in this Constraint subclass!\")},n.prototype.enable=function(){for(var e=this.equations,f=0;f<e.length;f++)e[f].enabled=!0},n.prototype.disable=function(){for(var e=this.equations,f=0;f<e.length;f++)e[f].enabled=!1},n.idCounter=0},{\"../utils/Utils\":53}],14:[function(e,f){function n(e,f,n,i){o.call(this,e,f),\"undefined\"==typeof n&&(n=e.position.distanceTo(f.position)),\"undefined\"==typeof i&&(i=1e6),this.distance=n;var t=this.distanceEquation=new d(e,f);this.equations.push(t),t.minForce=-i,t.maxForce=i}f.exports=n;var o=e(\"./Constraint\"),d=e(\"../equations/ContactEquation\");n.prototype=new o,n.prototype.update=function(){var e=this.bodyA,f=this.bodyB,n=this.distanceEquation,o=.5*this.distance,d=n.ni;f.position.vsub(e.position,d),d.normalize(),d.mult(o,n.ri),d.mult(-o,n.rj)}},{\"../equations/ContactEquation\":19,\"./Constraint\":13}],15:[function(e,f){function n(e,f,n){n=n||{};var l=\"undefined\"!=typeof n.maxForce?n.maxForce:1e6,u=n.pivotA?n.pivotA.clone():new t,p=n.pivotB?n.pivotB.clone():new t;o.call(this,e,u,f,p,l);var s=this.axisA=n.axisA?n.axisA.clone():new t(1,0,0);s.normalize();var y=this.axisB=n.axisB?n.axisB.clone():new t(1,0,0);y.normalize();var c=this.rotationalEquation1=new d(e,f,n),a=this.rotationalEquation2=new d(e,f,n),r=this.motorEquation=new i(e,f,l);r.enabled=!1,this.equations.push(c,a,r)}f.exports=n;var o=(e(\"./Constraint\"),e(\"./PointToPointConstraint\")),d=e(\"../equations/RotationalEquation\"),i=e(\"../equations/RotationalMotorEquation\"),t=(e(\"../equations/ContactEquation\"),e(\"../math/Vec3\"));n.prototype=new o,n.constructor=n,n.prototype.enableMotor=function(){this.motorEquation.enabled=!0},n.prototype.disableMotor=function(){this.motorEquation.enabled=!1},n.prototype.setMotorSpeed=function(e){this.motorEquation.targetVelocity=e},n.prototype.setMotorMaxForce=function(e){this.motorEquation.maxForce=e,this.motorEquation.minForce=-e};var l=new t,u=new t;n.prototype.update=function(){var e=this.bodyA,f=this.bodyB,n=this.motorEquation,d=this.rotationalEquation1,i=this.rotationalEquation2,t=l,p=u,s=this.axisA,y=this.axisB;o.prototype.update.call(this),e.quaternion.vmult(s,t),f.quaternion.vmult(y,p),t.tangents(d.axisA,i.axisA),d.axisB.copy(p),i.axisB.copy(p),this.motorEquation.enabled&&(e.quaternion.vmult(this.axisA,n.axisA),f.quaternion.vmult(this.axisB,n.axisB))}},{\"../equations/ContactEquation\":19,\"../equations/RotationalEquation\":22,\"../equations/RotationalMotorEquation\":23,\"../math/Vec3\":30,\"./Constraint\":13,\"./PointToPointConstraint\":17}],16:[function(e,f){function n(e,f,n){n=n||{};var t=\"undefined\"!=typeof n.maxForce?n.maxForce:1e6,l=new i,u=new i,p=new i;e.position.vadd(f.position,p),p.scale(.5,p),f.pointToLocalFrame(p,u),e.pointToLocalFrame(p,l),o.call(this,e,l,f,u,t);var s=this.rotationalEquation1=new d(e,f,n),y=this.rotationalEquation2=new d(e,f,n),c=this.rotationalEquation3=new d(e,f,n);this.equations.push(s,y,c)}f.exports=n;var o=(e(\"./Constraint\"),e(\"./PointToPointConstraint\")),d=e(\"../equations/RotationalEquation\"),i=(e(\"../equations/RotationalMotorEquation\"),e(\"../equations/ContactEquation\"),e(\"../math/Vec3\"));n.prototype=new o,n.constructor=n;new i,new i;n.prototype.update=function(){var e=this.bodyA,f=this.bodyB,n=(this.motorEquation,this.rotationalEquation1),d=this.rotationalEquation2,t=this.rotationalEquation3;o.prototype.update.call(this),e.vectorToWorldFrame(i.UNIT_X,n.axisA),f.vectorToWorldFrame(i.UNIT_Y,n.axisB),e.vectorToWorldFrame(i.UNIT_Y,d.axisA),f.vectorToWorldFrame(i.UNIT_Z,d.axisB),e.vectorToWorldFrame(i.UNIT_Z,t.axisA),f.vectorToWorldFrame(i.UNIT_X,t.axisB)}},{\"../equations/ContactEquation\":19,\"../equations/RotationalEquation\":22,\"../equations/RotationalMotorEquation\":23,\"../math/Vec3\":30,\"./Constraint\":13,\"./PointToPointConstraint\":17}],17:[function(e,f){function n(e,f,n,t,l){o.call(this,e,n),l=\"undefined\"!=typeof l?l:1e6,this.pivotA=f?f.clone():new i,this.pivotB=t?t.clone():new i;var u=this.equationX=new d(e,n),p=this.equationY=new d(e,n),s=this.equationZ=new d(e,n);this.equations.push(u,p,s),u.minForce=p.minForce=s.minForce=-l,u.maxForce=p.maxForce=s.maxForce=l,u.ni.set(1,0,0),p.ni.set(0,1,0),s.ni.set(0,0,1)}f.exports=n;var o=e(\"./Constraint\"),d=e(\"../equations/ContactEquation\"),i=e(\"../math/Vec3\");n.prototype=new o,n.prototype.update=function(){var e=this.bodyA,f=this.bodyB,n=this.equationX,o=this.equationY,d=this.equationZ;e.quaternion.vmult(this.pivotA,n.ri),f.quaternion.vmult(this.pivotB,n.rj),o.ri.copy(n.ri),o.rj.copy(n.rj),d.ri.copy(n.ri),d.rj.copy(n.rj)}},{\"../equations/ContactEquation\":19,\"../math/Vec3\":30,\"./Constraint\":13}],18:[function(e,f){function n(e,f,n){n=n||{};var i=\"undefined\"!=typeof n.maxForce?n.maxForce:1e6;d.call(this,e,f,-i,i),this.axisA=n.axisA?n.axisA.clone():new o(1,0,0),this.axisB=n.axisB?n.axisB.clone():new o(0,1,0),this.angle=\"undefined\"!=typeof n.angle?n.angle:0}f.exports=n;var o=e(\"../math/Vec3\"),d=(e(\"../math/Mat3\"),e(\"./Equation\"));n.prototype=new d,n.prototype.constructor=n;var i=new o,t=new o;n.prototype.computeB=function(e){var f=this.a,n=this.b,o=this.axisA,d=this.axisB,l=i,u=t,p=this.jacobianElementA,s=this.jacobianElementB;o.cross(d,l),d.cross(o,u),p.rotational.copy(u),s.rotational.copy(l);var y=Math.cos(this.angle)-o.dot(d),c=this.computeGW(),a=this.computeGiMf(),r=-y*f-c*n-e*a;return r}},{\"../math/Mat3\":27,\"../math/Vec3\":30,\"./Equation\":20}],19:[function(e,f){function n(e,f,n){n=\"undefined\"!=typeof n?n:1e6,o.call(this,e,f,0,n),this.restitution=0,this.ri=new d,this.rj=new d,this.ni=new d}f.exports=n;{var o=e(\"./Equation\"),d=e(\"../math/Vec3\");e(\"../math/Mat3\")}n.prototype=new o,n.prototype.constructor=n;var i=new d,t=new d,l=new d;n.prototype.computeB=function(e){var f=this.a,n=this.b,o=this.bi,d=this.bj,u=this.ri,p=this.rj,s=i,y=t,c=o.velocity,a=o.angularVelocity,r=(o.force,o.torque,d.velocity),w=d.angularVelocity,b=(d.force,d.torque,l),m=this.jacobianElementA,N=this.jacobianElementB,g=this.ni;u.cross(g,s),p.cross(g,y),g.negate(m.spatial),s.negate(m.rotational),N.spatial.copy(g),N.rotational.copy(y),b.copy(d.position),b.vadd(p,b),b.vsub(o.position,b),b.vsub(u,b);var x=g.dot(b),j=this.restitution+1,v=j*r.dot(g)-j*c.dot(g)+w.dot(y)-a.dot(s),A=this.computeGiMf(),C=-x*f-v*n-e*A;return C};var u=new d,p=new d,s=new d,y=new d,c=new d;n.prototype.getImpactVelocityAlongNormal=function(){var e=u,f=p,n=s,o=y,d=c;return this.bi.position.vadd(this.ri,n),this.bj.position.vadd(this.rj,o),this.bi.getVelocityAtWorldPoint(n,e),this.bj.getVelocityAtWorldPoint(o,f),e.vsub(f,d),this.ni.dot(d)}},{\"../math/Mat3\":27,\"../math/Vec3\":30,\"./Equation\":20}],20:[function(e,f){function n(e,f,d,i){this.id=n.id++,this.minForce=\"undefined\"==typeof d?-1e6:d,this.maxForce=\"undefined\"==typeof i?1e6:i,this.bi=e,this.bj=f,this.a=0,this.b=0,this.eps=0,this.jacobianElementA=new o,this.jacobianElementB=new o,this.enabled=!0,this.setSpookParams(1e7,4,1/60)\n}f.exports=n;var o=e(\"../math/JacobianElement\"),d=e(\"../math/Vec3\");n.prototype.constructor=n,n.id=0,n.prototype.setSpookParams=function(e,f,n){var o=f,d=e,i=n;this.a=4/(i*(1+4*o)),this.b=4*o/(1+4*o),this.eps=4/(i*i*d*(1+4*o))},n.prototype.computeB=function(e,f,n){var o=this.computeGW(),d=this.computeGq(),i=this.computeGiMf();return-d*e-o*f-i*n},n.prototype.computeGq=function(){var e=this.jacobianElementA,f=this.jacobianElementB,n=this.bi,o=this.bj,d=n.position,i=o.position;return e.spatial.dot(d)+f.spatial.dot(i)};var i=new d;n.prototype.computeGW=function(){var e=this.jacobianElementA,f=this.jacobianElementB,n=this.bi,o=this.bj,d=n.velocity,t=o.velocity,l=n.angularVelocity||i,u=o.angularVelocity||i;return e.multiplyVectors(d,l)+f.multiplyVectors(t,u)},n.prototype.computeGWlambda=function(){var e=this.jacobianElementA,f=this.jacobianElementB,n=this.bi,o=this.bj,d=n.vlambda,t=o.vlambda,l=n.wlambda||i,u=o.wlambda||i;return e.multiplyVectors(d,l)+f.multiplyVectors(t,u)};var t=new d,l=new d,u=new d,p=new d;n.prototype.computeGiMf=function(){var e=this.jacobianElementA,f=this.jacobianElementB,n=this.bi,o=this.bj,d=n.force,i=n.torque,s=o.force,y=o.torque,c=n.invMassSolve,a=o.invMassSolve;return n.invInertiaWorldSolve?n.invInertiaWorldSolve.vmult(i,u):u.set(0,0,0),o.invInertiaWorldSolve?o.invInertiaWorldSolve.vmult(y,p):p.set(0,0,0),d.mult(c,t),s.mult(a,l),e.multiplyVectors(t,u)+f.multiplyVectors(l,p)};var s=new d;n.prototype.computeGiMGt=function(){var e=this.jacobianElementA,f=this.jacobianElementB,n=this.bi,o=this.bj,d=n.invMassSolve,i=o.invMassSolve,t=n.invInertiaWorldSolve,l=o.invInertiaWorldSolve,u=d+i;return t&&(t.vmult(e.rotational,s),u+=s.dot(e.rotational)),l&&(l.vmult(f.rotational,s),u+=s.dot(f.rotational)),u};{var y=new d;new d,new d,new d,new d,new d}n.prototype.addToWlambda=function(e){var f=this.jacobianElementA,n=this.jacobianElementB,o=this.bi,d=this.bj,i=y;f.spatial.mult(o.invMassSolve*e,i),o.vlambda.vadd(i,o.vlambda),n.spatial.mult(d.invMassSolve*e,i),d.vlambda.vadd(i,d.vlambda),o.invInertiaWorldSolve&&(o.invInertiaWorldSolve.vmult(f.rotational,i),i.mult(e,i),o.wlambda.vadd(i,o.wlambda)),d.invInertiaWorldSolve&&(d.invInertiaWorldSolve.vmult(n.rotational,i),i.mult(e,i),d.wlambda.vadd(i,d.wlambda))},n.prototype.computeC=function(){return this.computeGiMGt()+this.eps}},{\"../math/JacobianElement\":26,\"../math/Vec3\":30}],21:[function(e,f){function n(e,f,n){o.call(this,e,f,-n,n),this.ri=new d,this.rj=new d,this.t=new d}f.exports=n;{var o=e(\"./Equation\"),d=e(\"../math/Vec3\");e(\"../math/Mat3\")}n.prototype=new o,n.prototype.constructor=n;var i=new d,t=new d;n.prototype.computeB=function(e){var f=(this.a,this.b),n=(this.bi,this.bj,this.ri),o=this.rj,d=i,l=t,u=this.t;n.cross(u,d),o.cross(u,l);var p=this.jacobianElementA,s=this.jacobianElementB;u.negate(p.spatial),d.negate(p.rotational),s.spatial.copy(u),s.rotational.copy(l);var y=this.computeGW(),c=this.computeGiMf(),a=-y*f-e*c;return a}},{\"../math/Mat3\":27,\"../math/Vec3\":30,\"./Equation\":20}],22:[function(e,f){function n(e,f,n){n=n||{};var i=\"undefined\"!=typeof n.maxForce?n.maxForce:1e6;d.call(this,e,f,-i,i),this.axisA=n.axisA?n.axisA.clone():new o(1,0,0),this.axisB=n.axisB?n.axisB.clone():new o(0,1,0),this.maxAngle=Math.PI/2}f.exports=n;var o=e(\"../math/Vec3\"),d=(e(\"../math/Mat3\"),e(\"./Equation\"));n.prototype=new d,n.prototype.constructor=n;var i=new o,t=new o;n.prototype.computeB=function(e){var f=this.a,n=this.b,o=this.axisA,d=this.axisB,l=i,u=t,p=this.jacobianElementA,s=this.jacobianElementB;o.cross(d,l),d.cross(o,u),p.rotational.copy(u),s.rotational.copy(l);var y=Math.cos(this.maxAngle)-o.dot(d),c=this.computeGW(),a=this.computeGiMf(),r=-y*f-c*n-e*a;return r}},{\"../math/Mat3\":27,\"../math/Vec3\":30,\"./Equation\":20}],23:[function(e,f){function n(e,f,n){n=\"undefined\"!=typeof n?n:1e6,d.call(this,e,f,-n,n),this.axisA=new o,this.axisB=new o,this.targetVelocity=0}f.exports=n;var o=e(\"../math/Vec3\"),d=(e(\"../math/Mat3\"),e(\"./Equation\"));n.prototype=new d,n.prototype.constructor=n,n.prototype.computeB=function(e){var f=(this.a,this.b),n=(this.bi,this.bj,this.axisA),o=this.axisB,d=this.jacobianElementA,i=this.jacobianElementB;d.rotational.copy(n),o.negate(i.rotational);var t=this.computeGW()-this.targetVelocity,l=this.computeGiMf(),u=-t*f-e*l;return u}},{\"../math/Mat3\":27,\"../math/Vec3\":30,\"./Equation\":20}],24:[function(e,f){function n(e,f,d){d=o.defaults(d,{friction:.3,restitution:.3,contactEquationStiffness:1e7,contactEquationRelaxation:3,frictionEquationStiffness:1e7,frictionEquationRelaxation:3}),this.id=n.idCounter++,this.materials=[e,f],this.friction=d.friction,this.restitution=d.restitution,this.contactEquationStiffness=d.contactEquationStiffness,this.contactEquationRelaxation=d.contactEquationRelaxation,this.frictionEquationStiffness=d.frictionEquationStiffness,this.frictionEquationRelaxation=d.frictionEquationRelaxation}var o=e(\"../utils/Utils\");f.exports=n,n.idCounter=0},{\"../utils/Utils\":53}],25:[function(e,f){function n(e){var f=\"\";e=e||{},\"string\"==typeof e?(f=e,e={}):\"object\"==typeof e&&(f=\"\"),this.name=f,this.id=n.idCounter++,this.friction=\"undefined\"!=typeof e.friction?e.friction:-1,this.restitution=\"undefined\"!=typeof e.restitution?e.restitution:-1}f.exports=n,n.idCounter=0},{}],26:[function(e,f){function n(){this.spatial=new o,this.rotational=new o}f.exports=n;var o=e(\"./Vec3\");n.prototype.multiplyElement=function(e){return e.spatial.dot(this.spatial)+e.rotational.dot(this.rotational)},n.prototype.multiplyVectors=function(e,f){return e.dot(this.spatial)+f.dot(this.rotational)}},{\"./Vec3\":30}],27:[function(e,f){function n(e){this.elements=e?e:[0,0,0,0,0,0,0,0,0]}f.exports=n;var o=e(\"./Vec3\");n.prototype.identity=function(){var e=this.elements;e[0]=1,e[1]=0,e[2]=0,e[3]=0,e[4]=1,e[5]=0,e[6]=0,e[7]=0,e[8]=1},n.prototype.setZero=function(){var e=this.elements;e[0]=0,e[1]=0,e[2]=0,e[3]=0,e[4]=0,e[5]=0,e[6]=0,e[7]=0,e[8]=0},n.prototype.setTrace=function(e){var f=this.elements;f[0]=e.x,f[4]=e.y,f[8]=e.z},n.prototype.getTrace=function(e){var e=e||new o,f=this.elements;e.x=f[0],e.y=f[4],e.z=f[8]},n.prototype.vmult=function(e,f){f=f||new o;var n=this.elements,d=e.x,i=e.y,t=e.z;return f.x=n[0]*d+n[1]*i+n[2]*t,f.y=n[3]*d+n[4]*i+n[5]*t,f.z=n[6]*d+n[7]*i+n[8]*t,f},n.prototype.smult=function(e){for(var f=0;f<this.elements.length;f++)this.elements[f]*=e},n.prototype.mmult=function(e,f){for(var o=f||new n,d=0;3>d;d++)for(var i=0;3>i;i++){for(var t=0,l=0;3>l;l++)t+=e.elements[d+3*l]*this.elements[l+3*i];o.elements[d+3*i]=t}return o},n.prototype.scale=function(e,f){f=f||new n;for(var o=this.elements,d=f.elements,i=0;3!==i;i++)d[3*i+0]=e.x*o[3*i+0],d[3*i+1]=e.y*o[3*i+1],d[3*i+2]=e.z*o[3*i+2];return f},n.prototype.solve=function(e,f){f=f||new o;for(var n=3,d=4,i=[],t=0;n*d>t;t++)i.push(0);var t,l;for(t=0;3>t;t++)for(l=0;3>l;l++)i[t+d*l]=this.elements[t+3*l];i[3]=e.x,i[7]=e.y,i[11]=e.z;var u,p,s=3,y=s,c=4;do{if(t=y-s,0===i[t+d*t])for(l=t+1;y>l;l++)if(0!==i[t+d*l]){u=c;do p=c-u,i[p+d*t]+=i[p+d*l];while(--u);break}if(0!==i[t+d*t])for(l=t+1;y>l;l++){var a=i[t+d*l]/i[t+d*t];u=c;do p=c-u,i[p+d*l]=t>=p?0:i[p+d*l]-i[p+d*t]*a;while(--u)}}while(--s);if(f.z=i[2*d+3]/i[2*d+2],f.y=(i[1*d+3]-i[1*d+2]*f.z)/i[1*d+1],f.x=(i[0*d+3]-i[0*d+2]*f.z-i[0*d+1]*f.y)/i[0*d+0],isNaN(f.x)||isNaN(f.y)||isNaN(f.z)||1/0===f.x||1/0===f.y||1/0===f.z)throw\"Could not solve equation! Got x=[\"+f.toString()+\"], b=[\"+e.toString()+\"], A=[\"+this.toString()+\"]\";return f},n.prototype.e=function(e,f,n){return void 0===n?this.elements[f+3*e]:void(this.elements[f+3*e]=n)},n.prototype.copy=function(e){for(var f=0;f<e.elements.length;f++)this.elements[f]=e.elements[f];return this},n.prototype.toString=function(){for(var e=\"\",f=\",\",n=0;9>n;n++)e+=this.elements[n]+f;return e},n.prototype.reverse=function(e){e=e||new n;for(var f=3,o=6,d=[],i=0;f*o>i;i++)d.push(0);var i,t;for(i=0;3>i;i++)for(t=0;3>t;t++)d[i+o*t]=this.elements[i+3*t];d[3]=1,d[9]=0,d[15]=0,d[4]=0,d[10]=1,d[16]=0,d[5]=0,d[11]=0,d[17]=1;var l,u,p=3,s=p,y=o;do{if(i=s-p,0===d[i+o*i])for(t=i+1;s>t;t++)if(0!==d[i+o*t]){l=y;do u=y-l,d[u+o*i]+=d[u+o*t];while(--l);break}if(0!==d[i+o*i])for(t=i+1;s>t;t++){var c=d[i+o*t]/d[i+o*i];l=y;do u=y-l,d[u+o*t]=i>=u?0:d[u+o*t]-d[u+o*i]*c;while(--l)}}while(--p);i=2;do{t=i-1;do{var c=d[i+o*t]/d[i+o*i];l=o;do u=o-l,d[u+o*t]=d[u+o*t]-d[u+o*i]*c;while(--l)}while(t--)}while(--i);i=2;do{var c=1/d[i+o*i];l=o;do u=o-l,d[u+o*i]=d[u+o*i]*c;while(--l)}while(i--);i=2;do{t=2;do{if(u=d[f+t+o*i],isNaN(u)||1/0===u)throw\"Could not reverse! A=[\"+this.toString()+\"]\";e.e(i,t,u)}while(t--)}while(i--);return e},n.prototype.setRotationFromQuaternion=function(e){var f=e.x,n=e.y,o=e.z,d=e.w,i=f+f,t=n+n,l=o+o,u=f*i,p=f*t,s=f*l,y=n*t,c=n*l,a=o*l,r=d*i,w=d*t,b=d*l,m=this.elements;return m[0]=1-(y+a),m[1]=p-b,m[2]=s+w,m[3]=p+b,m[4]=1-(u+a),m[5]=c-r,m[6]=s-w,m[7]=c+r,m[8]=1-(u+y),this},n.prototype.transpose=function(e){e=e||new n;for(var f=e.elements,o=this.elements,d=0;3!==d;d++)for(var i=0;3!==i;i++)f[3*d+i]=o[3*i+d];return e}},{\"./Vec3\":30}],28:[function(e,f){function n(e,f,n,o){this.x=void 0!==e?e:0,this.y=void 0!==f?f:0,this.z=void 0!==n?n:0,this.w=void 0!==o?o:1}f.exports=n;var o=e(\"./Vec3\");n.prototype.set=function(e,f,n,o){this.x=e,this.y=f,this.z=n,this.w=o},n.prototype.toString=function(){return this.x+\",\"+this.y+\",\"+this.z+\",\"+this.w},n.prototype.toArray=function(){return[this.x,this.y,this.z,this.w]},n.prototype.setFromAxisAngle=function(e,f){var n=Math.sin(.5*f);this.x=e.x*n,this.y=e.y*n,this.z=e.z*n,this.w=Math.cos(.5*f)},n.prototype.toAxisAngle=function(e){e=e||new o,this.normalize();var f=2*Math.acos(this.w),n=Math.sqrt(1-this.w*this.w);return.001>n?(e.x=this.x,e.y=this.y,e.z=this.z):(e.x=this.x/n,e.y=this.y/n,e.z=this.z/n),[e,f]};var d=new o,i=new o;n.prototype.setFromVectors=function(e,f){if(e.isAntiparallelTo(f)){var n=d,o=i;e.tangents(n,o),this.setFromAxisAngle(n,Math.PI)}else{var t=e.cross(f);this.x=t.x,this.y=t.y,this.z=t.z,this.w=Math.sqrt(Math.pow(e.norm(),2)*Math.pow(f.norm(),2))+e.dot(f),this.normalize()}};var t=new o,l=new o,u=new o;n.prototype.mult=function(e,f){f=f||new n;var o=this.w,d=t,i=l,p=u;return d.set(this.x,this.y,this.z),i.set(e.x,e.y,e.z),f.w=o*e.w-d.dot(i),d.cross(i,p),f.x=o*i.x+e.w*d.x+p.x,f.y=o*i.y+e.w*d.y+p.y,f.z=o*i.z+e.w*d.z+p.z,f},n.prototype.inverse=function(e){var f=this.x,o=this.y,d=this.z,i=this.w;e=e||new n,this.conjugate(e);var t=1/(f*f+o*o+d*d+i*i);return e.x*=t,e.y*=t,e.z*=t,e.w*=t,e},n.prototype.conjugate=function(e){return e=e||new n,e.x=-this.x,e.y=-this.y,e.z=-this.z,e.w=this.w,e},n.prototype.normalize=function(){var e=Math.sqrt(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w);0===e?(this.x=0,this.y=0,this.z=0,this.w=0):(e=1/e,this.x*=e,this.y*=e,this.z*=e,this.w*=e)},n.prototype.normalizeFast=function(){var e=(3-(this.x*this.x+this.y*this.y+this.z*this.z+this.w*this.w))/2;0===e?(this.x=0,this.y=0,this.z=0,this.w=0):(this.x*=e,this.y*=e,this.z*=e,this.w*=e)},n.prototype.vmult=function(e,f){f=f||new o;var n=e.x,d=e.y,i=e.z,t=this.x,l=this.y,u=this.z,p=this.w,s=p*n+l*i-u*d,y=p*d+u*n-t*i,c=p*i+t*d-l*n,a=-t*n-l*d-u*i;return f.x=s*p+a*-t+y*-u-c*-l,f.y=y*p+a*-l+c*-t-s*-u,f.z=c*p+a*-u+s*-l-y*-t,f},n.prototype.copy=function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this.w=e.w,this},n.prototype.toEuler=function(e,f){f=f||\"YZX\";var n,o,d,i=this.x,t=this.y,l=this.z,u=this.w;switch(f){case\"YZX\":var p=i*t+l*u;if(p>.499&&(n=2*Math.atan2(i,u),o=Math.PI/2,d=0),-.499>p&&(n=-2*Math.atan2(i,u),o=-Math.PI/2,d=0),isNaN(n)){var s=i*i,y=t*t,c=l*l;n=Math.atan2(2*t*u-2*i*l,1-2*y-2*c),o=Math.asin(2*p),d=Math.atan2(2*i*u-2*t*l,1-2*s-2*c)}break;default:throw new Error(\"Euler order \"+f+\" not supported yet.\")}e.y=n,e.z=o,e.x=d},n.prototype.setFromEuler=function(e,f,n,o){o=o||\"XYZ\";var d=Math.cos(e/2),i=Math.cos(f/2),t=Math.cos(n/2),l=Math.sin(e/2),u=Math.sin(f/2),p=Math.sin(n/2);return\"XYZ\"===o?(this.x=l*i*t+d*u*p,this.y=d*u*t-l*i*p,this.z=d*i*p+l*u*t,this.w=d*i*t-l*u*p):\"YXZ\"===o?(this.x=l*i*t+d*u*p,this.y=d*u*t-l*i*p,this.z=d*i*p-l*u*t,this.w=d*i*t+l*u*p):\"ZXY\"===o?(this.x=l*i*t-d*u*p,this.y=d*u*t+l*i*p,this.z=d*i*p+l*u*t,this.w=d*i*t-l*u*p):\"ZYX\"===o?(this.x=l*i*t-d*u*p,this.y=d*u*t+l*i*p,this.z=d*i*p-l*u*t,this.w=d*i*t+l*u*p):\"YZX\"===o?(this.x=l*i*t+d*u*p,this.y=d*u*t+l*i*p,this.z=d*i*p-l*u*t,this.w=d*i*t-l*u*p):\"XZY\"===o&&(this.x=l*i*t-d*u*p,this.y=d*u*t-l*i*p,this.z=d*i*p+l*u*t,this.w=d*i*t+l*u*p),this},n.prototype.clone=function(){return new n(this.x,this.y,this.z,this.w)}},{\"./Vec3\":30}],29:[function(e,f){function n(e){e=e||{},this.position=new o,e.position&&this.position.copy(e.position),this.quaternion=new d,e.quaternion&&this.quaternion.copy(e.quaternion)}var o=e(\"./Vec3\"),d=e(\"./Quaternion\");f.exports=n;var i=new d;n.pointToLocalFrame=function(e,f,n,d){var d=d||new o;return n.vsub(e,d),f.conjugate(i),i.vmult(d,d),d},n.prototype.pointToLocal=function(e,f){return n.pointToLocalFrame(this.position,this.quaternion,e,f)},n.pointToWorldFrame=function(e,f,n,d){var d=d||new o;return f.vmult(n,d),d.vadd(e,d),d},n.prototype.pointToWorld=function(e,f){return n.pointToWorldFrame(this.position,this.quaternion,e,f)},n.prototype.vectorToWorldFrame=function(e,f){var f=f||new o;return this.quaternion.vmult(e,f),f},n.vectorToWorldFrame=function(e,f,n){return e.vmult(f,n),n},n.vectorToLocalFrame=function(e,f,n,d){var d=d||new o;return f.w*=-1,f.vmult(n,d),f.w*=-1,d}},{\"./Quaternion\":28,\"./Vec3\":30}],30:[function(e,f){function n(e,f,n){this.x=e||0,this.y=f||0,this.z=n||0}f.exports=n;var o=e(\"./Mat3\");n.ZERO=new n(0,0,0),n.UNIT_X=new n(1,0,0),n.UNIT_Y=new n(0,1,0),n.UNIT_Z=new n(0,0,1),n.prototype.cross=function(e,f){var o=e.x,d=e.y,i=e.z,t=this.x,l=this.y,u=this.z;return f=f||new n,f.x=l*i-u*d,f.y=u*o-t*i,f.z=t*d-l*o,f},n.prototype.set=function(e,f,n){return this.x=e,this.y=f,this.z=n,this},n.prototype.setZero=function(){this.x=this.y=this.z=0},n.prototype.vadd=function(e,f){return f?(f.x=e.x+this.x,f.y=e.y+this.y,f.z=e.z+this.z,void 0):new n(this.x+e.x,this.y+e.y,this.z+e.z)},n.prototype.vsub=function(e,f){return f?(f.x=this.x-e.x,f.y=this.y-e.y,f.z=this.z-e.z,void 0):new n(this.x-e.x,this.y-e.y,this.z-e.z)},n.prototype.crossmat=function(){return new o([0,-this.z,this.y,this.z,0,-this.x,-this.y,this.x,0])},n.prototype.normalize=function(){var e=this.x,f=this.y,n=this.z,o=Math.sqrt(e*e+f*f+n*n);if(o>0){var d=1/o;this.x*=d,this.y*=d,this.z*=d}else this.x=0,this.y=0,this.z=0;return o},n.prototype.unit=function(e){e=e||new n;var f=this.x,o=this.y,d=this.z,i=Math.sqrt(f*f+o*o+d*d);return i>0?(i=1/i,e.x=f*i,e.y=o*i,e.z=d*i):(e.x=1,e.y=0,e.z=0),e},n.prototype.norm=function(){var e=this.x,f=this.y,n=this.z;return Math.sqrt(e*e+f*f+n*n)},n.prototype.length=n.prototype.norm,n.prototype.norm2=function(){return this.dot(this)},n.prototype.lengthSquared=n.prototype.norm2,n.prototype.distanceTo=function(e){var f=this.x,n=this.y,o=this.z,d=e.x,i=e.y,t=e.z;return Math.sqrt((d-f)*(d-f)+(i-n)*(i-n)+(t-o)*(t-o))},n.prototype.distanceSquared=function(e){var f=this.x,n=this.y,o=this.z,d=e.x,i=e.y,t=e.z;return(d-f)*(d-f)+(i-n)*(i-n)+(t-o)*(t-o)},n.prototype.mult=function(e,f){f=f||new n;var o=this.x,d=this.y,i=this.z;return f.x=e*o,f.y=e*d,f.z=e*i,f},n.prototype.scale=n.prototype.mult,n.prototype.dot=function(e){return this.x*e.x+this.y*e.y+this.z*e.z},n.prototype.isZero=function(){return 0===this.x&&0===this.y&&0===this.z},n.prototype.negate=function(e){return e=e||new n,e.x=-this.x,e.y=-this.y,e.z=-this.z,e};var d=new n,i=new n;n.prototype.tangents=function(e,f){var n=this.norm();if(n>0){var o=d,t=1/n;o.set(this.x*t,this.y*t,this.z*t);var l=i;Math.abs(o.x)<.9?(l.set(1,0,0),o.cross(l,e)):(l.set(0,1,0),o.cross(l,e)),o.cross(e,f)}else e.set(1,0,0),f.set(0,1,0)},n.prototype.toString=function(){return this.x+\",\"+this.y+\",\"+this.z},n.prototype.toArray=function(){return[this.x,this.y,this.z]},n.prototype.copy=function(e){return this.x=e.x,this.y=e.y,this.z=e.z,this},n.prototype.lerp=function(e,f,n){var o=this.x,d=this.y,i=this.z;n.x=o+(e.x-o)*f,n.y=d+(e.y-d)*f,n.z=i+(e.z-i)*f},n.prototype.almostEquals=function(e,f){return void 0===f&&(f=1e-6),Math.abs(this.x-e.x)>f||Math.abs(this.y-e.y)>f||Math.abs(this.z-e.z)>f?!1:!0},n.prototype.almostZero=function(e){return void 0===e&&(e=1e-6),Math.abs(this.x)>e||Math.abs(this.y)>e||Math.abs(this.z)>e?!1:!0};var t=new n;n.prototype.isAntiparallelTo=function(e,f){return this.negate(t),t.almostEquals(e,f)},n.prototype.clone=function(){return new n(this.x,this.y,this.z)}},{\"./Mat3\":27}],31:[function(e,f){function n(e){e=e||{},o.apply(this),this.id=n.idCounter++,this.world=null,this.preStep=null,this.postStep=null,this.vlambda=new d,this.collisionFilterGroup=\"number\"==typeof e.collisionFilterGroup?e.collisionFilterGroup:1,this.collisionFilterMask=\"number\"==typeof e.collisionFilterMask?e.collisionFilterMask:1,this.collisionResponse=!0,this.position=new d,e.position&&this.position.copy(e.position),this.previousPosition=new d,this.initPosition=new d,this.velocity=new d,e.velocity&&this.velocity.copy(e.velocity),this.initVelocity=new d,this.force=new d;var f=\"number\"==typeof e.mass?e.mass:0;this.mass=f,this.invMass=f>0?1/f:0,this.material=e.material||null,this.linearDamping=\"number\"==typeof e.linearDamping?e.linearDamping:.01,this.type=0>=f?n.STATIC:n.DYNAMIC,typeof e.type==typeof n.STATIC&&(this.type=e.type),this.allowSleep=\"undefined\"!=typeof e.allowSleep?e.allowSleep:!0,this.sleepState=0,this.sleepSpeedLimit=\"undefined\"!=typeof e.sleepSpeedLimit?e.sleepSpeedLimit:.1,this.sleepTimeLimit=\"undefined\"!=typeof e.sleepTimeLimit?e.sleepTimeLimit:1,this.timeLastSleepy=0,this._wakeUpAfterNarrowphase=!1,this.torque=new d,this.quaternion=new t,e.quaternion&&this.quaternion.copy(e.quaternion),this.initQuaternion=new t,this.angularVelocity=new d,e.angularVelocity&&this.angularVelocity.copy(e.angularVelocity),this.initAngularVelocity=new d,this.interpolatedPosition=new d,this.interpolatedQuaternion=new t,this.shapes=[],this.shapeOffsets=[],this.shapeOrientations=[],this.inertia=new d,this.invInertia=new d,this.invInertiaWorld=new i,this.invMassSolve=0,this.invInertiaSolve=new d,this.invInertiaWorldSolve=new i,this.fixedRotation=\"undefined\"!=typeof e.fixedRotation?e.fixedRotation:!1,this.angularDamping=\"undefined\"!=typeof e.angularDamping?e.angularDamping:.01,this.aabb=new l,this.aabbNeedsUpdate=!0,this.wlambda=new d,e.shape&&this.addShape(e.shape),this.updateMassProperties()}f.exports=n;var o=e(\"../utils/EventTarget\"),d=(e(\"../shapes/Shape\"),e(\"../math/Vec3\")),i=e(\"../math/Mat3\"),t=e(\"../math/Quaternion\"),l=(e(\"../material/Material\"),e(\"../collision/AABB\")),u=e(\"../shapes/Box\");n.prototype=new o,n.prototype.constructor=n,n.DYNAMIC=1,n.STATIC=2,n.KINEMATIC=4,n.AWAKE=0,n.SLEEPY=1,n.SLEEPING=2,n.idCounter=0,n.prototype.wakeUp=function(){var e=this.sleepState;this.sleepState=0,e===n.SLEEPING&&this.dispatchEvent({type:\"wakeup\"})},n.prototype.sleep=function(){this.sleepState=n.SLEEPING,this.velocity.set(0,0,0),this.angularVelocity.set(0,0,0)},n.sleepyEvent={type:\"sleepy\"},n.sleepEvent={type:\"sleep\"},n.prototype.sleepTick=function(e){if(this.allowSleep){var f=this.sleepState,o=this.velocity.norm2()+this.angularVelocity.norm2(),d=Math.pow(this.sleepSpeedLimit,2);f===n.AWAKE&&d>o?(this.sleepState=n.SLEEPY,this.timeLastSleepy=e,this.dispatchEvent(n.sleepyEvent)):f===n.SLEEPY&&o>d?this.wakeUp():f===n.SLEEPY&&e-this.timeLastSleepy>this.sleepTimeLimit&&(this.sleep(),this.dispatchEvent(n.sleepEvent))}},n.prototype.updateSolveMassProperties=function(){this.sleepState===n.SLEEPING||this.type===n.KINEMATIC?(this.invMassSolve=0,this.invInertiaSolve.setZero(),this.invInertiaWorldSolve.setZero()):(this.invMassSolve=this.invMass,this.invInertiaSolve.copy(this.invInertia),this.invInertiaWorldSolve.copy(this.invInertiaWorld))},n.prototype.pointToLocalFrame=function(e,f){var f=f||new d;return e.vsub(this.position,f),this.quaternion.conjugate().vmult(f,f),f},n.prototype.vectorToLocalFrame=function(e,f){var f=f||new d;return this.quaternion.conjugate().vmult(e,f),f},n.prototype.pointToWorldFrame=function(e,f){var f=f||new d;return this.quaternion.vmult(e,f),f.vadd(this.position,f),f},n.prototype.vectorToWorldFrame=function(e,f){var f=f||new d;return this.quaternion.vmult(e,f),f};var p=new d,s=new t;n.prototype.addShape=function(e,f,n){var o=new d,i=new t;return f&&o.copy(f),n&&i.copy(n),this.shapes.push(e),this.shapeOffsets.push(o),this.shapeOrientations.push(i),this.updateMassProperties(),this.updateBoundingRadius(),this.aabbNeedsUpdate=!0,this},n.prototype.updateBoundingRadius=function(){for(var e=this.shapes,f=this.shapeOffsets,n=e.length,o=0,d=0;d!==n;d++){var i=e[d];i.updateBoundingSphereRadius();var t=f[d].norm(),l=i.boundingSphereRadius;t+l>o&&(o=t+l)}this.boundingRadius=o};var y=new l;n.prototype.computeAABB=function(){for(var e=this.shapes,f=this.shapeOffsets,n=this.shapeOrientations,o=e.length,d=p,i=s,t=this.quaternion,l=this.aabb,u=y,c=0;c!==o;c++){var a=e[c];n[c].mult(t,i),i.vmult(f[c],d),d.vadd(this.position,d),a.calculateWorldAABB(d,i,u.lowerBound,u.upperBound),0===c?l.copy(u):l.extend(u)}this.aabbNeedsUpdate=!1};{var c=new i,a=new i;new i}n.prototype.updateInertiaWorld=function(e){var f=this.invInertia;if(f.x!==f.y||f.y!==f.z||e){var n=c,o=a;n.setRotationFromQuaternion(this.quaternion),n.transpose(o),n.scale(f,n),n.mmult(o,this.invInertiaWorld)}else;};var r=new d,w=new d;n.prototype.applyForce=function(e,f){if(this.type===n.DYNAMIC){var o=r;f.vsub(this.position,o);var d=w;o.cross(e,d),this.force.vadd(e,this.force),this.torque.vadd(d,this.torque)}};var b=new d,m=new d;n.prototype.applyLocalForce=function(e,f){if(this.type===n.DYNAMIC){var o=b,d=m;this.vectorToWorldFrame(e,o),this.pointToWorldFrame(f,d),this.applyForce(o,d)}};var N=new d,g=new d,x=new d;n.prototype.applyImpulse=function(e,f){if(this.type===n.DYNAMIC){var o=N;f.vsub(this.position,o);var d=g;d.copy(e),d.mult(this.invMass,d),this.velocity.vadd(d,this.velocity);var i=x;o.cross(e,i),this.invInertiaWorld.vmult(i,i),this.angularVelocity.vadd(i,this.angularVelocity)}};var j=new d,v=new d;n.prototype.applyLocalImpulse=function(e,f){if(this.type===n.DYNAMIC){var o=j,d=v;this.vectorToWorldFrame(e,o),this.pointToWorldFrame(f,d),this.applyImpulse(o,d)}};var A=new d;n.prototype.updateMassProperties=function(){var e=A;this.invMass=this.mass>0?1/this.mass:0;var f=this.inertia,n=this.fixedRotation;this.computeAABB(),e.set((this.aabb.upperBound.x-this.aabb.lowerBound.x)/2,(this.aabb.upperBound.y-this.aabb.lowerBound.y)/2,(this.aabb.upperBound.z-this.aabb.lowerBound.z)/2),u.calculateInertia(e,this.mass,f),this.invInertia.set(f.x>0&&!n?1/f.x:0,f.y>0&&!n?1/f.y:0,f.z>0&&!n?1/f.z:0),this.updateInertiaWorld(!0)},n.prototype.getVelocityAtWorldPoint=function(e,f){var n=new d;return e.vsub(this.position,n),this.angularVelocity.cross(n,f),this.velocity.vadd(f,f),f}},{\"../collision/AABB\":3,\"../material/Material\":25,\"../math/Mat3\":27,\"../math/Quaternion\":28,\"../math/Vec3\":30,\"../shapes/Box\":37,\"../shapes/Shape\":43,\"../utils/EventTarget\":49}],32:[function(e,f){function n(e){this.chassisBody=e.chassisBody,this.wheelInfos=[],this.sliding=!1,this.world=null,this.indexRightAxis=\"undefined\"!=typeof e.indexRightAxis?e.indexRightAxis:1,this.indexForwardAxis=\"undefined\"!=typeof e.indexForwardAxis?e.indexForwardAxis:0,this.indexUpAxis=\"undefined\"!=typeof e.indexUpAxis?e.indexUpAxis:2}function o(e,f,n,o,i){var t=0,l=n,u=x,p=j,s=v;e.getVelocityAtWorldPoint(l,u),f.getVelocityAtWorldPoint(l,p),u.vsub(p,s);var y=o.dot(s),c=d(e,n,o),a=d(f,n,o),r=1,w=r/(c+a);return t=-y*w,t>i&&(t=i),-i>t&&(t=-i),t}function d(e,f,n){var o=A,d=C,i=O,t=h;return f.vsub(e.position,o),o.cross(n,d),e.invInertiaWorld.vmult(d,t),t.cross(o,i),e.invMass+n.dot(i)}function i(e,f,n,o,d,i){var t=d.norm2();if(t>1.1)return 0;var l=k,u=q,p=z;e.getVelocityAtWorldPoint(f,l),n.getVelocityAtWorldPoint(o,u),l.vsub(u,p);var s=d.dot(p),y=.2,c=1/(e.invMass+n.invMass),i=-y*s*c;return i}var t=(e(\"./Body\"),e(\"../math/Vec3\")),l=e(\"../math/Quaternion\"),u=(e(\"../collision/RaycastResult\"),e(\"../collision/Ray\")),p=e(\"../objects/WheelInfo\");f.exports=n;{var s=(new t,new t,new t,new t),y=new t,c=new t;new u}n.prototype.addWheel=function(e){e=e||{};var f=new p(e),n=this.wheelInfos.length;return this.wheelInfos.push(f),n},n.prototype.setSteeringValue=function(e,f){var n=this.wheelInfos[f];n.steering=e};new t;n.prototype.applyEngineForce=function(e,f){this.wheelInfos[f].engineForce=e},n.prototype.setBrake=function(e,f){this.wheelInfos[f].brake=e},n.prototype.addToWorld=function(e){this.constraints;e.add(this.chassisBody);var f=this;this.preStepCallback=function(){f.updateVehicle(e.dt)},e.addEventListener(\"preStep\",this.preStepCallback),this.world=e},n.prototype.getVehicleAxisWorld=function(e,f){f.set(0===e?1:0,1===e?1:0,2===e?1:0),this.chassisBody.vectorToWorldFrame(f,f)},n.prototype.updateVehicle=function(e){for(var f=this.wheelInfos,n=f.length,o=this.chassisBody,d=0;n>d;d++)this.updateWheelTransform(d);this.currentVehicleSpeedKmHour=3.6*o.velocity.norm();var i=new t;this.getVehicleAxisWorld(this.indexForwardAxis,i),i.dot(o.velocity)<0&&(this.currentVehicleSpeedKmHour*=-1);for(var d=0;n>d;d++)this.castRay(f[d]);this.updateSuspension(e);for(var l=new t,u=new t,d=0;n>d;d++){var p=f[d],s=p.suspensionForce;s>p.maxSuspensionForce&&(s=p.maxSuspensionForce),p.raycastResult.hitNormalWorld.scale(s*e,l),p.raycastResult.hitPointWorld.vsub(o.position,u),o.applyImpulse(l,p.raycastResult.hitPointWorld)}this.updateFriction(e);var y=new t,c=new t,a=new t;for(d=0;n>d;d++){var p=f[d];o.getVelocityAtWorldPoint(p.chassisConnectionPointWorld,a);var r=1;switch(this.indexUpAxis){case 1:r=-1}if(p.isInContact){this.getVehicleAxisWorld(this.indexForwardAxis,c);var w=c.dot(p.raycastResult.hitNormalWorld);p.raycastResult.hitNormalWorld.scale(w,y),c.vsub(y,c);var b=c.dot(a);p.deltaRotation=r*b*e/p.radius}!p.sliding&&p.isInContact||0===p.engineForce||!p.useCustomSlidingRotationalSpeed||(p.deltaRotation=(p.engineForce>0?1:-1)*p.customSlidingRotationalSpeed*e),Math.abs(p.brake)>Math.abs(p.engineForce)&&(p.deltaRotation=0),p.rotation+=p.deltaRotation,p.deltaRotation*=.99}},n.prototype.updateSuspension=function(){for(var e=this.chassisBody,f=e.mass,n=this.wheelInfos,o=n.length,d=0;o>d;d++){var i=n[d];if(i.isInContact){var t,l=i.suspensionRestLength,u=i.suspensionLength,p=l-u;t=i.suspensionStiffness*p*i.clippedInvContactDotSuspension;var s,y=i.suspensionRelativeVelocity;s=0>y?i.dampingCompression:i.dampingRelaxation,t-=s*y,i.suspensionForce=t*f,i.suspensionForce<0&&(i.suspensionForce=0)}else i.suspensionForce=0}},n.prototype.removeFromWorld=function(e){this.constraints;e.remove(this.chassisBody),e.removeEventListener(\"preStep\",this.preStepCallback),this.world=null};var a=new t,r=new t;n.prototype.castRay=function(e){var f=a,n=r;this.updateWheelTransformWorld(e);var o=this.chassisBody,d=-1,i=e.suspensionRestLength+e.radius;e.directionWorld.scale(i,f);var l=e.chassisConnectionPointWorld;l.vadd(f,n);var u=e.raycastResult;u.reset();var p=o.collisionResponse;o.collisionResponse=!1,this.world.rayTest(l,n,u),o.collisionResponse=p;var s=u.body;if(e.raycastResult.groundObject=0,s){d=u.distance,e.raycastResult.hitNormalWorld=u.hitNormalWorld,e.isInContact=!0;var y=u.distance;e.suspensionLength=y-e.radius;var c=e.suspensionRestLength-e.maxSuspensionTravel,w=e.suspensionRestLength+e.maxSuspensionTravel;e.suspensionLength<c&&(e.suspensionLength=c),e.suspensionLength>w&&(e.suspensionLength=w,e.raycastResult.reset());var b=e.raycastResult.hitNormalWorld.dot(e.directionWorld),m=new t;o.getVelocityAtWorldPoint(e.raycastResult.hitPointWorld,m);var N=e.raycastResult.hitNormalWorld.dot(m);if(b>=-.1)e.suspensionRelativeVelocity=0,e.clippedInvContactDotSuspension=10;else{var g=-1/b;e.suspensionRelativeVelocity=N*g,e.clippedInvContactDotSuspension=g}}else e.suspensionLength=e.suspensionRestLength+0*e.maxSuspensionTravel,e.suspensionRelativeVelocity=0,e.directionWorld.scale(-1,e.raycastResult.hitNormalWorld),e.clippedInvContactDotSuspension=1;return d},n.prototype.updateWheelTransformWorld=function(e){e.isInContact=!1;var f=this.chassisBody;f.pointToWorldFrame(e.chassisConnectionPointLocal,e.chassisConnectionPointWorld),f.vectorToWorldFrame(e.directionLocal,e.directionWorld),f.vectorToWorldFrame(e.axleLocal,e.axleWorld)},n.prototype.updateWheelTransform=function(e){var f=s,n=y,o=c,d=this.wheelInfos[e];this.updateWheelTransformWorld(d),d.directionLocal.scale(-1,f),n.copy(d.axleLocal),f.cross(n,o),o.normalize(),n.normalize();var i=d.steering,t=new l;t.setFromAxisAngle(f,i);var u=new l;u.setFromAxisAngle(n,d.rotation);var p=d.worldTransform.quaternion;this.chassisBody.quaternion.mult(t,p),p.mult(u,p),p.normalize();var a=d.worldTransform.position;a.copy(d.directionWorld),a.scale(d.suspensionLength,a),a.vadd(d.chassisConnectionPointWorld,a)};var w=[new t(1,0,0),new t(0,1,0),new t(0,0,1)];n.prototype.getWheelTransformWorld=function(e){return this.wheelInfos[e].worldTransform};var b=new t,m=[],N=[],g=1;n.prototype.updateFriction=function(e){for(var f=b,n=this.wheelInfos,d=n.length,l=this.chassisBody,u=N,p=m,s=0,y=0;d>y;y++){var c=n[y],a=c.raycastResult.body;a&&s++,c.sideImpulse=0,c.forwardImpulse=0,u[y]||(u[y]=new t),p[y]||(p[y]=new t)}for(var y=0;d>y;y++){var c=n[y],a=c.raycastResult.body;if(a){var r=p[y],x=this.getWheelTransformWorld(y);x.vectorToWorldFrame(w[this.indexRightAxis],r);var j=c.raycastResult.hitNormalWorld,v=r.dot(j);j.scale(v,f),r.vsub(f,r),r.normalize(),j.cross(r,u[y]),u[y].normalize(),c.sideImpulse=i(l,c.raycastResult.hitPointWorld,a,c.raycastResult.hitPointWorld,r),c.sideImpulse*=g}}var A=1,C=.5;this.sliding=!1;for(var y=0;d>y;y++){var c=n[y],a=c.raycastResult.body,O=0;if(c.slipInfo=1,a){var h=0,k=c.brake?c.brake:h;O=o(l,a,c.raycastResult.hitPointWorld,u[y],k),O+=c.engineForce*e;var q=k/O;c.slipInfo*=q}if(c.forwardImpulse=0,c.skidInfo=1,a){c.skidInfo=1;var z=c.suspensionForce*e*c.frictionSlip,B=z,D=z*B;c.forwardImpulse=O;var E=c.forwardImpulse*C,F=c.sideImpulse*A,G=E*E+F*F;if(c.sliding=!1,G>D){this.sliding=!0,c.sliding=!0;var q=z/Math.sqrt(G);c.skidInfo*=q}}}if(this.sliding)for(var y=0;d>y;y++){var c=n[y];0!==c.sideImpulse&&c.skidInfo<1&&(c.forwardImpulse*=c.skidInfo,c.sideImpulse*=c.skidInfo)}for(var y=0;d>y;y++){var c=n[y],H=new t;if(H.copy(c.raycastResult.hitPointWorld),0!==c.forwardImpulse){var I=new t;u[y].scale(c.forwardImpulse,I),l.applyImpulse(I,H)}if(0!==c.sideImpulse){var a=c.raycastResult.body,J=new t;J.copy(c.raycastResult.hitPointWorld);var K=new t;p[y].scale(c.sideImpulse,K),l.pointToLocalFrame(H,H),H[\"xyz\"[this.indexUpAxis]]*=c.rollInfluence,l.pointToWorldFrame(H,H),l.applyImpulse(K,H),K.scale(-1,K),a.applyImpulse(K,J)}}};var x=new t,j=new t,v=new t,A=new t,C=new t,O=new t,h=new t,k=new t,q=new t,z=new t},{\"../collision/Ray\":9,\"../collision/RaycastResult\":10,\"../math/Quaternion\":28,\"../math/Vec3\":30,\"../objects/WheelInfo\":36,\"./Body\":31}],33:[function(e,f){function n(e){if(this.wheelBodies=[],this.coordinateSystem=\"undefined\"==typeof e.coordinateSystem?new t(1,2,3):e.coordinateSystem.clone(),this.chassisBody=e.chassisBody,!this.chassisBody){var f=new i(new t(5,2,.5));this.chassisBody=new o(1,f)}this.constraints=[],this.wheelAxes=[],this.wheelForces=[]}var o=e(\"./Body\"),d=e(\"../shapes/Sphere\"),i=e(\"../shapes/Box\"),t=e(\"../math/Vec3\"),l=e(\"../constraints/HingeConstraint\");f.exports=n,n.prototype.addWheel=function(e){e=e||{};var f=e.body;f||(f=new o(1,new d(1.2))),this.wheelBodies.push(f),this.wheelForces.push(0);var n=(new t,\"undefined\"!=typeof e.position?e.position.clone():new t),i=new t;this.chassisBody.pointToWorldFrame(n,i),f.position.set(i.x,i.y,i.z);var u=\"undefined\"!=typeof e.axis?e.axis.clone():new t(0,1,0);this.wheelAxes.push(u);var p=new l(this.chassisBody,f,{pivotA:n,axisA:u,pivotB:t.ZERO,axisB:u,collideConnected:!1});return this.constraints.push(p),this.wheelBodies.length-1},n.prototype.setSteeringValue=function(e,f){var n=this.wheelAxes[f],o=Math.cos(e),d=Math.sin(e),i=n.x,t=n.y;this.constraints[f].axisA.set(o*i-d*t,d*i+o*t,0)},n.prototype.setMotorSpeed=function(e,f){var n=this.constraints[f];n.enableMotor(),n.motorTargetVelocity=e},n.prototype.disableMotor=function(e){var f=this.constraints[e];\nf.disableMotor()};var u=new t;n.prototype.setWheelForce=function(e,f){this.wheelForces[f]=e},n.prototype.applyWheelForce=function(e,f){var n=this.wheelAxes[f],o=this.wheelBodies[f],d=o.torque;n.scale(e,u),o.vectorToWorldFrame(u,u),d.vadd(u,d)},n.prototype.addToWorld=function(e){for(var f=this.constraints,n=this.wheelBodies.concat([this.chassisBody]),o=0;o<n.length;o++)e.add(n[o]);for(var o=0;o<f.length;o++)e.addConstraint(f[o]);e.addEventListener(\"preStep\",this._update.bind(this))},n.prototype._update=function(){for(var e=this.wheelForces,f=0;f<e.length;f++)this.applyWheelForce(e[f],f)},n.prototype.removeFromWorld=function(e){for(var f=this.constraints,n=this.wheelBodies.concat([this.chassisBody]),o=0;o<n.length;o++)e.remove(n[o]);for(var o=0;o<f.length;o++)e.removeConstraint(f[o])};var p=new t;n.prototype.getWheelSpeed=function(e){var f=this.wheelAxes[e],n=this.wheelBodies[e],o=n.angularVelocity;return this.chassisBody.vectorToWorldFrame(f,p),o.dot(p)}},{\"../constraints/HingeConstraint\":15,\"../math/Vec3\":30,\"../shapes/Box\":37,\"../shapes/Sphere\":44,\"./Body\":31}],34:[function(e,f){function n(){this.particles=[],this.density=1,this.smoothingRadius=1,this.speedOfSound=1,this.viscosity=.01,this.eps=1e-6,this.pressures=[],this.densities=[],this.neighbors=[]}f.exports=n;{var o=(e(\"../shapes/Shape\"),e(\"../math/Vec3\"));e(\"../math/Quaternion\"),e(\"../shapes/Particle\"),e(\"../objects/Body\"),e(\"../material/Material\")}n.prototype.add=function(e){this.particles.push(e),this.neighbors.length<this.particles.length&&this.neighbors.push([])},n.prototype.remove=function(e){var f=this.particles.indexOf(e);-1!==f&&(this.particles.splice(f,1),this.neighbors.length>this.particles.length&&this.neighbors.pop())};var d=new o;n.prototype.getNeighbors=function(e,f){for(var n=this.particles.length,o=e.id,i=this.smoothingRadius*this.smoothingRadius,t=d,l=0;l!==n;l++){var u=this.particles[l];u.position.vsub(e.position,t),o!==u.id&&t.norm2()<i&&f.push(u)}};var i=new o,t=new o,l=new o,u=new o,p=new o,s=new o;n.prototype.update=function(){for(var e=this.particles.length,f=i,n=this.speedOfSound,o=this.eps,d=0;d!==e;d++){var y=this.particles[d],c=this.neighbors[d];c.length=0,this.getNeighbors(y,c),c.push(this.particles[d]);for(var a=c.length,r=0,w=0;w!==a;w++){y.position.vsub(c[w].position,f);var b=f.norm(),m=this.w(b);r+=c[w].mass*m}this.densities[d]=r,this.pressures[d]=n*n*(this.densities[d]-this.density)}for(var N=t,g=l,x=u,j=p,v=s,d=0;d!==e;d++){var A=this.particles[d];N.set(0,0,0),g.set(0,0,0);for(var C,O,c=this.neighbors[d],a=c.length,w=0;w!==a;w++){var h=c[w];A.position.vsub(h.position,j);var k=j.norm();C=-h.mass*(this.pressures[d]/(this.densities[d]*this.densities[d]+o)+this.pressures[w]/(this.densities[w]*this.densities[w]+o)),this.gradw(j,x),x.mult(C,x),N.vadd(x,N),h.velocity.vsub(A.velocity,v),v.mult(1/(1e-4+this.densities[d]*this.densities[w])*this.viscosity*h.mass,v),O=this.nablaw(k),v.mult(O,v),g.vadd(v,g)}g.mult(A.mass,g),N.mult(A.mass,N),A.force.vadd(g,A.force),A.force.vadd(N,A.force)}},n.prototype.w=function(e){var f=this.smoothingRadius;return 315/(64*Math.PI*Math.pow(f,9))*Math.pow(f*f-e*e,3)},n.prototype.gradw=function(e,f){var n=e.norm(),o=this.smoothingRadius;e.mult(945/(32*Math.PI*Math.pow(o,9))*Math.pow(o*o-n*n,2),f)},n.prototype.nablaw=function(e){var f=this.smoothingRadius,n=945/(32*Math.PI*Math.pow(f,9))*(f*f-e*e)*(7*e*e-3*f*f);return n}},{\"../material/Material\":25,\"../math/Quaternion\":28,\"../math/Vec3\":30,\"../objects/Body\":31,\"../shapes/Particle\":41,\"../shapes/Shape\":43}],35:[function(e,f){function n(e,f,n){n=n||{},this.restLength=\"number\"==typeof n.restLength?n.restLength:1,this.stiffness=n.stiffness||100,this.damping=n.damping||1,this.bodyA=e,this.bodyB=f,this.localAnchorA=new o,this.localAnchorB=new o,n.localAnchorA&&this.localAnchorA.copy(n.localAnchorA),n.localAnchorB&&this.localAnchorB.copy(n.localAnchorB),n.worldAnchorA&&this.setWorldAnchorA(n.worldAnchorA),n.worldAnchorB&&this.setWorldAnchorB(n.worldAnchorB)}var o=e(\"../math/Vec3\");f.exports=n,n.prototype.setWorldAnchorA=function(e){this.bodyA.pointToLocalFrame(e,this.localAnchorA)},n.prototype.setWorldAnchorB=function(e){this.bodyB.pointToLocalFrame(e,this.localAnchorB)},n.prototype.getWorldAnchorA=function(e){this.bodyA.pointToWorldFrame(this.localAnchorA,e)},n.prototype.getWorldAnchorB=function(e){this.bodyB.pointToWorldFrame(this.localAnchorB,e)};var d=new o,i=new o,t=new o,l=new o,u=new o,p=new o,s=new o,y=new o,c=new o,a=new o,r=new o;n.prototype.applyForce=function(){var e=this.stiffness,f=this.damping,n=this.restLength,o=this.bodyA,w=this.bodyB,b=d,m=i,N=t,g=l,x=r,j=u,v=p,A=s,C=y,O=c,h=a;this.getWorldAnchorA(j),this.getWorldAnchorB(v),j.vsub(o.position,A),v.vsub(w.position,C),v.vsub(j,b);var k=b.norm();m.copy(b),m.normalize(),w.velocity.vsub(o.velocity,N),w.angularVelocity.cross(C,x),N.vadd(x,N),o.angularVelocity.cross(A,x),N.vsub(x,N),m.mult(-e*(k-n)-f*N.dot(m),g),o.force.vsub(g,o.force),w.force.vadd(g,w.force),A.cross(g,O),C.cross(g,h),o.torque.vsub(O,o.torque),w.torque.vadd(h,w.torque)}},{\"../math/Vec3\":30}],36:[function(e,f){function n(e){e=t.defaults(e,{chassisConnectionPointLocal:new o,chassisConnectionPointWorld:new o,directionLocal:new o,directionWorld:new o,axleLocal:new o,axleWorld:new o,suspensionRestLength:1,suspensionMaxLength:2,radius:1,suspensionStiffness:100,dampingCompression:10,dampingRelaxation:10,frictionSlip:1e4,steering:0,rotation:0,deltaRotation:0,rollInfluence:.01,maxSuspensionForce:Number.MAX_VALUE,isFrontWheel:!0,clippedInvContactDotSuspension:1,suspensionRelativeVelocity:0,suspensionForce:0,skidInfo:0,suspensionLength:0,maxSuspensionTravel:1,useCustomSlidingRotationalSpeed:!1,customSlidingRotationalSpeed:-.1}),this.maxSuspensionTravel=e.maxSuspensionTravel,this.customSlidingRotationalSpeed=e.customSlidingRotationalSpeed,this.useCustomSlidingRotationalSpeed=e.useCustomSlidingRotationalSpeed,this.sliding=!1,this.chassisConnectionPointLocal=e.chassisConnectionPointLocal.clone(),this.chassisConnectionPointWorld=e.chassisConnectionPointWorld.clone(),this.directionLocal=e.directionLocal.clone(),this.directionWorld=e.directionWorld.clone(),this.axleLocal=e.axleLocal.clone(),this.axleWorld=e.axleWorld.clone(),this.suspensionRestLength=e.suspensionRestLength,this.suspensionMaxLength=e.suspensionMaxLength,this.radius=e.radius,this.suspensionStiffness=e.suspensionStiffness,this.dampingCompression=e.dampingCompression,this.dampingRelaxation=e.dampingRelaxation,this.frictionSlip=e.frictionSlip,this.steering=0,this.rotation=0,this.deltaRotation=0,this.rollInfluence=e.rollInfluence,this.maxSuspensionForce=e.maxSuspensionForce,this.engineForce=0,this.brake=0,this.isFrontWheel=e.isFrontWheel,this.clippedInvContactDotSuspension=1,this.suspensionRelativeVelocity=0,this.suspensionForce=0,this.skidInfo=0,this.suspensionLength=0,this.sideImpulse=0,this.forwardImpulse=0,this.raycastResult=new i,this.worldTransform=new d,this.isInContact=!1}var o=e(\"../math/Vec3\"),d=e(\"../math/Transform\"),i=e(\"../collision/RaycastResult\"),t=e(\"../utils/Utils\");f.exports=n;var l=new o,u=new o,l=new o;n.prototype.updateWheel=function(e){var f=this.raycastResult;if(this.isInContact){var n=f.hitNormalWorld.dot(f.directionWorld);f.hitPointWorld.vsub(e.position,u),e.getVelocityAtWorldPoint(u,l);var o=f.hitNormalWorld.dot(l);if(n>=-.1)this.suspensionRelativeVelocity=0,this.clippedInvContactDotSuspension=10;else{var d=-1/n;this.suspensionRelativeVelocity=o*d,this.clippedInvContactDotSuspension=d}}else f.suspensionLength=this.suspensionRestLength,this.suspensionRelativeVelocity=0,f.directionWorld.scale(-1,f.hitNormalWorld),this.clippedInvContactDotSuspension=1}},{\"../collision/RaycastResult\":10,\"../math/Transform\":29,\"../math/Vec3\":30,\"../utils/Utils\":53}],37:[function(e,f){function n(e){o.call(this),this.type=o.types.BOX,this.halfExtents=e,this.convexPolyhedronRepresentation=null,this.updateConvexPolyhedronRepresentation(),this.updateBoundingSphereRadius()}f.exports=n;var o=e(\"./Shape\"),d=e(\"../math/Vec3\"),i=e(\"./ConvexPolyhedron\");n.prototype=new o,n.prototype.constructor=n,n.prototype.updateConvexPolyhedronRepresentation=function(){var e=this.halfExtents.x,f=this.halfExtents.y,n=this.halfExtents.z,o=d,t=[new o(-e,-f,-n),new o(e,-f,-n),new o(e,f,-n),new o(-e,f,-n),new o(-e,-f,n),new o(e,-f,n),new o(e,f,n),new o(-e,f,n)],l=[[3,2,1,0],[4,5,6,7],[5,4,0,1],[2,3,7,6],[0,4,7,3],[1,2,6,5]],u=([new o(0,0,1),new o(0,1,0),new o(1,0,0)],new i(t,l));this.convexPolyhedronRepresentation=u,u.material=this.material},n.prototype.calculateLocalInertia=function(e,f){return f=f||new d,n.calculateInertia(this.halfExtents,e,f),f},n.calculateInertia=function(e,f,n){var o=e;n.x=1/12*f*(2*o.y*2*o.y+2*o.z*2*o.z),n.y=1/12*f*(2*o.x*2*o.x+2*o.z*2*o.z),n.z=1/12*f*(2*o.y*2*o.y+2*o.x*2*o.x)},n.prototype.getSideNormals=function(e,f){var n=e,o=this.halfExtents;if(n[0].set(o.x,0,0),n[1].set(0,o.y,0),n[2].set(0,0,o.z),n[3].set(-o.x,0,0),n[4].set(0,-o.y,0),n[5].set(0,0,-o.z),void 0!==f)for(var d=0;d!==n.length;d++)f.vmult(n[d],n[d]);return n},n.prototype.volume=function(){return 8*this.halfExtents.x*this.halfExtents.y*this.halfExtents.z},n.prototype.updateBoundingSphereRadius=function(){this.boundingSphereRadius=this.halfExtents.norm()};{var t=new d;new d}n.prototype.forEachWorldCorner=function(e,f,n){for(var o=this.halfExtents,d=[[o.x,o.y,o.z],[-o.x,o.y,o.z],[-o.x,-o.y,o.z],[-o.x,-o.y,-o.z],[o.x,-o.y,-o.z],[o.x,o.y,-o.z],[-o.x,o.y,-o.z],[o.x,-o.y,o.z]],i=0;i<d.length;i++)t.set(d[i][0],d[i][1],d[i][2]),f.vmult(t,t),e.vadd(t,t),n(t.x,t.y,t.z)};var l=[new d,new d,new d,new d,new d,new d,new d,new d];n.prototype.calculateWorldAABB=function(e,f,n,o){var d=this.halfExtents;l[0].set(d.x,d.y,d.z),l[1].set(-d.x,d.y,d.z),l[2].set(-d.x,-d.y,d.z),l[3].set(-d.x,-d.y,-d.z),l[4].set(d.x,-d.y,-d.z),l[5].set(d.x,d.y,-d.z),l[6].set(-d.x,d.y,-d.z),l[7].set(d.x,-d.y,d.z);var i=l[0];f.vmult(i,i),e.vadd(i,i),o.copy(i),n.copy(i);for(var t=1;8>t;t++){var i=l[t];f.vmult(i,i),e.vadd(i,i);var u=i.x,p=i.y,s=i.z;u>o.x&&(o.x=u),p>o.y&&(o.y=p),s>o.z&&(o.z=s),u<n.x&&(n.x=u),p<n.y&&(n.y=p),s<n.z&&(n.z=s)}}},{\"../math/Vec3\":30,\"./ConvexPolyhedron\":38,\"./Shape\":43}],38:[function(e,f){function n(e,f,n){o.call(this),this.type=o.types.CONVEXPOLYHEDRON,this.vertices=e||[],this.worldVertices=[],this.worldVerticesNeedsUpdate=!0,this.faces=f||[],this.faceNormals=[],this.computeNormals(),this.worldFaceNormalsNeedsUpdate=!0,this.worldFaceNormals=[],this.uniqueEdges=[],this.uniqueAxes=n?n.slice():null,this.computeEdges(),this.updateBoundingSphereRadius()}f.exports=n;var o=e(\"./Shape\"),d=e(\"../math/Vec3\"),i=(e(\"../math/Quaternion\"),e(\"../math/Transform\"));n.prototype=new o,n.prototype.constructor=n;var t=new d;n.prototype.computeEdges=function(){var e=this.faces,f=this.vertices,n=(f.length,this.uniqueEdges);n.length=0;for(var o=t,d=0;d!==e.length;d++)for(var i=e[d],l=i.length,u=0;u!==l;u++){var p=(u+1)%l;f[i[u]].vsub(f[i[p]],o),o.normalize();for(var s=!1,y=0;y!==n.length;y++)if(n[y].almostEquals(o)||n[y].almostEquals(o)){s=!0;break}s||n.push(o.clone())}},n.prototype.computeNormals=function(){this.faceNormals.length=this.faces.length;for(var e=0;e<this.faces.length;e++){for(var f=0;f<this.faces[e].length;f++)if(!this.vertices[this.faces[e][f]])throw new Error(\"Vertex \"+this.faces[e][f]+\" not found!\");var n=this.faceNormals[e]||new d;this.getFaceNormal(e,n),n.negate(n),this.faceNormals[e]=n;var o=this.vertices[this.faces[e][0]];if(n.dot(o)<0){console.error(\".faceNormals[\"+e+\"] = Vec3(\"+n.toString()+\") looks like it points into the shape? The vertices follow. Make sure they are ordered CCW around the normal, using the right hand rule.\");for(var f=0;f<this.faces[e].length;f++)console.warn(\".vertices[\"+this.faces[e][f]+\"] = Vec3(\"+this.vertices[this.faces[e][f]].toString()+\")\")}}};var l=new d,u=new d;n.computeNormal=function(e,f,n,o){f.vsub(e,u),n.vsub(f,l),l.cross(u,o),o.isZero()||o.normalize()},n.prototype.getFaceNormal=function(e,f){var o=this.faces[e],d=this.vertices[o[0]],i=this.vertices[o[1]],t=this.vertices[o[2]];return n.computeNormal(d,i,t,f)};var p=new d;n.prototype.clipAgainstHull=function(e,f,n,o,i,t,l,u,s){for(var y=p,c=-1,a=-Number.MAX_VALUE,r=0;r<n.faces.length;r++){y.copy(n.faceNormals[r]),i.vmult(y,y);var w=y.dot(t);w>a&&(a=w,c=r)}for(var b=[],m=n.faces[c],N=m.length,g=0;N>g;g++){var x=n.vertices[m[g]],j=new d;j.copy(x),i.vmult(j,j),o.vadd(j,j),b.push(j)}c>=0&&this.clipFaceAgainstHull(t,e,f,b,l,u,s)};var s=new d,y=new d,c=new d,a=new d,r=new d,w=new d;n.prototype.findSeparatingAxis=function(e,f,n,o,d,i,t,l){var u=s,p=y,b=c,m=a,N=r,g=w,x=Number.MAX_VALUE,j=this,v=0;if(j.uniqueAxes)for(var A=0;A!==j.uniqueAxes.length;A++){n.vmult(j.uniqueAxes[A],u);var C=j.testSepAxis(u,e,f,n,o,d);if(C===!1)return!1;x>C&&(x=C,i.copy(u))}else for(var O=t?t.length:j.faces.length,A=0;O>A;A++){var h=t?t[A]:A;u.copy(j.faceNormals[h]),n.vmult(u,u);var C=j.testSepAxis(u,e,f,n,o,d);if(C===!1)return!1;x>C&&(x=C,i.copy(u))}if(e.uniqueAxes)for(var A=0;A!==e.uniqueAxes.length;A++){d.vmult(e.uniqueAxes[A],p),v++;var C=j.testSepAxis(p,e,f,n,o,d);if(C===!1)return!1;x>C&&(x=C,i.copy(p))}else for(var k=l?l.length:e.faces.length,A=0;k>A;A++){var h=l?l[A]:A;p.copy(e.faceNormals[h]),d.vmult(p,p),v++;var C=j.testSepAxis(p,e,f,n,o,d);if(C===!1)return!1;x>C&&(x=C,i.copy(p))}for(var q=0;q!==j.uniqueEdges.length;q++){n.vmult(j.uniqueEdges[q],m);for(var z=0;z!==e.uniqueEdges.length;z++)if(d.vmult(e.uniqueEdges[z],N),m.cross(N,g),!g.almostZero()){g.normalize();var B=j.testSepAxis(g,e,f,n,o,d);if(B===!1)return!1;x>B&&(x=B,i.copy(g))}}return o.vsub(f,b),b.dot(i)>0&&i.negate(i),!0};var b=[],m=[];n.prototype.testSepAxis=function(e,f,o,d,i,t){var l=this;n.project(l,e,o,d,b),n.project(f,e,i,t,m);var u=b[0],p=b[1],s=m[0],y=m[1];if(y>u||p>s)return!1;var c=u-y,a=s-p,r=a>c?c:a;return r};var N=new d,g=new d;n.prototype.calculateLocalInertia=function(e,f){this.computeLocalAABB(N,g);var n=g.x-N.x,o=g.y-N.y,d=g.z-N.z;f.x=1/12*e*(2*o*2*o+2*d*2*d),f.y=1/12*e*(2*n*2*n+2*d*2*d),f.z=1/12*e*(2*o*2*o+2*n*2*n)},n.prototype.getPlaneConstantOfFace=function(e){var f=this.faces[e],n=this.faceNormals[e],o=this.vertices[f[0]],d=-n.dot(o);return d};var x=new d,j=new d,v=new d,A=new d,C=new d,O=new d,h=new d,k=new d;n.prototype.clipFaceAgainstHull=function(e,f,n,o,d,i,t){for(var l=x,u=j,p=v,s=A,y=C,c=O,a=h,r=k,w=this,b=[],m=o,N=b,g=-1,q=Number.MAX_VALUE,z=0;z<w.faces.length;z++){l.copy(w.faceNormals[z]),n.vmult(l,l);var B=l.dot(e);q>B&&(q=B,g=z)}if(!(0>g)){var D=w.faces[g];D.connectedFaces=[];for(var E=0;E<w.faces.length;E++)for(var F=0;F<w.faces[E].length;F++)-1!==D.indexOf(w.faces[E][F])&&E!==g&&-1===D.connectedFaces.indexOf(E)&&D.connectedFaces.push(E);for(var G=(m.length,D.length),H=0;G>H;H++){var I=w.vertices[D[H]],J=w.vertices[D[(H+1)%G]];I.vsub(J,u),p.copy(u),n.vmult(p,p),f.vadd(p,p),s.copy(this.faceNormals[g]),n.vmult(s,s),f.vadd(s,s),p.cross(s,y),y.negate(y),c.copy(I),n.vmult(c,c),f.vadd(c,c);var K,L=(-c.dot(y),D.connectedFaces[H]);a.copy(this.faceNormals[L]);var M=this.getPlaneConstantOfFace(L);r.copy(a),n.vmult(r,r);var K=M-r.dot(f);for(this.clipFaceAgainstPlane(m,N,r,K);m.length;)m.shift();for(;N.length;)m.push(N.shift())}a.copy(this.faceNormals[g]);var M=this.getPlaneConstantOfFace(g);r.copy(a),n.vmult(r,r);for(var K=M-r.dot(f),E=0;E<m.length;E++){var P=r.dot(m[E])+K;if(d>=P&&(console.log(\"clamped: depth=\"+P+\" to minDist=\"+(d+\"\")),P=d),i>=P){var Q=m[E];if(0>=P){var R={point:Q,normal:r,depth:P};t.push(R)}}}}},n.prototype.clipFaceAgainstPlane=function(e,f,n,o){var i,t,l=e.length;if(2>l)return f;var u=e[e.length-1],p=e[0];i=n.dot(u)+o;for(var s=0;l>s;s++){if(p=e[s],t=n.dot(p)+o,0>i)if(0>t){var y=new d;y.copy(p),f.push(y)}else{var y=new d;u.lerp(p,i/(i-t),y),f.push(y)}else if(0>t){var y=new d;u.lerp(p,i/(i-t),y),f.push(y),f.push(p)}u=p,i=t}return f},n.prototype.computeWorldVertices=function(e,f){for(var n=this.vertices.length;this.worldVertices.length<n;)this.worldVertices.push(new d);for(var o=this.vertices,i=this.worldVertices,t=0;t!==n;t++)f.vmult(o[t],i[t]),e.vadd(i[t],i[t]);this.worldVerticesNeedsUpdate=!1};new d;n.prototype.computeLocalAABB=function(e,f){var n=this.vertices.length,o=this.vertices;e.set(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE),f.set(-Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE);for(var d=0;n>d;d++){var i=o[d];i.x<e.x?e.x=i.x:i.x>f.x&&(f.x=i.x),i.y<e.y?e.y=i.y:i.y>f.y&&(f.y=i.y),i.z<e.z?e.z=i.z:i.z>f.z&&(f.z=i.z)}},n.prototype.computeWorldFaceNormals=function(e){for(var f=this.faceNormals.length;this.worldFaceNormals.length<f;)this.worldFaceNormals.push(new d);for(var n=this.faceNormals,o=this.worldFaceNormals,i=0;i!==f;i++)e.vmult(n[i],o[i]);this.worldFaceNormalsNeedsUpdate=!1},n.prototype.updateBoundingSphereRadius=function(){for(var e=0,f=this.vertices,n=0,o=f.length;n!==o;n++){var d=f[n].norm2();d>e&&(e=d)}this.boundingSphereRadius=Math.sqrt(e)};var q=new d;n.prototype.calculateWorldAABB=function(e,f,n,o){for(var d,i,t,l,u,p,s=this.vertices.length,y=this.vertices,c=0;s>c;c++){q.copy(y[c]),f.vmult(q,q),e.vadd(q,q);var a=q;a.x<d||void 0===d?d=a.x:(a.x>l||void 0===l)&&(l=a.x),a.y<i||void 0===i?i=a.y:(a.y>u||void 0===u)&&(u=a.y),a.z<t||void 0===t?t=a.z:(a.z>p||void 0===p)&&(p=a.z)}n.set(d,i,t),o.set(l,u,p)},n.prototype.volume=function(){return 4*Math.PI*this.boundingSphereRadius/3},n.prototype.getAveragePointLocal=function(e){e=e||new d;for(var f=this.vertices.length,n=this.vertices,o=0;f>o;o++)e.vadd(n[o],e);return e.mult(1/f,e),e},n.prototype.transformAllPoints=function(e,f){var n=this.vertices.length,o=this.vertices;if(f){for(var d=0;n>d;d++){var i=o[d];f.vmult(i,i)}for(var d=0;d<this.faceNormals.length;d++){var i=this.faceNormals[d];f.vmult(i,i)}}if(e)for(var d=0;n>d;d++){var i=o[d];i.vadd(e,i)}};var z=new d,B=new d,D=new d;n.prototype.pointIsInside=function(e){var f=this.vertices.length,n=this.vertices,o=this.faces,d=this.faceNormals,i=null,t=this.faces.length,l=z;this.getAveragePointLocal(l);for(var u=0;t>u;u++){var f=(this.faces[u].length,d[u]),p=n[o[u][0]],s=B;e.vsub(p,s);var y=f.dot(s),c=D;l.vsub(p,c);var a=f.dot(c);if(0>y&&a>0||y>0&&0>a)return!1}return i?1:-1};var E=(new d,new d),F=new d;n.project=function(e,f,n,o,d){var t=e.vertices.length,l=E,u=0,p=0,s=F,y=e.vertices;s.setZero(),i.vectorToLocalFrame(n,o,f,l),i.pointToLocalFrame(n,o,s,s);var c=s.dot(l);p=u=y[0].dot(l);for(var a=1;t>a;a++){var r=y[a].dot(l);r>u&&(u=r),p>r&&(p=r)}if(p-=c,u-=c,p>u){var w=p;p=u,u=w}d[0]=u,d[1]=p}},{\"../math/Quaternion\":28,\"../math/Transform\":29,\"../math/Vec3\":30,\"./Shape\":43}],39:[function(e,f){function n(e,f,n,t){var l=t,u=[],p=[],s=[],y=[],c=[],a=Math.cos,r=Math.sin;u.push(new d(f*a(0),f*r(0),.5*-n)),y.push(0),u.push(new d(e*a(0),e*r(0),.5*n)),c.push(1);for(var w=0;l>w;w++){var b=2*Math.PI/l*(w+1),m=2*Math.PI/l*(w+.5);l-1>w?(u.push(new d(f*a(b),f*r(b),.5*-n)),y.push(2*w+2),u.push(new d(e*a(b),e*r(b),.5*n)),c.push(2*w+3),s.push([2*w+2,2*w+3,2*w+1,2*w])):s.push([0,1,2*w+1,2*w]),(l%2===1||l/2>w)&&p.push(new d(a(m),r(m),0))}s.push(c),p.push(new d(0,0,1));for(var N=[],w=0;w<y.length;w++)N.push(y[y.length-w-1]);s.push(N),this.type=o.types.CONVEXPOLYHEDRON,i.call(this,u,s,p)}f.exports=n;var o=e(\"./Shape\"),d=e(\"../math/Vec3\"),i=(e(\"../math/Quaternion\"),e(\"./ConvexPolyhedron\"));n.prototype=new i},{\"../math/Quaternion\":28,\"../math/Vec3\":30,\"./ConvexPolyhedron\":38,\"./Shape\":43}],40:[function(e,f){function n(e,f){f=t.defaults(f,{maxValue:null,minValue:null,elementSize:1}),this.data=e,this.maxValue=f.maxValue,this.minValue=f.minValue,this.elementSize=f.elementSize,null===f.minValue&&this.updateMinValue(),null===f.maxValue&&this.updateMaxValue(),this.cacheEnabled=!0,o.call(this),this.pillarConvex=new d,this.pillarOffset=new i,this.type=o.types.HEIGHTFIELD,this.updateBoundingSphereRadius(),this._cachedPillars={}}var o=e(\"./Shape\"),d=e(\"./ConvexPolyhedron\"),i=e(\"../math/Vec3\"),t=e(\"../utils/Utils\");f.exports=n,n.prototype=new o,n.prototype.update=function(){this._cachedPillars={}},n.prototype.updateMinValue=function(){for(var e=this.data,f=e[0][0],n=0;n!==e.length;n++)for(var o=0;o!==e[n].length;o++){var d=e[n][o];f>d&&(f=d)}this.minValue=f},n.prototype.updateMaxValue=function(){for(var e=this.data,f=e[0][0],n=0;n!==e.length;n++)for(var o=0;o!==e[n].length;o++){var d=e[n][o];d>f&&(f=d)}this.maxValue=f},n.prototype.setHeightValueAtIndex=function(e,f,n){var o=this.data;o[e][f]=n,this.clearCachedConvexTrianglePillar(e,f,!1),e>0&&(this.clearCachedConvexTrianglePillar(e-1,f,!0),this.clearCachedConvexTrianglePillar(e-1,f,!1)),f>0&&(this.clearCachedConvexTrianglePillar(e,f-1,!0),this.clearCachedConvexTrianglePillar(e,f-1,!1)),f>0&&e>0&&this.clearCachedConvexTrianglePillar(e-1,f-1,!0)},n.prototype.getRectMinMax=function(e,f,n,o,d){d=d||[];for(var i=this.data,t=this.minValue,l=e;n>=l;l++)for(var u=f;o>=u;u++){var p=i[l][u];p>t&&(t=p)}d[0]=this.minValue,d[1]=t},n.prototype.getIndexOfPosition=function(e,f,n,o){var d=this.elementSize,i=this.data,t=Math.floor(e/d),l=Math.floor(f/d);return n[0]=t,n[1]=l,o&&(0>t&&(t=0),0>l&&(l=0),t>=i.length-1&&(t=i.length-1),l>=i[0].length-1&&(l=i[0].length-1)),0>t||0>l||t>=i.length-1||l>=i[0].length-1?!1:!0},n.prototype.getHeightAt=function(e,f,n){var o=[];this.getIndexOfPosition(e,f,o,n);var d=[];return this.getRectMinMax(o[0],o[1]+1,o[0],o[1]+1,d),(d[0]+d[1])/2},n.prototype.getCacheConvexTrianglePillarKey=function(e,f,n){return e+\"_\"+f+\"_\"+(n?1:0)},n.prototype.getCachedConvexTrianglePillar=function(e,f,n){return this._cachedPillars[this.getCacheConvexTrianglePillarKey(e,f,n)]},n.prototype.setCachedConvexTrianglePillar=function(e,f,n,o,d){this._cachedPillars[this.getCacheConvexTrianglePillarKey(e,f,n)]={convex:o,offset:d}},n.prototype.clearCachedConvexTrianglePillar=function(e,f,n){delete this._cachedPillars[this.getCacheConvexTrianglePillarKey(e,f,n)]},n.prototype.getConvexTrianglePillar=function(e,f,n){var o=this.pillarConvex,t=this.pillarOffset;if(this.cacheEnabled){var l=this.getCachedConvexTrianglePillar(e,f,n);if(l)return this.pillarConvex=l.convex,void(this.pillarOffset=l.offset);o=new d,t=new i,this.pillarConvex=o,this.pillarOffset=t}var l=this.data,u=this.elementSize,p=o.faces;o.vertices.length=6;for(var s=0;6>s;s++)o.vertices[s]||(o.vertices[s]=new i);p.length=5;for(var s=0;5>s;s++)p[s]||(p[s]=[]);var y=o.vertices,c=(Math.min(l[e][f],l[e+1][f],l[e][f+1],l[e+1][f+1])-this.minValue)/2+this.minValue;n?(t.set((e+.75)*u,(f+.75)*u,c),y[0].set(.25*u,.25*u,l[e+1][f+1]-c),y[1].set(-.75*u,.25*u,l[e][f+1]-c),y[2].set(.25*u,-.75*u,l[e+1][f]-c),y[3].set(.25*u,.25*u,-c-1),y[4].set(-.75*u,.25*u,-c-1),y[5].set(.25*u,-.75*u,-c-1),p[0][0]=0,p[0][1]=1,p[0][2]=2,p[1][0]=5,p[1][1]=4,p[1][2]=3,p[2][0]=2,p[2][1]=5,p[2][2]=3,p[2][3]=0,p[3][0]=3,p[3][1]=4,p[3][2]=1,p[3][3]=0,p[4][0]=1,p[4][1]=4,p[4][2]=5,p[4][3]=2):(t.set((e+.25)*u,(f+.25)*u,c),y[0].set(-.25*u,-.25*u,l[e][f]-c),y[1].set(.75*u,-.25*u,l[e+1][f]-c),y[2].set(-.25*u,.75*u,l[e][f+1]-c),y[3].set(-.25*u,-.25*u,-c-1),y[4].set(.75*u,-.25*u,-c-1),y[5].set(-.25*u,.75*u,-c-1),p[0][0]=0,p[0][1]=1,p[0][2]=2,p[1][0]=5,p[1][1]=4,p[1][2]=3,p[2][0]=0,p[2][1]=2,p[2][2]=5,p[2][3]=3,p[3][0]=1,p[3][1]=0,p[3][2]=3,p[3][3]=4,p[4][0]=4,p[4][1]=5,p[4][2]=2,p[4][3]=1),o.computeNormals(),o.computeEdges(),o.updateBoundingSphereRadius(),this.setCachedConvexTrianglePillar(e,f,n,o,t)},n.prototype.calculateLocalInertia=function(e,f){return f=f||new i,f.set(0,0,0),f},n.prototype.volume=function(){return Number.MAX_VALUE},n.prototype.calculateWorldAABB=function(e,f,n,o){n.set(-Number.MAX_VALUE,-Number.MAX_VALUE,-Number.MAX_VALUE),o.set(Number.MAX_VALUE,Number.MAX_VALUE,Number.MAX_VALUE)},n.prototype.updateBoundingSphereRadius=function(){var e=this.data,f=this.elementSize;this.boundingSphereRadius=new i(e.length*f,e[0].length*f,Math.max(Math.abs(this.maxValue),Math.abs(this.minValue))).norm()}},{\"../math/Vec3\":30,\"../utils/Utils\":53,\"./ConvexPolyhedron\":38,\"./Shape\":43}],41:[function(e,f){function n(){o.call(this),this.type=o.types.PARTICLE}f.exports=n;var o=e(\"./Shape\"),d=e(\"../math/Vec3\");n.prototype=new o,n.prototype.constructor=n,n.prototype.calculateLocalInertia=function(e,f){return f=f||new d,f.set(0,0,0),f},n.prototype.volume=function(){return 0},n.prototype.updateBoundingSphereRadius=function(){this.boundingSphereRadius=0},n.prototype.calculateWorldAABB=function(e,f,n,o){n.copy(e),o.copy(e)}},{\"../math/Vec3\":30,\"./Shape\":43}],42:[function(e,f){function n(){o.call(this),this.type=o.types.PLANE,this.worldNormal=new d,this.worldNormalNeedsUpdate=!0,this.boundingSphereRadius=Number.MAX_VALUE}f.exports=n;var o=e(\"./Shape\"),d=e(\"../math/Vec3\");n.prototype=new o,n.prototype.constructor=n,n.prototype.computeWorldNormal=function(e){var f=this.worldNormal;f.set(0,0,1),e.vmult(f,f),this.worldNormalNeedsUpdate=!1},n.prototype.calculateLocalInertia=function(e,f){return f=f||new d},n.prototype.volume=function(){return Number.MAX_VALUE};var i=new d;n.prototype.calculateWorldAABB=function(e,f,n,o){i.set(0,0,1),f.vmult(i,i);var d=Number.MAX_VALUE;n.set(-d,-d,-d),o.set(d,d,d),1===i.x&&(o.x=e.x),1===i.y&&(o.y=e.y),1===i.z&&(o.z=e.z),-1===i.x&&(n.x=e.x),-1===i.y&&(n.y=e.y),-1===i.z&&(n.z=e.z)},n.prototype.updateBoundingSphereRadius=function(){this.boundingSphereRadius=Number.MAX_VALUE}},{\"../math/Vec3\":30,\"./Shape\":43}],43:[function(e,f){function n(){this.id=n.idCounter++,this.type=0,this.boundingSphereRadius=0,this.collisionResponse=!0,this.material=null}f.exports=n;{var n=e(\"./Shape\");e(\"../math/Vec3\"),e(\"../math/Quaternion\"),e(\"../material/Material\")}n.prototype.constructor=n,n.prototype.updateBoundingSphereRadius=function(){throw\"computeBoundingSphereRadius() not implemented for shape type \"+this.type},n.prototype.volume=function(){throw\"volume() not implemented for shape type \"+this.type},n.prototype.calculateLocalInertia=function(){throw\"calculateLocalInertia() not implemented for shape type \"+this.type},n.idCounter=0,n.types={SPHERE:1,PLANE:2,BOX:4,COMPOUND:8,CONVEXPOLYHEDRON:16,HEIGHTFIELD:32,PARTICLE:64,CYLINDER:128,TRIMESH:256}},{\"../material/Material\":25,\"../math/Quaternion\":28,\"../math/Vec3\":30,\"./Shape\":43}],44:[function(e,f){function n(e){if(o.call(this),this.radius=void 0!==e?Number(e):1,this.type=o.types.SPHERE,this.radius<0)throw new Error(\"The sphere radius cannot be negative.\");this.updateBoundingSphereRadius()}f.exports=n;var o=e(\"./Shape\"),d=e(\"../math/Vec3\");n.prototype=new o,n.prototype.constructor=n,n.prototype.calculateLocalInertia=function(e,f){f=f||new d;var n=2*e*this.radius*this.radius/5;return f.x=n,f.y=n,f.z=n,f},n.prototype.volume=function(){return 4*Math.PI*this.radius/3},n.prototype.updateBoundingSphereRadius=function(){this.boundingSphereRadius=this.radius},n.prototype.calculateWorldAABB=function(e,f,n,o){for(var d=this.radius,i=[\"x\",\"y\",\"z\"],t=0;t<i.length;t++){var l=i[t];n[l]=e[l]-d,o[l]=e[l]+d}}},{\"../math/Vec3\":30,\"./Shape\":43}],45:[function(e,f){function n(e,f){o.call(this),this.type=o.types.TRIMESH,this.vertices=new Float32Array(e),this.indices=new Int16Array(f),this.normals=new Float32Array(f.length),this.aabb=new t,this.edges=null,this.scale=new d(1,1,1),this.tree=new l,this.updateEdges(),this.updateNormals(),this.updateAABB(),this.updateBoundingSphereRadius(),this.updateTree()}f.exports=n;var o=e(\"./Shape\"),d=e(\"../math/Vec3\"),i=(e(\"../math/Quaternion\"),e(\"../math/Transform\")),t=e(\"../collision/AABB\"),l=e(\"../utils/Octree\");n.prototype=new o,n.prototype.constructor=n;var u=new d;n.prototype.updateTree=function(){var e=this.tree;e.reset(),e.aabb.copy(this.aabb);var f=this.scale;e.aabb.lowerBound.x*=1/f.x,e.aabb.lowerBound.y*=1/f.y,e.aabb.lowerBound.z*=1/f.z,e.aabb.upperBound.x*=1/f.x,e.aabb.upperBound.y*=1/f.y,e.aabb.upperBound.z*=1/f.z;for(var n=new t,o=new d,i=new d,l=new d,u=[o,i,l],p=0;p<this.indices.length/3;p++){var s=3*p;this._getUnscaledVertex(this.indices[s],o),this._getUnscaledVertex(this.indices[s+1],i),this._getUnscaledVertex(this.indices[s+2],l),n.setFromPoints(u),e.insert(n,p)}e.removeEmptyNodes()};var p=new t;n.prototype.getTrianglesInAABB=function(e,f){p.copy(e);var n=this.scale,o=n.x,d=n.y,i=n.z,t=p.lowerBound,l=p.upperBound;return t.x/=o,t.y/=d,t.z/=i,l.x/=o,l.y/=d,l.z/=i,this.tree.aabbQuery(p,f)},n.prototype.setScale=function(e){var f=this.scale.x===this.scale.y===this.scale.z,n=e.x===e.y===e.z;f&&n||this.updateNormals(),this.scale.copy(e),this.updateAABB(),this.updateBoundingSphereRadius()},n.prototype.updateNormals=function(){for(var e=u,f=this.normals,o=0;o<this.indices.length/3;o++){var d=3*o,i=this.indices[d],t=this.indices[d+1],l=this.indices[d+2];this.getVertex(i,r),this.getVertex(t,w),this.getVertex(l,b),n.computeNormal(w,r,b,e),f[d]=e.x,f[d+1]=e.y,f[d+2]=e.z}},n.prototype.updateEdges=function(){for(var e={},f=function(){var f=i>d?d+\"_\"+i:i+\"_\"+d;e[f]=!0},n=0;n<this.indices.length/3;n++){var o=3*n,d=this.indices[o],i=this.indices[o+1],t=this.indices[o+2];f(d,i),f(i,t),f(t,d)}var l=Object.keys(e);this.edges=new Int16Array(2*l.length);for(var n=0;n<l.length;n++){var u=l[n].split(\"_\");this.edges[2*n]=parseInt(u[0],10),this.edges[2*n+1]=parseInt(u[1],10)}},n.prototype.getEdgeVertex=function(e,f,n){var o=this.edges[2*e+(f?1:0)];this.getVertex(o,n)};var s=new d,y=new d;n.prototype.getEdgeVector=function(e,f){var n=s,o=y;this.getEdgeVertex(e,0,n),this.getEdgeVertex(e,1,o),o.vsub(n,f)};var c=new d,a=new d;n.computeNormal=function(e,f,n,o){f.vsub(e,a),n.vsub(f,c),c.cross(a,o),o.isZero()||o.normalize()};var r=new d,w=new d,b=new d;n.prototype.getVertex=function(e,f){var n=this.scale;return this._getUnscaledVertex(e,f),f.x*=n.x,f.y*=n.y,f.z*=n.z,f},n.prototype._getUnscaledVertex=function(e,f){var n=3*e,o=this.vertices;return f.set(o[n],o[n+1],o[n+2])},n.prototype.getWorldVertex=function(e,f,n,o){return this.getVertex(e,o),i.pointToWorldFrame(f,n,o,o),o},n.prototype.getTriangleVertices=function(e,f,n,o){var d=3*e;this.getVertex(this.indices[d],f),this.getVertex(this.indices[d+1],n),this.getVertex(this.indices[d+2],o)},n.prototype.getNormal=function(e,f){var n=3*e;return f.set(this.normals[n],this.normals[n+1],this.normals[n+2])};var m=new t;n.prototype.calculateLocalInertia=function(e,f){this.computeLocalAABB(m);var n=m.upperBound.x-m.lowerBound.x,o=m.upperBound.y-m.lowerBound.y,d=m.upperBound.z-m.lowerBound.z;return f.set(1/12*e*(2*o*2*o+2*d*2*d),1/12*e*(2*n*2*n+2*d*2*d),1/12*e*(2*o*2*o+2*n*2*n))};var N=new d;n.prototype.computeLocalAABB=function(e){var f=e.lowerBound,n=e.upperBound,o=this.vertices.length,d=(this.vertices,N);this.getVertex(0,d),f.copy(d),n.copy(d);for(var i=0;i!==o;i++)this.getVertex(i,d),d.x<f.x?f.x=d.x:d.x>n.x&&(n.x=d.x),d.y<f.y?f.y=d.y:d.y>n.y&&(n.y=d.y),d.z<f.z?f.z=d.z:d.z>n.z&&(n.z=d.z)},n.prototype.updateAABB=function(){this.computeLocalAABB(this.aabb)},n.prototype.updateBoundingSphereRadius=function(){for(var e=0,f=this.vertices,n=new d,o=0,i=f.length/3;o!==i;o++){this.getVertex(o,n);var t=n.norm2();t>e&&(e=t)}this.boundingSphereRadius=Math.sqrt(e)};var g=(new d,new i),x=new t;n.prototype.calculateWorldAABB=function(e,f,n,o){var d=g,i=x;d.position=e,d.quaternion=f,this.aabb.toWorldFrame(d,i),n.copy(i.lowerBound),o.copy(i.upperBound)},n.prototype.volume=function(){return 4*Math.PI*this.boundingSphereRadius/3},n.createTorus=function(e,f,o,d,i){e=e||1,f=f||.5,o=o||8,d=d||6,i=i||2*Math.PI;for(var t=[],l=[],u=0;o>=u;u++)for(var p=0;d>=p;p++){var s=p/d*i,y=u/o*Math.PI*2,c=(e+f*Math.cos(y))*Math.cos(s),a=(e+f*Math.cos(y))*Math.sin(s),r=f*Math.sin(y);t.push(c,a,r)}for(var u=1;o>=u;u++)for(var p=1;d>=p;p++){var w=(d+1)*u+p-1,b=(d+1)*(u-1)+p-1,m=(d+1)*(u-1)+p,N=(d+1)*u+p;l.push(w,b,N),l.push(b,m,N)}return new n(t,l)}},{\"../collision/AABB\":3,\"../math/Quaternion\":28,\"../math/Transform\":29,\"../math/Vec3\":30,\"../utils/Octree\":50,\"./Shape\":43}],46:[function(e,f){function n(){o.call(this),this.iterations=10,this.tolerance=1e-7}f.exports=n;var o=(e(\"../math/Vec3\"),e(\"../math/Quaternion\"),e(\"./Solver\"));n.prototype=new o;var d=[],i=[],t=[];n.prototype.solve=function(e,f){var n,o,l,u,p,s,y=0,c=this.iterations,a=this.tolerance*this.tolerance,r=this.equations,w=r.length,b=f.bodies,m=b.length,N=e;if(0!==w)for(var g=0;g!==m;g++)b[g].updateSolveMassProperties();var x=i,j=t,v=d;\nx.length=w,j.length=w,v.length=w;for(var g=0;g!==w;g++){var A=r[g];v[g]=0,j[g]=A.computeB(N),x[g]=1/A.computeC()}if(0!==w){for(var g=0;g!==m;g++){var C=b[g],O=C.vlambda,h=C.wlambda;O.set(0,0,0),h&&h.set(0,0,0)}for(y=0;y!==c;y++){u=0;for(var k=0;k!==w;k++){var A=r[k];n=j[k],o=x[k],s=v[k],p=A.computeGWlambda(),l=o*(n-p-A.eps*s),s+l<A.minForce?l=A.minForce-s:s+l>A.maxForce&&(l=A.maxForce-s),v[k]+=l,u+=l>0?l:-l,A.addToWlambda(l)}if(a>u*u)break}for(var g=0;g!==m;g++){var C=b[g],q=C.velocity,z=C.angularVelocity;q.vadd(C.vlambda,q),z&&z.vadd(C.wlambda,z)}}return y}},{\"../math/Quaternion\":28,\"../math/Vec3\":30,\"./Solver\":47}],47:[function(e,f){function n(){this.equations=[]}f.exports=n,n.prototype.solve=function(){return 0},n.prototype.addEquation=function(e){e.enabled&&this.equations.push(e)},n.prototype.removeEquation=function(e){var f=this.equations,n=f.indexOf(e);-1!==n&&f.splice(n,1)},n.prototype.removeAllEquations=function(){this.equations.length=0}},{}],48:[function(e,f){function n(e){for(l.call(this),this.iterations=10,this.tolerance=1e-7,this.subsolver=e,this.nodes=[],this.nodePool=[];this.nodePool.length<128;)this.nodePool.push(this.createNode())}function o(e){for(var f=e.length,n=0;n!==f;n++){var o=e[n];if(!(o.visited||o.body.type&c))return o}return!1}function d(e,f,n,d){for(a.push(e),e.visited=!0,f(e,n,d);a.length;)for(var i,t=a.pop();i=o(t.children);)i.visited=!0,f(i,n,d),a.push(i)}function i(e,f,n){f.push(e.body);for(var o=e.eqs.length,d=0;d!==o;d++){var i=e.eqs[d];-1===n.indexOf(i)&&n.push(i)}}function t(e,f){return f.id-e.id}f.exports=n;var l=(e(\"../math/Vec3\"),e(\"../math/Quaternion\"),e(\"./Solver\")),u=e(\"../objects/Body\");n.prototype=new l;var p=[],s=[],y={bodies:[]},c=u.STATIC,a=[];n.prototype.createNode=function(){return{body:null,children:[],eqs:[],visited:!1}},n.prototype.solve=function(e,f){for(var n=p,l=this.nodePool,u=f.bodies,c=this.equations,a=c.length,r=u.length,w=this.subsolver;l.length<r;)l.push(this.createNode());n.length=r;for(var b=0;r>b;b++)n[b]=l[b];for(var b=0;b!==r;b++){var m=n[b];m.body=u[b],m.children.length=0,m.eqs.length=0,m.visited=!1}for(var N=0;N!==a;N++){var g=c[N],b=u.indexOf(g.bi),x=u.indexOf(g.bj),j=n[b],v=n[x];j.children.push(v),j.eqs.push(g),v.children.push(j),v.eqs.push(g)}var A,C=0,O=s;w.tolerance=this.tolerance,w.iterations=this.iterations;for(var h=y;A=o(n);){O.length=0,h.bodies.length=0,d(A,i,h.bodies,O);var k=O.length;O=O.sort(t);for(var b=0;b!==k;b++)w.addEquation(O[b]);{w.solve(e,h)}w.removeAllEquations(),C++}return C}},{\"../math/Quaternion\":28,\"../math/Vec3\":30,\"../objects/Body\":31,\"./Solver\":47}],49:[function(e,f){var n=function(){};f.exports=n,n.prototype={constructor:n,addEventListener:function(e,f){void 0===this._listeners&&(this._listeners={});var n=this._listeners;return void 0===n[e]&&(n[e]=[]),-1===n[e].indexOf(f)&&n[e].push(f),this},hasEventListener:function(e,f){if(void 0===this._listeners)return!1;var n=this._listeners;return void 0!==n[e]&&-1!==n[e].indexOf(f)?!0:!1},removeEventListener:function(e,f){if(void 0===this._listeners)return this;var n=this._listeners;if(void 0===n[e])return this;var o=n[e].indexOf(f);return-1!==o&&n[e].splice(o,1),this},dispatchEvent:function(e){if(void 0===this._listeners)return this;var f=this._listeners,n=f[e.type];if(void 0!==n){e.target=this;for(var o=0,d=n.length;d>o;o++)n[o].call(this,e)}return this}}},{}],50:[function(e,f){function n(e){e=e||{},this.root=e.root||null,this.aabb=e.aabb?e.aabb.clone():new d,this.data=[],this.children=[]}function o(e,f){f=f||{},f.root=null,f.aabb=e,n.call(this,f),this.maxDepth=\"undefined\"!=typeof f.maxDepth?f.maxDepth:8}var d=e(\"../collision/AABB\"),i=e(\"../math/Vec3\");f.exports=o,o.prototype=new n,n.prototype.reset=function(){this.children.length=this.data.length=0},n.prototype.insert=function(e,f,n){var o=this.data;if(n=n||0,!this.aabb.contains(e))return!1;var d=this.children;if(n<(this.maxDepth||this.root.maxDepth)){var i=!1;d.length||(this.subdivide(),i=!0);for(var t=0;8!==t;t++)if(d[t].insert(e,f,n+1))return!0;i&&(d.length=0)}return o.push(f),!0};var t=new i;n.prototype.subdivide=function(){var e=this.aabb,f=e.lowerBound,o=e.upperBound,l=this.children;l.push(new n({aabb:new d({lowerBound:new i(0,0,0)})}),new n({aabb:new d({lowerBound:new i(1,0,0)})}),new n({aabb:new d({lowerBound:new i(1,1,0)})}),new n({aabb:new d({lowerBound:new i(1,1,1)})}),new n({aabb:new d({lowerBound:new i(0,1,1)})}),new n({aabb:new d({lowerBound:new i(0,0,1)})}),new n({aabb:new d({lowerBound:new i(1,0,1)})}),new n({aabb:new d({lowerBound:new i(0,1,0)})})),o.vsub(f,t),t.scale(.5,t);for(var u=this.root||this,p=0;8!==p;p++){var s=l[p];s.root=u;var y=s.aabb.lowerBound;y.x*=t.x,y.y*=t.y,y.z*=t.z,y.vadd(f,y),y.vadd(t,s.aabb.upperBound)}},n.prototype.aabbQuery=function(e,f){for(var n=(this.data,this.children,[this]);n.length;){var o=n.pop();o.aabb.overlaps(e)&&Array.prototype.push.apply(f,o.data),Array.prototype.push.apply(n,o.children)}return f};var l=new d;n.prototype.rayQuery=function(e,f,n){return e.getAABB(l),l.toLocalFrame(f,l),this.aabbQuery(l,n),n},n.prototype.removeEmptyNodes=function(){for(var e=[this];e.length;){for(var f=e.pop(),n=f.children.length-1;n>=0;n--)f.children[n].data.length||f.children.splice(n,1);Array.prototype.push.apply(e,f.children)}}},{\"../collision/AABB\":3,\"../math/Vec3\":30}],51:[function(e,f){function n(){this.objects=[],this.type=Object}f.exports=n,n.prototype.release=function(){for(var e=arguments.length,f=0;f!==e;f++)this.objects.push(arguments[f])},n.prototype.get=function(){return 0===this.objects.length?this.constructObject():this.objects.pop()},n.prototype.constructObject=function(){throw new Error(\"constructObject() not implemented in this Pool subclass yet!\")}},{}],52:[function(e,f){function n(){this.data={keys:[]}}f.exports=n,n.prototype.get=function(e,f){if(e>f){var n=f;f=e,e=n}return this.data[e+\"-\"+f]},n.prototype.set=function(e,f,n){if(e>f){var o=f;f=e,e=o}var d=e+\"-\"+f;this.get(e,f)||this.data.keys.push(d),this.data[d]=n},n.prototype.reset=function(){for(var e=this.data,f=e.keys;f.length>0;){var n=f.pop();delete e[n]}}},{}],53:[function(e,f){function n(){}f.exports=n,n.defaults=function(e,f){e=e||{};for(var n in f)n in e||(e[n]=f[n]);return e}},{}],54:[function(e,f){function n(){d.call(this),this.type=o}f.exports=n;var o=e(\"../math/Vec3\"),d=e(\"./Pool\");n.prototype=new d,n.prototype.constructObject=function(){return new o}},{\"../math/Vec3\":30,\"./Pool\":51}],55:[function(e,f){function n(e){this.contactPointPool=[],this.frictionEquationPool=[],this.result=[],this.frictionResult=[],this.v3pool=new s,this.world=e,this.currentContactMaterial=null,this.enableFrictionReduction=!1}function o(e,f,n){for(var o=null,d=e.length,i=0;i!==d;i++){var t=e[i],l=M;e[(i+1)%d].vsub(t,l);var u=P;l.cross(f,u);var p=Q;n.vsub(t,p);var s=u.dot(p);if(!(null===o||s>0&&o===!0||0>=s&&o===!1))return!1;null===o&&(o=s>0)}return!0}f.exports=n;var d=e(\"../collision/AABB\"),i=e(\"../shapes/Shape\"),t=e(\"../collision/Ray\"),l=e(\"../math/Vec3\"),u=e(\"../math/Transform\"),p=(e(\"../shapes/ConvexPolyhedron\"),e(\"../math/Quaternion\")),s=(e(\"../solver/Solver\"),e(\"../utils/Vec3Pool\")),y=e(\"../equations/ContactEquation\"),c=e(\"../equations/FrictionEquation\");n.prototype.createContactEquation=function(e,f,n,o,d,i){var t;this.contactPointPool.length?(t=this.contactPointPool.pop(),t.bi=e,t.bj=f):t=new y(e,f),t.enabled=e.collisionResponse&&f.collisionResponse&&n.collisionResponse&&o.collisionResponse;var l=this.currentContactMaterial;t.restitution=l.restitution,t.setSpookParams(l.contactEquationStiffness,l.contactEquationRelaxation,this.world.dt);var u=n.material||e.material,p=o.material||f.material;return u&&p&&u.restitution>=0&&p.restitution>=0&&(t.restitution=u.restitution*p.restitution),t.si=d||n,t.sj=i||o,t},n.prototype.createFrictionEquationsFromContact=function(e,f){var n=e.bi,o=e.bj,d=e.si,i=e.sj,t=this.world,l=this.currentContactMaterial,u=l.friction,p=d.material||n.material,s=i.material||o.material;if(p&&s&&p.friction>=0&&s.friction>=0&&(u=p.friction*s.friction),u>0){var y=u*t.gravity.length(),a=n.invMass+o.invMass;a>0&&(a=1/a);var r=this.frictionEquationPool,w=r.length?r.pop():new c(n,o,y*a),b=r.length?r.pop():new c(n,o,y*a);return w.bi=b.bi=n,w.bj=b.bj=o,w.minForce=b.minForce=-y*a,w.maxForce=b.maxForce=y*a,w.ri.copy(e.ri),w.rj.copy(e.rj),b.ri.copy(e.ri),b.rj.copy(e.rj),e.ni.tangents(w.t,b.t),w.setSpookParams(l.frictionEquationStiffness,l.frictionEquationRelaxation,t.dt),b.setSpookParams(l.frictionEquationStiffness,l.frictionEquationRelaxation,t.dt),w.enabled=b.enabled=e.enabled,f.push(w,b),!0}return!1};var a=new l,r=new l,w=new l;n.prototype.createFrictionFromAverage=function(e){var f=this.result[this.result.length-1];if(this.createFrictionEquationsFromContact(f,this.frictionResult)&&1!==e){var n=this.frictionResult[this.frictionResult.length-2],o=this.frictionResult[this.frictionResult.length-1];a.setZero(),r.setZero(),w.setZero();for(var d=f.bi,i=(f.bj,0);i!==e;i++)f=this.result[this.result.length-1-i],f.bodyA!==d?(a.vadd(f.ni,a),r.vadd(f.ri,r),w.vadd(f.rj,w)):(a.vsub(f.ni,a),r.vadd(f.rj,r),w.vadd(f.ri,w));var t=1/e;r.scale(t,n.ri),w.scale(t,n.rj),o.ri.copy(n.ri),o.rj.copy(n.rj),a.normalize(),a.tangents(n.t,o.t)}};var b=new l,m=new l,N=new p,g=new p;n.prototype.getContacts=function(e,f,n,o,d,i,t){this.contactPointPool=d,this.frictionEquationPool=t,this.result=o,this.frictionResult=i;for(var l=N,u=g,p=b,s=m,y=0,c=e.length;y!==c;y++){var a=e[y],r=f[y],w=null;a.material&&r.material&&(w=n.getContactMaterial(a.material,r.material)||null);for(var x=0;x<a.shapes.length;x++){a.quaternion.mult(a.shapeOrientations[x],l),a.quaternion.vmult(a.shapeOffsets[x],p),p.vadd(a.position,p);for(var j=a.shapes[x],v=0;v<r.shapes.length;v++){r.quaternion.mult(r.shapeOrientations[v],u),r.quaternion.vmult(r.shapeOffsets[v],s),s.vadd(r.position,s);var A=r.shapes[v];if(!(p.distanceTo(s)>j.boundingSphereRadius+A.boundingSphereRadius)){var C=null;j.material&&A.material&&(C=n.getContactMaterial(j.material,A.material)||null),this.currentContactMaterial=C||w||n.defaultContactMaterial;var O=this[j.type|A.type];O&&(j.type<A.type?O.call(this,j,A,p,s,l,u,a,r,j,A):O.call(this,A,j,s,p,u,l,r,a,j,A))}}}}};n.prototype[i.types.BOX|i.types.BOX]=n.prototype.boxBox=function(e,f,n,o,d,i,t,l){e.convexPolyhedronRepresentation.material=e.material,f.convexPolyhedronRepresentation.material=f.material,e.convexPolyhedronRepresentation.collisionResponse=e.collisionResponse,f.convexPolyhedronRepresentation.collisionResponse=f.collisionResponse,this.convexConvex(e.convexPolyhedronRepresentation,f.convexPolyhedronRepresentation,n,o,d,i,t,l,e,f)},n.prototype[i.types.BOX|i.types.CONVEXPOLYHEDRON]=n.prototype.boxConvex=function(e,f,n,o,d,i,t,l){e.convexPolyhedronRepresentation.material=e.material,e.convexPolyhedronRepresentation.collisionResponse=e.collisionResponse,this.convexConvex(e.convexPolyhedronRepresentation,f,n,o,d,i,t,l,e,f)},n.prototype[i.types.BOX|i.types.PARTICLE]=n.prototype.boxParticle=function(e,f,n,o,d,i,t,l){e.convexPolyhedronRepresentation.material=e.material,e.convexPolyhedronRepresentation.collisionResponse=e.collisionResponse,this.convexParticle(e.convexPolyhedronRepresentation,f,n,o,d,i,t,l,e,f)},n.prototype[i.types.SPHERE]=n.prototype.sphereSphere=function(e,f,n,o,d,i,t,l){var u=this.createContactEquation(t,l,e,f);o.vsub(n,u.ni),u.ni.normalize(),u.ri.copy(u.ni),u.rj.copy(u.ni),u.ri.mult(e.radius,u.ri),u.rj.mult(-f.radius,u.rj),u.ri.vadd(n,u.ri),u.ri.vsub(t.position,u.ri),u.rj.vadd(o,u.rj),u.rj.vsub(l.position,u.rj),this.result.push(u),this.createFrictionEquationsFromContact(u,this.frictionResult)};var x=new l,j=new l,v=new l;n.prototype[i.types.PLANE|i.types.TRIMESH]=n.prototype.planeTrimesh=function(e,f,n,o,d,i,t,p){var s=new l,y=x;y.set(0,0,1),d.vmult(y,y);for(var c=0;c<f.vertices.length/3;c++){f.getVertex(c,s);var a=new l;a.copy(s),u.pointToWorldFrame(o,i,a,s);var r=j;s.vsub(n,r);var w=y.dot(r);if(0>=w){var b=this.createContactEquation(t,p,e,f);b.ni.copy(y);var m=v;y.scale(r.dot(y),m),s.vsub(m,m),b.ri.copy(m),b.ri.vsub(t.position,b.ri),b.rj.copy(s),b.rj.vsub(p.position,b.rj),this.result.push(b),this.createFrictionEquationsFromContact(b,this.frictionResult)}}};var A=new l,C=new l,O=(new l,new l),h=new l,k=new l,q=new l,z=new l,B=new l,D=new l,E=new l,F=new l,G=new l,H=new l,I=new d,J=[];n.prototype[i.types.SPHERE|i.types.TRIMESH]=n.prototype.sphereTrimesh=function(e,f,n,o,d,i,l,p){var s=k,y=q,c=z,a=B,r=D,w=E,b=I,m=h,N=C,g=J;u.pointToLocalFrame(o,i,n,r);var x=e.radius;b.lowerBound.set(r.x-x,r.y-x,r.z-x),b.upperBound.set(r.x+x,r.y+x,r.z+x),f.getTrianglesInAABB(b,g);for(var j=O,v=e.radius*e.radius,K=0;K<g.length;K++)for(var L=0;3>L;L++)if(f.getVertex(f.indices[3*g[K]+L],j),j.vsub(r,N),N.norm2()<=v){m.copy(j),u.pointToWorldFrame(o,i,m,j),j.vsub(n,N);var M=this.createContactEquation(l,p,e,f);M.ni.copy(N),M.ni.normalize(),M.ri.copy(M.ni),M.ri.scale(e.radius,M.ri),M.ri.vadd(n,M.ri),M.ri.vsub(l.position,M.ri),M.rj.copy(j),M.rj.vsub(p.position,M.rj),this.result.push(M),this.createFrictionEquationsFromContact(M,this.frictionResult)}for(var K=0;K<g.length;K++)for(var L=0;3>L;L++){f.getVertex(f.indices[3*g[K]+L],s),f.getVertex(f.indices[3*g[K]+(L+1)%3],y),y.vsub(s,c),r.vsub(y,w);var P=w.dot(c);r.vsub(s,w);var Q=w.dot(c);if(Q>0&&0>P){r.vsub(s,w),a.copy(c),a.normalize(),Q=w.dot(a),a.scale(Q,w),w.vadd(s,w);var R=w.distanceTo(r);if(R<e.radius){var M=this.createContactEquation(l,p,e,f);w.vsub(r,M.ni),M.ni.normalize(),M.ni.scale(e.radius,M.ri),u.pointToWorldFrame(o,i,w,w),w.vsub(p.position,M.rj),u.vectorToWorldFrame(i,M.ni,M.ni),u.vectorToWorldFrame(i,M.ri,M.ri),this.result.push(M),this.createFrictionEquationsFromContact(M,this.frictionResult)}}}for(var S=F,T=G,U=H,V=A,K=0,W=g.length;K!==W;K++){f.getTriangleVertices(g[K],S,T,U),f.getNormal(g[K],V),r.vsub(S,w);var R=w.dot(V);if(V.scale(R,w),r.vsub(w,w),R=w.distanceTo(r),t.pointInTriangle(w,S,T,U)&&R<e.radius){var M=this.createContactEquation(l,p,e,f);w.vsub(r,M.ni),M.ni.normalize(),M.ni.scale(e.radius,M.ri),u.pointToWorldFrame(o,i,w,w),w.vsub(p.position,M.rj),u.vectorToWorldFrame(i,M.ni,M.ni),u.vectorToWorldFrame(i,M.ri,M.ri),this.result.push(M),this.createFrictionEquationsFromContact(M,this.frictionResult)}}g.length=0};var K=new l,L=new l;n.prototype[i.types.SPHERE|i.types.PLANE]=n.prototype.spherePlane=function(e,f,n,o,d,i,t,l){var u=this.createContactEquation(t,l,e,f);if(u.ni.set(0,0,1),i.vmult(u.ni,u.ni),u.ni.negate(u.ni),u.ni.normalize(),u.ni.mult(e.radius,u.ri),n.vsub(o,K),u.ni.mult(u.ni.dot(K),L),K.vsub(L,u.rj),-K.dot(u.ni)<=e.radius){var p=u.ri,s=u.rj;p.vadd(n,p),p.vsub(t.position,p),s.vadd(o,s),s.vsub(l.position,s),this.result.push(u),this.createFrictionEquationsFromContact(u,this.frictionResult)}};var M=new l,P=new l,Q=new l,R=new l,S=new l,T=new l,U=new l,V=[new l,new l,new l,new l,new l,new l],W=new l,X=new l,Y=new l,Z=new l;n.prototype[i.types.SPHERE|i.types.BOX]=n.prototype.sphereBox=function(e,f,n,o,d,i,t,l){var u=this.v3pool,p=V;n.vsub(o,R),f.getSideNormals(p,i);for(var s=e.radius,y=!1,c=X,a=Y,r=Z,w=null,b=0,m=0,N=0,g=null,x=0,j=p.length;x!==j&&y===!1;x++){var v=S;v.copy(p[x]);var A=v.norm();v.normalize();var C=R.dot(v);if(A+s>C&&C>0){var O=T,h=U;O.copy(p[(x+1)%3]),h.copy(p[(x+2)%3]);var k=O.norm(),q=h.norm();O.normalize(),h.normalize();var z=R.dot(O),B=R.dot(h);if(k>z&&z>-k&&q>B&&B>-q){var D=Math.abs(C-A-s);(null===g||g>D)&&(g=D,m=z,N=B,w=A,c.copy(v),a.copy(O),r.copy(h),b++)}}}if(b){y=!0;var E=this.createContactEquation(t,l,e,f);c.mult(-s,E.ri),E.ni.copy(c),E.ni.negate(E.ni),c.mult(w,c),a.mult(m,a),c.vadd(a,c),r.mult(N,r),c.vadd(r,E.rj),E.ri.vadd(n,E.ri),E.ri.vsub(t.position,E.ri),E.rj.vadd(o,E.rj),E.rj.vsub(l.position,E.rj),this.result.push(E),this.createFrictionEquationsFromContact(E,this.frictionResult)}for(var F=u.get(),G=W,H=0;2!==H&&!y;H++)for(var I=0;2!==I&&!y;I++)for(var J=0;2!==J&&!y;J++)if(F.set(0,0,0),H?F.vadd(p[0],F):F.vsub(p[0],F),I?F.vadd(p[1],F):F.vsub(p[1],F),J?F.vadd(p[2],F):F.vsub(p[2],F),o.vadd(F,G),G.vsub(n,G),G.norm2()<s*s){y=!0;var E=this.createContactEquation(t,l,e,f);E.ri.copy(G),E.ri.normalize(),E.ni.copy(E.ri),E.ri.mult(s,E.ri),E.rj.copy(F),E.ri.vadd(n,E.ri),E.ri.vsub(t.position,E.ri),E.rj.vadd(o,E.rj),E.rj.vsub(l.position,E.rj),this.result.push(E),this.createFrictionEquationsFromContact(E,this.frictionResult)}u.release(F),F=null;for(var K=u.get(),L=u.get(),E=u.get(),M=u.get(),D=u.get(),P=p.length,H=0;H!==P&&!y;H++)for(var I=0;I!==P&&!y;I++)if(H%3!==I%3){p[I].cross(p[H],K),K.normalize(),p[H].vadd(p[I],L),E.copy(n),E.vsub(L,E),E.vsub(o,E);var Q=E.dot(K);K.mult(Q,M);for(var J=0;J===H%3||J===I%3;)J++;D.copy(n),D.vsub(M,D),D.vsub(L,D),D.vsub(o,D);var $=Math.abs(Q),_=D.norm();if($<p[J].norm()&&s>_){y=!0;var ef=this.createContactEquation(t,l,e,f);L.vadd(M,ef.rj),ef.rj.copy(ef.rj),D.negate(ef.ni),ef.ni.normalize(),ef.ri.copy(ef.rj),ef.ri.vadd(o,ef.ri),ef.ri.vsub(n,ef.ri),ef.ri.normalize(),ef.ri.mult(s,ef.ri),ef.ri.vadd(n,ef.ri),ef.ri.vsub(t.position,ef.ri),ef.rj.vadd(o,ef.rj),ef.rj.vsub(l.position,ef.rj),this.result.push(ef),this.createFrictionEquationsFromContact(ef,this.frictionResult)}}u.release(K,L,E,M,D)};var $=new l,_=new l,ef=new l,ff=new l,nf=new l,of=new l,df=new l,tf=new l,lf=new l,uf=new l;n.prototype[i.types.SPHERE|i.types.CONVEXPOLYHEDRON]=n.prototype.sphereConvex=function(e,f,n,d,i,t,l,u){var p=this.v3pool;n.vsub(d,$);for(var s=f.faceNormals,y=f.faces,c=f.vertices,a=e.radius,r=0;r!==c.length;r++){var w=c[r],b=nf;t.vmult(w,b),d.vadd(b,b);var m=ff;if(b.vsub(n,m),m.norm2()<a*a){g=!0;var N=this.createContactEquation(l,u,e,f);return N.ri.copy(m),N.ri.normalize(),N.ni.copy(N.ri),N.ri.mult(a,N.ri),b.vsub(d,N.rj),N.ri.vadd(n,N.ri),N.ri.vsub(l.position,N.ri),N.rj.vadd(d,N.rj),N.rj.vsub(u.position,N.rj),this.result.push(N),void this.createFrictionEquationsFromContact(N,this.frictionResult)}}for(var g=!1,r=0,x=y.length;r!==x&&g===!1;r++){var j=s[r],v=y[r],A=of;t.vmult(j,A);var C=df;t.vmult(c[v[0]],C),C.vadd(d,C);var O=tf;A.mult(-a,O),n.vadd(O,O);var h=lf;O.vsub(C,h);var k=h.dot(A),q=uf;if(n.vsub(C,q),0>k&&q.dot(A)>0){for(var z=[],B=0,D=v.length;B!==D;B++){var E=p.get();t.vmult(c[v[B]],E),d.vadd(E,E),z.push(E)}if(o(z,A,n)){g=!0;var N=this.createContactEquation(l,u,e,f);A.mult(-a,N.ri),A.negate(N.ni);var F=p.get();A.mult(-k,F);var G=p.get();A.mult(-a,G),n.vsub(d,N.rj),N.rj.vadd(G,N.rj),N.rj.vadd(F,N.rj),N.rj.vadd(d,N.rj),N.rj.vsub(u.position,N.rj),N.ri.vadd(n,N.ri),N.ri.vsub(l.position,N.ri),p.release(F),p.release(G),this.result.push(N),this.createFrictionEquationsFromContact(N,this.frictionResult);for(var B=0,H=z.length;B!==H;B++)p.release(z[B]);return}for(var B=0;B!==v.length;B++){var I=p.get(),J=p.get();t.vmult(c[v[(B+1)%v.length]],I),t.vmult(c[v[(B+2)%v.length]],J),d.vadd(I,I),d.vadd(J,J);var K=_;J.vsub(I,K);var L=ef;K.unit(L);var M=p.get(),P=p.get();n.vsub(I,P);var Q=P.dot(L);L.mult(Q,M),M.vadd(I,M);var R=p.get();if(M.vsub(n,R),Q>0&&Q*Q<K.norm2()&&R.norm2()<a*a){var N=this.createContactEquation(l,u,e,f);M.vsub(d,N.rj),M.vsub(n,N.ni),N.ni.normalize(),N.ni.mult(a,N.ri),N.rj.vadd(d,N.rj),N.rj.vsub(u.position,N.rj),N.ri.vadd(n,N.ri),N.ri.vsub(l.position,N.ri),this.result.push(N),this.createFrictionEquationsFromContact(N,this.frictionResult);for(var B=0,H=z.length;B!==H;B++)p.release(z[B]);return p.release(I),p.release(J),p.release(M),p.release(R),void p.release(P)}p.release(I),p.release(J),p.release(M),p.release(R),p.release(P)}for(var B=0,H=z.length;B!==H;B++)p.release(z[B])}}};new l,new l;n.prototype[i.types.PLANE|i.types.BOX]=n.prototype.planeBox=function(e,f,n,o,d,i,t,l){f.convexPolyhedronRepresentation.material=f.material,f.convexPolyhedronRepresentation.collisionResponse=f.collisionResponse,this.planeConvex(e,f.convexPolyhedronRepresentation,n,o,d,i,t,l)};var pf=new l,sf=new l,yf=new l,cf=new l;n.prototype[i.types.PLANE|i.types.CONVEXPOLYHEDRON]=n.prototype.planeConvex=function(e,f,n,o,d,i,t,l){var u=pf,p=sf;p.set(0,0,1),d.vmult(p,p);for(var s=0,y=yf,c=0;c!==f.vertices.length;c++){u.copy(f.vertices[c]),i.vmult(u,u),o.vadd(u,u),u.vsub(n,y);var a=p.dot(y);if(0>=a){var r=this.createContactEquation(t,l,e,f),w=cf;p.mult(p.dot(y),w),u.vsub(w,w),w.vsub(n,r.ri),r.ni.copy(p),u.vsub(o,r.rj),r.ri.vadd(n,r.ri),r.ri.vsub(t.position,r.ri),r.rj.vadd(o,r.rj),r.rj.vsub(l.position,r.rj),this.result.push(r),s++,this.enableFrictionReduction||this.createFrictionEquationsFromContact(r,this.frictionResult)}}this.enableFrictionReduction&&s&&this.createFrictionFromAverage(s)};var af=new l,rf=new l;n.prototype[i.types.CONVEXPOLYHEDRON]=n.prototype.convexConvex=function(e,f,n,o,d,i,t,l,u,p,s,y){var c=af;if(!(n.distanceTo(o)>e.boundingSphereRadius+f.boundingSphereRadius)&&e.findSeparatingAxis(f,n,d,o,i,c,s,y)){var a=[],r=rf;e.clipAgainstHull(n,d,f,o,i,c,-100,100,a);for(var w=0,b=0;b!==a.length;b++){var m=this.createContactEquation(t,l,e,f,u,p),N=m.ri,g=m.rj;c.negate(m.ni),a[b].normal.negate(r),r.mult(a[b].depth,r),a[b].point.vadd(r,N),g.copy(a[b].point),N.vsub(n,N),g.vsub(o,g),N.vadd(n,N),N.vsub(t.position,N),g.vadd(o,g),g.vsub(l.position,g),this.result.push(m),w++,this.enableFrictionReduction||this.createFrictionEquationsFromContact(m,this.frictionResult)}this.enableFrictionReduction&&w&&this.createFrictionFromAverage(w)}};var wf=new l,bf=new l,mf=new l;n.prototype[i.types.PLANE|i.types.PARTICLE]=n.prototype.planeParticle=function(e,f,n,o,d,i,t,l){var u=wf;u.set(0,0,1),t.quaternion.vmult(u,u);var p=bf;o.vsub(t.position,p);var s=u.dot(p);if(0>=s){var y=this.createContactEquation(l,t,f,e);y.ni.copy(u),y.ni.negate(y.ni),y.ri.set(0,0,0);var c=mf;u.mult(u.dot(o),c),o.vsub(c,c),y.rj.copy(c),this.result.push(y),this.createFrictionEquationsFromContact(y,this.frictionResult)}};var Nf=new l;n.prototype[i.types.PARTICLE|i.types.SPHERE]=n.prototype.sphereParticle=function(e,f,n,o,d,i,t,l){var u=Nf;u.set(0,0,1),o.vsub(n,u);var p=u.norm2();if(p<=e.radius*e.radius){var s=this.createContactEquation(l,t,f,e);u.normalize(),s.rj.copy(u),s.rj.mult(e.radius,s.rj),s.ni.copy(u),s.ni.negate(s.ni),s.ri.set(0,0,0),this.result.push(s),this.createFrictionEquationsFromContact(s,this.frictionResult)}};var gf=new p,xf=new l,jf=(new l,new l),vf=new l,Af=new l;n.prototype[i.types.PARTICLE|i.types.CONVEXPOLYHEDRON]=n.prototype.convexParticle=function(e,f,n,o,d,i,t,l){var u=-1,p=jf,s=Af,y=null,c=0,a=xf;if(a.copy(o),a.vsub(n,a),d.conjugate(gf),gf.vmult(a,a),e.pointIsInside(a)){e.worldVerticesNeedsUpdate&&e.computeWorldVertices(n,d),e.worldFaceNormalsNeedsUpdate&&e.computeWorldFaceNormals(d);for(var r=0,w=e.faces.length;r!==w;r++){var b=[e.worldVertices[e.faces[r][0]]],m=e.worldFaceNormals[r];o.vsub(b[0],vf);var N=-m.dot(vf);(null===y||Math.abs(N)<Math.abs(y))&&(y=N,u=r,p.copy(m),c++)}if(-1!==u){var g=this.createContactEquation(l,t,f,e);p.mult(y,s),s.vadd(o,s),s.vsub(n,s),g.rj.copy(s),p.negate(g.ni),g.ri.set(0,0,0);var x=g.ri,j=g.rj;x.vadd(o,x),x.vsub(l.position,x),j.vadd(n,j),j.vsub(t.position,j),this.result.push(g),this.createFrictionEquationsFromContact(g,this.frictionResult)}else console.warn(\"Point found inside convex, but did not find penetrating face!\")}},n.prototype[i.types.BOX|i.types.HEIGHTFIELD]=n.prototype.boxHeightfield=function(e,f,n,o,d,i,t,l){e.convexPolyhedronRepresentation.material=e.material,e.convexPolyhedronRepresentation.collisionResponse=e.collisionResponse,this.convexHeightfield(e.convexPolyhedronRepresentation,f,n,o,d,i,t,l)};var Cf=new l,Of=new l,hf=[0];n.prototype[i.types.CONVEXPOLYHEDRON|i.types.HEIGHTFIELD]=n.prototype.convexHeightfield=function(e,f,n,o,d,i,t,l){var p=f.data,s=f.elementSize,y=e.boundingSphereRadius,c=Of,a=hf,r=Cf;u.pointToLocalFrame(o,i,n,r);var w=Math.floor((r.x-y)/s)-1,b=Math.ceil((r.x+y)/s)+1,m=Math.floor((r.y-y)/s)-1,N=Math.ceil((r.y+y)/s)+1;if(!(0>b||0>N||w>p.length||m>p[0].length)){0>w&&(w=0),0>b&&(b=0),0>m&&(m=0),0>N&&(N=0),w>=p.length&&(w=p.length-1),b>=p.length&&(b=p.length-1),N>=p[0].length&&(N=p[0].length-1),m>=p[0].length&&(m=p[0].length-1);var g=[];f.getRectMinMax(w,m,b,N,g);var x=g[0],j=g[1];if(!(r.z-y>j||r.z+y<x))for(var v=w;b>v;v++)for(var A=m;N>A;A++)f.getConvexTrianglePillar(v,A,!1),u.pointToWorldFrame(o,i,f.pillarOffset,c),n.distanceTo(c)<f.pillarConvex.boundingSphereRadius+e.boundingSphereRadius&&this.convexConvex(e,f.pillarConvex,n,c,d,i,t,l,null,null,a,null),f.getConvexTrianglePillar(v,A,!0),u.pointToWorldFrame(o,i,f.pillarOffset,c),n.distanceTo(c)<f.pillarConvex.boundingSphereRadius+e.boundingSphereRadius&&this.convexConvex(e,f.pillarConvex,n,c,d,i,t,l,null,null,a,null)}};var kf=new l,qf=new l;n.prototype[i.types.SPHERE|i.types.HEIGHTFIELD]=n.prototype.sphereHeightfield=function(e,f,n,o,d,i,t,l){var p=f.data,s=e.radius,y=f.elementSize,c=qf,a=kf;u.pointToLocalFrame(o,i,n,a);var r=Math.floor((a.x-s)/y)-1,w=Math.ceil((a.x+s)/y)+1,b=Math.floor((a.y-s)/y)-1,m=Math.ceil((a.y+s)/y)+1;if(!(0>w||0>m||r>p.length||m>p[0].length)){0>r&&(r=0),0>w&&(w=0),0>b&&(b=0),0>m&&(m=0),r>=p.length&&(r=p.length-1),w>=p.length&&(w=p.length-1),m>=p[0].length&&(m=p[0].length-1),b>=p[0].length&&(b=p[0].length-1);var N=[];f.getRectMinMax(r,b,w,m,N);var g=N[0],x=N[1];if(!(a.z-s>x||a.z+s<g))for(var j=this.result,v=r;w>v;v++)for(var A=b;m>A;A++){var C=j.length;f.getConvexTrianglePillar(v,A,!1),u.pointToWorldFrame(o,i,f.pillarOffset,c),n.distanceTo(c)<f.pillarConvex.boundingSphereRadius+e.boundingSphereRadius&&this.sphereConvex(e,f.pillarConvex,n,c,d,i,t,l),f.getConvexTrianglePillar(v,A,!0),u.pointToWorldFrame(o,i,f.pillarOffset,c),n.distanceTo(c)<f.pillarConvex.boundingSphereRadius+e.boundingSphereRadius&&this.sphereConvex(e,f.pillarConvex,n,c,d,i,t,l);var O=j.length-C;if(O>2)return}}}},{\"../collision/AABB\":3,\"../collision/Ray\":9,\"../equations/ContactEquation\":19,\"../equations/FrictionEquation\":21,\"../math/Quaternion\":28,\"../math/Transform\":29,\"../math/Vec3\":30,\"../shapes/ConvexPolyhedron\":38,\"../shapes/Shape\":43,\"../solver/Solver\":47,\"../utils/Vec3Pool\":54}],56:[function(e,f){function n(){u.apply(this),this.dt=-1,this.allowSleep=!1,this.contacts=[],this.frictionEquations=[],this.quatNormalizeSkip=0,this.quatNormalizeFast=!1,this.time=0,this.stepnumber=0,this.default_dt=1/60,this.nextId=0,this.gravity=new d,this.broadphase=new m,this.bodies=[],this.solver=new t,this.constraints=[],this.narrowphase=new l(this),this.collisionMatrix=new p,this.collisionMatrixPrevious=new p,this.materials=[],this.contactmaterials=[],this.contactMaterialTable=new a,this.defaultMaterial=new s(\"default\"),this.defaultContactMaterial=new y(this.defaultMaterial,this.defaultMaterial,{friction:.3,restitution:0}),this.doProfiling=!1,this.profile={solve:0,makeContactConstraints:0,broadphase:0,integrate:0,narrowphase:0},this.subsystems=[],this.addBodyEvent={type:\"addBody\",body:null},this.removeBodyEvent={type:\"removeBody\",body:null}}f.exports=n;var o=e(\"../shapes/Shape\"),d=e(\"../math/Vec3\"),i=e(\"../math/Quaternion\"),t=e(\"../solver/GSSolver\"),l=(e(\"../utils/Vec3Pool\"),e(\"../equations/ContactEquation\"),e(\"../equations/FrictionEquation\"),e(\"./Narrowphase\")),u=e(\"../utils/EventTarget\"),p=e(\"../collision/ArrayCollisionMatrix\"),s=e(\"../material/Material\"),y=e(\"../material/ContactMaterial\"),c=e(\"../objects/Body\"),a=e(\"../utils/TupleDictionary\"),r=e(\"../collision/RaycastResult\"),w=e(\"../collision/AABB\"),b=e(\"../collision/Ray\"),m=e(\"../collision/NaiveBroadphase\");n.prototype=new u;var N=(new w,new b);if(n.prototype.getContactMaterial=function(e,f){return this.contactMaterialTable.get(e.id,f.id)},n.prototype.numObjects=function(){return this.bodies.length},n.prototype.collisionMatrixTick=function(){var e=this.collisionMatrixPrevious;this.collisionMatrixPrevious=this.collisionMatrix,this.collisionMatrix=e,this.collisionMatrix.reset()},n.prototype.add=n.prototype.addBody=function(e){-1===this.bodies.indexOf(e)&&(e.index=this.bodies.length,this.bodies.push(e),e.world=this,e.initPosition.copy(e.position),e.initVelocity.copy(e.velocity),e.timeLastSleepy=this.time,e instanceof c&&(e.initAngularVelocity.copy(e.angularVelocity),e.initQuaternion.copy(e.quaternion)),this.collisionMatrix.setNumObjects(this.bodies.length),this.addBodyEvent.body=e,this.dispatchEvent(this.addBodyEvent))},n.prototype.addConstraint=function(e){this.constraints.push(e)},n.prototype.removeConstraint=function(e){var f=this.constraints.indexOf(e);-1!==f&&this.constraints.splice(f,1)},n.prototype.rayTest=function(e,f,n){n instanceof r?this.raycastClosest(e,f,{skipBackfaces:!0},n):this.raycastAll(e,f,{skipBackfaces:!0},n)},n.prototype.raycastAll=function(e,f,n,o){return n.mode=b.ALL,n.from=e,n.to=f,n.callback=o,N.intersectWorld(this,n)},n.prototype.raycastAny=function(e,f,n,o){return n.mode=b.ANY,n.from=e,n.to=f,n.result=o,N.intersectWorld(this,n)},n.prototype.raycastClosest=function(e,f,n,o){return n.mode=b.CLOSEST,n.from=e,n.to=f,n.result=o,N.intersectWorld(this,n)},n.prototype.remove=function(e){e.world=null;var f=this.bodies.length-1,n=this.bodies,o=n.indexOf(e);if(-1!==o){n.splice(o,1);for(var d=0;d!==n.length;d++)n[d].index=d;this.collisionMatrix.setNumObjects(f),this.removeBodyEvent.body=e,this.dispatchEvent(this.removeBodyEvent)}},n.prototype.removeBody=n.prototype.remove,n.prototype.addMaterial=function(e){this.materials.push(e)},n.prototype.addContactMaterial=function(e){this.contactmaterials.push(e),this.contactMaterialTable.set(e.materials[0].id,e.materials[1].id,e)},\"undefined\"==typeof performance&&(performance={}),!performance.now){var g=Date.now();performance.timing&&performance.timing.navigationStart&&(g=performance.timing.navigationStart),performance.now=function(){return Date.now()-g}}var x=new d;n.prototype.step=function(e,f,n){if(n=n||10,f=f||0,0===f)this.internalStep(e),this.time+=e;else{var o=Math.floor((this.time+f)/e)-Math.floor(this.time/e);o=Math.min(o,n);for(var d=performance.now(),i=0;i!==o&&(this.internalStep(e),!(performance.now()-d>1e3*e));i++);this.time+=f;for(var t=this.time%e,l=t/e,u=x,p=this.bodies,s=0;s!==p.length;s++){var y=p[s];y.type!==c.STATIC&&y.sleepState!==c.SLEEPING?(y.position.vsub(y.previousPosition,u),u.scale(l,u),y.position.vadd(u,y.interpolatedPosition)):(y.interpolatedPosition.copy(y.position),y.interpolatedQuaternion.copy(y.quaternion))}}};var j={type:\"postStep\"},v={type:\"preStep\"},A={type:\"collide\",body:null,contact:null},C=[],O=[],h=[],k=[],q=(new d,new d,new d,new d,new d,new d,new d,new d,new d,new i,new i),z=new i,B=new d;n.prototype.internalStep=function(e){this.dt=e;var f,n=this.contacts,d=h,i=k,t=this.numObjects(),l=this.bodies,u=this.solver,p=this.gravity,s=this.doProfiling,y=this.profile,a=c.DYNAMIC,r=this.constraints,w=O,b=(p.norm(),p.x),m=p.y,N=p.z,g=0;for(s&&(f=performance.now()),g=0;g!==t;g++){var x=l[g];if(x.type&a){var D=x.force,E=x.mass;D.x+=E*b,D.y+=E*m,D.z+=E*N}}for(var g=0,F=this.subsystems.length;g!==F;g++)this.subsystems[g].update();s&&(f=performance.now()),d.length=0,i.length=0,this.broadphase.collisionPairs(this,d,i),s&&(y.broadphase=performance.now()-f);var G=r.length;for(g=0;g!==G;g++){var H=r[g];if(!H.collideConnected)for(var I=d.length-1;I>=0;I-=1)(H.bodyA===d[I]&&H.bodyB===i[I]||H.bodyB===d[I]&&H.bodyA===i[I])&&(d.splice(I,1),i.splice(I,1))}this.collisionMatrixTick(),s&&(f=performance.now());var J=C,K=n.length;for(g=0;g!==K;g++)J.push(n[g]);n.length=0;var L=this.frictionEquations.length;for(g=0;g!==L;g++)w.push(this.frictionEquations[g]);this.frictionEquations.length=0,this.narrowphase.getContacts(d,i,this,n,J,this.frictionEquations,w),s&&(y.narrowphase=performance.now()-f),s&&(f=performance.now());for(var g=0;g<this.frictionEquations.length;g++)u.addEquation(this.frictionEquations[g]);for(var M=n.length,P=0;P!==M;P++){{var Q,H=n[P],x=H.bi,R=H.bj;H.si,H.sj}Q=x.material&&R.material?this.getContactMaterial(x.material,R.material)||this.defaultContactMaterial:this.defaultContactMaterial;var S=Q.friction;if(x.material&&R.material&&(x.material.friction>=0&&R.material.friction>=0&&(S=x.material.friction*R.material.friction),x.material.restitution>=0&&R.material.restitution>=0&&(H.restitution=x.material.restitution*R.material.restitution)),u.addEquation(H),x.allowSleep&&x.type===c.DYNAMIC&&x.sleepState===c.SLEEPING&&R.sleepState===c.AWAKE&&R.type!==c.STATIC){var T=R.velocity.norm2()+R.angularVelocity.norm2(),U=Math.pow(R.sleepSpeedLimit,2);\nT>=2*U&&(x._wakeUpAfterNarrowphase=!0)}if(R.allowSleep&&R.type===c.DYNAMIC&&R.sleepState===c.SLEEPING&&x.sleepState===c.AWAKE&&x.type!==c.STATIC){var V=x.velocity.norm2()+x.angularVelocity.norm2(),W=Math.pow(x.sleepSpeedLimit,2);V>=2*W&&(R._wakeUpAfterNarrowphase=!0)}this.collisionMatrix.set(x,R,!0),this.collisionMatrixPrevious.get(x,R)||(A.body=R,A.contact=H,x.dispatchEvent(A),A.body=x,R.dispatchEvent(A))}for(s&&(y.makeContactConstraints=performance.now()-f,f=performance.now()),g=0;g!==t;g++){var x=l[g];x._wakeUpAfterNarrowphase&&(x.wakeUp(),x._wakeUpAfterNarrowphase=!1)}var G=r.length;for(g=0;g!==G;g++){var H=r[g];H.update();for(var I=0,X=H.equations.length;I!==X;I++){var Y=H.equations[I];u.addEquation(Y)}}u.solve(e,this),s&&(y.solve=performance.now()-f),u.removeAllEquations();var Z=Math.pow;for(g=0;g!==t;g++){var x=l[g];if(x.type&a){var $=Z(1-x.linearDamping,e),_=x.velocity;_.mult($,_);var ef=x.angularVelocity;if(ef){var ff=Z(1-x.angularDamping,e);ef.mult(ff,ef)}}}for(this.dispatchEvent(v),g=0;g!==t;g++){var x=l[g];x.preStep&&x.preStep.call(x)}s&&(f=performance.now());{var nf=q,of=z,df=this.stepnumber,tf=c.DYNAMIC|c.KINEMATIC,lf=df%(this.quatNormalizeSkip+1)===0,uf=this.quatNormalizeFast,pf=.5*e;o.types.PLANE,o.types.CONVEXPOLYHEDRON}for(g=0;g!==t;g++){var sf=l[g],yf=sf.force,cf=sf.torque;if(sf.type&tf&&sf.sleepState!==c.SLEEPING){var af=sf.velocity,rf=sf.angularVelocity,wf=sf.position,bf=sf.quaternion,mf=sf.invMass,Nf=sf.invInertiaWorld;af.x+=yf.x*mf*e,af.y+=yf.y*mf*e,af.z+=yf.z*mf*e,sf.angularVelocity&&(Nf.vmult(cf,B),B.mult(e,B),B.vadd(rf,rf)),wf.x+=af.x*e,wf.y+=af.y*e,wf.z+=af.z*e,sf.angularVelocity&&(nf.set(rf.x,rf.y,rf.z,0),nf.mult(bf,of),bf.x+=pf*of.x,bf.y+=pf*of.y,bf.z+=pf*of.z,bf.w+=pf*of.w,lf&&(uf?bf.normalizeFast():bf.normalize())),sf.aabb&&(sf.aabbNeedsUpdate=!0),sf.updateInertiaWorld&&sf.updateInertiaWorld()}}for(this.clearForces(),this.broadphase.dirty=!0,s&&(y.integrate=performance.now()-f),this.time+=e,this.stepnumber+=1,this.dispatchEvent(j),g=0;g!==t;g++){var x=l[g],gf=x.postStep;gf&&gf.call(x)}if(this.allowSleep)for(g=0;g!==t;g++)l[g].sleepTick(this.time)},n.prototype.clearForces=function(){for(var e=this.bodies,f=e.length,n=0;n!==f;n++){{var o=e[n];o.force,o.torque}o.force.set(0,0,0),o.torque.set(0,0,0)}}},{\"../collision/AABB\":3,\"../collision/ArrayCollisionMatrix\":4,\"../collision/NaiveBroadphase\":7,\"../collision/Ray\":9,\"../collision/RaycastResult\":10,\"../equations/ContactEquation\":19,\"../equations/FrictionEquation\":21,\"../material/ContactMaterial\":24,\"../material/Material\":25,\"../math/Quaternion\":28,\"../math/Vec3\":30,\"../objects/Body\":31,\"../shapes/Shape\":43,\"../solver/GSSolver\":46,\"../utils/EventTarget\":49,\"../utils/TupleDictionary\":52,\"../utils/Vec3Pool\":54,\"./Narrowphase\":55}]},{},[2])(2)});"
			}]
	}
}